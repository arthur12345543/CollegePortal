/*!
 * jQuery JavaScript Library v1.7.1
 * http://jquery.com/
 *
 * Copyright 2011, John Resig
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 * Copyright 2011, The Dojo Foundation
 * Released under the MIT, BSD, and GPL Licenses.
 *
 * Date: Mon Nov 21 21:11:03 2011 -0500
 */
function remove_fields(e){$(e).prev("input[type=hidden]").val("1"),$(e).closest(".fields").hide()}function add_fields(e,t,n){var r=(new Date).getTime(),i=new RegExp("new_"+t,"g");$(e).parent().before(n.replace(i,r))}function initTinyMCE(e){console.warn("Deprecation Notice: `initTinyMCE()` is deprecated, please use `spud.admin.editor.init()` instead."),spud.admin.editor.init()}function initDatePicker(e){console.warn("Deprecation Notice: `initDatePicker()` is deprecated, please use `spud.admin.date_picker.init()` instead."),spud.admin.date_picker.init()}function displayModalDialogWithOptions(e){var t=$("#modal_window");e.title&&t.find(".modal-title").text(e.title),e.html&&t.find(".modal-body").html(e.html);var n=t.find(".modal-footer-default");if(e.buttons){var r=n.clone();r.addClass("modal-footer-additional"),r.find(".form-submit").remove();for(var i in e.buttons)r.append('<button class="btn '+i+'">'+e.buttons[i]+"</button>");n.hide(),t.append(r)}else n.show();t.modal("show")}function hideModalDialog(){var e=$("#modal_window");e.modal("hide")}(function(e,t){function u(e){var t=o[e]={},n,r;e=e.split(/\s+/);for(n=0,r=e.length;n<r;n++)t[e[n]]=!0;return t}function c(e,n,r){if(r===t&&e.nodeType===1){var i="data-"+n.replace(l,"-$1").toLowerCase();r=e.getAttribute(i);if(typeof r=="string"){try{r=r==="true"?!0:r==="false"?!1:r==="null"?null:s.isNumeric(r)?parseFloat(r):f.test(r)?s.parseJSON(r):r}catch(o){}s.data(e,n,r)}else r=t}return r}function h(e){for(var t in e){if(t==="data"&&s.isEmptyObject(e[t]))continue;if(t!=="toJSON")return!1}return!0}function p(e,t,n){var r=t+"defer",i=t+"queue",o=t+"mark",u=s._data(e,r);u&&(n==="queue"||!s._data(e,i))&&(n==="mark"||!s._data(e,o))&&setTimeout(function(){!s._data(e,i)&&!s._data(e,o)&&(s.removeData(e,r,!0),u.fire())},0)}function H(){return!1}function B(){return!0}function W(e){return!e||!e.parentNode||e.parentNode.nodeType===11}function X(e,t,n){t=t||0;if(s.isFunction(t))return s.grep(e,function(e,r){var i=!!t.call(e,r,e);return i===n});if(t.nodeType)return s.grep(e,function(e,r){return e===t===n});if(typeof t=="string"){var r=s.grep(e,function(e){return e.nodeType===1});if(q.test(t))return s.filter(t,r,!n);t=s.filter(t,r)}return s.grep(e,function(e,r){return s.inArray(e,t)>=0===n})}function V(e){var t=$.split("|"),n=e.createDocumentFragment();if(n.createElement)while(t.length)n.createElement(t.pop());return n}function at(e,t){return s.nodeName(e,"table")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function ft(e,t){if(t.nodeType!==1||!s.hasData(e))return;var n,r,i,o=s._data(e),u=s._data(t,o),a=o.events;if(a){delete u.handle,u.events={};for(n in a)for(r=0,i=a[n].length;r<i;r++)s.event.add(t,n+(a[n][r].namespace?".":"")+a[n][r].namespace,a[n][r],a[n][r].data)}u.data&&(u.data=s.extend({},u.data))}function lt(e,t){var n;if(t.nodeType!==1)return;t.clearAttributes&&t.clearAttributes(),t.mergeAttributes&&t.mergeAttributes(e),n=t.nodeName.toLowerCase();if(n==="object")t.outerHTML=e.outerHTML;else if(n!=="input"||e.type!=="checkbox"&&e.type!=="radio"){if(n==="option")t.selected=e.defaultSelected;else if(n==="input"||n==="textarea")t.defaultValue=e.defaultValue}else e.checked&&(t.defaultChecked=t.checked=e.checked),t.value!==e.value&&(t.value=e.value);t.removeAttribute(s.expando)}function ct(e){return typeof e.getElementsByTagName!="undefined"?e.getElementsByTagName("*"):typeof e.querySelectorAll!="undefined"?e.querySelectorAll("*"):[]}function ht(e){if(e.type==="checkbox"||e.type==="radio")e.defaultChecked=e.checked}function pt(e){var t=(e.nodeName||"").toLowerCase();t==="input"?ht(e):t!=="script"&&typeof e.getElementsByTagName!="undefined"&&s.grep(e.getElementsByTagName("input"),ht)}function dt(e){var t=n.createElement("div");return ut.appendChild(t),t.innerHTML=e.outerHTML,t.firstChild}function vt(e,t){t.src?s.ajax({url:t.src,async:!1,dataType:"script"}):s.globalEval((t.text||t.textContent||t.innerHTML||"").replace(st,"/*$0*/")),t.parentNode&&t.parentNode.removeChild(t)}function Lt(e,t,n){var r=t==="width"?e.offsetWidth:e.offsetHeight,i=t==="width"?xt:Tt,o=0,u=i.length;if(r>0){if(n!=="border")for(;o<u;o++)n||(r-=parseFloat(s.css(e,"padding"+i[o]))||0),n==="margin"?r+=parseFloat(s.css(e,n+i[o]))||0:r-=parseFloat(s.css(e,"border"+i[o]+"Width"))||0;return r+"px"}r=Nt(e,t,t);if(r<0||r==null)r=e.style[t]||0;r=parseFloat(r)||0;if(n)for(;o<u;o++)r+=parseFloat(s.css(e,"padding"+i[o]))||0,n!=="padding"&&(r+=parseFloat(s.css(e,"border"+i[o]+"Width"))||0),n==="margin"&&(r+=parseFloat(s.css(e,n+i[o]))||0);return r+"px"}function Gt(e){return function(t,n){typeof t!="string"&&(n=t,t="*");if(s.isFunction(n)){var r=t.toLowerCase().split(Rt),i=0,o=r.length,u,a,f;for(;i<o;i++)u=r[i],f=/^\+/.test(u),f&&(u=u.substr(1)||"*"),a=e[u]=e[u]||[],a[f?"unshift":"push"](n)}}}function Yt(e,n,r,i,s,o){s=s||n.dataTypes[0],o=o||{},o[s]=!0;var u=e[s],a=0,f=u?u.length:0,l=e===Xt,c;for(;a<f&&(l||!c);a++)c=u[a](n,r,i),typeof c=="string"&&(!l||o[c]?c=t:(n.dataTypes.unshift(c),c=Yt(e,n,r,i,c,o)));return(l||!c)&&!o["*"]&&(c=Yt(e,n,r,i,"*",o)),c}function Zt(e,n){var r,i,o=s.ajaxSettings.flatOptions||{};for(r in n)n[r]!==t&&((o[r]?e:i||(i={}))[r]=n[r]);i&&s.extend(!0,e,i)}function en(e,t,n,r){if(s.isArray(t))s.each(t,function(t,i){n||Ot.test(e)?r(e,i):en(e+"["+(typeof i=="object"||s.isArray(i)?t:"")+"]",i,n,r)});else if(!n&&t!=null&&typeof t=="object")for(var i in t)en(e+"["+i+"]",t[i],n,r);else r(e,t)}function tn(e,n,r){var i=e.contents,s=e.dataTypes,o=e.responseFields,u,a,f,l;for(a in o)a in r&&(n[o[a]]=r[a]);while(s[0]==="*")s.shift(),u===t&&(u=e.mimeType||n.getResponseHeader("content-type"));if(u)for(a in i)if(i[a]&&i[a].test(u)){s.unshift(a);break}if(s[0]in r)f=s[0];else{for(a in r){if(!s[0]||e.converters[a+" "+s[0]]){f=a;break}l||(l=a)}f=f||l}if(f)return f!==s[0]&&s.unshift(f),r[f]}function nn(e,n){e.dataFilter&&(n=e.dataFilter(n,e.dataType));var r=e.dataTypes,i={},o,u,a=r.length,f,l=r[0],c,h,p,d,v;for(o=1;o<a;o++){if(o===1)for(u in e.converters)typeof u=="string"&&(i[u.toLowerCase()]=e.converters[u]);c=l,l=r[o];if(l==="*")l=c;else if(c!=="*"&&c!==l){h=c+" "+l,p=i[h]||i["* "+l];if(!p){v=t;for(d in i){f=d.split(" ");if(f[0]===c||f[0]==="*"){v=i[f[1]+" "+l];if(v){d=i[d],d===!0?p=v:v===!0&&(p=d);break}}}}!p&&!v&&s.error("No conversion from "+h.replace(" "," to ")),p!==!0&&(n=p?p(n):v(d(n)))}}return n}function fn(){try{return new e.XMLHttpRequest}catch(t){}}function ln(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function bn(){return setTimeout(wn,0),yn=s.now()}function wn(){yn=t}function En(e,t){var n={};return s.each(gn.concat.apply([],gn.slice(0,t)),function(){n[this]=e}),n}function Sn(e){if(!cn[e]){var t=n.body,r=s("<"+e+">").appendTo(t),i=r.css("display");r.remove();if(i==="none"||i===""){hn||(hn=n.createElement("iframe"),hn.frameBorder=hn.width=hn.height=0),t.appendChild(hn);if(!pn||!hn.createElement)pn=(hn.contentWindow||hn.contentDocument).document,pn.write((n.compatMode==="CSS1Compat"?"<!doctype html>":"")+"<html><body>"),pn.close();r=pn.createElement(e),pn.body.appendChild(r),i=s.css(r,"display"),t.removeChild(hn)}cn[e]=i}return cn[e]}function Nn(e){return s.isWindow(e)?e:e.nodeType===9?e.defaultView||e.parentWindow:!1}var n=e.document,r=e.navigator,i=e.location,s=function(){function H(){if(i.isReady)return;try{n.documentElement.doScroll("left")}catch(e){setTimeout(H,1);return}i.ready()}var i=function(e,t){return new i.fn.init(e,t,u)},s=e.jQuery,o=e.$,u,a=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,f=/\S/,l=/^\s+/,c=/\s+$/,h=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,p=/^[\],:{}\s]*$/,d=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,v=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,m=/(?:^|:|,)(?:\s*\[)+/g,g=/(webkit)[ \/]([\w.]+)/,y=/(opera)(?:.*version)?[ \/]([\w.]+)/,b=/(msie) ([\w.]+)/,w=/(mozilla)(?:.*? rv:([\w.]+))?/,E=/-([a-z]|[0-9])/ig,S=/^-ms-/,x=function(e,t){return(t+"").toUpperCase()},T=r.userAgent,N,C,k,L=Object.prototype.toString,A=Object.prototype.hasOwnProperty,O=Array.prototype.push,M=Array.prototype.slice,_=String.prototype.trim,D=Array.prototype.indexOf,P={};return i.fn=i.prototype={constructor:i,init:function(e,r,s){var o,u,f,l;if(!e)return this;if(e.nodeType)return this.context=this[0]=e,this.length=1,this;if(e==="body"&&!r&&n.body)return this.context=n,this[0]=n.body,this.selector=e,this.length=1,this;if(typeof e=="string"){e.charAt(0)==="<"&&e.charAt(e.length-1)===">"&&e.length>=3?o=[null,e,null]:o=a.exec(e);if(o&&(o[1]||!r)){if(o[1])return r=r instanceof i?r[0]:r,l=r?r.ownerDocument||r:n,f=h.exec(e),f?i.isPlainObject(r)?(e=[n.createElement(f[1])],i.fn.attr.call(e,r,!0)):e=[l.createElement(f[1])]:(f=i.buildFragment([o[1]],[l]),e=(f.cacheable?i.clone(f.fragment):f.fragment).childNodes),i.merge(this,e);u=n.getElementById(o[2]);if(u&&u.parentNode){if(u.id!==o[2])return s.find(e);this.length=1,this[0]=u}return this.context=n,this.selector=e,this}return!r||r.jquery?(r||s).find(e):this.constructor(r).find(e)}return i.isFunction(e)?s.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),i.makeArray(e,this))},selector:"",jquery:"1.7.1",length:0,size:function(){return this.length},toArray:function(){return M.call(this,0)},get:function(e){return e==null?this.toArray():e<0?this[this.length+e]:this[e]},pushStack:function(e,t,n){var r=this.constructor();return i.isArray(e)?O.apply(r,e):i.merge(r,e),r.prevObject=this,r.context=this.context,t==="find"?r.selector=this.selector+(this.selector?" ":"")+n:t&&(r.selector=this.selector+"."+t+"("+n+")"),r},each:function(e,t){return i.each(this,e,t)},ready:function(e){return i.bindReady(),C.add(e),this},eq:function(e){return e=+e,e===-1?this.slice(e):this.slice(e,e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(M.apply(this,arguments),"slice",M.call(arguments).join(","))},map:function(e){return this.pushStack(i.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:O,sort:[].sort,splice:[].splice},i.fn.init.prototype=i.fn,i.extend=i.fn.extend=function(){var e,n,r,s,o,u,a=arguments[0]||{},f=1,l=arguments.length,c=!1;typeof a=="boolean"&&(c=a,a=arguments[1]||{},f=2),typeof a!="object"&&!i.isFunction(a)&&(a={}),l===f&&(a=this,--f);for(;f<l;f++)if((e=arguments[f])!=null)for(n in e){r=a[n],s=e[n];if(a===s)continue;c&&s&&(i.isPlainObject(s)||(o=i.isArray(s)))?(o?(o=!1,u=r&&i.isArray(r)?r:[]):u=r&&i.isPlainObject(r)?r:{},a[n]=i.extend(c,u,s)):s!==t&&(a[n]=s)}return a},i.extend({noConflict:function(t){return e.$===i&&(e.$=o),t&&e.jQuery===i&&(e.jQuery=s),i},isReady:!1,readyWait:1,holdReady:function(e){e?i.readyWait++:i.ready(!0)},ready:function(e){if(e===!0&&!--i.readyWait||e!==!0&&!i.isReady){if(!n.body)return setTimeout(i.ready,1);i.isReady=!0;if(e!==!0&&--i.readyWait>0)return;C.fireWith(n,[i]),i.fn.trigger&&i(n).trigger("ready").off("ready")}},bindReady:function(){if(C)return;C=i.Callbacks("once memory");if(n.readyState==="complete")return setTimeout(i.ready,1);if(n.addEventListener)n.addEventListener("DOMContentLoaded",k,!1),e.addEventListener("load",i.ready,!1);else if(n.attachEvent){n.attachEvent("onreadystatechange",k),e.attachEvent("onload",i.ready);var t=!1;try{t=e.frameElement==null}catch(r){}n.documentElement.doScroll&&t&&H()}},isFunction:function(e){return i.type(e)==="function"},isArray:Array.isArray||function(e){return i.type(e)==="array"},isWindow:function(e){return e&&typeof e=="object"&&"setInterval"in e},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return e==null?String(e):P[L.call(e)]||"object"},isPlainObject:function(e){if(!e||i.type(e)!=="object"||e.nodeType||i.isWindow(e))return!1;try{if(e.constructor&&!A.call(e,"constructor")&&!A.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}var r;for(r in e);return r===t||A.call(e,r)},isEmptyObject:function(e){for(var t in e)return!1;return!0},error:function(e){throw new Error(e)},parseJSON:function(t){if(typeof t!="string"||!t)return null;t=i.trim(t);if(e.JSON&&e.JSON.parse)return e.JSON.parse(t);if(p.test(t.replace(d,"@").replace(v,"]").replace(m,"")))return(new Function("return "+t))();i.error("Invalid JSON: "+t)},parseXML:function(n){var r,s;try{e.DOMParser?(s=new DOMParser,r=s.parseFromString(n,"text/xml")):(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(n))}catch(o){r=t}return(!r||!r.documentElement||r.getElementsByTagName("parsererror").length)&&i.error("Invalid XML: "+n),r},noop:function(){},globalEval:function(t){t&&f.test(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(S,"ms-").replace(E,x)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toUpperCase()===t.toUpperCase()},each:function(e,n,r){var s,o=0,u=e.length,a=u===t||i.isFunction(e);if(r){if(a){for(s in e)if(n.apply(e[s],r)===!1)break}else for(;o<u;)if(n.apply(e[o++],r)===!1)break}else if(a){for(s in e)if(n.call(e[s],s,e[s])===!1)break}else for(;o<u;)if(n.call(e[o],o,e[o++])===!1)break;return e},trim:_?function(e){return e==null?"":_.call(e)}:function(e){return e==null?"":e.toString().replace(l,"").replace(c,"")},makeArray:function(e,t){var n=t||[];if(e!=null){var r=i.type(e);e.length==null||r==="string"||r==="function"||r==="regexp"||i.isWindow(e)?O.call(n,e):i.merge(n,e)}return n},inArray:function(e,t,n){var r;if(t){if(D)return D.call(t,e,n);r=t.length,n=n?n<0?Math.max(0,r+n):n:0;for(;n<r;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var r=e.length,i=0;if(typeof n.length=="number")for(var s=n.length;i<s;i++)e[r++]=n[i];else while(n[i]!==t)e[r++]=n[i++];return e.length=r,e},grep:function(e,t,n){var r=[],i;n=!!n;for(var s=0,o=e.length;s<o;s++)i=!!t(e[s],s),n!==i&&r.push(e[s]);return r},map:function(e,n,r){var s,o,u=[],a=0,f=e.length,l=e instanceof i||f!==t&&typeof f=="number"&&(f>0&&e[0]&&e[f-1]||f===0||i.isArray(e));if(l)for(;a<f;a++)s=n(e[a],a,r),s!=null&&(u[u.length]=s);else for(o in e)s=n(e[o],o,r),s!=null&&(u[u.length]=s);return u.concat.apply([],u)},guid:1,proxy:function(e,n){if(typeof n=="string"){var r=e[n];n=e,e=r}if(!i.isFunction(e))return t;var s=M.call(arguments,2),o=function(){return e.apply(n,s.concat(M.call(arguments)))};return o.guid=e.guid=e.guid||o.guid||i.guid++,o},access:function(e,n,r,s,o,u){var a=e.length;if(typeof n=="object"){for(var f in n)i.access(e,f,n[f],s,o,r);return e}if(r!==t){s=!u&&s&&i.isFunction(r);for(var l=0;l<a;l++)o(e[l],n,s?r.call(e[l],l,o(e[l],n)):r,u);return e}return a?o(e[0],n):t},now:function(){return(new Date).getTime()},uaMatch:function(e){e=e.toLowerCase();var t=g.exec(e)||y.exec(e)||b.exec(e)||e.indexOf("compatible")<0&&w.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},sub:function(){function e(t,n){return new e.fn.init(t,n)}i.extend(!0,e,this),e.superclass=this,e.fn=e.prototype=this(),e.fn.constructor=e,e.sub=this.sub,e.fn.init=function(r,s){return s&&s instanceof i&&!(s instanceof e)&&(s=e(s)),i.fn.init.call(this,r,s,t)},e.fn.init.prototype=e.fn;var t=e(n);return e},browser:{}}),i.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(e,t){P["[object "+t+"]"]=t.toLowerCase()}),N=i.uaMatch(T),N.browser&&(i.browser[N.browser]=!0,i.browser.version=N.version),i.browser.webkit&&(i.browser.safari=!0),f.test("Â ")&&(l=/^[\s\xA0]+/,c=/[\s\xA0]+$/),u=i(n),n.addEventListener?k=function(){n.removeEventListener("DOMContentLoaded",k,!1),i.ready()}:n.attachEvent&&(k=function(){n.readyState==="complete"&&(n.detachEvent("onreadystatechange",k),i.ready())}),i}(),o={};s.Callbacks=function(e){e=e?o[e]||u(e):{};var n=[],r=[],i,a,f,l,c,h=function(t){var r,i,o,u,a;for(r=0,i=t.length;r<i;r++)o=t[r],u=s.type(o),u==="array"?h(o):u==="function"&&(!e.unique||!d.has(o))&&n.push(o)},p=function(t,s){s=s||[],i=!e.memory||[t,s],a=!0,c=f||0,f=0,l=n.length;for(;n&&c<l;c++)if(n[c].apply(t,s)===!1&&e.stopOnFalse){i=!0;break}a=!1,n&&(e.once?i===!0?d.disable():n=[]:r&&r.length&&(i=r.shift(),d.fireWith(i[0],i[1])))},d={add:function(){if(n){var e=n.length;h(arguments),a?l=n.length:i&&i!==!0&&(f=e,p(i[0],i[1]))}return this},remove:function(){if(n){var t=arguments,r=0,i=t.length;for(;r<i;r++)for(var s=0;s<n.length;s++)if(t[r]===n[s]){a&&s<=l&&(l--,s<=c&&c--),n.splice(s--,1);if(e.unique)break}}return this},has:function(e){if(n){var t=0,r=n.length;for(;t<r;t++)if(e===n[t])return!0}return!1},empty:function(){return n=[],this},disable:function(){return n=r=i=t,this},disabled:function(){return!n},lock:function(){return r=t,(!i||i===!0)&&d.disable(),this},locked:function(){return!r},fireWith:function(t,n){return r&&(a?e.once||r.push([t,n]):(!e.once||!i)&&p(t,n)),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!i}};return d};var a=[].slice;s.extend({Deferred:function(e){var t=s.Callbacks("once memory"),n=s.Callbacks("once memory"),r=s.Callbacks("memory"),i="pending",o={resolve:t,reject:n,notify:r},u={done:t.add,fail:n.add,progress:r.add,state:function(){return i},isResolved:t.fired,isRejected:n.fired,then:function(e,t,n){return a.done(e).fail(t).progress(n),this},always:function(){return a.done.apply(a,arguments).fail.apply(a,arguments),this},pipe:function(e,t,n){return s.Deferred(function(r){s.each({done:[e,"resolve"],fail:[t,"reject"],progress:[n,"notify"]},function(e,t){var n=t[0],i=t[1],o;s.isFunction(n)?a[e](function(){o=n.apply(this,arguments),o&&s.isFunction(o.promise)?o.promise().then(r.resolve,r.reject,r.notify):r[i+"With"](this===a?r:this,[o])}):a[e](r[i])})}).promise()},promise:function(e){if(e==null)e=u;else for(var t in u)e[t]=u[t];return e}},a=u.promise({}),f;for(f in o)a[f]=o[f].fire,a[f+"With"]=o[f].fireWith;return a.done(function(){i="resolved"},n.disable,r.lock).fail(function(){i="rejected"},t.disable,r.lock),e&&e.call(a,a),a},when:function(e){function c(e){return function(n){t[e]=arguments.length>1?a.call(arguments,0):n,--o||f.resolveWith(f,t)}}function h(e){return function(t){i[e]=arguments.length>1?a.call(arguments,0):t,f.notifyWith(l,i)}}var t=a.call(arguments,0),n=0,r=t.length,i=new Array(r),o=r,u=r,f=r<=1&&e&&s.isFunction(e.promise)?e:s.Deferred(),l=f.promise();if(r>1){for(;n<r;n++)t[n]&&t[n].promise&&s.isFunction(t[n].promise)?t[n].promise().then(c(n),f.reject,h(n)):--o;o||f.resolveWith(f,t)}else f!==e&&f.resolveWith(f,r?[e]:[]);return l}}),s.support=function(){var t,r,i,o,u,a,f,l,c,h,p,d,v,m=n.createElement("div"),g=n.documentElement;m.setAttribute("className","t"),m.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>",r=m.getElementsByTagName("*"),i=m.getElementsByTagName("a")[0];if(!r||!r.length||!i)return{};o=n.createElement("select"),u=o.appendChild(n.createElement("option")),a=m.getElementsByTagName("input")[0],t={leadingWhitespace:m.firstChild.nodeType===3,tbody:!m.getElementsByTagName("tbody").length,htmlSerialize:!!m.getElementsByTagName("link").length,style:/top/.test(i.getAttribute("style")),hrefNormalized:i.getAttribute("href")==="/a",opacity:/^0.55/.test(i.style.opacity),cssFloat:!!i.style.cssFloat,checkOn:a.value==="on",optSelected:u.selected,getSetAttribute:m.className!=="t",enctype:!!n.createElement("form").enctype,html5Clone:n.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0},a.checked=!0,t.noCloneChecked=a.cloneNode(!0).checked,o.disabled=!0,t.optDisabled=!u.disabled;try{delete m.test}catch(y){t.deleteExpando=!1}!m.addEventListener&&m.attachEvent&&m.fireEvent&&(m.attachEvent("onclick",function(){t.noCloneEvent=!1}),m.cloneNode(!0).fireEvent("onclick")),a=n.createElement("input"),a.value="t",a.setAttribute("type","radio"),t.radioValue=a.value==="t",a.setAttribute("checked","checked"),m.appendChild(a),l=n.createDocumentFragment(),l.appendChild(m.lastChild),t.checkClone=l.cloneNode(!0).cloneNode(!0).lastChild.checked,t.appendChecked=a.checked,l.removeChild(a),l.appendChild(m),m.innerHTML="",e.getComputedStyle&&(f=n.createElement("div"),f.style.width="0",f.style.marginRight="0",m.style.width="2px",m.appendChild(f),t.reliableMarginRight=(parseInt((e.getComputedStyle(f,null)||{marginRight:0}).marginRight,10)||0)===0);if(m.attachEvent)for(d in{submit:1,change:1,focusin:1})p="on"+d,v=p in m,v||(m.setAttribute(p,"return;"),v=typeof m[p]=="function"),t[d+"Bubbles"]=v;return l.removeChild(m),l=o=u=f=m=a=null,s(function(){var e,r,i,o,u,a,f,l,h,p,d,g=n.getElementsByTagName("body")[0];if(!g)return;f=1,l="position:absolute;top:0;left:0;width:1px;height:1px;margin:0;",h="visibility:hidden;border:0;",p="style='"+l+"border:5px solid #000;padding:0;'",d="<div "+p+"><div></div></div>"+"<table "+p+" cellpadding='0' cellspacing='0'>"+"<tr><td></td></tr></table>",e=n.createElement("div"),e.style.cssText=h+"width:0;height:0;position:static;top:0;margin-top:"+f+"px",g.insertBefore(e,g.firstChild),m=n.createElement("div"),e.appendChild(m),m.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>",c=m.getElementsByTagName("td"),v=c[0].offsetHeight===0,c[0].style.display="",c[1].style.display="none",t.reliableHiddenOffsets=v&&c[0].offsetHeight===0,m.innerHTML="",m.style.width=m.style.paddingLeft="1px",s.boxModel=t.boxModel=m.offsetWidth===2,typeof m.style.zoom!="undefined"&&(m.style.display="inline",m.style.zoom=1,t.inlineBlockNeedsLayout=m.offsetWidth===2,m.style.display="",m.innerHTML="<div style='width:4px;'></div>",t.shrinkWrapBlocks=m.offsetWidth!==2),m.style.cssText=l+h,m.innerHTML=d,r=m.firstChild,i=r.firstChild,u=r.nextSibling.firstChild.firstChild,a={doesNotAddBorder:i.offsetTop!==5,doesAddBorderForTableAndCells:u.offsetTop===5},i.style.position="fixed",i.style.top="20px",a.fixedPosition=i.offsetTop===20||i.offsetTop===15,i.style.position=i.style.top="",r.style.overflow="hidden",r.style.position="relative",a.subtractsBorderForOverflowNotVisible=i.offsetTop===-5,a.doesNotIncludeMarginInBodyOffset=g.offsetTop!==f,g.removeChild(e),m=e=null,s.extend(t,a)}),t}();var f=/^(?:\{.*\}|\[.*\])$/,l=/([A-Z])/g;s.extend({cache:{},uuid:0,expando:"jQuery"+(s.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?s.cache[e[s.expando]]:e[s.expando],!!e&&!h(e)},data:function(e,n,r,i){if(!s.acceptData(e))return;var o,u,a,f=s.expando,l=typeof n=="string",c=e.nodeType,h=c?s.cache:e,p=c?e[f]:e[f]&&f,d=n==="events";if((!p||!h[p]||!d&&!i&&!h[p].data)&&l&&r===t)return;p||(c?e[f]=p=++s.uuid:p=f),h[p]||(h[p]={},c||(h[p].toJSON=s.noop));if(typeof n=="object"||typeof n=="function")i?h[p]=s.extend(h[p],n):h[p].data=s.extend(h[p].data,n);return o=u=h[p],i||(u.data||(u.data={}),u=u.data),r!==t&&(u[s.camelCase(n)]=r),d&&!u[n]?o.events:(l?(a=u[n],a==null&&(a=u[s.camelCase(n)])):a=u,a)},removeData:function(e,t,n){if(!s.acceptData(e))return;var r,i,o,u=s.expando,a=e.nodeType,f=a?s.cache:e,l=a?e[u]:u;if(!f[l])return;if(t){r=n?f[l]:f[l].data;if(r){s.isArray(t)||(t in r?t=[t]:(t=s.camelCase(t),t in r?t=[t]:t=t.split(" ")));for(i=0,o=t.length;i<o;i++)delete r[t[i]];if(!(n?h:s.isEmptyObject)(r))return}}if(!n){delete f[l].data;if(!h(f[l]))return}s.support.deleteExpando||!f.setInterval?delete f[l]:f[l]=null,a&&(s.support.deleteExpando?delete e[u]:e.removeAttribute?e.removeAttribute(u):e[u]=null)},_data:function(e,t,n){return s.data(e,t,n,!0)},acceptData:function(e){if(e.nodeName){var t=s.noData[e.nodeName.toLowerCase()];if(t)return t!==!0&&e.getAttribute("classid")===t}return!0}}),s.fn.extend({data:function(e,n){var r,i,o,u=null;if(typeof e=="undefined"){if(this.length){u=s.data(this[0]);if(this[0].nodeType===1&&!s._data(this[0],"parsedAttrs")){i=this[0].attributes;for(var a=0,f=i.length;a<f;a++)o=i[a].name,o.indexOf("data-")===0&&(o=s.camelCase(o.substring(5)),c(this[0],o,u[o]));s._data(this[0],"parsedAttrs",!0)}}return u}return typeof e=="object"?this.each(function(){s.data(this,e)}):(r=e.split("."),r[1]=r[1]?"."+r[1]:"",n===t?(u=this.triggerHandler("getData"+r[1]+"!",[r[0]]),u===t&&this.length&&(u=s.data(this[0],e),u=c(this[0],e,u)),u===t&&r[1]?this.data(r[0]):u):this.each(function(){var t=s(this),i=[r[0],n];t.triggerHandler("setData"+r[1]+"!",i),s.data(this,e,n),t.triggerHandler("changeData"+r[1]+"!",i)}))},removeData:function(e){return this.each(function(){s.removeData(this,e)})}}),s.extend({_mark:function(e,t){e&&(t=(t||"fx")+"mark",s._data(e,t,(s._data(e,t)||0)+1))},_unmark:function(e,t,n){e!==!0&&(n=t,t=e,e=!1);if(t){n=n||"fx";var r=n+"mark",i=e?0:(s._data(t,r)||1)-1;i?s._data(t,r,i):(s.removeData(t,r,!0),p(t,n,"mark"))}},queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=s._data(e,t),n&&(!r||s.isArray(n)?r=s._data(e,t,s.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=s.queue(e,t),r=n.shift(),i={};r==="inprogress"&&(r=n.shift()),r&&(t==="fx"&&n.unshift("inprogress"),s._data(e,t+".run",i),r.call(e,function(){s.dequeue(e,t)},i)),n.length||(s.removeData(e,t+"queue "+t+".run",!0),p(e,t,"queue"))}}),s.fn.extend({queue:function(e,n){return typeof e!="string"&&(n=e,e="fx"),n===t?s.queue(this[0],e):this.each(function(){var t=s.queue(this,e,n);e==="fx"&&t[0]!=="inprogress"&&s.dequeue(this,e)})},dequeue:function(e){return this.each(function(){s.dequeue(this,e)})},delay:function(e,t){return e=s.fx?s.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){function h(){--u||r.resolveWith(i,[i])}typeof e!="string"&&(n=e,e=t),e=e||"fx";var r=s.Deferred(),i=this,o=i.length,u=1,a=e+"defer",f=e+"queue",l=e+"mark",c;while(o--)if(c=s.data(i[o],a,t,!0)||(s.data(i[o],f,t,!0)||s.data(i[o],l,t,!0))&&s.data(i[o],a,s.Callbacks("once memory"),!0))u++,c.add(h);return h(),r.promise()}});var d=/[\n\t\r]/g,v=/\s+/,m=/\r/g,g=/^(?:button|input)$/i,y=/^(?:button|input|object|select|textarea)$/i,b=/^a(?:rea)?$/i,w=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,E=s.support.getSetAttribute,S,x,T;s.fn.extend({attr:function(e,t){return s.access(this,e,t,!0,s.attr)},removeAttr:function(e){return this.each(function(){s.removeAttr(this,e)})},prop:function(e,t){return s.access(this,e,t,!0,s.prop)},removeProp:function(e){return e=s.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,i,o,u,a;if(s.isFunction(e))return this.each(function(t){s(this).addClass(e.call(this,t,this.className))});if(e&&typeof e=="string"){t=e.split(v);for(n=0,r=this.length;n<r;n++){i=this[n];if(i.nodeType===1)if(!i.className&&t.length===1)i.className=e;else{o=" "+i.className+" ";for(u=0,a=t.length;u<a;u++)~o.indexOf(" "+t[u]+" ")||(o+=t[u]+" ");i.className=s.trim(o)}}}return this},removeClass:function(e){var n,r,i,o,u,a,f;if(s.isFunction(e))return this.each(function(t){s(this).removeClass(e.call(this,t,this.className))});if(e&&typeof e=="string"||e===t){n=(e||"").split(v);for(r=0,i=this.length;r<i;r++){o=this[r];if(o.nodeType===1&&o.className)if(e){u=(" "+o.className+" ").replace(d," ");for(a=0,f=n.length;a<f;a++)u=u.replace(" "+n[a]+" "," ");o.className=s.trim(u)}else o.className=""}}return this},toggleClass:function(e,t){var n=typeof e,r=typeof t=="boolean";return s.isFunction(e)?this.each(function(n){s(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if(n==="string"){var i,o=0,u=s(this),a=t,f=e.split(v);while(i=f[o++])a=r?a:!u.hasClass(i),u[a?"addClass":"removeClass"](i)}else if(n==="undefined"||n==="boolean")this.className&&s._data(this,"__className__",this.className),this.className=this.className||e===!1?"":s._data(this,"__className__")||""})},hasClass:function(e){var t=" "+e+" ",n=0,r=this.length;for(;n<r;n++)if(this[n].nodeType===1&&(" "+this[n].className+" ").replace(d," ").indexOf(t)>-1)return!0;return!1},val:function(e){var n,r,i,o=this[0];if(!arguments.length){if(o)return n=s.valHooks[o.nodeName.toLowerCase()]||s.valHooks[o.type],n&&"get"in n&&(r=n.get(o,"value"))!==t?r:(r=o.value,typeof r=="string"?r.replace(m,""):r==null?"":r);return}return i=s.isFunction(e),this.each(function(r){var o=s(this),u;if(this.nodeType!==1)return;i?u=e.call(this,r,o.val()):u=e,u==null?u="":typeof u=="number"?u+="":s.isArray(u)&&(u=s.map(u,function(e){return e==null?"":e+""})),n=s.valHooks[this.nodeName.toLowerCase()]||s.valHooks[this.type];if(!n||!("set"in n)||n.set(this,u,"value")===t)this.value=u})}}),s.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,n,r,i,o=e.selectedIndex,u=[],a=e.options,f=e.type==="select-one";if(o<0)return null;n=f?o:0,r=f?o+1:a.length;for(;n<r;n++){i=a[n];if(i.selected&&(s.support.optDisabled?!i.disabled:i.getAttribute("disabled")===null)&&(!i.parentNode.disabled||!s.nodeName(i.parentNode,"optgroup"))){t=s(i).val();if(f)return t;u.push(t)}}return f&&!u.length&&a.length?s(a[o]).val():u},set:function(e,t){var n=s.makeArray(t);return s(e).find("option").each(function(){this.selected=s.inArray(s(this).val(),n)>=0}),n.length||(e.selectedIndex=-1),n}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(e,n,r,i){var o,u,a,f=e.nodeType;if(!e||f===3||f===8||f===2)return;if(i&&n in s.attrFn)return s(e)[n](r);if(typeof e.getAttribute=="undefined")return s.prop(e,n,r);a=f!==1||!s.isXMLDoc(e),a&&(n=n.toLowerCase(),u=s.attrHooks[n]||(w.test(n)?x:S));if(r!==t){if(r===null){s.removeAttr(e,n);return}return u&&"set"in u&&a&&(o=u.set(e,r,n))!==t?o:(e.setAttribute(n,""+r),r)}return u&&"get"in u&&a&&(o=u.get(e,n))!==null?o:(o=e.getAttribute(n),o===null?t:o)},removeAttr:function(e,t){var n,r,i,o,u=0;if(t&&e.nodeType===1){r=t.toLowerCase().split(v),o=r.length;for(;u<o;u++)i=r[u],i&&(n=s.propFix[i]||i,s.attr(e,i,""),e.removeAttribute(E?i:n),w.test(i)&&n in e&&(e[n]=!1))}},attrHooks:{type:{set:function(e,t){if(g.test(e.nodeName)&&e.parentNode)s.error("type property can't be changed");else if(!s.support.radioValue&&t==="radio"&&s.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}},value:{get:function(e,t){return S&&s.nodeName(e,"button")?S.get(e,t):t in e?e.value:null},set:function(e,t,n){if(S&&s.nodeName(e,"button"))return S.set(e,t,n);e.value=t}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,n,r){var i,o,u,a=e.nodeType;if(!e||a===3||a===8||a===2)return;return u=a!==1||!s.isXMLDoc(e),u&&(n=s.propFix[n]||n,o=s.propHooks[n]),r!==t?o&&"set"in o&&(i=o.set(e,r,n))!==t?i:e[n]=r:o&&"get"in o&&(i=o.get(e,n))!==null?i:e[n]},propHooks:{tabIndex:{get:function(e){var n=e.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):y.test(e.nodeName)||b.test(e.nodeName)&&e.href?0:t}}}}),s.attrHooks.tabindex=s.propHooks.tabIndex,x={get:function(e,n){var r,i=s.prop(e,n);return i===!0||typeof i!="boolean"&&(r=e.getAttributeNode(n))&&r.nodeValue!==!1?n.toLowerCase():t},set:function(e,t,n){var r;return t===!1?s.removeAttr(e,n):(r=s.propFix[n]||n,r in e&&(e[r]=!0),e.setAttribute(n,n.toLowerCase())),n}},E||(T={name:!0,id:!0},S=s.valHooks.button={get:function(e,n){var r;return r=e.getAttributeNode(n),r&&(T[n]?r.nodeValue!=="":r.specified)?r.nodeValue:t},set:function(e,t,r){var i=e.getAttributeNode(r);return i||(i=n.createAttribute(r),e.setAttributeNode(i)),i.nodeValue=t+""}},s.attrHooks.tabindex.set=S.set,s.each(["width","height"],function(e,t){s.attrHooks[t]=s.extend(s.attrHooks[t],{set:function(e,n){if(n==="")return e.setAttribute(t,"auto"),n}})}),s.attrHooks.contenteditable={get:S.get,set:function(e,t,n){t===""&&(t="false"),S.set(e,t,n)}}),s.support.hrefNormalized||s.each(["href","src","width","height"],function(e,n){s.attrHooks[n]=s.extend(s.attrHooks[n],{get:function(e){var r=e.getAttribute(n,2);return r===null?t:r}})}),s.support.style||(s.attrHooks.style={get:function(e){return e.style.cssText.toLowerCase()||t},set:function(e,t){return e.style.cssText=""+t}}),s.support.optSelected||(s.propHooks.selected=s.extend(s.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex
,t.parentNode&&t.parentNode.selectedIndex),null}})),s.support.enctype||(s.propFix.enctype="encoding"),s.support.checkOn||s.each(["radio","checkbox"],function(){s.valHooks[this]={get:function(e){return e.getAttribute("value")===null?"on":e.value}}}),s.each(["radio","checkbox"],function(){s.valHooks[this]=s.extend(s.valHooks[this],{set:function(e,t){if(s.isArray(t))return e.checked=s.inArray(s(e).val(),t)>=0}})});var N=/^(?:textarea|input|select)$/i,C=/^([^\.]*)?(?:\.(.+))?$/,k=/\bhover(\.\S+)?\b/,L=/^key/,A=/^(?:mouse|contextmenu)|click/,O=/^(?:focusinfocus|focusoutblur)$/,M=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,_=function(e){var t=M.exec(e);return t&&(t[1]=(t[1]||"").toLowerCase(),t[3]=t[3]&&new RegExp("(?:^|\\s)"+t[3]+"(?:\\s|$)")),t},D=function(e,t){var n=e.attributes||{};return(!t[1]||e.nodeName.toLowerCase()===t[1])&&(!t[2]||(n.id||{}).value===t[2])&&(!t[3]||t[3].test((n["class"]||{}).value))},P=function(e){return s.event.special.hover?e:e.replace(k,"mouseenter$1 mouseleave$1")};s.event={add:function(e,n,r,i,o){var u,a,f,l,c,h,p,d,v,m,g,y;if(e.nodeType===3||e.nodeType===8||!n||!r||!(u=s._data(e)))return;r.handler&&(v=r,r=v.handler),r.guid||(r.guid=s.guid++),f=u.events,f||(u.events=f={}),a=u.handle,a||(u.handle=a=function(e){return typeof s=="undefined"||!!e&&s.event.triggered===e.type?t:s.event.dispatch.apply(a.elem,arguments)},a.elem=e),n=s.trim(P(n)).split(" ");for(l=0;l<n.length;l++){c=C.exec(n[l])||[],h=c[1],p=(c[2]||"").split(".").sort(),y=s.event.special[h]||{},h=(o?y.delegateType:y.bindType)||h,y=s.event.special[h]||{},d=s.extend({type:h,origType:c[1],data:i,handler:r,guid:r.guid,selector:o,quick:_(o),namespace:p.join(".")},v),g=f[h];if(!g){g=f[h]=[],g.delegateCount=0;if(!y.setup||y.setup.call(e,i,p,a)===!1)e.addEventListener?e.addEventListener(h,a,!1):e.attachEvent&&e.attachEvent("on"+h,a)}y.add&&(y.add.call(e,d),d.handler.guid||(d.handler.guid=r.guid)),o?g.splice(g.delegateCount++,0,d):g.push(d),s.event.global[h]=!0}e=null},global:{},remove:function(e,t,n,r,i){var o=s.hasData(e)&&s._data(e),u,a,f,l,c,h,p,d,v,m,g,y;if(!o||!(d=o.events))return;t=s.trim(P(t||"")).split(" ");for(u=0;u<t.length;u++){a=C.exec(t[u])||[],f=l=a[1],c=a[2];if(!f){for(f in d)s.event.remove(e,f+t[u],n,r,!0);continue}v=s.event.special[f]||{},f=(r?v.delegateType:v.bindType)||f,g=d[f]||[],h=g.length,c=c?new RegExp("(^|\\.)"+c.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null;for(p=0;p<g.length;p++)y=g[p],(i||l===y.origType)&&(!n||n.guid===y.guid)&&(!c||c.test(y.namespace))&&(!r||r===y.selector||r==="**"&&y.selector)&&(g.splice(p--,1),y.selector&&g.delegateCount--,v.remove&&v.remove.call(e,y));g.length===0&&h!==g.length&&((!v.teardown||v.teardown.call(e,c)===!1)&&s.removeEvent(e,f,o.handle),delete d[f])}s.isEmptyObject(d)&&(m=o.handle,m&&(m.elem=null),s.removeData(e,["events","handle"],!0))},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(n,r,i,o){if(!i||i.nodeType!==3&&i.nodeType!==8){var u=n.type||n,a=[],f,l,c,h,p,d,v,m,g,y;if(O.test(u+s.event.triggered))return;u.indexOf("!")>=0&&(u=u.slice(0,-1),l=!0),u.indexOf(".")>=0&&(a=u.split("."),u=a.shift(),a.sort());if((!i||s.event.customEvent[u])&&!s.event.global[u])return;n=typeof n=="object"?n[s.expando]?n:new s.Event(u,n):new s.Event(u),n.type=u,n.isTrigger=!0,n.exclusive=l,n.namespace=a.join("."),n.namespace_re=n.namespace?new RegExp("(^|\\.)"+a.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,d=u.indexOf(":")<0?"on"+u:"";if(!i){f=s.cache;for(c in f)f[c].events&&f[c].events[u]&&s.event.trigger(n,r,f[c].handle.elem,!0);return}n.result=t,n.target||(n.target=i),r=r!=null?s.makeArray(r):[],r.unshift(n),v=s.event.special[u]||{};if(v.trigger&&v.trigger.apply(i,r)===!1)return;g=[[i,v.bindType||u]];if(!o&&!v.noBubble&&!s.isWindow(i)){y=v.delegateType||u,h=O.test(y+u)?i:i.parentNode,p=null;for(;h;h=h.parentNode)g.push([h,y]),p=h;p&&p===i.ownerDocument&&g.push([p.defaultView||p.parentWindow||e,y])}for(c=0;c<g.length&&!n.isPropagationStopped();c++)h=g[c][0],n.type=g[c][1],m=(s._data(h,"events")||{})[n.type]&&s._data(h,"handle"),m&&m.apply(h,r),m=d&&h[d],m&&s.acceptData(h)&&m.apply(h,r)===!1&&n.preventDefault();return n.type=u,!o&&!n.isDefaultPrevented()&&(!v._default||v._default.apply(i.ownerDocument,r)===!1)&&(u!=="click"||!s.nodeName(i,"a"))&&s.acceptData(i)&&d&&i[u]&&(u!=="focus"&&u!=="blur"||n.target.offsetWidth!==0)&&!s.isWindow(i)&&(p=i[d],p&&(i[d]=null),s.event.triggered=u,i[u](),s.event.triggered=t,p&&(i[d]=p)),n.result}return},dispatch:function(n){n=s.event.fix(n||e.event);var r=(s._data(this,"events")||{})[n.type]||[],i=r.delegateCount,o=[].slice.call(arguments,0),u=!n.exclusive&&!n.namespace,a=[],f,l,c,h,p,d,v,m,g,y,b;o[0]=n,n.delegateTarget=this;if(i&&!n.target.disabled&&(!n.button||n.type!=="click")){h=s(this),h.context=this.ownerDocument||this;for(c=n.target;c!=this;c=c.parentNode||this){d={},m=[],h[0]=c;for(f=0;f<i;f++)g=r[f],y=g.selector,d[y]===t&&(d[y]=g.quick?D(c,g.quick):h.is(y)),d[y]&&m.push(g);m.length&&a.push({elem:c,matches:m})}}r.length>i&&a.push({elem:this,matches:r.slice(i)});for(f=0;f<a.length&&!n.isPropagationStopped();f++){v=a[f],n.currentTarget=v.elem;for(l=0;l<v.matches.length&&!n.isImmediatePropagationStopped();l++){g=v.matches[l];if(u||!n.namespace&&!g.namespace||n.namespace_re&&n.namespace_re.test(g.namespace))n.data=g.data,n.handleObj=g,p=((s.event.special[g.origType]||{}).handle||g.handler).apply(v.elem,o),p!==t&&(n.result=p,p===!1&&(n.preventDefault(),n.stopPropagation()))}}return n.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return e.which==null&&(e.which=t.charCode!=null?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,r){var i,s,o,u=r.button,a=r.fromElement;return e.pageX==null&&r.clientX!=null&&(i=e.target.ownerDocument||n,s=i.documentElement,o=i.body,e.pageX=r.clientX+(s&&s.scrollLeft||o&&o.scrollLeft||0)-(s&&s.clientLeft||o&&o.clientLeft||0),e.pageY=r.clientY+(s&&s.scrollTop||o&&o.scrollTop||0)-(s&&s.clientTop||o&&o.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?r.toElement:a),!e.which&&u!==t&&(e.which=u&1?1:u&2?3:u&4?2:0),e}},fix:function(e){if(e[s.expando])return e;var r,i,o=e,u=s.event.fixHooks[e.type]||{},a=u.props?this.props.concat(u.props):this.props;e=s.Event(o);for(r=a.length;r;)i=a[--r],e[i]=o[i];return e.target||(e.target=o.srcElement||n),e.target.nodeType===3&&(e.target=e.target.parentNode),e.metaKey===t&&(e.metaKey=e.ctrlKey),u.filter?u.filter(e,o):e},special:{ready:{setup:s.bindReady},load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(e,t,n){s.isWindow(this)&&(this.onbeforeunload=n)},teardown:function(e,t){this.onbeforeunload===t&&(this.onbeforeunload=null)}}},simulate:function(e,t,n,r){var i=s.extend(new s.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?s.event.trigger(i,null,t):s.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},s.event.handle=s.event.dispatch,s.removeEvent=n.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){e.detachEvent&&e.detachEvent("on"+t,n)},s.Event=function(e,t){if(!(this instanceof s.Event))return new s.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?B:H):this.type=e,t&&s.extend(this,t),this.timeStamp=e&&e.timeStamp||s.now(),this[s.expando]=!0},s.Event.prototype={preventDefault:function(){this.isDefaultPrevented=B;var e=this.originalEvent;if(!e)return;e.preventDefault?e.preventDefault():e.returnValue=!1},stopPropagation:function(){this.isPropagationStopped=B;var e=this.originalEvent;if(!e)return;e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=B,this.stopPropagation()},isDefaultPrevented:H,isPropagationStopped:H,isImmediatePropagationStopped:H},s.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){s.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n=this,r=e.relatedTarget,i=e.handleObj,o=i.selector,u;if(!r||r!==n&&!s.contains(n,r))e.type=i.origType,u=i.handler.apply(this,arguments),e.type=t;return u}}}),s.support.submitBubbles||(s.event.special.submit={setup:function(){if(s.nodeName(this,"form"))return!1;s.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,r=s.nodeName(n,"input")||s.nodeName(n,"button")?n.form:t;r&&!r._submit_attached&&(s.event.add(r,"submit._submit",function(e){this.parentNode&&!e.isTrigger&&s.event.simulate("submit",this.parentNode,e,!0)}),r._submit_attached=!0)})},teardown:function(){if(s.nodeName(this,"form"))return!1;s.event.remove(this,"._submit")}}),s.support.changeBubbles||(s.event.special.change={setup:function(){if(N.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio")s.event.add(this,"propertychange._change",function(e){e.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),s.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1,s.event.simulate("change",this,e,!0))});return!1}s.event.add(this,"beforeactivate._change",function(e){var t=e.target;N.test(t.nodeName)&&!t._change_attached&&(s.event.add(t,"change._change",function(e){this.parentNode&&!e.isSimulated&&!e.isTrigger&&s.event.simulate("change",this.parentNode,e,!0)}),t._change_attached=!0)})},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||t.type!=="radio"&&t.type!=="checkbox")return e.handleObj.handler.apply(this,arguments)},teardown:function(){return s.event.remove(this,"._change"),N.test(this.nodeName)}}),s.support.focusinBubbles||s.each({focus:"focusin",blur:"focusout"},function(e,t){var r=0,i=function(e){s.event.simulate(t,e.target,s.event.fix(e),!0)};s.event.special[t]={setup:function(){r++===0&&n.addEventListener(e,i,!0)},teardown:function(){--r===0&&n.removeEventListener(e,i,!0)}}}),s.fn.extend({on:function(e,n,r,i,o){var u,a;if(typeof e=="object"){typeof n!="string"&&(r=n,n=t);for(a in e)this.on(a,n,r,e[a],o);return this}r==null&&i==null?(i=n,r=n=t):i==null&&(typeof n=="string"?(i=r,r=t):(i=r,r=n,n=t));if(i===!1)i=H;else if(!i)return this;return o===1&&(u=i,i=function(e){return s().off(e),u.apply(this,arguments)},i.guid=u.guid||(u.guid=s.guid++)),this.each(function(){s.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on.call(this,e,t,n,r,1)},off:function(e,n,r){if(e&&e.preventDefault&&e.handleObj){var i=e.handleObj;return s(e.delegateTarget).off(i.namespace?i.type+"."+i.namespace:i.type,i.selector,i.handler),this}if(typeof e=="object"){for(var o in e)this.off(o,n,e[o]);return this}if(n===!1||typeof n=="function")r=n,n=t;return r===!1&&(r=H),this.each(function(){s.event.remove(this,e,r,n)})},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},live:function(e,t,n){return s(this.context).on(e,this.selector,t,n),this},die:function(e,t){return s(this.context).off(e,this.selector||"**",t),this},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return arguments.length==1?this.off(e,"**"):this.off(t,e,n)},trigger:function(e,t){return this.each(function(){s.event.trigger(e,t,this)})},triggerHandler:function(e,t){if(this[0])return s.event.trigger(e,t,this[0],!0)},toggle:function(e){var t=arguments,n=e.guid||s.guid++,r=0,i=function(n){var i=(s._data(this,"lastToggle"+e.guid)||0)%r;return s._data(this,"lastToggle"+e.guid,i+1),n.preventDefault(),t[i].apply(this,arguments)||!1};i.guid=n;while(r<t.length)t[r++].guid=n;return this.click(i)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),s.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){s.fn[t]=function(e,n){return n==null&&(n=e,e=null),arguments.length>0?this.on(t,null,e,n):this.trigger(t)},s.attrFn&&(s.attrFn[t]=!0),L.test(t)&&(s.event.fixHooks[t]=s.event.keyHooks),A.test(t)&&(s.event.fixHooks[t]=s.event.mouseHooks)}),function(){function S(e,t,n,i,s,o){for(var u=0,a=i.length;u<a;u++){var f=i[u];if(f){var l=!1;f=f[e];while(f){if(f[r]===n){l=i[f.sizset];break}f.nodeType===1&&!o&&(f[r]=n,f.sizset=u);if(f.nodeName.toLowerCase()===t){l=f;break}f=f[e]}i[u]=l}}}function x(e,t,n,i,s,o){for(var u=0,a=i.length;u<a;u++){var f=i[u];if(f){var l=!1;f=f[e];while(f){if(f[r]===n){l=i[f.sizset];break}if(f.nodeType===1){o||(f[r]=n,f.sizset=u);if(typeof t!="string"){if(f===t){l=!0;break}}else if(h.filter(t,[f]).length>0){l=f;break}}f=f[e]}i[u]=l}}}var e=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,r="sizcache"+(Math.random()+"").replace(".",""),i=0,o=Object.prototype.toString,u=!1,a=!0,f=/\\/g,l=/\r\n/g,c=/\W/;[0,0].sort(function(){return a=!1,0});var h=function(t,r,i,s){i=i||[],r=r||n;var u=r;if(r.nodeType!==1&&r.nodeType!==9)return[];if(!t||typeof t!="string")return i;var a,f,l,c,p,m,g,b,w=!0,E=h.isXML(r),S=[],x=t;do{e.exec(""),a=e.exec(x);if(a){x=a[3],S.push(a[1]);if(a[2]){c=a[3];break}}}while(a);if(S.length>1&&v.exec(t))if(S.length===2&&d.relative[S[0]])f=T(S[0]+S[1],r,s);else{f=d.relative[S[0]]?[r]:h(S.shift(),r);while(S.length)t=S.shift(),d.relative[t]&&(t+=S.shift()),f=T(t,f,s)}else{!s&&S.length>1&&r.nodeType===9&&!E&&d.match.ID.test(S[0])&&!d.match.ID.test(S[S.length-1])&&(p=h.find(S.shift(),r,E),r=p.expr?h.filter(p.expr,p.set)[0]:p.set[0]);if(r){p=s?{expr:S.pop(),set:y(s)}:h.find(S.pop(),S.length!==1||S[0]!=="~"&&S[0]!=="+"||!r.parentNode?r:r.parentNode,E),f=p.expr?h.filter(p.expr,p.set):p.set,S.length>0?l=y(f):w=!1;while(S.length)m=S.pop(),g=m,d.relative[m]?g=S.pop():m="",g==null&&(g=r),d.relative[m](l,g,E)}else l=S=[]}l||(l=f),l||h.error(m||t);if(o.call(l)==="[object Array]")if(!w)i.push.apply(i,l);else if(r&&r.nodeType===1)for(b=0;l[b]!=null;b++)l[b]&&(l[b]===!0||l[b].nodeType===1&&h.contains(r,l[b]))&&i.push(f[b]);else for(b=0;l[b]!=null;b++)l[b]&&l[b].nodeType===1&&i.push(f[b]);else y(l,i);return c&&(h(c,u,i,s),h.uniqueSort(i)),i};h.uniqueSort=function(e){if(w){u=a,e.sort(w);if(u)for(var t=1;t<e.length;t++)e[t]===e[t-1]&&e.splice(t--,1)}return e},h.matches=function(e,t){return h(e,null,null,t)},h.matchesSelector=function(e,t){return h(t,null,null,[e]).length>0},h.find=function(e,t,n){var r,i,s,o,u,a;if(!e)return[];for(i=0,s=d.order.length;i<s;i++){u=d.order[i];if(o=d.leftMatch[u].exec(e)){a=o[1],o.splice(1,1);if(a.substr(a.length-1)!=="\\"){o[1]=(o[1]||"").replace(f,""),r=d.find[u](o,t,n);if(r!=null){e=e.replace(d.match[u],"");break}}}}return r||(r=typeof t.getElementsByTagName!="undefined"?t.getElementsByTagName("*"):[]),{set:r,expr:e}},h.filter=function(e,n,r,i){var s,o,u,a,f,l,c,p,v,m=e,g=[],y=n,b=n&&n[0]&&h.isXML(n[0]);while(e&&n.length){for(u in d.filter)if((s=d.leftMatch[u].exec(e))!=null&&s[2]){l=d.filter[u],c=s[1],o=!1,s.splice(1,1);if(c.substr(c.length-1)==="\\")continue;y===g&&(g=[]);if(d.preFilter[u]){s=d.preFilter[u](s,y,r,g,i,b);if(!s)o=a=!0;else if(s===!0)continue}if(s)for(p=0;(f=y[p])!=null;p++)f&&(a=l(f,s,p,y),v=i^a,r&&a!=null?v?o=!0:y[p]=!1:v&&(g.push(f),o=!0));if(a!==t){r||(y=g),e=e.replace(d.match[u],"");if(!o)return[];break}}if(e===m){if(o!=null)break;h.error(e)}m=e}return y},h.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)};var p=h.getText=function(e){var t,n,r=e.nodeType,i="";if(r){if(r===1||r===9){if(typeof e.textContent=="string")return e.textContent;if(typeof e.innerText=="string")return e.innerText.replace(l,"");for(e=e.firstChild;e;e=e.nextSibling)i+=p(e)}else if(r===3||r===4)return e.nodeValue}else for(t=0;n=e[t];t++)n.nodeType!==8&&(i+=p(n));return i},d=h.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(e){return e.getAttribute("href")},type:function(e){return e.getAttribute("type")}},relative:{"+":function(e,t){var n=typeof t=="string",r=n&&!c.test(t),i=n&&!r;r&&(t=t.toLowerCase());for(var s=0,o=e.length,u;s<o;s++)if(u=e[s]){while((u=u.previousSibling)&&u.nodeType!==1);e[s]=i||u&&u.nodeName.toLowerCase()===t?u||!1:u===t}i&&h.filter(t,e,!0)},">":function(e,t){var n,r=typeof t=="string",i=0,s=e.length;if(r&&!c.test(t)){t=t.toLowerCase();for(;i<s;i++){n=e[i];if(n){var o=n.parentNode;e[i]=o.nodeName.toLowerCase()===t?o:!1}}}else{for(;i<s;i++)n=e[i],n&&(e[i]=r?n.parentNode:n.parentNode===t);r&&h.filter(t,e,!0)}},"":function(e,t,n){var r,s=i++,o=x;typeof t=="string"&&!c.test(t)&&(t=t.toLowerCase(),r=t,o=S),o("parentNode",t,s,e,r,n)},"~":function(e,t,n){var r,s=i++,o=x;typeof t=="string"&&!c.test(t)&&(t=t.toLowerCase(),r=t,o=S),o("previousSibling",t,s,e,r,n)}},find:{ID:function(e,t,n){if(typeof t.getElementById!="undefined"&&!n){var r=t.getElementById(e[1]);return r&&r.parentNode?[r]:[]}},NAME:function(e,t){if(typeof t.getElementsByName!="undefined"){var n=[],r=t.getElementsByName(e[1]);for(var i=0,s=r.length;i<s;i++)r[i].getAttribute("name")===e[1]&&n.push(r[i]);return n.length===0?null:n}},TAG:function(e,t){if(typeof t.getElementsByTagName!="undefined")return t.getElementsByTagName(e[1])}},preFilter:{CLASS:function(e,t,n,r,i,s){e=" "+e[1].replace(f,"")+" ";if(s)return e;for(var o=0,u;(u=t[o])!=null;o++)u&&(i^(u.className&&(" "+u.className+" ").replace(/[\t\n\r]/g," ").indexOf(e)>=0)?n||r.push(u):n&&(t[o]=!1));return!1},ID:function(e){return e[1].replace(f,"")},TAG:function(e,t){return e[1].replace(f,"").toLowerCase()},CHILD:function(e){if(e[1]==="nth"){e[2]||h.error(e[0]),e[2]=e[2].replace(/^\+|\s*/g,"");var t=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(e[2]==="even"&&"2n"||e[2]==="odd"&&"2n+1"||!/\D/.test(e[2])&&"0n+"+e[2]||e[2]);e[2]=t[1]+(t[2]||1)-0,e[3]=t[3]-0}else e[2]&&h.error(e[0]);return e[0]=i++,e},ATTR:function(e,t,n,r,i,s){var o=e[1]=e[1].replace(f,"");return!s&&d.attrMap[o]&&(e[1]=d.attrMap[o]),e[4]=(e[4]||e[5]||"").replace(f,""),e[2]==="~="&&(e[4]=" "+e[4]+" "),e},PSEUDO:function(t,n,r,i,s){if(t[1]==="not"){if(!((e.exec(t[3])||"").length>1||/^\w/.test(t[3]))){var o=h.filter(t[3],n,r,!0^s);return r||i.push.apply(i,o),!1}t[3]=h(t[3],null,null,n)}else if(d.match.POS.test(t[0])||d.match.CHILD.test(t[0]))return!0;return t},POS:function(e){return e.unshift(!0),e}},filters:{enabled:function(e){return e.disabled===!1&&e.type!=="hidden"},disabled:function(e){return e.disabled===!0},checked:function(e){return e.checked===!0},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},parent:function(e){return!!e.firstChild},empty:function(e){return!e.firstChild},has:function(e,t,n){return!!h(n[3],e).length},header:function(e){return/h\d/i.test(e.nodeName)},text:function(e){var t=e.getAttribute("type"),n=e.type;return e.nodeName.toLowerCase()==="input"&&"text"===n&&(t===n||t===null)},radio:function(e){return e.nodeName.toLowerCase()==="input"&&"radio"===e.type},checkbox:function(e){return e.nodeName.toLowerCase()==="input"&&"checkbox"===e.type},file:function(e){return e.nodeName.toLowerCase()==="input"&&"file"===e.type},password:function(e){return e.nodeName.toLowerCase()==="input"&&"password"===e.type},submit:function(e){var t=e.nodeName.toLowerCase();return(t==="input"||t==="button")&&"submit"===e.type},image:function(e){return e.nodeName.toLowerCase()==="input"&&"image"===e.type},reset:function(e){var t=e.nodeName.toLowerCase();return(t==="input"||t==="button")&&"reset"===e.type},button:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&"button"===e.type||t==="button"},input:function(e){return/input|select|textarea|button/i.test(e.nodeName)},focus:function(e){return e===e.ownerDocument.activeElement}},setFilters:{first:function(e,t){return t===0},last:function(e,t,n,r){return t===r.length-1},even:function(e,t){return t%2===0},odd:function(e,t){return t%2===1},lt:function(e,t,n){return t<n[3]-0},gt:function(e,t,n){return t>n[3]-0},nth:function(e,t,n){return n[3]-0===t},eq:function(e,t,n){return n[3]-0===t}},filter:{PSEUDO:function(e,t,n,r){var i=t[1],s=d.filters[i];if(s)return s(e,n,t,r);if(i==="contains")return(e.textContent||e.innerText||p([e])||"").indexOf(t[3])>=0;if(i==="not"){var o=t[3];for(var u=0,a=o.length;u<a;u++)if(o[u]===e)return!1;return!0}h.error(i)},CHILD:function(e,t){var n,i,s,o,u,a,f,l=t[1],c=e;switch(l){case"only":case"first":while(c=c.previousSibling)if(c.nodeType===1)return!1;if(l==="first")return!0;c=e;case"last":while(c=c.nextSibling)if(c.nodeType===1)return!1;return!0;case"nth":n=t[2],i=t[3];if(n===1&&i===0)return!0;s=t[0],o=e.parentNode;if(o&&(o[r]!==s||!e.nodeIndex)){a=0;for(c=o.firstChild;c;c=c.nextSibling)c.nodeType===1&&(c.nodeIndex=++a);o[r]=s}return f=e.nodeIndex-i,n===0?f===0:f%n===0&&f/n>=0}},ID:function(e,t){return e.nodeType===1&&e.getAttribute("id")===t},TAG:function(e,t){return t==="*"&&e.nodeType===1||!!e.nodeName&&e.nodeName.toLowerCase()===t},CLASS:function(e,t){return(" "+(e.className||e.getAttribute("class"))+" ").indexOf(t)>-1},ATTR:function(e,t){var n=t[1],r=h.attr?h.attr(e,n):d.attrHandle[n]?d.attrHandle[n](e):e[n]!=null?e[n]:e.getAttribute(n),i=r+"",s=t[2],o=t[4];return r==null?s==="!=":!s&&h.attr?r!=null:s==="="?i===o:s==="*="?i.indexOf(o)>=0:s==="~="?(" "+i+" ").indexOf(o)>=0:o?s==="!="?i!==o:s==="^="?i.indexOf(o)===0:s==="$="?i.substr(i.length-o.length)===o:s==="|="?i===o||i.substr(0,o.length+1)===o+"-":!1:i&&r!==!1},POS:function(e,t,n,r){var i=t[2],s=d.setFilters[i];if(s)return s(e,n,t,r)}}},v=d.match.POS,m=function(e,t){return"\\"+(t-0+1)};for(var g in d.match)d.match[g]=new RegExp(d.match[g].source+/(?![^\[]*\])(?![^\(]*\))/.source),d.leftMatch[g]=new RegExp(/(^(?:.|\r|\n)*?)/.source+d.match[g].source.replace(/\\(\d+)/g,m));var y=function(e,t){return e=Array.prototype.slice.call(e,0),t?(t.push.apply(t,e),t):e};try{Array.prototype.slice.call(n.documentElement.childNodes,0)[0].nodeType}catch(b){y=function(e,t){var n=0,r=t||[];if(o.call(e)==="[object Array]")Array.prototype.push.apply(r,e);else if(typeof e.length=="number")for(var i=e.length;n<i;n++)r.push(e[n]);else for(;e[n];n++)r.push(e[n]);return r}}var w,E;n.documentElement.compareDocumentPosition?w=function(e,t){return e===t?(u=!0,0):!e.compareDocumentPosition||!t.compareDocumentPosition?e.compareDocumentPosition?-1:1:e.compareDocumentPosition(t)&4?-1:1}:(w=function(e,t){if(e===t)return u=!0,0;if(e.sourceIndex&&t.sourceIndex)return e.sourceIndex-t.sourceIndex;var n,r,i=[],s=[],o=e.parentNode,a=t.parentNode,f=o;if(o===a)return E(e,t);if(!o)return-1;if(!a)return 1;while(f)i.unshift(f),f=f.parentNode;f=a;while(f)s.unshift(f),f=f.parentNode;n=i.length,r=s.length;for(var l=0;l<n&&l<r;l++)if(i[l]!==s[l])return E(i[l],s[l]);return l===n?E(e,s[l],-1):E(i[l],t,1)},E=function(e,t,n){if(e===t)return n;var r=e.nextSibling;while(r){if(r===t)return-1;r=r.nextSibling}return 1}),function(){var e=n.createElement("div"),r="script"+(new Date).getTime(),i=n.documentElement;e.innerHTML="<a name='"+r+"'/>",i.insertBefore(e,i.firstChild),n.getElementById(r)&&(d.find.ID=function(e,n,r){if(typeof n.getElementById!="undefined"&&!r){var i=n.getElementById(e[1]);return i?i.id===e[1]||typeof i.getAttributeNode!="undefined"&&i.getAttributeNode("id").nodeValue===e[1]?[i]:t:[]}},d.filter.ID=function(e,t){var n=typeof e.getAttributeNode!="undefined"&&e.getAttributeNode("id");return e.nodeType===1&&n&&n.nodeValue===t}),i.removeChild(e),i=e=null}(),function(){var e=n.createElement("div");e.appendChild(n.createComment("")),e.getElementsByTagName("*").length>0&&(d.find.TAG=function(e,t){var n=t.getElementsByTagName(e[1]);if(e[1]==="*"){var r=[];for(var i=0;n[i];i++)n[i].nodeType===1&&r.push(n[i]);n=r}return n}),e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!="undefined"&&e.firstChild.getAttribute("href")!=="#"&&(d.attrHandle.href=function(e){return e.getAttribute("href",2)}),e=null}(),n.querySelectorAll&&function(){var e=h,t=n.createElement("div"),r="__sizzle__";t.innerHTML="<p class='TEST'></p>";if(t.querySelectorAll&&t.querySelectorAll(".TEST").length===0)return;h=function(t,i,s,o){i=i||n;if(!o&&!h.isXML(i)){var u=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(t);if(u&&(i.nodeType===1||i.nodeType===9)){if(u[1])return y(i.getElementsByTagName(t),s);if(u[2]&&d.find.CLASS&&i.getElementsByClassName)return y(i.getElementsByClassName(u[2]),s)}if(i.nodeType===9){if(t==="body"&&i.body)return y([i.body],s);if(u&&u[3]){var a=i.getElementById(u[3]);if(!a||!a.parentNode)return y([],s);if(a.id===u[3])return y([a],s)}try{return y(i.querySelectorAll(t),s)}catch(f){}}else if(i.nodeType===1&&i.nodeName.toLowerCase()!=="object"){var l=i,c=i.getAttribute("id"),p=c||r,v=i.parentNode,m=/^\s*[+~]/.test(t);c?p=p.replace(/'/g,"\\$&"):i.setAttribute("id",p),m&&v&&(i=i.parentNode);try{if(!m||v)return y(i.querySelectorAll("[id='"+p+"'] "+t),s)}catch(g){}finally{c||l.removeAttribute("id")}}}return e(t,i,s,o)};for(var i in e)h[i]=e[i];t=null}(),function(){var e=n.documentElement,t=e.matchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.msMatchesSelector;if(t){var r=!t.call(n.createElement("div"),"div"),i=!1;try{t.call(n.documentElement,"[test!='']:sizzle")}catch(s){i=!0}h.matchesSelector=function(e,n){n=n.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!h.isXML(e))try{if(i||!d.match.PSEUDO.test(n)&&!/!=/.test(n)){var s=t.call(e,n);if(s||!r||e.document&&e.document.nodeType!==11)return s}}catch(o){}return h(n,null,null,[e]).length>0}}}(),function(){var e=n.createElement("div");e.innerHTML="<div class='test e'></div><div class='test'></div>";if(!e.getElementsByClassName||e.getElementsByClassName("e").length===0)return;e.lastChild.className="e";if(e.getElementsByClassName("e").length===1)return;d.order.splice(1,0,"CLASS"),d.find.CLASS=function(e,t,n){if(typeof t.getElementsByClassName!="undefined"&&!n)return t.getElementsByClassName(e[1])},e=null}(),n.documentElement.contains?h.contains=function(e,t){return e!==t&&(e.contains?e.contains(t):!0)}:n.documentElement.compareDocumentPosition?h.contains=function(e,t){return!!(e.compareDocumentPosition(t)&16)}:h.contains=function(){return!1},h.isXML=function(e){var t=(e?e.ownerDocument||e:0).documentElement;return t?t.nodeName!=="HTML":!1};var T=function(e,t,n){var r,i=[],s="",o=t.nodeType?[t]:t;while(r=d.match.PSEUDO.exec(e))s+=r[0],e=e.replace(d.match.PSEUDO,"");e=d.relative[e]?e+"*":e;for(var u=0,a=o.length;u<a;u++)h(e,o[u],i,n);return h.filter(s,i)};h.attr=s.attr,h.selectors.attrMap={},s.find=h,s.expr=h.selectors,s.expr[":"]=s.expr.filters,s.unique=h.uniqueSort,s.text=h.getText,s.isXMLDoc=h.isXML,s.contains=h.contains}();var j=/Until$/,F=/^(?:parents|prevUntil|prevAll)/,I=/,/,q=/^.[^:#\[\.,]*$/,R=Array.prototype.slice,U=s.expr.match.POS,z={children:!0,contents:!0,next:!0,prev:!0};s.fn.extend({find:function(e){var t=this,n,r;if(typeof e!="string")return s(e).filter(function(){for(n=0,r=t.length;n<r;n++)if(s.contains(t[n],this))return!0});var i=this.pushStack("","find",e),o,u,a;for(n=0,r=this.length;n<r;n++){o=i.length,s.find(e,this[n],i);if(n>0)for(u=o;u<i.length;u++)for(a=0;a<o;a++)if(i[a]===i[u]){i.splice(u--,1);break}}return i},has:function(e){var t=s(e);return this.filter(function(){for(var e=0,n=t.length;e<n;e++)if(s.contains(this,t[e]))return!0})},not:function(e){return this.pushStack(X(this,e,!1),"not",e)},filter:function(e){return this.pushStack(X(this,e,!0),"filter",e)},is:function(e){return!!e&&(typeof e=="string"?U.test(e)?s(e,this.context).index(this[0])>=0:s.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){var n=[],r,i,o=this[0];if(s.isArray(e)){var u=1;while(o&&o.ownerDocument&&o!==t){for(r=0;r<e.length;r++)s(o).is(e[r])&&n.push({selector:e[r],elem:o,level:u});o=o.parentNode,u++}return n}var a=U.test(e)||typeof e!="string"?s(e,t||this.context):0;for(r=0,i=this.length;r<i;r++){o=this[r];while(o){if(a?a.index(o)>-1:s.find.matchesSelector(o,e)){n.push(o);break}o=o.parentNode;if(!o||!o.ownerDocument||o===t||o.nodeType===11)break}}return n=n.length>1?s.unique(n):n,this.pushStack(n,"closest",e)},index:function(e){return e?typeof e=="string"?s.inArray(this[0],s(e)):s.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(e,t){var n=typeof e=="string"?s(e,t):s.makeArray(e&&e.nodeType?[e]:e),r=s.merge(this.get(),n);return this.pushStack(W(n[0])||W(r[0])?r:s.unique(r))},andSelf:function(){return this.add(this.prevObject)}}),s.each({parent:function(e){var t=e.parentNode;return t&&t.nodeType!==11?t:null},parents:function(e){return s.dir(e,"parentNode")},parentsUntil:function(e,t,n){return s.dir(e,"parentNode",n)},next:function(e){return s.nth(e,2,"nextSibling")},prev:function(e){return s.nth(e,2,"previousSibling")},nextAll:function(e){return s.dir(e,"nextSibling")},prevAll:function(e){return s.dir(e,"previousSibling")},nextUntil:function(e,t,n){return s.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return s.dir(e,"previousSibling",n)},siblings:function(e){return s.sibling(e.parentNode.firstChild,e)},children:function(e){return s.sibling(e.firstChild)},contents:function(e){return s.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:s.makeArray(e.childNodes)}},function(e,t){s.fn[e]=function(n,r){var i=s.map(this,t,n);return j.test(e)||(r=n),r&&typeof r=="string"&&(i=s.filter(r,i)),i=this.length>1&&!z[e]?s.unique(i):i,(this.length>1||I.test(r))&&F.test(e)&&(i=i.reverse()),this.pushStack(i,e,R.call(arguments).join(","))}}),s.extend({filter:function(e,t,n){return n&&(e=":not("+e+")"),t.length===1?s.find.matchesSelector(t[0],e)?[t[0]]:[]:s.find.matches(e,t)},dir:function(e,n,r){var i=[],o=e[n];while(o&&o.nodeType!==9&&(r===t||o.nodeType!==1||!s(o).is(r)))o.nodeType===1&&i.push(o),o=o[n];return i},nth:function(e,t,n,r){t=t||1;var i=0;for(;e;e=e[n])if(e.nodeType===1&&++i===t)break;return e},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling)e.nodeType===1&&e!==t&&n.push(e);return n}});var $="abbr|article|aside|audio|canvas|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",J=/ jQuery\d+="(?:\d+|null)"/g,K=/^\s+/,Q=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,G=/<([\w:]+)/,Y=/<tbody/i,Z=/<|&#?\w+;/,et=/<(?:script|style)/i,tt=/<(?:script|object|embed|option|style)/i,nt=new RegExp("<(?:"+$+")","i"),rt=/checked\s*(?:[^=]|=\s*.checked.)/i,it=/\/(java|ecma)script/i,st=/^\s*<!(?:\[CDATA\[|\-\-)/,ot={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},ut=V(n);ot.optgroup=ot.option,ot.tbody=ot.tfoot=ot.colgroup=ot.caption=ot.thead,ot.th=ot.td,s.support.htmlSerialize||(ot._default=[1,"div<div>","</div>"]),s.fn.extend({text:function(e){return s.isFunction(e)?this.each(function(t){var n=s(this);n.text(e.call(this,t,n.text()))}):typeof e!="object"&&e!==t?this.empty().append((this[0]&&this[0].ownerDocument||n).createTextNode(e)):s.text(this)},wrapAll:function(e){if(s.isFunction(e))return this.each(function(t){s(this).wrapAll(e.call(this,t))});if(this[0]){var t=s(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstChild&&e.firstChild.nodeType===1)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return s.isFunction(e)?this.each(function(t){s(this).wrapInner(e.call(this,t))}):this.each(function(){var t=s(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=s.isFunction(e);return this.each(function(n){s(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){s.nodeName(this,"body")||s(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip
(arguments,!0,function(e){this.nodeType===1&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){this.nodeType===1&&this.insertBefore(e,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this)});if(arguments.length){var e=s.clean(arguments);return e.push.apply(e,this.toArray()),this.pushStack(e,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this.nextSibling)});if(arguments.length){var e=this.pushStack(this,"after",arguments);return e.push.apply(e,s.clean(arguments)),e}},remove:function(e,t){for(var n=0,r;(r=this[n])!=null;n++)if(!e||s.filter(e,[r]).length)!t&&r.nodeType===1&&(s.cleanData(r.getElementsByTagName("*")),s.cleanData([r])),r.parentNode&&r.parentNode.removeChild(r);return this},empty:function(){for(var e=0,t;(t=this[e])!=null;e++){t.nodeType===1&&s.cleanData(t.getElementsByTagName("*"));while(t.firstChild)t.removeChild(t.firstChild)}return this},clone:function(e,t){return e=e==null?!1:e,t=t==null?e:t,this.map(function(){return s.clone(this,e,t)})},html:function(e){if(e===t)return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(J,""):null;if(typeof e=="string"&&!et.test(e)&&(s.support.leadingWhitespace||!K.test(e))&&!ot[(G.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(Q,"<$1></$2>");try{for(var n=0,r=this.length;n<r;n++)this[n].nodeType===1&&(s.cleanData(this[n].getElementsByTagName("*")),this[n].innerHTML=e)}catch(i){this.empty().append(e)}}else s.isFunction(e)?this.each(function(t){var n=s(this);n.html(e.call(this,t,n.html()))}):this.empty().append(e);return this},replaceWith:function(e){return this[0]&&this[0].parentNode?s.isFunction(e)?this.each(function(t){var n=s(this),r=n.html();n.replaceWith(e.call(this,t,r))}):(typeof e!="string"&&(e=s(e).detach()),this.each(function(){var t=this.nextSibling,n=this.parentNode;s(this).remove(),t?s(t).before(e):s(n).append(e)})):this.length?this.pushStack(s(s.isFunction(e)?e():e),"replaceWith",e):this},detach:function(e){return this.remove(e,!0)},domManip:function(e,n,r){var i,o,u,a,f=e[0],l=[];if(!s.support.checkClone&&arguments.length===3&&typeof f=="string"&&rt.test(f))return this.each(function(){s(this).domManip(e,n,r,!0)});if(s.isFunction(f))return this.each(function(i){var o=s(this);e[0]=f.call(this,i,n?o.html():t),o.domManip(e,n,r)});if(this[0]){a=f&&f.parentNode,s.support.parentNode&&a&&a.nodeType===11&&a.childNodes.length===this.length?i={fragment:a}:i=s.buildFragment(e,this,l),u=i.fragment,u.childNodes.length===1?o=u=u.firstChild:o=u.firstChild;if(o){n=n&&s.nodeName(o,"tr");for(var c=0,h=this.length,p=h-1;c<h;c++)r.call(n?at(this[c],o):this[c],i.cacheable||h>1&&c<p?s.clone(u,!0,!0):u)}l.length&&s.each(l,vt)}return this}}),s.buildFragment=function(e,t,r){var i,o,u,a,f=e[0];return t&&t[0]&&(a=t[0].ownerDocument||t[0]),a.createDocumentFragment||(a=n),e.length===1&&typeof f=="string"&&f.length<512&&a===n&&f.charAt(0)==="<"&&!tt.test(f)&&(s.support.checkClone||!rt.test(f))&&(s.support.html5Clone||!nt.test(f))&&(o=!0,u=s.fragments[f],u&&u!==1&&(i=u)),i||(i=a.createDocumentFragment(),s.clean(e,a,i,r)),o&&(s.fragments[f]=u?i:1),{fragment:i,cacheable:o}},s.fragments={},s.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){s.fn[e]=function(n){var r=[],i=s(n),o=this.length===1&&this[0].parentNode;if(o&&o.nodeType===11&&o.childNodes.length===1&&i.length===1)return i[t](this[0]),this;for(var u=0,a=i.length;u<a;u++){var f=(u>0?this.clone(!0):this).get();s(i[u])[t](f),r=r.concat(f)}return this.pushStack(r,e,i.selector)}}),s.extend({clone:function(e,t,n){var r,i,o,u=s.support.html5Clone||!nt.test("<"+e.nodeName)?e.cloneNode(!0):dt(e);if((!s.support.noCloneEvent||!s.support.noCloneChecked)&&(e.nodeType===1||e.nodeType===11)&&!s.isXMLDoc(e)){lt(e,u),r=ct(e),i=ct(u);for(o=0;r[o];++o)i[o]&&lt(r[o],i[o])}if(t){ft(e,u);if(n){r=ct(e),i=ct(u);for(o=0;r[o];++o)ft(r[o],i[o])}}return r=i=null,u},clean:function(e,t,r,i){var o;t=t||n,typeof t.createElement=="undefined"&&(t=t.ownerDocument||t[0]&&t[0].ownerDocument||n);var u=[],a;for(var f=0,l;(l=e[f])!=null;f++){typeof l=="number"&&(l+="");if(!l)continue;if(typeof l=="string")if(!Z.test(l))l=t.createTextNode(l);else{l=l.replace(Q,"<$1></$2>");var c=(G.exec(l)||["",""])[1].toLowerCase(),h=ot[c]||ot._default,p=h[0],d=t.createElement("div");t===n?ut.appendChild(d):V(t).appendChild(d),d.innerHTML=h[1]+l+h[2];while(p--)d=d.lastChild;if(!s.support.tbody){var v=Y.test(l),m=c==="table"&&!v?d.firstChild&&d.firstChild.childNodes:h[1]==="<table>"&&!v?d.childNodes:[];for(a=m.length-1;a>=0;--a)s.nodeName(m[a],"tbody")&&!m[a].childNodes.length&&m[a].parentNode.removeChild(m[a])}!s.support.leadingWhitespace&&K.test(l)&&d.insertBefore(t.createTextNode(K.exec(l)[0]),d.firstChild),l=d.childNodes}var g;if(!s.support.appendChecked)if(l[0]&&typeof (g=l.length)=="number")for(a=0;a<g;a++)pt(l[a]);else pt(l);l.nodeType?u.push(l):u=s.merge(u,l)}if(r){o=function(e){return!e.type||it.test(e.type)};for(f=0;u[f];f++)if(i&&s.nodeName(u[f],"script")&&(!u[f].type||u[f].type.toLowerCase()==="text/javascript"))i.push(u[f].parentNode?u[f].parentNode.removeChild(u[f]):u[f]);else{if(u[f].nodeType===1){var y=s.grep(u[f].getElementsByTagName("script"),o);u.splice.apply(u,[f+1,0].concat(y))}r.appendChild(u[f])}}return u},cleanData:function(e){var t,n,r=s.cache,i=s.event.special,o=s.support.deleteExpando;for(var u=0,a;(a=e[u])!=null;u++){if(a.nodeName&&s.noData[a.nodeName.toLowerCase()])continue;n=a[s.expando];if(n){t=r[n];if(t&&t.events){for(var f in t.events)i[f]?s.event.remove(a,f):s.removeEvent(a,f,t.handle);t.handle&&(t.handle.elem=null)}o?delete a[s.expando]:a.removeAttribute&&a.removeAttribute(s.expando),delete r[n]}}}});var mt=/alpha\([^)]*\)/i,gt=/opacity=([^)]*)/,yt=/([A-Z]|^ms)/g,bt=/^-?\d+(?:px)?$/i,wt=/^-?\d/,Et=/^([\-+])=([\-+.\de]+)/,St={position:"absolute",visibility:"hidden",display:"block"},xt=["Left","Right"],Tt=["Top","Bottom"],Nt,Ct,kt;s.fn.css=function(e,n){return arguments.length===2&&n===t?this:s.access(this,e,n,!0,function(e,n,r){return r!==t?s.style(e,n,r):s.css(e,n)})},s.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Nt(e,"opacity","opacity");return n===""?"1":n}return e.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":s.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,r,i){if(!e||e.nodeType===3||e.nodeType===8||!e.style)return;var o,u,a=s.camelCase(n),f=e.style,l=s.cssHooks[a];n=s.cssProps[a]||a;if(r===t)return l&&"get"in l&&(o=l.get(e,!1,i))!==t?o:f[n];u=typeof r,u==="string"&&(o=Et.exec(r))&&(r=+(o[1]+1)*+o[2]+parseFloat(s.css(e,n)),u="number");if(r==null||u==="number"&&isNaN(r))return;u==="number"&&!s.cssNumber[a]&&(r+="px");if(!l||!("set"in l)||(r=l.set(e,r))!==t)try{f[n]=r}catch(c){}},css:function(e,n,r){var i,o;n=s.camelCase(n),o=s.cssHooks[n],n=s.cssProps[n]||n,n==="cssFloat"&&(n="float");if(o&&"get"in o&&(i=o.get(e,!0,r))!==t)return i;if(Nt)return Nt(e,n)},swap:function(e,t,n){var r={};for(var i in t)r[i]=e.style[i],e.style[i]=t[i];n.call(e);for(i in t)e.style[i]=r[i]}}),s.curCSS=s.css,s.each(["height","width"],function(e,t){s.cssHooks[t]={get:function(e,n,r){var i;if(n)return e.offsetWidth!==0?Lt(e,t,r):(s.swap(e,St,function(){i=Lt(e,t,r)}),i)},set:function(e,t){if(!bt.test(t))return t;t=parseFloat(t);if(t>=0)return t+"px"}}}),s.support.opacity||(s.cssHooks.opacity={get:function(e,t){return gt.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?parseFloat(RegExp.$1)/100+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=s.isNumeric(t)?"alpha(opacity="+t*100+")":"",o=r&&r.filter||n.filter||"";n.zoom=1;if(t>=1&&s.trim(o.replace(mt,""))===""){n.removeAttribute("filter");if(r&&!r.filter)return}n.filter=mt.test(o)?o.replace(mt,i):o+" "+i}}),s(function(){s.support.reliableMarginRight||(s.cssHooks.marginRight={get:function(e,t){var n;return s.swap(e,{display:"inline-block"},function(){t?n=Nt(e,"margin-right","marginRight"):n=e.style.marginRight}),n}})}),n.defaultView&&n.defaultView.getComputedStyle&&(Ct=function(e,t){var n,r,i;return t=t.replace(yt,"-$1").toLowerCase(),(r=e.ownerDocument.defaultView)&&(i=r.getComputedStyle(e,null))&&(n=i.getPropertyValue(t),n===""&&!s.contains(e.ownerDocument.documentElement,e)&&(n=s.style(e,t))),n}),n.documentElement.currentStyle&&(kt=function(e,t){var n,r,i,s=e.currentStyle&&e.currentStyle[t],o=e.style;return s===null&&o&&(i=o[t])&&(s=i),!bt.test(s)&&wt.test(s)&&(n=o.left,r=e.runtimeStyle&&e.runtimeStyle.left,r&&(e.runtimeStyle.left=e.currentStyle.left),o.left=t==="fontSize"?"1em":s||0,s=o.pixelLeft+"px",o.left=n,r&&(e.runtimeStyle.left=r)),s===""?"auto":s}),Nt=Ct||kt,s.expr&&s.expr.filters&&(s.expr.filters.hidden=function(e){var t=e.offsetWidth,n=e.offsetHeight;return t===0&&n===0||!s.support.reliableHiddenOffsets&&(e.style&&e.style.display||s.css(e,"display"))==="none"},s.expr.filters.visible=function(e){return!s.expr.filters.hidden(e)});var At=/%20/g,Ot=/\[\]$/,Mt=/\r?\n/g,_t=/#.*$/,Dt=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,Pt=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,Ht=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,Bt=/^(?:GET|HEAD)$/,jt=/^\/\//,Ft=/\?/,It=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,qt=/^(?:select|textarea)/i,Rt=/\s+/,Ut=/([?&])_=[^&]*/,zt=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,Wt=s.fn.load,Xt={},Vt={},$t,Jt,Kt=["*/"]+["*"];try{$t=i.href}catch(Qt){$t=n.createElement("a"),$t.href="",$t=$t.href}Jt=zt.exec($t.toLowerCase())||[],s.fn.extend({load:function(e,n,r){if(typeof e!="string"&&Wt)return Wt.apply(this,arguments);if(!this.length)return this;var i=e.indexOf(" ");if(i>=0){var o=e.slice(i,e.length);e=e.slice(0,i)}var u="GET";n&&(s.isFunction(n)?(r=n,n=t):typeof n=="object"&&(n=s.param(n,s.ajaxSettings.traditional),u="POST"));var a=this;return s.ajax({url:e,type:u,dataType:"html",data:n,complete:function(e,t,n){n=e.responseText,e.isResolved()&&(e.done(function(e){n=e}),a.html(o?s("<div>").append(n.replace(It,"")).find(o):n)),r&&a.each(r,[n,t,e])}}),this},serialize:function(){return s.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?s.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||qt.test(this.nodeName)||Pt.test(this.type))}).map(function(e,t){var n=s(this).val();return n==null?null:s.isArray(n)?s.map(n,function(e,n){return{name:t.name,value:e.replace(Mt,"\r\n")}}):{name:t.name,value:n.replace(Mt,"\r\n")}}).get()}}),s.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(e,t){s.fn[t]=function(e){return this.on(t,e)}}),s.each(["get","post"],function(e,n){s[n]=function(e,r,i,o){return s.isFunction(r)&&(o=o||i,i=r,r=t),s.ajax({type:n,url:e,data:r,success:i,dataType:o})}}),s.extend({getScript:function(e,n){return s.get(e,t,n,"script")},getJSON:function(e,t,n){return s.get(e,t,n,"json")},ajaxSetup:function(e,t){return t?Zt(e,s.ajaxSettings):(t=e,e=s.ajaxSettings),Zt(e,t),e},ajaxSettings:{url:$t,isLocal:Ht.test(Jt[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":Kt},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":s.parseJSON,"text xml":s.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:Gt(Xt),ajaxTransport:Gt(Vt),ajax:function(e,n){function S(e,n,c,h){if(y===2)return;y=2,m&&clearTimeout(m),v=t,p=h||"",E.readyState=e>0?4:0;var d,g,w,S=n,x=c?tn(r,E,c):t,T,N;if(e>=200&&e<300||e===304){if(r.ifModified){if(T=E.getResponseHeader("Last-Modified"))s.lastModified[l]=T;if(N=E.getResponseHeader("Etag"))s.etag[l]=N}if(e===304)S="notmodified",d=!0;else try{g=nn(r,x),S="success",d=!0}catch(C){S="parsererror",w=C}}else{w=S;if(!S||e)S="error",e<0&&(e=0)}E.status=e,E.statusText=""+(n||S),d?u.resolveWith(i,[g,S,E]):u.rejectWith(i,[E,S,w]),E.statusCode(f),f=t,b&&o.trigger("ajax"+(d?"Success":"Error"),[E,r,d?g:w]),a.fireWith(i,[E,S]),b&&(o.trigger("ajaxComplete",[E,r]),--s.active||s.event.trigger("ajaxStop"))}typeof e=="object"&&(n=e,e=t),n=n||{};var r=s.ajaxSetup({},n),i=r.context||r,o=i!==r&&(i.nodeType||i instanceof s)?s(i):s.event,u=s.Deferred(),a=s.Callbacks("once memory"),f=r.statusCode||{},l,c={},h={},p,d,v,m,g,y=0,b,w,E={readyState:0,setRequestHeader:function(e,t){if(!y){var n=e.toLowerCase();e=h[n]=h[n]||e,c[e]=t}return this},getAllResponseHeaders:function(){return y===2?p:null},getResponseHeader:function(e){var n;if(y===2){if(!d){d={};while(n=Dt.exec(p))d[n[1].toLowerCase()]=n[2]}n=d[e.toLowerCase()]}return n===t?null:n},overrideMimeType:function(e){return y||(r.mimeType=e),this},abort:function(e){return e=e||"abort",v&&v.abort(e),S(0,e),this}};u.promise(E),E.success=E.done,E.error=E.fail,E.complete=a.add,E.statusCode=function(e){if(e){var t;if(y<2)for(t in e)f[t]=[f[t],e[t]];else t=e[E.status],E.then(t,t)}return this},r.url=((e||r.url)+"").replace(_t,"").replace(jt,Jt[1]+"//"),r.dataTypes=s.trim(r.dataType||"*").toLowerCase().split(Rt),r.crossDomain==null&&(g=zt.exec(r.url.toLowerCase()),r.crossDomain=!(!g||g[1]==Jt[1]&&g[2]==Jt[2]&&(g[3]||(g[1]==="http:"?80:443))==(Jt[3]||(Jt[1]==="http:"?80:443)))),r.data&&r.processData&&typeof r.data!="string"&&(r.data=s.param(r.data,r.traditional)),Yt(Xt,r,n,E);if(y===2)return!1;b=r.global,r.type=r.type.toUpperCase(),r.hasContent=!Bt.test(r.type),b&&s.active++===0&&s.event.trigger("ajaxStart");if(!r.hasContent){r.data&&(r.url+=(Ft.test(r.url)?"&":"?")+r.data,delete r.data),l=r.url;if(r.cache===!1){var x=s.now(),T=r.url.replace(Ut,"$1_="+x);r.url=T+(T===r.url?(Ft.test(r.url)?"&":"?")+"_="+x:"")}}(r.data&&r.hasContent&&r.contentType!==!1||n.contentType)&&E.setRequestHeader("Content-Type",r.contentType),r.ifModified&&(l=l||r.url,s.lastModified[l]&&E.setRequestHeader("If-Modified-Since",s.lastModified[l]),s.etag[l]&&E.setRequestHeader("If-None-Match",s.etag[l])),E.setRequestHeader("Accept",r.dataTypes[0]&&r.accepts[r.dataTypes[0]]?r.accepts[r.dataTypes[0]]+(r.dataTypes[0]!=="*"?", "+Kt+"; q=0.01":""):r.accepts["*"]);for(w in r.headers)E.setRequestHeader(w,r.headers[w]);if(!r.beforeSend||r.beforeSend.call(i,E,r)!==!1&&y!==2){for(w in{success:1,error:1,complete:1})E[w](r[w]);v=Yt(Vt,r,n,E);if(!v)S(-1,"No Transport");else{E.readyState=1,b&&o.trigger("ajaxSend",[E,r]),r.async&&r.timeout>0&&(m=setTimeout(function(){E.abort("timeout")},r.timeout));try{y=1,v.send(c,S)}catch(N){if(!(y<2))throw N;S(-1,N)}}return E}return E.abort(),!1},param:function(e,n){var r=[],i=function(e,t){t=s.isFunction(t)?t():t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};n===t&&(n=s.ajaxSettings.traditional);if(s.isArray(e)||e.jquery&&!s.isPlainObject(e))s.each(e,function(){i(this.name,this.value)});else for(var o in e)en(o,e[o],n,i);return r.join("&").replace(At,"+")}}),s.extend({active:0,lastModified:{},etag:{}});var rn=s.now(),sn=/(\=)\?(&|$)|\?\?/i;s.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return s.expando+"_"+rn++}}),s.ajaxPrefilter("json jsonp",function(t,n,r){var i=t.contentType==="application/x-www-form-urlencoded"&&typeof t.data=="string";if(t.dataTypes[0]==="jsonp"||t.jsonp!==!1&&(sn.test(t.url)||i&&sn.test(t.data))){var o,u=t.jsonpCallback=s.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a=e[u],f=t.url,l=t.data,c="$1"+u+"$2";return t.jsonp!==!1&&(f=f.replace(sn,c),t.url===f&&(i&&(l=l.replace(sn,c)),t.data===l&&(f+=(/\?/.test(f)?"&":"?")+t.jsonp+"="+u))),t.url=f,t.data=l,e[u]=function(e){o=[e]},r.always(function(){e[u]=a,o&&s.isFunction(a)&&e[u](o[0])}),t.converters["script json"]=function(){return o||s.error(u+" was not called"),o[0]},t.dataTypes[0]="json","script"}}),s.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(e){return s.globalEval(e),e}}}),s.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),s.ajaxTransport("script",function(e){if(e.crossDomain){var r,i=n.head||n.getElementsByTagName("head")[0]||n.documentElement;return{send:function(s,o){r=n.createElement("script"),r.async="async",e.scriptCharset&&(r.charset=e.scriptCharset),r.src=e.url,r.onload=r.onreadystatechange=function(e,n){if(n||!r.readyState||/loaded|complete/.test(r.readyState))r.onload=r.onreadystatechange=null,i&&r.parentNode&&i.removeChild(r),r=t,n||o(200,"success")},i.insertBefore(r,i.firstChild)},abort:function(){r&&r.onload(0,1)}}}});var on=e.ActiveXObject?function(){for(var e in an)an[e](0,1)}:!1,un=0,an;s.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&fn()||ln()}:fn,function(e){s.extend(s.support,{ajax:!!e,cors:!!e&&"withCredentials"in e})}(s.ajaxSettings.xhr()),s.support.ajax&&s.ajaxTransport(function(n){if(!n.crossDomain||s.support.cors){var r;return{send:function(i,o){var u=n.xhr(),a,f;n.username?u.open(n.type,n.url,n.async,n.username,n.password):u.open(n.type,n.url,n.async);if(n.xhrFields)for(f in n.xhrFields)u[f]=n.xhrFields[f];n.mimeType&&u.overrideMimeType&&u.overrideMimeType(n.mimeType),!n.crossDomain&&!i["X-Requested-With"]&&(i["X-Requested-With"]="XMLHttpRequest");try{for(f in i)u.setRequestHeader(f,i[f])}catch(l){}u.send(n.hasContent&&n.data||null),r=function(e,i){var f,l,c,h,p;try{if(r&&(i||u.readyState===4)){r=t,a&&(u.onreadystatechange=s.noop,on&&delete an[a]);if(i)u.readyState!==4&&u.abort();else{f=u.status,c=u.getAllResponseHeaders(),h={},p=u.responseXML,p&&p.documentElement&&(h.xml=p),h.text=u.responseText;try{l=u.statusText}catch(d){l=""}!f&&n.isLocal&&!n.crossDomain?f=h.text?200:404:f===1223&&(f=204)}}}catch(v){i||o(-1,v)}h&&o(f,l,h,c)},!n.async||u.readyState===4?r():(a=++un,on&&(an||(an={},s(e).unload(on)),an[a]=r),u.onreadystatechange=r)},abort:function(){r&&r(0,1)}}}});var cn={},hn,pn,dn=/^(?:toggle|show|hide)$/,vn=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,mn,gn=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],yn;s.fn.extend({show:function(e,t,n){var r,i;if(e||e===0)return this.animate(En("show",3),e,t,n);for(var o=0,u=this.length;o<u;o++)r=this[o],r.style&&(i=r.style.display,!s._data(r,"olddisplay")&&i==="none"&&(i=r.style.display=""),i===""&&s.css(r,"display")==="none"&&s._data(r,"olddisplay",Sn(r.nodeName)));for(o=0;o<u;o++){r=this[o];if(r.style){i=r.style.display;if(i===""||i==="none")r.style.display=s._data(r,"olddisplay")||""}}return this},hide:function(e,t,n){if(e||e===0)return this.animate(En("hide",3),e,t,n);var r,i,o=0,u=this.length;for(;o<u;o++)r=this[o],r.style&&(i=s.css(r,"display"),i!=="none"&&!s._data(r,"olddisplay")&&s._data(r,"olddisplay",i));for(o=0;o<u;o++)this[o].style&&(this[o].style.display="none");return this},_toggle:s.fn.toggle,toggle:function(e,t,n){var r=typeof e=="boolean";return s.isFunction(e)&&s.isFunction(t)?this._toggle.apply(this,arguments):e==null||r?this.each(function(){var t=r?e:s(this).is(":hidden");s(this)[t?"show":"hide"]()}):this.animate(En("toggle",3),e,t,n),this},fadeTo:function(e,t,n,r){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){function o(){i.queue===!1&&s._mark(this);var t=s.extend({},i),n=this.nodeType===1,r=n&&s(this).is(":hidden"),o,u,a,f,l,c,h,p,d;t.animatedProperties={};for(a in e){o=s.camelCase(a),a!==o&&(e[o]=e[a],delete e[a]),u=e[o],s.isArray(u)?(t.animatedProperties[o]=u[1],u=e[o]=u[0]):t.animatedProperties[o]=t.specialEasing&&t.specialEasing[o]||t.easing||"swing";if(u==="hide"&&r||u==="show"&&!r)return t.complete.call(this);n&&(o==="height"||o==="width")&&(t.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],s.css(this,"display")==="inline"&&s.css(this,"float")==="none"&&(!s.support.inlineBlockNeedsLayout||Sn(this.nodeName)==="inline"?this.style.display="inline-block":this.style.zoom=1))}t.overflow!=null&&(this.style.overflow="hidden");for(a in e)f=new s.fx(this,t,a),u=e[a],dn.test(u)?(d=s._data(this,"toggle"+a)||(u==="toggle"?r?"show":"hide":0),d?(s._data(this,"toggle"+a,d==="show"?"hide":"show"),f[d]()):f[u]()):(l=vn.exec(u),c=f.cur(),l?(h=parseFloat(l[2]),p=l[3]||(s.cssNumber[a]?"":"px"),p!=="px"&&(s.style(this,a,(h||1)+p),c=(h||1)/f.cur()*c,s.style(this,a,c+p)),l[1]&&(h=(l[1]==="-="?-1:1)*h+c),f.custom(c,h,p)):f.custom(c,u,""));return!0}var i=s.speed(t,n,r);return s.isEmptyObject(e)?this.each(i.complete,[!1]):(e=s.extend({},e),i.queue===!1?this.each(o):this.queue(i.queue,o))},stop:function(e,n,r){return typeof e!="string"&&(r=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){function u(e,t,n){var i=t[n];s.removeData(e,n,!0),i.stop(r)}var t,n=!1,i=s.timers,o=s._data(this);r||s._unmark(!0,this);if(e==null)for(t in o)o[t]&&o[t].stop&&t.indexOf(".run")===t.length-4&&u(this,o,t);else o[t=e+".run"]&&o[t].stop&&u(this,o,t);for(t=i.length;t--;)i[t].elem===this&&(e==null||i[t].queue===e)&&(r?i[t](!0):i[t].saveState(),n=!0,i.splice(t,1));(!r||!n)&&s.dequeue(this,e)})}}),s.each({slideDown:En("show",1),slideUp:En("hide",1),slideToggle:En("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){s.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),s.extend({speed:function(e,t,n){var r=e&&typeof e=="object"?s.extend({},e):{complete:n||!n&&t||s.isFunction(e)&&e,duration:e,easing:n&&t||t&&!s.isFunction(t)&&t};r.duration=s.fx.off?0:typeof r.duration=="number"?r.duration:r.duration in s.fx.speeds?s.fx.speeds[r.duration]:s.fx.speeds._default;if(r.queue==null||r.queue===!0)r.queue="fx";return r.old=r.complete,r.complete=function(e){s.isFunction(r.old)&&r.old.call(this),r.queue?s.dequeue(this,r.queue):e!==!1&&s._unmark(this)},r},easing:{linear:function(e,t,n,r){return n+r*e},swing:function(e,t,n,r){return(-Math.cos(e*Math.PI)/2+.5)*r+n}},timers:[],fx:function(e,t,n){this.options=t,this.elem=e,this.prop=n,t.orig=t.orig||{}}}),s.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(s.fx.step[this.prop]||s.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]==null||!!this.elem.style&&this.elem.style[this.prop]!=null){var e,t=s.css(this.elem,this.prop);return isNaN(e=parseFloat(t))?!t||t==="auto"?0:t:e}return this.elem[this.prop]},custom:function(e,n,r){function u(e){return i.step(e)}var i=this,o=s.fx;this.startTime=yn||bn(),this.end=n,this.now=this.start=e,this.pos=this.state=0,this.unit=r||this.unit||(s.cssNumber[this.prop]?"":"px"),u.queue=this.options.queue,u.elem=this.elem,u.saveState=function(){i.options.hide&&s._data(i.elem,"fxshow"+i.prop)===t&&s._data(i.elem,"fxshow"+i.prop,i.start)},u()&&s.timers.push(u)&&!mn&&(mn=setInterval(o.tick,o.interval))},show:function(){var e=s._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=e||s.style(this.elem,this.prop),this.options.show=!0,e!==t?this.custom(this.cur(),e):this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur()),s(this.elem).show()},hide:function(){this.options.orig[this.prop]=s._data(this.elem,"fxshow"+this.prop)||s.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(e){var t,n,r,i=yn||bn(),o=!0,u=this.elem,a=this.options;if(e||i>=a.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),a.animatedProperties[this.prop]=!0;for(t in a.animatedProperties)a.animatedProperties[t]!==!0&&(o=!1);if(o){a.overflow!=null&&!s.support.shrinkWrapBlocks&&s.each(["","X","Y"],function(e,t){u.style["overflow"+t]=a.overflow[e]}),a.hide&&s(u).hide();if(a.hide||a.show)for(t in a.animatedProperties)s.style(u,t,a.orig[t]),s.removeData(u,"fxshow"+t,!0),s.removeData(u,"toggle"+t,!0);r=a.complete,r&&(a.complete=!1,r.call(u))}return!1}return a.duration==Infinity?this.now=i:(n=i-this.startTime,this.state=n/a.duration,this.pos=s.easing[a.animatedProperties[this.prop]](this.state,n,0,1,a.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update(),!0}},s.extend(s.fx,{tick:function(){var e,t=s.timers,n=0;for(;n<t.length;n++)e=t[n],!e()&&t[n]===e&&t.splice(n--,1);t.length||s.fx.stop()},interval:13,stop:function(){clearInterval(mn),mn=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(e){s.style(e.elem,"opacity",e.now)},_default:function(e){e.elem.style&&e.elem.style[e.prop]!=null?e.elem.style[e.prop]=e.now+e.unit:e.elem[e.prop]=e.now}}}),s.each(["width","height"],function(e,t){s.fx.step[t]=function(e){s.style(e.elem,t,Math.max(0,e.now)+e.unit)}}),s.expr&&s.expr.filters&&(s.expr.filters.animated=function(e){return s.grep(s.timers,function(t){return e===t.elem}).length});var xn=/^t(?:able|d|h)$/i,Tn=/^(?:body|html)$/i;"getBoundingClientRect"in n.documentElement?s.fn.offset=function(e){var t=this[0],n;if(e)return this.each(function(t){s.offset.setOffset(this,e,t)});if(!t||!t.ownerDocument)return null;if(t===t.ownerDocument.body)return s.offset.bodyOffset(t);try{n=t.getBoundingClientRect()}catch(r){}var i=t.ownerDocument,o=i.documentElement;if(!n||!s.contains(o,t))return n?{top:n.top,left:n.left}:{top:0,left:0};var u=i.body,a=Nn(i),f=o.clientTop||u.clientTop||0,l=o.clientLeft||u.clientLeft||0,c=a.pageYOffset||s.support.boxModel&&o.scrollTop||u.scrollTop,h=a.pageXOffset||s.support.boxModel&&o.scrollLeft||u.scrollLeft,p=n.top+c-f,d=n.left+h-l;return{top:p,left:d}}:s.fn.offset=function(e){var t=this[0];if(e)return this.each(function(t){s.offset.setOffset(this,e,t)});if(!t||!t.ownerDocument)return null;if(t===t.ownerDocument.body)return s.offset.bodyOffset(t);var n,r=t.offsetParent,i=t,o=t.ownerDocument,u=o.documentElement,a=o.body,f=o.defaultView,l=f?f.getComputedStyle(t,null):t.currentStyle,c=t.offsetTop,h=t.offsetLeft;while((t=t.parentNode)&&t!==a&&t!==u){if(s.support.fixedPosition&&l.position==="fixed")break;n=f?f.getComputedStyle(t,null):t.currentStyle,c-=t.scrollTop,h-=t.scrollLeft,t===r&&(c+=t.offsetTop,h+=t.offsetLeft,s.support.doesNotAddBorder&&(!s.support.doesAddBorderForTableAndCells||!xn.test(t.nodeName))&&(c+=parseFloat(n.borderTopWidth)||0,h+=parseFloat(n.borderLeftWidth)||0),i=r,r=t.offsetParent),s.support.subtractsBorderForOverflowNotVisible&&n.overflow!=="visible"&&(c+=parseFloat(n.borderTopWidth)||0,h+=parseFloat(n.borderLeftWidth)||0),l=n}if(l.position==="relative"||l.position==="static")c+=a.offsetTop,h+=a.offsetLeft;return s.support.fixedPosition&&l.position==="fixed"&&(c+=Math.max(u.scrollTop,a.scrollTop),h+=Math.max(u.scrollLeft,a.scrollLeft)),{top:c,left:h}},s.offset={bodyOffset:function(e){var t=e.offsetTop,n=e.offsetLeft;return s.support.doesNotIncludeMarginInBodyOffset&&(t+=parseFloat(s.css(e,"marginTop"))||0,n+=parseFloat(s.css(e,"marginLeft"))||0),{top:t,left:n}},setOffset:function(e,t,n){var r=s.css(e,"position");r==="static"&&(e.style.position="relative");var i=s(e),o=i.offset(),u=s.css(e,"top"),a=s.css(e,"left"),f=(r==="absolute"||r==="fixed")&&s.inArray("auto",[u,a])>-1,l={},c={},h,p;f?(c=i.position(),h=c.top,p=c.left):(h=parseFloat(u)||0,p=parseFloat(a)||0),s.isFunction(t)&&(t=t.call(e,n,o)),t.top!=null&&(l.top=t.top-o.top+h),t.left!=null&&(l.left=t.left-o.left+p),"using"in t?t.using.call(e,l):i.css(l)}},s.fn.extend({position:function(){if(!this[0])return null;var e=this[0],t=this.offsetParent(),n=this.offset(),r=Tn.test(t[0].nodeName)?{top:0,left:0}:t.offset();return n.top-=parseFloat(s.css(e,"marginTop"))||0,n.left-=parseFloat(s.css(e,"marginLeft"))||0,r.top+=parseFloat(s.css(t[0],"borderTopWidth"))||0,r.left+=parseFloat(s.css(t[0],"borderLeftWidth"))||0,{top:n.top-r.top,left:n.left-r.left}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||n.body;while(e&&!Tn.test(e.nodeName)&&s.css(e,"position")==="static")e=e.offsetParent;return e})}}),s.each(["Left","Top"],function(e,n){var r="scroll"+n;s.fn[r]=function(n){var i,o;return n===t?(i=this[0],i?(o=Nn(i),o?"pageXOffset"in o?o[e?"pageYOffset":"pageXOffset"]:s.support.boxModel&&o.document.documentElement[r]||o.document.body[r]:i[r]):null):this.each(function(){o=Nn(this),o?o.scrollTo(e?s(o).scrollLeft():n,e?n:s(o).scrollTop()):this[r]=n})}}),s.each(["Height","Width"],function(e,n){var r=n.toLowerCase();s.fn["inner"+n]=function(){var e=this[0];return e?e.style?parseFloat(s.css(e,r,"padding")):this[r]():null},s.fn["outer"+n]=function(e){var t=this[0];return t?t.style?parseFloat(s.css(t,r,e?"margin":"border")):this[r]():null},s.fn[r]=function(e){var i=this[0];if(!i)return e==null?null:this;if(s.isFunction(e))return this.each(function(t){var n=s(this);n[r](e.call(this,t,n[r]()))});if(s.isWindow(i)){var o=i.document.documentElement["client"+n],u=i.document.body;return i.document.compatMode==="CSS1Compat"&&o||u&&u["client"+n]||o}if(i.nodeType===9)return Math.max(i.documentElement["client"+n],i.body["scroll"+n],i.documentElement["scroll"+n],i.body["offset"+n],i.documentElement["offset"+n]);if(e===t){var a=s.css(i,r),f=parseFloat(a);return s.isNumeric(f)?f:a}return this.css(r,typeof e=="string"?e:e+"px")}}),e.jQuery=e.$=s,typeof define=="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return s})})(window),function(e,t){var n;e.rails=n={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with]",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not(button[type])",disableSelector:"input[data-disable-with], button[data-disable-with], textarea[data-disable-with]",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input:file",linkDisableSelector:"a[data-disable-with]",CSRFProtection:function(t){var n=e('meta[name="csrf-token"]').attr("content");n&&t.setRequestHeader("X-CSRF-Token",n)},fire:function(t,n,r){var i=e.Event(n);return t.trigger(i,r),i.result!==!1},confirm:function(e){return confirm(e)},ajax:function(t){return e.ajax(t)},handleRemote:function(r){var i,s,o,u=r.data("cross-domain")||null,a=r.data("type")||e.ajaxSettings&&e.ajaxSettings.dataType,f;if(n.fire(r,"ajax:before")){if(r.is("form")){i=r.attr("method"),s=r.attr("action"),o=r.serializeArray();var l=r.data("ujs:submit-button");l&&(o.push(l),r.data("ujs:submit-button",null))}else r.is(n.inputChangeSelector)?(i=r.data("method"),s=r.data("url"),o=r.serialize(),r.data("params")&&(o=o+"&"+r.data("params"))):(i=r.data("method"),s=r.attr("href"),o=r.data("params")||null);return f={type:i||"GET",data:o,dataType:a,crossDomain:u,beforeSend:function(e,i){return i.dataType===t&&e.setRequestHeader("accept","*/*;q=0.5, "+i.accepts.script),n.fire(r,"ajax:beforeSend",[e,i])},success:function(e,t,n){r.trigger("ajax:success",[e,t,n])},complete:function(e,t){r.trigger("ajax:complete",[e,t])},error:function(e,t,n){r.trigger("ajax:error",[e,t,n])}},s&&(f.url=s),n.ajax(f)}return!1},handleMethod:function(n){var r=n.attr("href"),i=n.data("method"),s=n.attr("target"),o=e("meta[name=csrf-token]").attr("content"),u=e("meta[name=csrf-param]").attr("content"),a=e('<form method="post" action="'+r+'"></form>'),f='<input name="_method" value="'+i+'" type="hidden" />';u!==t&&o!==t&&(f+='<input name="'+u+'" value="'+o+'" type="hidden" />'),s&&a.attr("target",s),a.hide().append(f).appendTo("body"),a.submit()},disableFormElements:function(t){t.find(n.disableSelector).each(function(){var t=e(this),n=t.is("button")?"html":"val";t.data("ujs:enable-with",t[n]()),t[n](t.data("disable-with")),t.prop("disabled",!0)})},enableFormElements:function(t){t.find(n.enableSelector).each(function(){var t=e(this),n=t.is("button")?"html":"val";t.data("ujs:enable-with")&&t[n](t.data("ujs:enable-with")),t.prop("disabled",!1)})},allowAction:function(e){var t=e.data("confirm"),r=!1,i;return t?(n.fire(e,"confirm")&&(r=n.confirm(t),i=n.fire(e,"confirm:complete",[r])),r&&i):!0},blankInputs:function(t,n,r){var i=e(),s,o=n||"input,textarea";return t.find(o).each(function(){s=e(this);if(r?s.val():!s.val())i=i.add(s)}),i.length?i:!1},nonBlankInputs:function(e,t){return n.blankInputs(e,t,!0)},stopEverything:function(t){return e(t.target).trigger("ujs:everythingStopped"),t.stopImmediatePropagation(),!1},callFormSubmitBindings
:function(n,r){var i=n.data("events"),s=!0;return i!==t&&i.submit!==t&&e.each(i.submit,function(e,t){if(typeof t.handler=="function")return s=t.handler(r)}),s},disableElement:function(e){e.data("ujs:enable-with",e.html()),e.html(e.data("disable-with")),e.bind("click.railsDisable",function(e){return n.stopEverything(e)})},enableElement:function(e){e.data("ujs:enable-with")!==t&&(e.html(e.data("ujs:enable-with")),e.data("ujs:enable-with",!1)),e.unbind("click.railsDisable")}},e.ajaxPrefilter(function(e,t,r){e.crossDomain||n.CSRFProtection(r)}),e(document).delegate(n.linkDisableSelector,"ajax:complete",function(){n.enableElement(e(this))}),e(document).delegate(n.linkClickSelector,"click.rails",function(r){var i=e(this),s=i.data("method"),o=i.data("params");if(!n.allowAction(i))return n.stopEverything(r);i.is(n.linkDisableSelector)&&n.disableElement(i);if(i.data("remote")!==t)return(r.metaKey||r.ctrlKey)&&(!s||s==="GET")&&!o?!0:(n.handleRemote(i)===!1&&n.enableElement(i),!1);if(i.data("method"))return n.handleMethod(i),!1}),e(document).delegate(n.inputChangeSelector,"change.rails",function(t){var r=e(this);return n.allowAction(r)?(n.handleRemote(r),!1):n.stopEverything(t)}),e(document).delegate(n.formSubmitSelector,"submit.rails",function(r){var i=e(this),s=i.data("remote")!==t,o=n.blankInputs(i,n.requiredInputSelector),u=n.nonBlankInputs(i,n.fileInputSelector);if(!n.allowAction(i))return n.stopEverything(r);if(o&&i.attr("novalidate")==t&&n.fire(i,"ajax:aborted:required",[o]))return n.stopEverything(r);if(s)return u?n.fire(i,"ajax:aborted:file",[u]):!e.support.submitBubbles&&e().jquery<"1.7"&&n.callFormSubmitBindings(i,r)===!1?n.stopEverything(r):(n.handleRemote(i),!1);setTimeout(function(){n.disableFormElements(i)},13)}),e(document).delegate(n.formInputClickSelector,"click.rails",function(t){var r=e(this);if(!n.allowAction(r))return n.stopEverything(t);var i=r.attr("name"),s=i?{name:i,value:r.val()}:null;r.closest("form").data("ujs:submit-button",s)}),e(document).delegate(n.formSubmitSelector,"ajax:beforeSend.rails",function(t){this==t.target&&n.disableFormElements(e(this))}),e(document).delegate(n.formSubmitSelector,"ajax:complete.rails",function(t){this==t.target&&n.enableFormElements(e(this))})}(jQuery),window.tinyMCEPreInit={base:"/assets/tiny_mce",suffix:""},function(e){function s(){function n(e){e==="remove"&&this.each(function(e,t){var n=s(t);n&&n.remove()}),this.find("span.mceEditor,div.mceEditor").each(function(e,t){var n=tinyMCE.get(t.id.replace(/_parent$/,""));n&&n.remove()})}function r(e){var r=this,i;if(e!==t)n.call(r),r.each(function(t,n){var r;(r=tinyMCE.get(n.id))&&r.setContent(e)});else if(r.length>0)if(i=tinyMCE.get(r[0].id))return i.getContent()}function s(e){var t=null;return e&&e.id&&i.tinymce&&(t=tinyMCE.get(e.id)),t}function o(e){return!!(e&&e.length&&i.tinymce&&e.is(":tinymce"))}var u={};e.each(["text","html","val"],function(n,i){var a=u[i]=e.fn[i],f=i==="text";e.fn[i]=function(n){var i=this;if(!o(i))return a.apply(i,arguments);if(n!==t)return r.call(i.filter(":tinymce"),n),a.apply(i.not(":tinymce"),arguments),i;var u="",l=arguments;return(f?i:i.eq(0)).each(function(t,n){var r=s(n);u+=r?f?r.getContent().replace(/<(?:"[^"]*"|'[^']*'|[^'">])*>/g,""):r.getContent():a.apply(e(n),l)}),u}}),e.each(["append","prepend"],function(n,r){var i=u[r]=e.fn[r],a=r==="prepend";e.fn[r]=function(e){var n=this;if(!o(n))return i.apply(n,arguments);if(e!==t)return n.filter(":tinymce").each(function(t,n){var r=s(n);r&&r.setContent(a?e+r.getContent():r.getContent()+e)}),i.apply(n.not(":tinymce"),arguments),n}}),e.each(["remove","replaceWith","replaceAll","empty"],function(t,r){var i=u[r]=e.fn[r];e.fn[r]=function(){return n.call(this,r),i.apply(this,arguments)}}),u.attr=e.fn.attr,e.fn.attr=function(n,i){var a=this;if(!n||n!=="value"||!o(a))return i!==t?u.attr.call(a,n,i):u.attr.call(a,n);if(i!==t)return r.call(a.filter(":tinymce"),i),u.attr.call(a.not(":tinymce"),n,i),a;var f=a[0],l=s(f);return l?l.getContent():u.attr.call(e(f),n,i)}}var t,n,r=[],i=window;e.fn.tinymce=function(t){function y(){var n=[],r=0;s&&(s(),s=null),o.each(function(e,i){var s,u=i.id,a=t.oninit;u||(i.id=u=tinymce.DOM.uniqueId()),s=new tinymce.Editor(u,t),n.push(s),s.onInit.add(function(){var e,t=a;o.css("visibility",""),a&&++r==n.length&&(tinymce.is(t,"string")&&(e=t.indexOf(".")===-1?null:tinymce.resolve(t.replace(/\.\w+$/,"")),t=tinymce.resolve(t)),t.apply(e||tinymce,n))})}),e.each(n,function(e,t){t.render()})}var o=this,u,l,h,p,v,m="",g="";return o.length?t?(o.css("visibility","hidden"),!i.tinymce&&!n&&(u=t.script_url)?(n=1,h=u.substring(0,u.lastIndexOf("/")),/_(src|dev)\.js/g.test(u)&&(g="_src"),p=u.lastIndexOf("?"),p!=-1&&(m=u.substring(p+1)),i.tinyMCEPreInit=i.tinyMCEPreInit||{base:h,suffix:g,query:m},u.indexOf("gzip")!=-1&&(v=t.language||"en",u=u+(/\?/.test(u)?"&":"?")+"js=true&core=true&suffix="+escape(g)+"&themes="+escape(t.theme)+"&plugins="+escape(t.plugins)+"&languages="+v,i.tinyMCE_GZ||(tinyMCE_GZ={start:function(){function n(e){tinymce.ScriptLoader.markDone(tinyMCE.baseURI.toAbsolute(e))}tinymce.suffix=g,n("langs/"+v+".js"),n("themes/"+t.theme+"/editor_template"+g+".js"),n("themes/"+t.theme+"/langs/"+v+".js"),e.each(t.plugins.split(","),function(e,t){t&&(n("plugins/"+t+"/editor_plugin"+g+".js"),n("plugins/"+t+"/langs/"+v+".js"))})},end:function(){}})),e.ajax({type:"GET",url:u,dataType:"script",cache:!0,success:function(){tinymce.dom.Event.domLoaded=1,n=2,t.script_loaded&&t.script_loaded(),y(),e.each(r,function(e,t){t()})}})):n===1?r.push(y):y(),o):tinyMCE.get(o[0].id):o},e.extend(e.expr[":"],{tinymce:function(e){return!!e.id&&!!tinyMCE.get(e.id)}})}(jQuery),function(e){var t=/^\s*|\s*$/g,n,r="B".replace(/A(.)|B/,"$1")==="$1",i={majorVersion:"3",minorVersion:"5b3",releaseDate:"2012-03-29",_init:function(){function c(e){return e.src&&/tiny_mce(|_gzip|_jquery|_prototype|_full)(_dev|_src)?.js/.test(e.src)?(/_(src|dev)\.js/g.test(e.src)&&(t.suffix="_src"),(f=e.src.indexOf("?"))!=-1&&(t.query=e.src.substring(f+1)),t.baseURL=e.src.substring(0,e.src.lastIndexOf("/")),a&&t.baseURL.indexOf("://")==-1&&t.baseURL.indexOf("/")!==0&&(t.baseURL=a+t.baseURL),t.baseURL):null}var t=this,n=document,r=navigator,i=r.userAgent,s,o,u,a,f,l;t.isOpera=e.opera&&opera.buildNumber,t.isWebKit=/WebKit/.test(i),t.isIE=!t.isWebKit&&!t.isOpera&&/MSIE/gi.test(i)&&/Explorer/gi.test(r.appName),t.isIE6=t.isIE&&/MSIE [56]/.test(i),t.isIE7=t.isIE&&/MSIE [7]/.test(i),t.isIE8=t.isIE&&/MSIE [8]/.test(i),t.isIE9=t.isIE&&/MSIE [9]/.test(i),t.isGecko=!t.isWebKit&&/Gecko/.test(i),t.isMac=i.indexOf("Mac")!=-1,t.isAir=/adobeair/i.test(i),t.isIDevice=/(iPad|iPhone)/.test(i),t.isIOS5=t.isIDevice&&i.match(/AppleWebKit\/(\d*)/)[1]>=534;if(e.tinyMCEPreInit){t.suffix=tinyMCEPreInit.suffix,t.baseURL=tinyMCEPreInit.base,t.query=tinyMCEPreInit.query;return}t.suffix="",o=n.getElementsByTagName("base");for(s=0;s<o.length;s++)l=o[s].href,l&&(/^https?:\/\/[^\/]+$/.test(l)&&(l+="/"),a=l?l.match(/.*\//)[0]:"");o=n.getElementsByTagName("script");for(s=0;s<o.length;s++)if(c(o[s]))return;u=n.getElementsByTagName("head")[0];if(u){o=u.getElementsByTagName("script");for(s=0;s<o.length;s++)if(c(o[s]))return}return},is:function(e,t){return t?t=="array"&&e.hasOwnProperty&&e instanceof Array?!0:typeof e==t:e!==n},makeMap:function(e,t,n){var r;e=e||[],t=t||",",typeof e=="string"&&(e=e.split(t)),n=n||{},r=e.length;while(r--)n[e[r]]={};return n},each:function(e,t,r){var i,s;if(!e)return 0;r=r||e;if(e.length!==n){for(i=0,s=e.length;i<s;i++)if(t.call(r,e[i],i,e)===!1)return 0}else for(i in e)if(e.hasOwnProperty(i)&&t.call(r,e[i],i,e)===!1)return 0;return 1},trim:function(e){return(e?""+e:"").replace(t,"")},create:function(e,t,n){var r=this,i,s,o,u,a,f=0;e=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(e),o=e[3].match(/(^|\.)(\w+)$/i)[2],s=r.createNS(e[3].replace(/\.\w+$/,""),n);if(s[o])return;if(e[2]=="static"){s[o]=t,this.onCreate&&this.onCreate(e[2],e[3],s[o]);return}t[o]||(t[o]=function(){},f=1),s[o]=t[o],r.extend(s[o].prototype,t),e[5]&&(i=r.resolve(e[5]).prototype,u=e[5].match(/\.(\w+)$/i)[1],a=s[o],f?s[o]=function(){return i[u].apply(this,arguments)}:s[o]=function(){return this.parent=i[u],a.apply(this,arguments)},s[o].prototype[o]=s[o],r.each(i,function(e,t){s[o].prototype[t]=i[t]}),r.each(t,function(e,t){i[t]?s[o].prototype[t]=function(){return this.parent=i[t],e.apply(this,arguments)}:t!=o&&(s[o].prototype[t]=e)})),r.each(t["static"],function(e,t){s[o][t]=e}),this.onCreate&&this.onCreate(e[2],e[3],s[o].prototype)},walk:function(e,t,n,r){r=r||this,e&&(n&&(e=e[n]),i.each(e,function(e,o){if(t.call(r,e,o,n)===!1)return!1;i.walk(e,t,n,r)}))},createNS:function(t,n){var r,i;n=n||e,t=t.split(".");for(r=0;r<t.length;r++)i=t[r],n[i]||(n[i]={}),n=n[i];return n},resolve:function(t,n){var r,i;n=n||e,t=t.split(".");for(r=0,i=t.length;r<i;r++){n=n[t[r]];if(!n)break}return n},addUnload:function(t,n){function s(){function n(){t.detachEvent("onstop",n),i&&i(),t=0}var t=document;t.readyState=="interactive"&&(t&&t.attachEvent("onstop",n),e.setTimeout(function(){t&&t.detachEvent("onstop",n)},0))}var r=this,i;return i=function(){var t=r.unloads,n,o;if(t){for(o in t)n=t[o],n&&n.func&&n.func.call(n.scope,1);e.detachEvent?(e.detachEvent("onbeforeunload",s),e.detachEvent("onunload",i)):e.removeEventListener&&e.removeEventListener("unload",i,!1),r.unloads=n=t=w=i=0,e.CollectGarbage&&CollectGarbage()}},t={func:t,scope:n||this},r.unloads?r.unloads.push(t):(e.attachEvent?(e.attachEvent("onunload",i),e.attachEvent("onbeforeunload",s)):e.addEventListener&&e.addEventListener("unload",i,!1),r.unloads=[t]),t},removeUnload:function(e){var t=this.unloads,n=null;return i.each(t,function(r,i){if(r&&r.func==e)return t.splice(i,1),n=e,!1}),n},explode:function(e,t){return!e||i.is(e,"array")?e:i.map(e.split(t||","),i.trim)},_addVer:function(e){var t;return this.query?(t=(e.indexOf("?")==-1?"?":"&")+this.query,e.indexOf("#")==-1?e+t:e.replace("#",t+"#")):e},_replace:function(e,t,i){return r?i.replace(e,function(){var e=t,r=arguments,i;for(i=0;i<r.length-2;i++)r[i]===n?e=e.replace(new RegExp("\\$"+i,"g"),""):e=e.replace(new RegExp("\\$"+i,"g"),r[i]);return e}):i.replace(e,t)}};i._init(),e.tinymce=e.tinyMCE=i}(window),function(e,t){var n=t.is,r=/^(href|src|style)$/i,i;if(!e&&window.console)return console.log("Load jQuery first!");t.$=e,t.adapter={patchEditor:function(t){function s(e,t){var r=this;return t&&r.removeAttr("data-mce-style"),n.css.apply(r,arguments)}function o(e,s){var o=this;return r.test(e)?s!==i?(o.each(function(n,r){t.dom.setAttrib(r,e,s)}),o):o.attr("data-mce-"+e):n.attr.apply(o,arguments)}function u(e){return function(n){return n&&(n=t.dom.processHTML(n)),e.call(this,n)}}function a(e){return e.css!==s&&(e.css=s,e.attr=o,e.html=u(n.html),e.append=u(n.append),e.prepend=u(n.prepend),e.after=u(n.after),e.before=u(n.before),e.replaceWith=u(n.replaceWith),e.tinymce=t,e.pushStack=function(){return a(n.pushStack.apply(this,arguments))}),e}var n=e.fn;t.$=function(n,r){var i=t.getDoc();return a(e(n||i,i||r))}}},t.extend=e.extend,t.extend(t,{map:e.map,grep:function(t,n){return e.grep(t,n||function(){return 1})},inArray:function(t,n){return e.inArray(n,t||[])}});var s={"tinymce.dom.DOMUtils":{select:function(t,n){var r=this;return e.find(t,r.get(n)||r.get(r.settings.root_element)||r.doc,[])},is:function(t,n){return e(this.get(t)).is(n)}}};t.onCreate=function(e,n,r){t.extend(r,s[n])}}(window.jQuery,tinymce),tinymce.create("tinymce.util.Dispatcher",{scope:null,listeners:null,Dispatcher:function(e){this.scope=e||this,this.listeners=[]},add:function(e,t){return this.listeners.push({cb:e,scope:t||this.scope}),e},addToTop:function(e,t){return this.listeners.unshift({cb:e,scope:t||this.scope}),e},remove:function(e){var t=this.listeners,n=null;return tinymce.each(t,function(r,i){if(e==r.cb)return n=e,t.splice(i,1),!1}),n},dispatch:function(){var e,t=arguments,n,r=this.listeners,i;for(n=0;n<r.length;n++){i=r[n],e=i.cb.apply(i.scope,t.length>0?t:[i.scope]);if(e===!1)break}return e}}),function(){var e=tinymce.each;tinymce.create("tinymce.util.URI",{URI:function(t,n){var r=this,i,s,o,u;t=tinymce.trim(t),n=r.settings=n||{};if(/^([\w\-]+):([^\/]{2})/i.test(t)||/^\s*#/.test(t)){r.source=t;return}t.indexOf("/")===0&&t.indexOf("//")!==0&&(t=(n.base_uri?n.base_uri.protocol||"http":"http")+"://mce_host"+t),/^[\w\-]*:?\/\//.test(t)||(u=n.base_uri?n.base_uri.path:(new tinymce.util.URI(location.href)).directory,t=(n.base_uri&&n.base_uri.protocol||"http")+"://mce_host"+r.toAbsPath(u,t)),t=t.replace(/@@/g,"(mce_at)"),t=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(t),e(["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],function(e,n){var i=t[n];i&&(i=i.replace(/\(mce_at\)/g,"@@")),r[e]=i}),o=n.base_uri;if(o){r.protocol||(r.protocol=o.protocol),r.userInfo||(r.userInfo=o.userInfo),!r.port&&r.host==="mce_host"&&(r.port=o.port);if(!r.host||r.host==="mce_host")r.host=o.host;r.source=""}},setPath:function(e){var t=this;e=/^(.*?)\/?(\w+)?$/.exec(e),t.path=e[0],t.directory=e[1],t.file=e[2],t.source="",t.getURI()},toRelative:function(e){var t=this,n;if(e==="./")return e;e=new tinymce.util.URI(e,{base_uri:t});if(e.host!="mce_host"&&t.host!=e.host&&e.host||t.port!=e.port||t.protocol!=e.protocol)return e.getURI();var r=t.getURI(),i=e.getURI();return r==i||r.charAt(r.length-1)=="/"&&r.substr(0,r.length-1)==i?r:(n=t.toRelPath(t.path,e.path),e.query&&(n+="?"+e.query),e.anchor&&(n+="#"+e.anchor),n)},toAbsolute:function(e,t){return e=new tinymce.util.URI(e,{base_uri:this}),e.getURI(this.host==e.host&&this.protocol==e.protocol?t:0)},toRelPath:function(e,t){var n,r=0,i="",s,o;e=e.substring(0,e.lastIndexOf("/")),e=e.split("/"),n=t.split("/");if(e.length>=n.length)for(s=0,o=e.length;s<o;s++)if(s>=n.length||e[s]!=n[s]){r=s+1;break}if(e.length<n.length)for(s=0,o=n.length;s<o;s++)if(s>=e.length||e[s]!=n[s]){r=s+1;break}if(r===1)return t;for(s=0,o=e.length-(r-1);s<o;s++)i+="../";for(s=r-1,o=n.length;s<o;s++)s!=r-1?i+="/"+n[s]:i+=n[s];return i},toAbsPath:function(t,n){var r,i=0,s=[],o,u;o=/\/$/.test(n)?"/":"",t=t.split("/"),n=n.split("/"),e(t,function(e){e&&s.push(e)}),t=s;for(r=n.length-1,s=[];r>=0;r--){if(n[r].length===0||n[r]===".")continue;if(n[r]===".."){i++;continue}if(i>0){i--;continue}s.push(n[r])}return r=t.length-i,r<=0?u=s.reverse().join("/"):u=t.slice(0,r).join("/")+"/"+s.reverse().join("/"),u.indexOf("/")!==0&&(u="/"+u),o&&u.lastIndexOf("/")!==u.length-1&&(u+=o),u},getURI:function(e){var t,n=this;if(!n.source||e)t="",e||(n.protocol&&(t+=n.protocol+"://"),n.userInfo&&(t+=n.userInfo+"@"),n.host&&(t+=n.host),n.port&&(t+=":"+n.port)),n.path&&(t+=n.path),n.query&&(t+="?"+n.query),n.anchor&&(t+="#"+n.anchor),n.source=t;return n.source}})}(),function(){var e=tinymce.each;tinymce.create("static tinymce.util.Cookie",{getHash:function(t){var n=this.get(t),r;return n&&e(n.split("&"),function(e){e=e.split("="),r=r||{},r[unescape(e[0])]=unescape(e[1])}),r},setHash:function(t,n,r,i,s,o){var u="";e(n,function(e,t){u+=(u?"&":"")+escape(t)+"="+escape(e)}),this.set(t,u,r,i,s,o)},get:function(e){var t=document.cookie,n,r=e+"=",i;if(!t)return;i=t.indexOf("; "+r);if(i==-1){i=t.indexOf(r);if(i!==0)return null}else i+=2;return n=t.indexOf(";",i),n==-1&&(n=t.length),unescape(t.substring(i+r.length,n))},set:function(e,t,n,r,i,s){document.cookie=e+"="+escape(t)+(n?"; expires="+n.toGMTString():"")+(r?"; path="+escape(r):"")+(i?"; domain="+i:"")+(s?"; secure":"")},remove:function(e,t){var n=new Date;n.setTime(n.getTime()-1e3),this.set(e,"",n,t,n)}})}(),function(){function serialize(e,t){var n,r,i,s;t=t||'"';if(e==null)return"null";i=typeof e;if(i=="string")return r="\bb	t\nn\ff\rr\"\"''\\\\",t+e.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(e,i){return t==='"'&&e==="'"?e:(n=r.indexOf(i),n+1?"\\"+r.charAt(n+1):(e=i.charCodeAt().toString(16),"\\u"+"0000".substring(e.length)+e))})+t;if(i=="object"){if(e.hasOwnProperty&&e instanceof Array){for(n=0,r="[";n<e.length;n++)r+=(n>0?",":"")+serialize(e[n],t);return r+"]"}r="{";for(s in e)e.hasOwnProperty(s)&&(r+=typeof e[s]!="function"?(r.length>1?","+t:t)+s+t+":"+serialize(e[s],t):"");return r+"}"}return""+e}tinymce.util.JSON={serialize:serialize,parse:function(s){try{return eval("("+s+")")}catch(ex){}}}}(),tinymce.create("static tinymce.util.XHR",{send:function(e){function s(){!e.async||t.readyState==4||i++>1e4?(e.success&&i<1e4&&t.status==200?e.success.call(e.success_scope,""+t.responseText,t,e):e.error&&e.error.call(e.error_scope,i>1e4?"TIMED_OUT":"GENERAL",t,e),t=null):r.setTimeout(s,10)}function o(e){t=0;try{t=new ActiveXObject(e)}catch(n){}return t}var t,n,r=window,i=0;e.scope=e.scope||this,e.success_scope=e.success_scope||e.scope,e.error_scope=e.error_scope||e.scope,e.async=e.async===!1?!1:!0,e.data=e.data||"",t=r.XMLHttpRequest?new XMLHttpRequest:o("Microsoft.XMLHTTP")||o("Msxml2.XMLHTTP");if(t){t.overrideMimeType&&t.overrideMimeType(e.content_type),t.open(e.type||(e.data?"POST":"GET"),e.url,e.async),e.content_type&&t.setRequestHeader("Content-Type",e.content_type),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.send(e.data);if(!e.async)return s();n=r.setTimeout(s,10)}}}),function(){var e=tinymce.extend,t=tinymce.util.JSON,n=tinymce.util.XHR;tinymce.create("tinymce.util.JSONRequest",{JSONRequest:function(t){this.settings=e({},t),this.count=0},send:function(r){var i=r.error,s=r.success;r=e(this.settings,r),r.success=function(e,n){e=t.parse(e),typeof e=="undefined"&&(e={error:"JSON Parse error."}),e.error?i.call(r.error_scope||r.scope,e.error,n):s.call(r.success_scope||r.scope,e.result)},r.error=function(e,t){i&&i.call(r.error_scope||r.scope,e,t)},r.data=t.serialize({id:r.id||"c"+this.count++,method:r.method,params:r.params}),r.content_type="application/json",n.send(r)},"static":{sendRPC:function(e){return(new tinymce.util.JSONRequest).send(e)}}})}(),function(e){e.VK={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,modifierPressed:function(e){return e.shiftKey||e.ctrlKey||e.altKey}}}(tinymce),tinymce.util.Quirks=function(e){function u(t,n){try{e.getDoc().execCommand(t,!1,n)}catch(r){}}function a(){function o(t){var n,r,o,u;n=s.getRng(),r=i.getParent(n.startContainer,i.isBlock),t&&(r=i.getNext(r,i.isBlock));if(r){o=r.firstChild;while(o&&o.nodeType==3&&o.nodeValue.length===0)o=o.nextSibling;o&&o.nodeName==="SPAN"&&(u=o.cloneNode(!1))}e.getDoc().execCommand(t?"ForwardDelete":"Delete",!1,null),r=i.getParent(n.startContainer,i.isBlock),tinymce.each(i.select("span.Apple-style-span,font.Apple-style-span",r),function(e){var t=s.getBookmark();u?i.replace(u.cloneNode(!1),e,!0):i.remove(e,!0),s.moveToBookmark(t)})}e.onKeyDown.add(function(e,i){var s;if(i.isDefaultPrevented())return;s=i.keyCode==r,(s||i.keyCode==n)&&!t.modifierPressed(i)&&(i.preventDefault(),o(s))}),e.addCommand("Delete",function(){o()})}function f(){function t(e){var t=i.create("body"),n=e.cloneContents();return t.appendChild(n),s.serializer.serialize(t,{format:"html"})}function o(n){var r=t(n),s=i.createRng();s.selectNode(e.getBody());var o=t(s);return r===o}e.onKeyDown.addToTop(function(e,t){var i=t.keyCode;if(i==r||i==n){var u=s.getRng(!0);!u.collapsed&&o(u)&&(e.setContent("",{format:"raw"}),e.nodeChanged(),t.preventDefault())}})}function l(){i.bind(e.getBody(),"focusin",function(){s.setRng(s.getRng())})}function c(){e.onKeyDown.add(function(e,t){if(t.keyCode===n&&s.isCollapsed()&&s.getRng(!0).startOffset===0){var r=s.getNode(),o=r.previousSibling;o&&o.nodeName&&o.nodeName.toLowerCase()==="hr"&&(i.remove(o),tinymce.dom.Event.cancel(t))}})}function h(){Range.prototype.getClientRects||e.onMouseDown.add(function(e,t){if(t.target.nodeName==="HTML"){var n=e.getBody();n.blur(),setTimeout(function(){n.focus()},0)}})}function p(){e.onClick.add(function(e,t){t=t.target,/^(IMG|HR)$/.test(t.nodeName)&&s.getSel().setBaseAndExtent(t,0,t,1),t.nodeName=="A"&&i.hasClass(t,"mceItemAnchor")&&s.select(t),e.nodeChanged()})}function d(){function t(){var t=i.getAttribs(s.getStart().cloneNode(!1));return function(){var n=s.getStart();n!==e.getBody()&&(i.setAttrib(n,"style",null),tinymce.each(t,function(e){n.setAttributeNode(e.cloneNode(!0))}))}}function n(){return!s.isCollapsed()&&s.getStart()!=s.getEnd()}function r(e,t){return t.preventDefault(),!1}e.onKeyPress.add(function(e,r){var i;if((r.keyCode==8||r.keyCode==46)&&n())return i=t(),e.getDoc().execCommand("delete",!1,null),i(),r.preventDefault(),!1}),i.bind(e.getDoc(),"cut",function(i){var s;n()&&(s=t(),e.onKeyUp.addToTop(r),setTimeout(function(){s(),e.onKeyUp.remove(r)},0))})}function v(){var t,n;i.bind(e.getDoc(),"selectionchange",function(){n&&(clearTimeout(n),n=0),n=window.setTimeout(function(){var n=s.getRng();if(!t||!tinymce.dom.RangeUtils.compareRanges(n,t))e.nodeChanged(),t=n},50)})}function m(){document.body.setAttribute("role","application")}function g(){e.onKeyDown.add(function(e,t){if(t.keyCode===n&&s.isCollapsed()&&s.getRng(!0).startOffset===0){var r=s.getNode().previousSibling;if(r&&r.nodeName&&r.nodeName.toLowerCase()==="table")return tinymce.dom.Event.cancel(t)}})}function y(){var t=e.getDoc().documentMode;if(t&&t>7)return;u("RespectVisibilityInDesign",!0),i.addClass(e.getBody(),"mceHideBrInPre"),e.parser.addNodeFilter("pre",function(e,t){var n=e.length,r,i,s,o;while(n--){r=e[n].getAll("br"),i=r.length;while(i--)s=r[i],o=s.prev,o&&o.type===3&&o.value.charAt(o.value-1)!="\n"?o.value+="\n":s.parent.insert(new tinymce.html.Node("#text",3),s,!0).value="\n"}}),e.serializer.addNodeFilter("pre",function(e,t){var n=e.length,r,i,s,o;while(n--){r=e[n].getAll("br"),i=r.length;while(i--)s=r[i],o=s.prev,o&&o.type==3&&(o.value=o.value.replace(/\r?\n$/,""))}})}function b(){i.bind(e.getBody(),"mouseup",function(e){var t,n=s.getNode();if(n.nodeName=="IMG"){if(t=i.getStyle(n,"width"))i.setAttrib(n,"width",t.replace(/[^0-9%]+/g,"")),i.setStyle(n,"width","");if(t=i.getStyle(n,"height"))i.setAttrib(n,"height",t.replace(/[^0-9%]+/g,"")),i.setStyle(n,"height","")}})}function w(){e.onKeyDown.add(function(e,o){var u,a,f,l,c,h,p;if(o.isDefaultPrevented())return;u=o.keyCode==r,(u||o.keyCode==n)&&!t.modifierPressed(o)&&(a=s.getRng(),f=a.startContainer,l=a.startOffset,p=a.collapsed,f.nodeType==3&&f.nodeValue.length>0&&(l===0&&!p||p&&l===(u?0:1))&&(nonEmptyElements=e.schema.getNonEmptyElements(),o.preventDefault(),c=i.create("br",{id:"__tmp"}),f.parentNode.insertBefore(c,f),e.getDoc().execCommand(u?"ForwardDelete":"Delete",!1,null),f=s.getRng().startContainer,h=f.previousSibling,h&&h.nodeType==1&&!i.isBlock(h)&&i.isEmpty(h)&&!nonEmptyElements[h.nodeName.toLowerCase()]&&i.remove(h),i.remove("__tmp")))})}function E(){e.onKeyDown.add(function(e,n){var r,o,u,a,f;if(n.keyCode!=t.BACKSPACE)return;r=s.getRng(),o=r.startContainer,u=r.startOffset,a=i.getRoot(),f=o;if(!r.collapsed||u!==0)return;while(f&&f.parentNode.firstChild==f&&f.parentNode!=a)f=f.parentNode;f.tagName==="BLOCKQUOTE"&&(e.formatter.toggle("blockquote",null,f),r.setStart(o,0),r.setEnd(o,0),s.setRng(r),s.collapse(!1))})}function S(){function t(){e._refreshContentEditable(),u("StyleWithCSS",!1),u("enableInlineTableEditing",!1),o.object_resizing||u("enableObjectResizing",!1)}o.readonly||(e.onBeforeExecCommand.add(t),e.onMouseDown.add(t))}function x(){function t(e,t){tinymce.each(i.select("a"),function(e){var t=e.parentNode,n=i.getRoot();if(t.lastChild===e){while(t&&!i.isBlock(t)){if(t.parentNode.lastChild!==t||t===n)return;t=t.parentNode}i.add(t,"br",{"data-mce-bogus":1})}})}e.onExecCommand.add(function(e,n){n==="CreateLink"&&t(e)}),e.onSetContent.add(s.onSetContent.add(t))}function T(){function t(t,n){(!t||!n.initial)&&e.execCommand("mceRepaint")}e.onUndo.add(t),e.onRedo.add(t),e.onSetContent.add(t)}function N(){e.onKeyDown.add(function(e,t){t.keyCode==8&&s.getNode().nodeName=="IMG"&&(t.preventDefault(),e.undoManager.beforeChange(),i.remove(s.getNode()),e.undoManager.add())})}var t=tinymce.VK,n=t.BACKSPACE,r=t.DELETE,i=e.dom,s=e.selection,o=e.settings;g(),E(),tinymce.isWebKit&&(w(),a(),f(),l(),p(),tinymce.isIDevice&&v()),tinymce.isIE&&(c(),f(),m(),y(),b(),N()),tinymce.isGecko&&(c(),h(),d(),S(),x(),T())},function(e){function f(e){var t;return t=document.createElement("div"),t.innerHTML=e,t.textContent||t.innerText||e}function l(e,t){var r,i,s,o={};if(e){e=e.split(","),t=t||10;for(r=0;r<e.length;r+=2)i=String.fromCharCode(parseInt(e[r],t)),n[i]||(s="&"+e[r+1]+";",o[i]=s,o[s]=i);return o}}var t,n,r,i=/[&<>\"\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,s=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,o=/[<>&\"\']/g,u=/&(#x|#)?([\w]+);/g,a={128:"â¬",130:"â",131:"Æ",132:"â",133:"â¦",134:"â ",135:"â¡",136:"Ë",137:"â°",138:"Å ",139:"â¹",140:"Å",142:"Å½",145:"â",146:"â",147:"â",148:"â",149:"â¢",150:"â",151:"â",152:"Ë",153:"â¢",154:"Å¡",155:"âº",156:"Å",158:"Å¾",159:"Å¸"};n={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;"},r={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},t=l("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),e.html=e.html||{},e.html.Entities={encodeRaw:function(e,t){return e.replace(t?i:s,function(e){return n[e]||e})},encodeAllRaw:function(e){return(""+e).replace(o,function(e){return n[e]||e})},encodeNumeric:function(e,t){return e.replace(t?i:s,function(e){return e.length>1?"&#"+((e.charCodeAt(0)-55296)*1024+(e.charCodeAt(1)-56320)+65536)+";":n[e]||"&#"+e.charCodeAt(0)+";"})},encodeNamed:function(e,r,o){return o=o||t,e.replace(r?i:s,function(e){return n[e]||o[e]||e})},getEncodeFunc:function(r,o){function a(e,t){return e.replace(t?i:s,function(e){return n[e]||o[e]||"&#"+e.charCodeAt(0)+";"||e})}function f(e,t){return u.encodeNamed(e,t,o)}var u=e.html.Entities;return o=l(o)||t,r=e.makeMap(r.replace(/\+/g,",")),r.named&&r.numeric?a:r.named?o?f:u.encodeNamed:r.numeric?u.encodeNumeric:u.encodeRaw},decode:function(e){return e.replace(u,function(e,n,i){return n?(i=parseInt(i,n.length===2?16:10),i>65535?(i-=65536,String.fromCharCode(55296+(i>>10),56320+(i&1023))):a[i]||String.fromCharCode(i)):r[e]||t[e]||f(e)})}}}(tinymce),tinymce.html.Styles=function(e,t){function c(e,t,n,r){function i(e){return e=parseInt(e).toString(16),e.length>1?e:"0"+e}return"#"+i(t)+i(n)+i(r)}var n=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,r=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,i=/\s*([^:]+):\s*([^;]+);?/g,s=/\s+$/,o=/rgb/,u,a,f={},l;e=e||{},l="\\\" \\' \\; \\: ; : ï»¿".split(" ");for(a=0;a<l.length;a++)f[l[a]]="ï»¿"+a,f["ï»¿"+a]=l[a];return{toHex:function(e){return e.replace(n,c)},parse:function(t){function v(e,t){var n,r,i,s;n=o[e+"-top"+t];if(!n)return;r=o[e+"-right"+t];if(n!=r)return;i=o[e+"-bottom"+t];if(r!=i)return;s=o[e+"-left"+t];if(i!=s)return;o[e+t]=s,delete o[e+"-top"+t],delete o[e+"-right"+t],delete o[e+"-bottom"+t],delete o[e+"-left"+t]}function m(e){var t=o[e],n;if(!t||t.indexOf(" ")<0)return;t=t.split(" "),n=t.length;while(n--)if(t[n]!==t[0])return!1;return o[e]=t[0],!0}function g(e,t,n,r){if(!m(t))return;if(!m(n))return;if(!m(r))return;o[e]=o[t]+" "+o[n]+" "+o[r],delete o[t],delete o[n],delete o[r]}function y(e){return h=!0,f[e]}function b(e,t){return h&&(e=e.replace(/\uFEFF[0-9]/g,function(e){return f[e]})),t||(e=e.replace(/\\([\'\";:])/g,"$1")),e}function w(e,t,n,r,i,s){return i=i||s,i?(i=b(i),"'"+i.replace(/\'/g,"\\'")+"'"):(t=b(t||n||r),p&&(t=p.call(d,t,"style")),"url('"+t.replace(/\'/g,"\\'")+"')")}var o={},u,a,l,h,p=e.url_converter,d=e.url_converter_scope||this;if(t){t=t.replace(/\\[\"\';:\uFEFF]/g,y).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(e){return e.replace(/[;:]/g,y)});while(u=i.exec(t)){a=u[1].replace(s,"").toLowerCase(),l=u[2].replace(s,"");if(a&&l.length>0){if(a==="font-weight"&&l==="700")l="bold";else if(a==="color"||a==="background-color")l=l.toLowerCase();l=l.replace(n,c),l=l.replace(r,w),o[a]=h?b(l,!0):l}i.lastIndex=u.index+u[0].length}v("border",""),v("border","-width"),v("border","-color"),v("border","-style"),v("padding",""),v("margin",""),g("border","border-width","border-style","border-color"),o.border==="medium none"&&delete o.border}return o},serialize:function(e,n){function o(n){var i,s,o,a;i=t.styles[n];if(i)for(s=0,o=i.length;s<o;s++)n=i[s],a=e[n],a!==u&&a.length>0&&(r+=(r.length>0?" ":"")+n+": "+a+";")}var r="",i,s;if(n&&t&&t.styles)o("*"),o(n);else for(i in e)s=e[i],s!==u&&s.length>0&&(r+=(r.length>0?" ":"")+i+": "+s+";");return r}}},function(e){function i(e,t){return e.split(t||",")}function s(e,t){function o(t){return t.replace(/[A-Z]+/g,function(t){return o(e[t])})}var r,s={};for(r in e)e.hasOwnProperty(r)&&(e[r]=o(e[r]));return o(t).replace(/#/g,"#text").replace(/(\w+)\[([^\]]+)\]\[([^\]]*)\]/g,function(e,t,r,o){r=i(r,"|"),s[t]={attributes:n(r),attributesOrder:r,children:n(o,"|",{"#comment":{}})}}),s}function o(){var e=t.html5;return e||(e=t.html5=s({A:"id|accesskey|class|dir|draggable|item|hidden|itemprop|role|spellcheck|style|subject|title",B:"#|a|abbr|area|audio|b|bdo|br|button|canvas|cite|code|command|datalist|del|dfn|em|embed|i|iframe|img|input|ins|kbd|keygen|label|link|map|mark|meta|meter|noscript|object|output|progress|q|ruby|samp|script|select|small|span|strong|sub|sup|svg|textarea|time|var|video",C:"#|a|abbr|area|address|article|aside|audio|b|bdo|blockquote|br|button|canvas|cite|code|command|datalist|del|details|dfn|dialog|div|dl|em|embed|fieldset|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hgroup|hr|i|iframe|img|input|ins|kbd|keygen|label|link|map|mark|menu|meta|meter|nav|noscript|ol|object|output|p|pre|progress|q|ruby|samp|script|section|select|small|span|strong|style|sub|sup|svg|table|textarea|time|ul|var|video"},"html[A|manifest][body|head]head[A][base|command|link|meta|noscript|script|style|title]title[A][#]base[A|href|target][]link[A|href|rel|media|type|sizes][]meta[A|http-equiv|name|content|charset][]style[A|type|media|scoped][#]script[A|charset|type|src|defer|async][#]noscript[A][C]body[A][C]section[A][C]nav[A][C]article[A][C]aside[A][C]h1[A][B]h2[A][B]h3[A][B]h4[A][B]h5[A][B]h6[A][B]hgroup[A][h1|h2|h3|h4|h5|h6]header[A][C]footer[A][C]address[A][C]p[A][B]br[A][]pre[A][B]dialog[A][dd|dt]blockquote[A|cite][C]ol[A|start|reversed][li]ul[A][li]li[A|value][C]dl[A][dd|dt]dt[A][B]dd[A][C]a[A|href|target|ping|rel|media|type][C]em[A][B]strong[A][B]small[A][B]cite[A][B]q[A|cite][B]dfn[A][B]abbr[A][B]code[A][B]var[A][B]samp[A][B]kbd[A][B]sub[A][B]sup[A][B]i[A][B]b[A][B]mark[A][B]progress[A|value|max][B]meter[A|value|min|max|low|high|optimum][B]time[A|datetime][B]ruby[A][B|rt|rp]rt[A][B]rp[A][B]bdo[A][B]span[A][B]ins[A|cite|datetime][B]del[A|cite|datetime][B]figure[A][C|legend|figcaption]figcaption[A][C]img[A|alt|src|height|width|usemap|ismap][]iframe[A|name|src|height|width|sandbox|seamless][]embed[A|src|height|width|type][]object[A|data|type|height|width|usemap|name|form|classid][param]param[A|name|value][]details[A|open][C|legend]command[A|type|label|icon|disabled|checked|radiogroup][]menu[A|type|label][C|li]legend[A][C|B]div[A][C]source[A|src|type|media][]audio[A|src|autobuffer|autoplay|loop|controls][source]video[A|src|autobuffer|autoplay|loop|controls|width|height|poster][source]hr[A][]form[A|accept-charset|action|autocomplete|enctype|method|name|novalidate|target][C]fieldset[A|disabled|form|name][C|legend]label[A|form|for][B]input[A|type|accept|alt|autocomplete|checked|disabled|form|formaction|formenctype|formmethod|formnovalidate|formtarget|height|list|max|maxlength|min|multiple|pattern|placeholder|readonly|required|size|src|step|width|files|value][]button[A|autofocus|disabled|form|formaction|formenctype|formmethod|formnovalidate|formtarget|name|value|type][B]select[A|autofocus|disabled|form|multiple|name|size][option|optgroup]datalist[A][B|option]optgroup[A|disabled|label][option]option[A|disabled|selected|label|value][]textarea[A|autofocus|disabled|form|maxlength|name|placeholder|readonly|required|rows|cols|wrap][]keygen[A|autofocus|challenge|disabled|form|keytype|name][]output[A|for|form|name][B]canvas[A|width|height][]map[A|name][B|C]area[A|shape|coords|href|alt|target|media|rel|ping|type][]mathml[A][]svg[A][]table[A|summary][caption|colgroup|thead|tfoot|tbody|tr]caption[A][C]colgroup[A|span][col]col[A|span][]thead[A][tr]tfoot[A][tr]tbody[A][tr]tr[A][th|td]th[A|headers|rowspan|colspan|scope][B]td[A|headers|rowspan|colspan][C]"
)),e}function u(){var e=t.html4;return e||(e=t.html4=s({Z:"H|K|N|O|P",Y:"X|form|R|Q",ZG:"E|span|width|align|char|charoff|valign",X:"p|T|div|U|W|isindex|fieldset|table",ZF:"E|align|char|charoff|valign",W:"pre|hr|blockquote|address|center|noframes",ZE:"abbr|axis|headers|scope|rowspan|colspan|align|char|charoff|valign|nowrap|bgcolor|width|height",ZD:"[E][S]",U:"ul|ol|dl|menu|dir",ZC:"p|Y|div|U|W|table|br|span|bdo|object|applet|img|map|K|N|Q",T:"h1|h2|h3|h4|h5|h6",ZB:"X|S|Q",S:"R|P",ZA:"a|G|J|M|O|P",R:"a|H|K|N|O",Q:"noscript|P",P:"ins|del|script",O:"input|select|textarea|label|button",N:"M|L",M:"em|strong|dfn|code|q|samp|kbd|var|cite|abbr|acronym",L:"sub|sup",K:"J|I",J:"tt|i|b|u|s|strike",I:"big|small|font|basefont",H:"G|F",G:"br|span|bdo",F:"object|applet|img|map|iframe",E:"A|B|C",D:"accesskey|tabindex|onfocus|onblur",C:"onclick|ondblclick|onmousedown|onmouseup|onmouseover|onmousemove|onmouseout|onkeypress|onkeydown|onkeyup",B:"lang|xml:lang|dir",A:"id|class|style|title"},"script[id|charset|type|language|src|defer|xml:space][]style[B|id|type|media|title|xml:space][]object[E|declare|classid|codebase|data|type|codetype|archive|standby|width|height|usemap|name|tabindex|align|border|hspace|vspace][#|param|Y]param[id|name|value|valuetype|type][]p[E|align][#|S]a[E|D|charset|type|name|href|hreflang|rel|rev|shape|coords|target][#|Z]br[A|clear][]span[E][#|S]bdo[A|C|B][#|S]applet[A|codebase|archive|code|object|alt|name|width|height|align|hspace|vspace][#|param|Y]h1[E|align][#|S]img[E|src|alt|name|longdesc|width|height|usemap|ismap|align|border|hspace|vspace][]map[B|C|A|name][X|form|Q|area]h2[E|align][#|S]iframe[A|longdesc|name|src|frameborder|marginwidth|marginheight|scrolling|align|width|height][#|Y]h3[E|align][#|S]tt[E][#|S]i[E][#|S]b[E][#|S]u[E][#|S]s[E][#|S]strike[E][#|S]big[E][#|S]small[E][#|S]font[A|B|size|color|face][#|S]basefont[id|size|color|face][]em[E][#|S]strong[E][#|S]dfn[E][#|S]code[E][#|S]q[E|cite][#|S]samp[E][#|S]kbd[E][#|S]var[E][#|S]cite[E][#|S]abbr[E][#|S]acronym[E][#|S]sub[E][#|S]sup[E][#|S]input[E|D|type|name|value|checked|disabled|readonly|size|maxlength|src|alt|usemap|onselect|onchange|accept|align][]select[E|name|size|multiple|disabled|tabindex|onfocus|onblur|onchange][optgroup|option]optgroup[E|disabled|label][option]option[E|selected|disabled|label|value][]textarea[E|D|name|rows|cols|disabled|readonly|onselect|onchange][]label[E|for|accesskey|onfocus|onblur][#|S]button[E|D|name|value|type|disabled][#|p|T|div|U|W|table|G|object|applet|img|map|K|N|Q]h4[E|align][#|S]ins[E|cite|datetime][#|Y]h5[E|align][#|S]del[E|cite|datetime][#|Y]h6[E|align][#|S]div[E|align][#|Y]ul[E|type|compact][li]li[E|type|value][#|Y]ol[E|type|compact|start][li]dl[E|compact][dt|dd]dt[E][#|S]dd[E][#|Y]menu[E|compact][li]dir[E|compact][li]pre[E|width|xml:space][#|ZA]hr[E|align|noshade|size|width][]blockquote[E|cite][#|Y]address[E][#|S|p]center[E][#|Y]noframes[E][#|Y]isindex[A|B|prompt][]fieldset[E][#|legend|Y]legend[E|accesskey|align][#|S]table[E|summary|width|border|frame|rules|cellspacing|cellpadding|align|bgcolor][caption|col|colgroup|thead|tfoot|tbody|tr]caption[E|align][#|S]col[ZG][]colgroup[ZG][col]thead[ZF][tr]tr[ZF|bgcolor][th|td]th[E|ZE][#|Y]form[E|action|method|name|enctype|onsubmit|onreset|accept|accept-charset|target][#|X|R|Q]noscript[E][#|Y]td[E|ZE][#|Y]tfoot[ZF][tr]tbody[ZF][tr]area[E|D|shape|coords|href|nohref|alt|target][]base[id|href|target][]body[E|onload|onunload|background|bgcolor|text|link|vlink|alink][#|Y]")),e}var t={},n=e.makeMap,r=e.each;e.html.Schema=function(s){function E(r,i,o){var u=s[r];return u?u=n(u,",",n(u.toUpperCase()," ")):(u=t[r],u||(u=n(i," ",n(i.toUpperCase()," ")),u=e.extend(u,o),t[r]=u)),u}function S(e){return new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$")}function x(t){var r,s,o,u,a,l,h,p,d,v,m,g,y,b,w,E,x,T,N,C,k,L,A=/^([#+\-])?([^\[\/]+)(?:\/([^\[]+))?(?:\[([^\]]+)\])?$/,O=/^([!\-])?(\w+::\w+|[^=:<]+)?(?:([=:<])(.*))?$/,M=/[*?+]/;if(t){t=i(t),f["@"]&&(x=f["@"].attributes,T=f["@"].attributesOrder);for(r=0,s=t.length;r<s;r++){l=A.exec(t[r]);if(l){w=l[1],v=l[2],E=l[3],d=l[4],y={},b=[],h={attributes:y,attributesOrder:b},w==="#"&&(h.paddEmpty=!0),w==="-"&&(h.removeEmpty=!0);if(x){for(C in x)y[C]=x[C];b.push.apply(b,T)}if(d){d=i(d,"|");for(o=0,u=d.length;o<u;o++){l=O.exec(d[o]);if(l){p={},g=l[1],m=l[2].replace(/::/g,":"),w=l[3],L=l[4],g==="!"&&(h.attributesRequired=h.attributesRequired||[],h.attributesRequired.push(m),p.required=!0);if(g==="-"){delete y[m],b.splice(e.inArray(b,m),1);continue}w&&(w==="="&&(h.attributesDefault=h.attributesDefault||[],h.attributesDefault.push({name:m,value:L}),p.defaultValue=L),w===":"&&(h.attributesForced=h.attributesForced||[],h.attributesForced.push({name:m,value:L}),p.forcedValue=L),w==="<"&&(p.validValues=n(L,"?"))),M.test(m)?(h.attributePatterns=h.attributePatterns||[],p.pattern=S(m),h.attributePatterns.push(p)):(y[m]||b.push(m),y[m]=p)}}}!x&&v=="@"&&(x=y,T=b),E&&(h.outputName=v,f[E]=h),M.test(v)?(h.pattern=S(v),c.push(h)):f[v]=h}}}}function T(e){f={},c=[],x(e),r(p,function(e,t){l[t]=e.children})}function N(e){var t=/^(~)?(.+)$/;e&&r(i(e),function(e){var n=t.exec(e),i=n[1]==="~",s=i?"span":"div",o=n[2];l[o]=l[s],w[o]=s,i||(y[o]={}),r(l,function(e,t){e[s]&&(e[o]=e[s])})})}function C(e){var t=/^([+\-]?)(\w+)\[([^\]]+)\]$/;e&&r(i(e),function(e){var n=t.exec(e),s,o;n&&(o=n[1],o?s=l[n[2]]:s=l[n[2]]={"#comment":{}},s=l[n[2]],r(i(n[3],"|"),function(e){o==="-"?delete s[e]:s[e]={}}))})}function k(e){var t=f[e],n;if(t)return t;n=c.length;while(n--){t=c[n];if(t.pattern.test(e))return t}}var a=this,f={},l={},c=[],h,p,d,v,m,g,y,b,w={};s=s||{},p=s.schema=="html5"?o():u(),s.verify_html===!1&&(s.valid_elements="*[*]"),s.valid_styles&&(h={},r(s.valid_styles,function(t,n){h[n]=e.explode(t)})),d=E("whitespace_elements","pre script style textarea"),v=E("self_closing_elements","colgroup dd dt li options p td tfoot th thead tr"),m=E("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source"),g=E("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls"),b=E("non_empty_elements","td th iframe video audio object",m),y=E("block_elements","h1 h2 h3 h4 h5 h6 hr p div address pre form table tbody thead tfoot th tr td li ol ul caption blockquote center dl dt dd dir fieldset noscript menu isindex samp header footer article section hgroup aside nav figure"),s.valid_elements?T(s.valid_elements):(r(p,function(e,t){f[t]={attributes:e.attributes,attributesOrder:e.attributesOrder},l[t]=e.children}),s.schema!="html5"&&r(i("strong/b,em/i"),function(e){e=i(e,"/"),f[e[1]].outputName=e[0]}),f.img.attributesDefault=[{name:"alt",value:""}],r(i("ol,ul,sub,sup,blockquote,span,font,a,table,tbody,tr,strong,em,b,i"),function(e){f[e]&&(f[e].removeEmpty=!0)}),r(i("p,h1,h2,h3,h4,h5,h6,th,td,pre,div,address,caption"),function(e){f[e].paddEmpty=!0})),N(s.custom_elements),C(s.valid_children),x(s.extended_valid_elements),C("+ol[ul|ol],+ul[ul|ol]"),s.invalid_elements&&e.each(e.explode(s.invalid_elements),function(e){f[e]&&delete f[e]}),k("span")||x("span[!data-mce-type|*]"),a.children=l,a.styles=h,a.getBoolAttrs=function(){return g},a.getBlockElements=function(){return y},a.getShortEndedElements=function(){return m},a.getSelfClosingElements=function(){return v},a.getNonEmptyElements=function(){return b},a.getWhiteSpaceElements=function(){return d},a.isValidChild=function(e,t){var n=l[e];return!!n&&!!n[t]},a.getElementRule=k,a.getCustomElements=function(){return w},a.addValidElements=x,a.setValidElements=T,a.addCustomElements=N,a.addValidChildren=C}}(tinymce),function(e){e.html.SaxParser=function(t,n){var r=this,i=function(){};t=t||{},r.schema=n=n||new e.html.Schema,t.fix_self_closing!==!1&&(t.fix_self_closing=!0),e.each("comment cdata text start end pi doctype".split(" "),function(e){e&&(r[e]=t[e]||i)}),r.parse=function(r){function I(e){var t,n;t=f.length;while(t--)if(f[t].name===e)break;if(t>=0){for(n=f.length-1;n>=t;n--)e=f[n],e.valid&&i.end(e.name);f.length=t}}function q(e,t,n,r,i){var s,o;t=t.toLowerCase(),n=t in g?t:B(n||r||i||"");if(b&&!d&&t.indexOf("data-")!==0){s=N[t];if(!s&&C){o=C.length;while(o--){s=C[o];if(s.pattern.test(t))break}o===-1&&(s=null)}if(!s)return;if(s.validValues&&!(n in s.validValues))return}l.map[t]=n,l.push({name:t,value:n})}var i=this,s,o=0,u,a,f=[],l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H=0,B=e.html.Entities.decode,j,F;M=new RegExp("<(?:(?:!--([\\w\\W]*?)-->)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([^>]+)>)|(?:([A-Za-z0-9\\-\\:]+)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/|\\s+)>))","g"),_=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:\\.|[^\"])*)\")|(?:\'((?:\\.|[^\'])*)\')|([^>\s]+)))?/g,D={script:/<\/script[^>]*>/gi,style:/<\/style[^>]*>/gi,noscript:/<\/noscript[^>]*>/gi},m=n.getShortEndedElements(),O=n.getSelfClosingElements(),g=n.getBoolAttrs(),b=t.validate,v=t.remove_internals,j=t.fix_self_closing,F=e.isIE,T=/^:/;while(s=M.exec(r)){o<s.index&&i.text(B(r.substr(o,s.index-o)));if(u=s[6])u=u.toLowerCase(),F&&T.test(u)&&(u=u.substr(1)),I(u);else if(u=s[7]){u=u.toLowerCase(),F&&T.test(u)&&(u=u.substr(1)),y=u in m,j&&O[u]&&f.length>0&&f[f.length-1].name===u&&I(u);if(!b||(w=n.getElementRule(u))){E=!0,b&&(N=w.attributes,C=w.attributePatterns),(x=s[8])?(d=x.indexOf("data-mce-type")!==-1,d&&v&&(E=!1),l=[],l.map={},x.replace(_,q)):(l=[],l.map={});if(b&&!d){k=w.attributesRequired,L=w.attributesDefault,A=w.attributesForced;if(A){c=A.length;while(c--)S=A[c],p=S.name,P=S.value,P==="{$uid}"&&(P="mce_"+H++),l.map[p]=P,l.push({name:p,value:P})}if(L){c=L.length;while(c--)S=L[c],p=S.name,p in l.map||(P=S.value,P==="{$uid}"&&(P="mce_"+H++),l.map[p]=P,l.push({name:p,value:P}))}if(k){c=k.length;while(c--)if(k[c]in l.map)break;c===-1&&(E=!1)}l.map["data-mce-bogus"]&&(E=!1)}E&&i.start(u,l,y)}else E=!1;if(a=D[u]){a.lastIndex=o=s.index+s[0].length,(s=a.exec(r))?(E&&(h=r.substr(o,s.index-o)),o=s.index+s[0].length):(h=r.substr(o),o=r.length),E&&h.length>0&&i.text(h,!0),E&&i.end(u),M.lastIndex=o;continue}y||(!x||x.indexOf("/")!=x.length-1?f.push({name:u,valid:E}):E&&i.end(u))}else(u=s[1])?i.comment(u):(u=s[2])?i.cdata(u):(u=s[3])?i.doctype(u):(u=s[4])&&i.pi(u,s[5]);o=s.index+s[0].length}o<r.length&&i.text(B(r.substr(o)));for(c=f.length-1;c>=0;c--)u=f[c],u.valid&&i.end(u.name)}}}(tinymce),function(e){function r(e,t,n){var r,i,s=n?"lastChild":"firstChild",o=n?"prev":"next";if(e[s])return e[s];if(e!==t){r=e[o];if(r)return r;for(i=e.parent;i&&i!==t;i=i.parent){r=i[o];if(r)return r}}}function i(e,t){this.name=e,this.type=t,t===1&&(this.attributes=[],this.attributes.map={})}var t=/^[ \t\r\n]*$/,n={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11};e.extend(i.prototype,{replace:function(e){var t=this;return e.parent&&e.remove(),t.insert(e,t),t.remove(),t},attr:function(e,t){var n=this,r,i,s;if(typeof e!="string"){for(i in e)n.attr(i,e[i]);return n}if(r=n.attributes){if(t!==s){if(t===null){if(e in r.map){delete r.map[e],i=r.length;while(i--)if(r[i].name===e)return r=r.splice(i,1),n}return n}if(e in r.map){i=r.length;while(i--)if(r[i].name===e){r[i].value=t;break}}else r.push({name:e,value:t});return r.map[e]=t,n}return r.map[e]}},clone:function(){var e=this,t=new i(e.name,e.type),n,r,s,o,u;if(s=e.attributes){u=[],u.map={};for(n=0,r=s.length;n<r;n++)o=s[n],o.name!=="id"&&(u[u.length]={name:o.name,value:o.value},u.map[o.name]=o.value);t.attributes=u}return t.value=e.value,t.shortEnded=e.shortEnded,t},wrap:function(e){var t=this;return t.parent.insert(e,t),e.append(t),t},unwrap:function(){var e=this,t,n;for(t=e.firstChild;t;)n=t.next,e.insert(t,e,!0),t=n;e.remove()},remove:function(){var e=this,t=e.parent,n=e.next,r=e.prev;return t&&(t.firstChild===e?(t.firstChild=n,n&&(n.prev=null)):r.next=n,t.lastChild===e?(t.lastChild=r,r&&(r.next=null)):n.prev=r,e.parent=e.next=e.prev=null),e},append:function(e){var t=this,n;return e.parent&&e.remove(),n=t.lastChild,n?(n.next=e,e.prev=n,t.lastChild=e):t.lastChild=t.firstChild=e,e.parent=t,e},insert:function(e,t,n){var r;return e.parent&&e.remove(),r=t.parent||this,n?(t===r.firstChild?r.firstChild=e:t.prev.next=e,e.prev=t.prev,e.next=t,t.prev=e):(t===r.lastChild?r.lastChild=e:t.next.prev=e,e.next=t.next,e.prev=t,t.next=e),e.parent=r,e},getAll:function(e){var t=this,n,i=[];for(n=t.firstChild;n;n=r(n,t))n.name===e&&i.push(n);return i},empty:function(){var e=this,t,n,i;if(e.firstChild){t=[];for(i=e.firstChild;i;i=r(i,e))t.push(i);n=t.length;while(n--)i=t[n],i.parent=i.firstChild=i.lastChild=i.next=i.prev=null}return e.firstChild=e.lastChild=null,e},isEmpty:function(e){var n=this,i=n.firstChild,s,o;if(i)do{if(i.type===1){if(i.attributes.map["data-mce-bogus"])continue;if(e[i.name])return!1;s=i.attributes.length;while(s--){o=i.attributes[s].name;if(o==="name"||o.indexOf("data-")===0)return!1}}if(i.type===8)return!1;if(i.type===3&&!t.test(i.value))return!1}while(i=r(i,n));return!0},walk:function(e){return r(this,null,e)}}),e.extend(i,{create:function(e,t){var r,s;r=new i(e,n[e]||1);if(t)for(s in t)r.attr(s,t[s]);return r}}),e.html.Node=i}(tinymce),function(e){var t=e.html.Node;e.html.DomParser=function(n,r){function f(n){var s,o,u,a,f,l,c,h,p,d,v,m,g,y;m=e.makeMap("tr,td,th,tbody,thead,tfoot,table"),v=r.getNonEmptyElements();for(s=0;s<n.length;s++){o=n[s];if(!o.parent)continue;a=[o];for(u=o.parent;u&&!r.isValidChild(u.name,o.name)&&!m[u.name];u=u.parent)a.push(u);if(u&&a.length>1){a.reverse(),f=l=i.filterNode(a[0].clone());for(p=0;p<a.length-1;p++){r.isValidChild(l.name,a[p].name)?(c=i.filterNode(a[p].clone()),l.append(c)):c=l;for(h=a[p].firstChild;h&&h!=a[p+1];)y=h.next,c.append(h),h=y;l=c}f.isEmpty(v)?u.insert(o,a[0],!0):(u.insert(f,a[0],!0),u.insert(o,f)),u=a[0],(u.isEmpty(v)||u.firstChild===u.lastChild&&u.firstChild.name==="br")&&u.empty().remove()}else if(o.parent){if(o.name==="li"){g=o.prev;if(!g||g.name!=="ul"&&g.name!=="ul"){g=o.next;if(!g||g.name!=="ul"&&g.name!=="ul"){o.wrap(i.filterNode(new t("ul",1)));continue}g.insert(o,g.firstChild,!0);continue}g.append(o);continue}r.isValidChild(o.parent.name,"div")&&r.isValidChild("div",o.name)?o.wrap(i.filterNode(new t("div",1))):o.name==="style"||o.name==="script"?o.empty().remove():o.unwrap()}}}var i=this,s={},o=[],u={},a={};n=n||{},n.validate="validate"in n?n.validate:!0,n.root_name=n.root_name||"body",i.schema=r=r||new e.html.Schema,i.filterNode=function(e){var t,n,r;n in s&&(r=u[n],r?r.push(e):u[n]=[e]),t=o.length;while(t--)n=o[t].name,n in e.attributes.map&&(r=a[n],r?r.push(e):a[n]=[e]);return e},i.addNodeFilter=function(t,n){e.each(e.explode(t),function(e){var t=s[e];t||(s[e]=t=[]),t.push(n)})},i.addAttributeFilter=function(t,n){e.each(e.explode(t),function(e){var t;for(t=0;t<o.length;t++)if(o[t].name===e){o[t].callbacks.push(n);return}o.push({name:e,callbacks:[n]})})},i.parse=function(i,l){function _(){var e=h.firstChild,t,n;while(e)t=e.next,e.type==3||e.type==1&&e.name!=="p"&&!S[e.name]&&!e.attr("data-mce-type")?n?n.append(e):(n=D(M,1),h.insert(n,e),n.append(e)):n=null,e=t}function D(e,n){var r=new t(e,n),i;return e in s&&(i=u[e],i?i.push(r):u[e]=[r]),r}function P(e){var t,n,r;for(t=e.prev;t&&t.type===3;)n=t.value.replace(C,""),n.length>0?(t.value=n,t=t.prev):(r=t.prev,t.remove(),t=r)}var c,h,p,d,v,m,g,y,b,w,E,S,x,T=[],N,C,k,L,A,O,M;l=l||{},u={},a={},S=e.extend(e.makeMap("script,style,head,html,body,title,meta,param"),r.getBlockElements()),O=r.getNonEmptyElements(),A=r.children,E=n.validate,M="forced_root_block"in l?l.forced_root_block:n.forced_root_block,L=r.getWhiteSpaceElements(),x=/^[ \t\r\n]+/,C=/[ \t\r\n]+$/,k=/[ \t\r\n]+/g,c=new e.html.SaxParser({validate:E,fix_self_closing:!E,cdata:function(e){p.append(D("#cdata",4)).value=e},text:function(e,t){var n;N||(e=e.replace(k," "),p.lastChild&&S[p.lastChild.name]&&(e=e.replace(x,""))),e.length!==0&&(n=D("#text",3),n.raw=!!t,p.append(n).value=e)},comment:function(e){p.append(D("#comment",8)).value=e},pi:function(e,t){p.append(D(e,7)).value=t,P(p)},doctype:function(e){var t;t=p.append(D("#doctype",10)),t.value=e,P(p)},start:function(e,t,n){var i,s,u,f,l,c,h,d;u=E?r.getElementRule(e):{};if(u){i=D(u.outputName||e,1),i.attributes=t,i.shortEnded=n,p.append(i),d=A[p.name],d&&A[i.name]&&!d[i.name]&&T.push(i),s=o.length;while(s--)l=o[s].name,l in t.map&&(b=a[l],b?b.push(i):a[l]=[i]);S[e]&&P(i),n||(p=i),!N&&L[e]&&(N=!0)}},end:function(e){var n,i,s,o,u;i=E?r.getElementRule(e):{};if(i){if(S[e]){if(!N){for(n=p.firstChild;n&&n.type===3;)s=n.value.replace(x,""),s.length>0?(n.value=s,n=n.next):(o=n.next,n.remove(),n=o);for(n=p.lastChild;n&&n.type===3;)s=n.value.replace(C,""),s.length>0?(n.value=s,n=n.prev):(o=n.prev,n.remove(),n=o)}n=p.prev,n&&n.type===3&&(s=n.value.replace(x,""),s.length>0?n.value=s:n.remove())}N&&L[e]&&(N=!1);if(i.removeEmpty||i.paddEmpty)if(p.isEmpty(O))if(i.paddEmpty)p.empty().append(new t("#text","3")).value="Â ";else if(!p.attributes.map.name){u=p.parent,p.empty().remove(),p=u;return}p=p.parent}}},r),h=p=new t(l.context||n.root_name,11),c.parse(i),E&&T.length&&(l.context?l.invalid=!0:f(T)),M&&h.name=="body"&&_();if(!l.invalid){for(w in u){b=s[w],d=u[w],g=d.length;while(g--)d[g].parent||d.splice(g,1);for(v=0,m=b.length;v<m;v++)b[v](d,w,l)}for(v=0,m=o.length;v<m;v++){b=o[v];if(b.name in a){d=a[b.name],g=d.length;while(g--)d[g].parent||d.splice(g,1);for(g=0,y=b.callbacks.length;g<y;g++)b.callbacks[g](d,b.name,l)}}}return h},n.remove_trailing_brs&&i.addNodeFilter("br",function(t,n){var i,s=t.length,o,u=e.extend({},r.getBlockElements()),a=r.getNonEmptyElements(),f,l,c,h;u.body=1;for(i=0;i<s;i++){o=t[i],f=o.parent;if(u[o.parent.name]&&o===f.lastChild){c=o.prev;while(c){h=c.name;if(h!=="span"||c.attr("data-mce-type")!=="bookmark"){if(h!=="br")break;if(h==="br"){o=null;break}}c=c.prev}o&&(o.remove(),f.isEmpty(a)&&(elementRule=r.getElementRule(f.name),elementRule&&(elementRule.removeEmpty?f.remove():elementRule.paddEmpty&&(f.empty().append(new e.html.Node("#text",3)).value="Â "))))}else{l=o;while(f.firstChild===l&&f.lastChild===l){l=f;if(u[f.name])break;f=f.parent}l===f&&(textNode=new e.html.Node("#text",3),textNode.value="Â ",o.replace(textNode))}}}),n.allow_html_in_named_anchor||i.addAttributeFilter("name",function(e,t){var n=e.length,r,i,s,o;while(n--){o=e[n];if(o.name==="a"&&o.firstChild){s=o.parent,r=o.lastChild;do i=r.prev,s.insert(r,o),r=i;while(r)}}})}}(tinymce),tinymce.html.Writer=function(e){var t=[],n,r,i,s,o;return e=e||{},n=e.indent,r=tinymce.makeMap(e.indent_before||""),i=tinymce.makeMap(e.indent_after||""),s=tinymce.html.Entities.getEncodeFunc(e.entity_encoding||"raw",e.entities),o=e.element_format=="html",{start:function(e,u,a){var f,l,c,h;n&&r[e]&&t.length>0&&(h=t[t.length-1],h.length>0&&h!=="\n"&&t.push("\n")),t.push("<",e);if(u)for(f=0,l=u.length;f<l;f++)c=u[f],t.push(" ",c.name,'="',s(c.value,!0),'"');!a||o?t[t.length]=">":t[t.length]=" />",a&&n&&i[e]&&t.length>0&&(h=t[t.length-1],h.length>0&&h!=="\n"&&t.push("\n"))},end:function(e){var r;t.push("</",e,">"),n&&i[e]&&t.length>0&&(r=t[t.length-1],r.length>0&&r!=="\n"&&t.push("\n"))},text:function(e,n){e.length>0&&(t[t.length]=n?e:s(e))},cdata:function(e){t.push("<![CDATA[",e,"]]>")},comment:function(e){t.push("<!--",e,"-->")},pi:function(e,r){r?t.push("<?",e," ",r,"?>"):t.push("<?",e,"?>"),n&&t.push("\n")},doctype:function(e){t.push("<!DOCTYPE",e,">",n?"\n":"")},reset:function(){t.length=0},getContent:function(){return t.join("").replace(/\n$/,"")}}},function(e){e.html.Serializer=function(t,n){var r=this,i=new e.html.Writer(t);t=t||{},t.validate="validate"in t?t.validate:!0,r.schema=n=n||new e.html.Schema,r.writer=i,r.serialize=function(e){function o(e){var t=r[e.type],u,a,f,l,c,h,p,d,v;if(!t){u=e.name,a=e.shortEnded,f=e.attributes;if(s&&f&&f.length>1){h=[],h.map={},v=n.getElementRule(e.name);for(p=0,d=v.attributesOrder.length;p<d;p++)l=v.attributesOrder[p],l in f.map&&(c=f.map[l],h.map[l]=c,h.push({name:l,value:c}));for(p=0,d=f.length;p<d;p++)l=f[p].name,l in h.map||(c=f.map[l],h.map[l]=c,h.push({name:l,value:c}));f=h}i.start(e.name,f,a);if(!a){if(e=e.firstChild)do o(e);while(e=e.next);i.end(u)}}else t(e)}var r,s;return s=t.validate,r={3:function(e,t){i.text(e.value,e.raw)},8:function(e){i.comment(e.value)},7:function(e){i.pi(e.name,e.value)},10:function(e){i.doctype(e.value)},4:function(e){i.cdata(e.value)},11:function(e){if(e=e.firstChild)do o(e);while(e=e.next)}},i.reset(),e.type==1&&!t.inner?o(e):r[11](e),i.getContent()}}}(tinymce),tinymce.dom={},function(e,t){function r(e,t,n,r){e.addEventListener?e.addEventListener(t,n,r||!1):e.attachEvent&&e.attachEvent("on"+t,n)}function i(e,t,n,r){e.removeEventListener?e.removeEventListener(t,n,r||!1):e.detachEvent&&e.detachEvent("on"+t,n)}function s(e,t){function i(){return!1}function s(){return!0}var n,r=t||{};for(n in e)n!=="layerX"&&n!=="layerY"&&(r[n]=e[n]);return r.target||(r.target=r.srcElement||document),r.preventDefault=function(){r.isDefaultPrevented=s,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},r.stopPropagation=function(){r.isPropagationStopped=s,e&&(e.stopPropagation?e.stopPropagation():e.cancelBubble=!0)},r.stopImmediatePropagation=function(){r.isImmediatePropagationStopped=s,r.stopPropagation()},r.isDefaultPrevented||(r.isDefaultPrevented=i,r.isPropagationStopped=i,r.isImmediatePropagationStopped=i),r}function o(e,t,s){function a(){s.domLoaded||(s.domLoaded=!0,t(u))}var o=e.document,u={type:"ready"};n?r(e,"DOMContentLoaded",a):(r(o,"readystatechange",function(){o.readyState==="complete"&&(i(o,"readystatechange",arguments.callee),a())}),o.documentElement.doScroll&&e===e.top&&function(){try{o.documentElement.doScroll("left")}catch(e){setTimeout(arguments.callee,0);return}a()}()),r(e,"load",a)}function u(e){function d(e,t){var n,r,i,s;n=a[t][e.type];if(n)for(r=0,i=n.length;r<i;r++){s=n[r],s&&s.func.call(s.scope,e)===!1&&e.preventDefault();if(e.isImmediatePropagationStopped())return}}var u=this,a={},f,l,c,h,p;h="onmouseenter"in document.documentElement,c="onfocusin"in document.documentElement,p={mouseenter:"mouseover",mouseleave:"mouseout"},f=1,u.domLoaded=!1,u.events=a,u.bind=function(i,l,v,m){function N(e){d(s(e||T.event),g)}var g,y,b,w,E,S,x,T=window;if(!i||i.nodeType===3||i.nodeType===8)return;i[t]?(g=i[t],a[g]||(a[g]={})):(g=f++,i[t]=g,a[g]={}),m=m||i,l=l.split(" "),b=l.length;while(b--){w=l[b],S=N,E=x=!1,w==="DOMContentLoaded"&&(w="ready");if(!(!u.domLoaded&&i.readyState!="complete"||w!=="ready")){u.domLoaded=!0,v.call(m,s({type:w}));continue}h||(E=p[w],E&&(S=function(e){var t,n;t=e.currentTarget,n=e.relatedTarget;if(n&&t.contains)n=t.contains(n);else while(n&&n!==t)n=n.parentNode;n||(e=s(e||T.event),e.type=e.type==="mouseout"?"mouseleave":"mouseenter",e.target=t,d(e,g))})),!c&&(w==="focusin"||w==="focusout")&&(x=!0,E=w==="focusin"?"focus":"blur",S=function(e){e=s(e||T.event),e.type=e.type==="focus"?"focusin":"focusout",d(e,g)}),y=a[g][w],y?y.push({func:v,scope:m}):(a[g][w]=y=[{func:v,scope:m}],y.fakeName=E,y.capture=x,y.nativeHandler=S,n||(y.proxyHandler=e(g)),w==="ready"?o(i,S,u):r(i,E||w,n?S:y.proxyHandler,x))}return i=y=0,v},u.unbind=function(e,r,s){var o,f,l,c,h,p;if(!e||e.nodeType===3||e.nodeType===8)return u;o=e[t];if(o){p=a[o];if(r){r=r.split(" "),l=r.length;while(l--){h=r[l],f=p[h];if(f){if(s){c=f.length;while(c--)f[c].func===s&&f.splice(c,1)}if(!s||f.length===0)delete p[h],i(e,f.fakeName||h,n?f.nativeHandler:f.proxyHandler,f.capture)}}}else{for(h in p)f=p[h],i(e,f.fakeName||h,n?f.nativeHandler:f.proxyHandler,f.capture);p={}}for(h in p)return u;delete a[o];try{delete e[t]}catch(d){e[t]=null}}return u},u.fire=function(e,n,r){var i,o;if(!e||e.nodeType===3||e.nodeType===8)return u;o=s(null,r),o.type=n;do i=e[t],i&&d(o,i),e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow;while(e&&!o.isPropagationStopped());return u},u.clean=function(e){var n,r,i=u.unbind;if(!e||e.nodeType===3||e.nodeType===8)return u;e[t]&&i(e),e.getElementsByTagName||(e=e.document);if(e&&e.getElementsByTagName){i(e),r=e.getElementsByTagName("*"),n=r.length;while(n--)e=r[n],e[t]&&i(e)}return u},u.callNativeHandler=function(e,t){a&&a[e][t.type].nativeHandler(t)},u.destory=function(){a={}},u.add=function(e,t,n,r){typeof e=="string"&&(e=document.getElementById(e));if(e&&e instanceof Array){var i=e;while(i--)u.add(e[i],t,n,r);return}return t==="init"&&(t="ready"),u.bind(e,t instanceof Array?t.join(" "):t,n,r)},u.remove=function(e,t,n){typeof e=="string"&&(e=document.getElementById(e));if(e instanceof Array){var r=e;while(r--)u.remove(e[r],t,n,scope);return u}return u.unbind(e,t instanceof Array?t.join(" "):t,n)},u.clear=function(e){return typeof e=="string"&&(e=document.getElementById(e)),u.clean(e)},u.cancel=function(e){return e&&(u.prevent(e),u.stop(e)),!1},u.prevent=function(e){return e.preventDefault(),!1},u.stop=function(e){return e.stopPropagation(),!1}}var n=!!document.addEventListener;e.EventUtils=u,e.Event=new u(function(e){return function(t){tinymce.dom.Event.callNativeHandler(e,t)}}),e.Event.bind(window,"ready",function(){}),e=0}(tinymce.dom,"data-mce-expando"),tinymce.dom.TreeWalker=function(e,t){function r(e,n,r,i){var s,o;if(e){if(!i&&e[n])return e[n];if(e!=t){s=e[r];if(s)return s;for(o=e.parentNode;o&&o!=t;o=o.parentNode){s=o[r];if(s)return s}}}}var n=e;this.current=function(){return n},this.next=function(e){return n=r(n,"firstChild","nextSibling",e)},this.prev=function(e){return n=r(n,"lastChild","previousSibling",e)}},function(e){var t=e.each,n=e.is,r=e.isWebKit,i=e.isIE,s=e.html.Entities,o=/^([a-z0-9],?)+$/i,u=/^[ \t\r\n]*$/;e.create("tinymce.dom.DOMUtils",{doc:null,root:null,files:null,pixelStyles:/^(top|left|bottom|right|width|height|borderWidth)$/,props:{"for":"htmlFor","class":"className",className:"className",checked:"checked",disabled:"disabled",maxlength:"maxLength",readonly:"readOnly",selected:"selected",value:"value",id:"id",name:"name",type:"type"},DOMUtils:function(t,n){var r=this,i,s,o;r.doc=t,r.win=window,r.files={},r.cssFlicker=!1,r.counter=0,r.stdMode=!e.isIE||t.documentMode>=8,r.boxModel=!e.isIE||t.compatMode=="CSS1Compat"||r.stdMode,r.hasOuterHTML="outerHTML"in t.createElement("a"),r.settings=n=e.extend({keep_values:!1,hex_colors:1},n),r.schema=n.schema,r.styles=new e.html.Styles({url_converter:n.url_converter,url_converter_scope:n.url_converter_scope},n.schema);if(e.isIE6)try{t.execCommand("BackgroundImageCache",!1,!0)}catch(u){r.cssFlicker=!0}r.fixDoc(t),r.events=n.ownEvents?new e.dom.EventUtils(n.proxy):e.dom.Event,e.addUnload(r.destroy,r),o=n.schema?n.schema.getBlockElements():{},r.isBlock=function(e){var t=e.nodeType;return t?t===1&&!!o[e.nodeName]:!!o[e]}},fixDoc:function(e){var t=this.settings,n;if(i&&t.schema){"abbr article aside audio canvas details figcaption figure footer header hgroup mark menu meter nav output progress section summary time video".replace(/\w+/g,function(t){e.createElement(t)});for(n in t.schema.getCustomElements())e.createElement(n)}},clone:function(e,n){var r=this,s,o;return!i||e.nodeType!==1||n?e.cloneNode(n):(o=r.doc,n?s.firstChild:(s=o.createElement(e.nodeName),t(r.getAttribs(e),function(t){r.setAttrib(s,t.nodeName,r.getAttrib(e,t.nodeName))}),s))},getRoot:function(){var e=this,t=e.settings;return t&&e.get(t.root_element)||e.doc.body},getViewPort:function(e){var t,n;return e=e?e:this.win,t=e.document,n=this.boxModel?t.documentElement:t.body,{x:e.pageXOffset||n.scrollLeft,y:e.pageYOffset||n.scrollTop,w:e.innerWidth||n.clientWidth,h:e.innerHeight||n.clientHeight}},getRect:function(e){var t,n=this,r;return e=n.get(e),t=n.getPos(e),r=n.getSize(e),{x:t.x,y:t.y,w:r.w,h:r.h}},getSize:function(e){var t=this,n,r;return e=t.get(e),n=t.getStyle(e,"width"),r=t.getStyle(e,"height"),n.indexOf("px")===-1&&(n=0),r.indexOf("px")===-1&&(r=0),{w:parseInt(n,10)||e.offsetWidth||e.clientWidth,h:parseInt(r,10)||e.offsetHeight||e.clientHeight}},getParent:function(e,t,n){return this.getParents(e,t,n,!1)},getParents:function(e,t,r,i){var s=this,o,u=s.settings,a=[];e=s.get(e),i=i===undefined,u.strict_root&&(r=r||s.getRoot()),n(t,"string")&&(o=t,t==="*"?t=function(e){return e.nodeType==1}:t=function(e){return s.is(e,o)});while(e){if(e==r||!e.nodeType||e.nodeType===9)break;if(!t||t(e)){if(!i)return e;a.push(e)}e=e.parentNode}return i?a:null},get:function(e){var t;if(e&&this.doc&&typeof e=="string"){t=e,e=this.doc.getElementById(e);if(e&&e.id!==t)return this.doc.getElementsByName(t)[1]}return e},getNext:function(e,t){return this._findSib(e,t,"nextSibling")},getPrev:function(e,t){return this._findSib(e,t,"previousSibling")},add:function(e,t,r,i,s){var o=this;return this.run(e,function(e){var u,f;return u=n(t,"string")?o.doc.createElement(t):t,o.setAttribs(u,r),i&&(i.nodeType?u.appendChild(i):o.setHTML(u,i)),s?u:e.appendChild(u)})},create:function(e,t,n){return this.add(this.doc.createElement(e),e,t,n,1)},createHTML:function(e,t,n){var r="",i=this,s;r+="<"+e;for(s in t)t.hasOwnProperty(s)&&(r+=" "+s+'="'+i.encode(t[s])+'"');return typeof n!="undefined"?r+">"+n+"</"+e+">":r+" />"},remove:function(t,n){return this.run(t,function(t){var r,i=t.parentNode;if(!i)return null;if(n)while(r=t.firstChild)!e.isIE||r.nodeType!==3||r.nodeValue?i.insertBefore(r,t):t.removeChild(r);return i.removeChild(t)})},setStyle:function(t,n,r){var s=this;return s.run(t,function(o){var u,a;u=o.style,n=n.replace(/-(\D)/g,function(e,t){return t.toUpperCase()}),s.pixelStyles.test(n)&&(e.is(r,"number")||/^[\-0-9\.]+$/.test(r))&&(r+="px");switch(n){case"opacity":if(i){u.filter=r===""?"":"alpha(opacity="+r*100+")";if(!t.currentStyle||!t.currentStyle.hasLayout)u.display="inline-block"}u[n]=u["-moz-opacity"]=u["-khtml-opacity"]=r||"";break;case"float":i?u.styleFloat=r:u.cssFloat=r;break;default:u[n]=r||""}s.settings.update_styles&&s.setAttrib(o,"data-mce-style")})},getStyle:function(e,t,n){e=this.get(e);if(!e)return;if(this.doc.defaultView&&n){t=t.replace(/[A-Z]/g,function(e){return"-"+e});try{return this.doc.defaultView.getComputedStyle(e,null).getPropertyValue(t)}catch(r){return null}}return t=t.replace(/-(\D)/g,function(e,t){return t.toUpperCase()}),t=="float"&&(t=i?"styleFloat":"cssFloat"),e.currentStyle&&n?e.currentStyle[t]:e.style?e.style[t]:undefined},setStyles:function(e,n){var r=this,i=r.settings,s;s=i.update_styles,i.update_styles=0,t(n,function(t,n){r.setStyle(e,n,t)}),i.update_styles=s,i.update_styles&&r.setAttrib(e,i.cssText)},removeAllAttribs:function(e){return this.run(e,function(e){var t,n=e.attributes;for(t=n.length-1;t>=0;t--)e.removeAttributeNode(n.item(t))})},setAttrib:function(e,r,i){var s=this;if(!e||!r)return;return s.settings.strict&&(r=r.toLowerCase()),this.run(e,function(e){var o=s.settings,u=e.getAttribute(r);if(i!==null)switch(r){case"style":if(!n(i,"string")){t(i,function(t,n){s.setStyle(e,n,t)});return}o.keep_values&&(i&&!s._isRes(i)?e.setAttribute("data-mce-style",i,2):e.removeAttribute("data-mce-style",2)),e.style.cssText=i;break;case"class":e.className=i||"";break;case"src":case"href":o.keep_values&&(o.url_converter&&(i=o.url_converter.call(o.url_converter_scope||s,i,r,e)),s.setAttrib(e,"data-mce-"+r,i,2));break;case"shape":e.setAttribute("data-mce-style",i)}n(i)&&i!==null&&i.length!==0?e.setAttribute(r,""+i,2):e.removeAttribute(r,2);if(tinyMCE.activeEditor&&u!=i){var a=tinyMCE.activeEditor;a.onSetAttrib.dispatch(a,e,r,i)}})},setAttribs:function(e,n){var r=this;return this.run(e,function(e){t(n,function(t,n){r.setAttrib(e,n,t)})})},getAttrib:function(t,s,o){var u,a=this,f;t=a.get(t);if(!t||t.nodeType!==1)return o===f?!1:o;n(o)||(o="");if(/^(src|href|style|coords|shape)$/.test(s)){u=t.getAttribute("data-mce-"+s);if(u)return u}i&&a.props[s]&&(u=t[a.props[s]],u=u&&u.nodeValue?u.nodeValue:u),u||(u=t.getAttribute(s,2));if(/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noshade|nowrap|readonly|selected)$/.test(s))return t[a.props[s]]===!0&&u===""?s:u?s:"";if(t.nodeName==="FORM"&&t.getAttributeNode(s))return t.getAttributeNode(s).nodeValue;s==="style"&&(u=u||t.style.cssText,u&&(u=a.serializeStyle(a.parseStyle(u),t.nodeName),a.settings.keep_values&&!a._isRes(u)&&t.setAttribute("data-mce-style",u))),r&&s==="class"&&u&&(u=u.replace(/(apple|webkit)\-[a-z\-]+/gi,""));if(i)switch(s){case"rowspan":case"colspan":u===1&&(u="");break;case"size":if(u==="+0"||u===20||u===0)u="";break;case"width":case"height":case"vspace":case"checked":case"disabled":case"readonly":u===0&&(u="");break;case"hspace":u===-1&&(u="");break;case"maxlength":case"tabindex":if(u===32768||u===2147483647||u==="32768")u="";break;case"multiple":case"compact":case"noshade":case"nowrap":if(u===65535)return s;return o;case"shape":u=u.toLowerCase();break;default:s.indexOf("on")===0&&u&&(u=e._replace(/^function\s+\w+\(\)\s+\{\s+(.*)\s+\}$/,"$1",""+u))}return u!==f&&u!==null&&u!==""?""+u:o},getPos:function(e,t){var n=this,r=0,i=0,s,o=n.doc,u
;e=n.get(e),t=t||o.body;if(e){if(e.getBoundingClientRect)return e=e.getBoundingClientRect(),s=n.boxModel?o.documentElement:o.body,r=e.left+(o.documentElement.scrollLeft||o.body.scrollLeft)-s.clientTop,i=e.top+(o.documentElement.scrollTop||o.body.scrollTop)-s.clientLeft,{x:r,y:i};u=e;while(u&&u!=t&&u.nodeType)r+=u.offsetLeft||0,i+=u.offsetTop||0,u=u.offsetParent;u=e.parentNode;while(u&&u!=t&&u.nodeType)r-=u.scrollLeft||0,i-=u.scrollTop||0,u=u.parentNode}return{x:r,y:i}},parseStyle:function(e){return this.styles.parse(e)},serializeStyle:function(e,t){return this.styles.serialize(e,t)},loadCSS:function(n){var r=this,s=r.doc,o;n||(n=""),o=s.getElementsByTagName("head")[0],t(n.split(","),function(t){var n;if(r.files[t])return;r.files[t]=!0,n=r.create("link",{rel:"stylesheet",href:e._addVer(t)}),i&&s.documentMode&&s.recalc&&(n.onload=function(){s.recalc&&s.recalc(),n.onload=null}),o.appendChild(n)})},addClass:function(e,t){return this.run(e,function(e){var n;return t?this.hasClass(e,t)?e.className:(n=this.removeClass(e,t),e.className=(n!=""?n+" ":"")+t):0})},removeClass:function(t,n){var r=this,i;return r.run(t,function(t){var s;return r.hasClass(t,n)?(i||(i=new RegExp("(^|\\s+)"+n+"(\\s+|$)","g")),s=t.className.replace(i," "),s=e.trim(s!=" "?s:""),t.className=s,s||(t.removeAttribute("class"),t.removeAttribute("className")),s):t.className})},hasClass:function(e,t){return e=this.get(e),!e||!t?!1:(" "+e.className+" ").indexOf(" "+t+" ")!==-1},show:function(e){return this.setStyle(e,"display","block")},hide:function(e){return this.setStyle(e,"display","none")},isHidden:function(e){return e=this.get(e),!e||e.style.display=="none"||this.getStyle(e,"display")=="none"},uniqueId:function(e){return(e?e:"mce_")+this.counter++},setHTML:function(e,n){var r=this;return r.run(e,function(e){if(i){while(e.firstChild)e.removeChild(e.firstChild);try{e.innerHTML="<br />"+n,e.removeChild(e.firstChild)}catch(s){e=r.create("div"),e.innerHTML="<br />"+n,t(e.childNodes,function(t,n){n&&e.appendChild(t)})}}else e.innerHTML=n;return n})},getOuterHTML:function(e){var t,n=this;return e=n.get(e),e?e.nodeType===1&&n.hasOuterHTML?e.outerHTML:(t=(e.ownerDocument||n.doc).createElement("body"),t.appendChild(e.cloneNode(!0)),t.innerHTML):null},setOuterHTML:function(e,t,n){function s(e,t,n){var i,s;s=n.createElement("body"),s.innerHTML=t,i=s.lastChild;while(i)r.insertAfter(i.cloneNode(!0),e),i=i.previousSibling;r.remove(e)}var r=this;return this.run(e,function(e){e=r.get(e);if(e.nodeType==1){n=n||e.ownerDocument||r.doc;if(i)try{i&&e.nodeType==1?e.outerHTML=t:s(e,t,n)}catch(o){s(e,t,n)}else s(e,t,n)}})},decode:s.decode,encode:s.encodeAllRaw,insertAfter:function(e,t){return t=this.get(t),this.run(e,function(e){var n,r;return n=t.parentNode,r=t.nextSibling,r?n.insertBefore(e,r):n.appendChild(e),e})},replace:function(r,i,s){var o=this;return n(i,"array")&&(r=r.cloneNode(!0)),o.run(i,function(n){return s&&t(e.grep(n.childNodes),function(e){r.appendChild(e)}),n.parentNode.replaceChild(r,n)})},rename:function(e,n){var r=this,i;return e.nodeName!=n.toUpperCase()&&(i=r.create(n),t(r.getAttribs(e),function(t){r.setAttrib(i,t.nodeName,r.getAttrib(e,t.nodeName))}),r.replace(i,e,1)),i||e},findCommonAncestor:function(e,t){var n=e,r;while(n){r=t;while(r&&n!=r)r=r.parentNode;if(n==r)break;n=n.parentNode}return!n&&e.ownerDocument?e.ownerDocument.documentElement:n},toHex:function(e){function n(e){return e=parseInt(e,10).toString(16),e.length>1?e:"0"+e}var t=/^\s*rgb\s*?\(\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?\)\s*$/i.exec(e);return t?(e="#"+n(t[1])+n(t[2])+n(t[3]),e):e},getClasses:function(){function a(n){t(n.imports,function(e){a(e)}),t(n.cssRules||n.rules,function(n){switch(n.type||1){case 1:n.selectorText&&t(n.selectorText.split(","),function(t){t=t.replace(/^\s*|\s*$|^\s\./g,"");if(/\.mce/.test(t)||!/\.[\w\-]+$/.test(t))return;u=t,t=e._replace(/.*\.([a-z0-9_\-]+).*/i,"$1",t);if(o&&!(t=o(t,u)))return;s[t]||(r.push({"class":t}),s[t]=1)});break;case 3:a(n.styleSheet)}})}var n=this,r=[],i,s={},o=n.settings.class_filter,u;if(n.classes)return n.classes;try{t(n.doc.styleSheets,a)}catch(f){}return r.length>0&&(n.classes=r),r},run:function(e,n,r){var i=this,s;return i.doc&&typeof e=="string"&&(e=i.get(e)),e?(r=r||this,!e.nodeType&&(e.length||e.length===0)?(s=[],t(e,function(e,t){e&&(typeof e=="string"&&(e=i.doc.getElementById(e)),s.push(n.call(r,e,t)))}),s):n.call(r,e)):!1},getAttribs:function(e){var t;return e=this.get(e),e?i?(t=[],e.nodeName=="OBJECT"?e.attributes:(e.nodeName==="OPTION"&&this.getAttrib(e,"selected")&&t.push({specified:1,nodeName:"selected"}),e.cloneNode(!1).outerHTML.replace(/<\/?[\w:\-]+ ?|=[\"][^\"]+\"|=\'[^\']+\'|=[\w\-]+|>/gi,"").replace(/[\w:\-]+/gi,function(e){t.push({specified:1,nodeName:e})}),t)):e.attributes:[]},isEmpty:function(t,n){var r=this,i,s,o,a,f,l=0;t=t.firstChild;if(t){a=new e.dom.TreeWalker(t,t.parentNode),n=n||r.schema?r.schema.getNonEmptyElements():null;do{o=t.nodeType;if(o===1){if(t.getAttribute("data-mce-bogus"))continue;f=t.nodeName.toLowerCase();if(n&&n[f]){if(f==="br"){l++;continue}return!1}s=r.getAttribs(t),i=t.attributes.length;while(i--){f=t.attributes[i].nodeName;if(f==="name"||f==="data-mce-bookmark")return!1}}if(o==8)return!1;if(o===3&&!u.test(t.nodeValue))return!1}while(t=a.next())}return l<=1},destroy:function(t){var n=this;n.win=n.doc=n.root=n.events=n.frag=null,t||e.removeUnload(n.destroy)},createRng:function(){var t=this.doc;return t.createRange?t.createRange():new e.dom.Range(this)},nodeIndex:function(e,t){var n=0,r,i,s;if(e)for(r=e.nodeType,e=e.previousSibling,i=e;e;e=e.previousSibling){s=e.nodeType;if(t&&s==3)if(s==r||!e.nodeValue.length)continue;n++,r=s}return n},split:function(t,n,r){function f(t){function o(e){var t=e.previousSibling&&e.previousSibling.nodeName=="SPAN",n=e.nextSibling&&e.nextSibling.nodeName=="SPAN";return t&&n}var n,r=t.childNodes,s=t.nodeType;if(s==1&&t.getAttribute("data-mce-type")=="bookmark")return;for(n=r.length-1;n>=0;n--)f(r[n]);if(s!=9){if(s==3&&t.nodeValue.length>0){var u=e.trim(t.nodeValue).length;if(!i.isBlock(t.parentNode)||u>0||u===0&&o(t))return}else if(s==1){r=t.childNodes,r.length==1&&r[0]&&r[0].nodeType==1&&r[0].getAttribute("data-mce-type")=="bookmark"&&t.parentNode.insertBefore(r[0],t);if(r.length||/^(br|hr|input|img)$/i.test(t.nodeName))return}i.remove(t)}return t}var i=this,s=i.createRng(),o,u,a;if(t&&n)return s.setStart(t.parentNode,i.nodeIndex(t)),s.setEnd(n.parentNode,i.nodeIndex(n)),o=s.extractContents(),s=i.createRng(),s.setStart(n.parentNode,i.nodeIndex(n)+1),s.setEnd(t.parentNode,i.nodeIndex(t)+1),u=s.extractContents(),a=t.parentNode,a.insertBefore(f(o),t),r?a.replaceChild(r,n):a.insertBefore(n,t),a.insertBefore(f(u),t),i.remove(t),r||n},bind:function(e,t,n,r){return this.events.add(e,t,n,r||this)},unbind:function(e,t,n){return this.events.remove(e,t,n)},fire:function(e,t,n){return this.events.fire(e,t,n)},getContentEditable:function(e){var t;return e.nodeType!=1?null:(t=e.getAttribute("data-mce-contenteditable"),t&&t!=="inherit"?t:e.contentEditable!=="inherit"?e.contentEditable:null)},_findSib:function(e,t,r){var i=this,s=t;if(e){n(s,"string")&&(s=function(e){return i.is(e,t)});for(e=e[r];e;e=e[r])if(s(e))return e}return null},_isRes:function(e){return/^(top|left|bottom|right|width|height)/i.test(e)||/;\s*(top|left|bottom|right|width|height)/i.test(e)}}),e.DOM=new e.dom.DOMUtils(document,{process_html:0})}(tinymce),function(e){function t(e){function v(){return r.createDocumentFragment()}function m(e,t){H(u,e,t)}function g(e,t){H(a,e,t)}function y(e){m(e.parentNode,d(e))}function b(e){m(e.parentNode,d(e)+1)}function w(e){g(e.parentNode,d(e))}function E(e){g(e.parentNode,d(e)+1)}function S(e){e?(n[c]=n[l],n[h]=n[f]):(n[l]=n[c],n[f]=n[h]),n.collapsed=u}function x(e){y(e),E(e)}function T(e){m(e,0),g(e,e.nodeType===1?e.childNodes.length:e.nodeValue.length)}function N(e,t){var r=n[l],i=n[f],s=n[c],o=n[h],u=t.startContainer,a=t.startOffset,p=t.endContainer,d=t.endOffset;if(e===0)return P(r,i,u,a);if(e===1)return P(s,o,u,a);if(e===2)return P(s,o,p,d);if(e===3)return P(r,i,p,d)}function C(){B(o)}function k(){return B(i)}function L(){return B(s)}function A(t){var n=this[l],r=this[f],i,s;n.nodeType!==3&&n.nodeType!==4||!n.nodeValue?(n.childNodes.length>0&&(s=n.childNodes[r]),s?n.insertBefore(t,s):n.appendChild(t)):r?r>=n.nodeValue.length?e.insertAfter(t,n):(i=n.splitText(r),n.parentNode.insertBefore(t,i)):n.parentNode.insertBefore(t,n)}function O(e){var t=n.extractContents();n.insertNode(e),e.appendChild(t),n.selectNode(e)}function M(){return p(new t(e),{startContainer:n[l],startOffset:n[f],endContainer:n[c],endOffset:n[h],collapsed:n.collapsed,commonAncestorContainer:n.commonAncestorContainer})}function _(e,t){var n;if(e.nodeType==3)return e;if(t<0)return e;n=e.firstChild;while(n&&t>0)--t,n=n.nextSibling;return n?n:e}function D(){return n[l]==n[c]&&n[f]==n[h]}function P(t,n,r,i){var s,o,u,a,f,l;if(t==r)return n==i?0:n<i?-1:1;s=r;while(s&&s.parentNode!=t)s=s.parentNode;if(s){o=0,u=t.firstChild;while(u!=s&&o<n)o++,u=u.nextSibling;return n<=o?-1:1}s=t;while(s&&s.parentNode!=r)s=s.parentNode;if(s){o=0,u=r.firstChild;while(u!=s&&o<i)o++,u=u.nextSibling;return o<i?-1:1}a=e.findCommonAncestor(t,r),f=t;while(f&&f.parentNode!=a)f=f.parentNode;f||(f=a),l=r;while(l&&l.parentNode!=a)l=l.parentNode;l||(l=a);if(f==l)return 0;u=a.firstChild;while(u){if(u==f)return-1;if(u==l)return 1;u=u.nextSibling}}function H(t,r,i){var s,o;t?(n[l]=r,n[f]=i):(n[c]=r,n[h]=i),s=n[c];while(s.parentNode)s=s.parentNode;o=n[l];while(o.parentNode)o=o.parentNode;o==s?P(n[l],n[f],n[c],n[h])>0&&n.collapse(t):n.collapse(t),n.collapsed=D(),n.commonAncestorContainer=e.findCommonAncestor(n[l],n[c])}function B(e){var t,r=0,i=0,s,o,u,a,f,h;if(n[l]==n[c])return j(e);for(t=n[c],s=t.parentNode;s;t=s,s=s.parentNode){if(s==n[l])return F(t,e);++r}for(t=n[l],s=t.parentNode;s;t=s,s=s.parentNode){if(s==n[c])return I(t,e);++i}o=i-r,u=n[l];while(o>0)u=u.parentNode,o--;a=n[c];while(o<0)a=a.parentNode,o++;for(f=u.parentNode,h=a.parentNode;f!=h;f=f.parentNode,h=h.parentNode)u=f,a=h;return q(u,a,e)}function j(e){var t,i,a,c,p,d,m,g,y;e!=o&&(t=v());if(n[f]==n[h])return t;if(n[l].nodeType==3){i=n[l].nodeValue,a=i.substring(n[f],n[h]),e!=s&&(c=n[l],g=n[f],y=n[h]-n[f],g===0&&y>=c.nodeValue.length-1?c.parentNode.removeChild(c):c.deleteData(g,y),n.collapse(u));if(e==o)return;return a.length>0&&t.appendChild(r.createTextNode(a)),t}c=_(n[l],n[f]),p=n[h]-n[f];while(c&&p>0)d=c.nextSibling,m=W(c,e),t&&t.appendChild(m),--p,c=d;return e!=s&&n.collapse(u),t}function F(e,t){var r,i,u,l,c,h;t!=o&&(r=v()),i=R(e,t),r&&r.appendChild(i),u=d(e),l=u-n[f];if(l<=0)return t!=s&&(n.setEndBefore(e),n.collapse(a)),r;i=e.previousSibling;while(l>0)c=i.previousSibling,h=W(i,t),r&&r.insertBefore(h,r.firstChild),--l,i=c;return t!=s&&(n.setEndBefore(e),n.collapse(a)),r}function I(e,t){var r,i,a,f,l,c;t!=o&&(r=v()),a=U(e,t),r&&r.appendChild(a),i=d(e),++i,f=n[h]-i,a=e.nextSibling;while(a&&f>0)l=a.nextSibling,c=W(a,t),r&&r.appendChild(c),--f,a=l;return t!=s&&(n.setStartAfter(e),n.collapse(u)),r}function q(e,t,r){var i,a,f,l,c,h,p,m;r!=o&&(a=v()),i=U(e,r),a&&a.appendChild(i),f=e.parentNode,l=d(e),c=d(t),++l,h=c-l,p=e.nextSibling;while(h>0)m=p.nextSibling,i=W(p,r),a&&a.appendChild(i),p=m,--h;return i=R(t,r),a&&a.appendChild(i),r!=s&&(n.setStartAfter(e),n.collapse(u)),a}function R(e,t){var r=_(n[c],n[h]-1),i,s,f,l,p,d=r!=n[c];if(r==e)return z(r,d,a,t);i=r.parentNode,s=z(i,a,a,t);while(i){while(r)f=r.previousSibling,l=z(r,d,a,t),t!=o&&s.insertBefore(l,s.firstChild),d=u,r=f;if(i==e)return s;r=i.previousSibling,i=i.parentNode,p=z(i,a,a,t),t!=o&&p.appendChild(s),s=p}}function U(e,t){var r=_(n[l],n[f]),i=r!=n[l],s,c,h,p,d;if(r==e)return z(r,i,u,t);s=r.parentNode,c=z(s,a,u,t);while(s){while(r)h=r.nextSibling,p=z(r,i,u,t),t!=o&&c.appendChild(p),i=u,r=h;if(s==e)return c;r=s.nextSibling,s=s.parentNode,d=z(s,a,u,t),t!=o&&d.appendChild(c),c=d}}function z(t,r,i,u){var l,c,p,d,v;if(r)return W(t,u);if(t.nodeType==3){l=t.nodeValue,i?(d=n[f],c=l.substring(d),p=l.substring(0,d)):(d=n[h],c=l.substring(0,d),p=l.substring(d)),u!=s&&(t.nodeValue=p);if(u==o)return;return v=e.clone(t,a),v.nodeValue=c,v}if(u==o)return;return e.clone(t,a)}function W(t,n){if(n!=o)return n==s?e.clone(t,u):t;t.parentNode.removeChild(t)}var n=this,r=e.doc,i=0,s=1,o=2,u=!0,a=!1,f="startOffset",l="startContainer",c="endContainer",h="endOffset",p=tinymce.extend,d=e.nodeIndex;p(n,{startContainer:r,startOffset:0,endContainer:r,endOffset:0,collapsed:u,commonAncestorContainer:r,START_TO_START:0,START_TO_END:1,END_TO_END:2,END_TO_START:3,setStart:m,setEnd:g,setStartBefore:y,setStartAfter:b,setEndBefore:w,setEndAfter:E,collapse:S,selectNode:x,selectNodeContents:T,compareBoundaryPoints:N,deleteContents:C,extractContents:k,cloneContents:L,insertNode:A,surroundContents:O,cloneRange:M})}e.Range=t}(tinymce.dom),function(){function e(e){function s(t,n){var r,i=0,s,o,u,a,f,l,c=-1,h;r=t.duplicate(),r.collapse(n),h=r.parentElement();if(h.ownerDocument!==e.dom.doc)return;while(h.contentEditable==="false")h=h.parentNode;if(!h.hasChildNodes())return{node:h,inside:1};u=h.children,s=u.length-1;while(i<=s){l=Math.floor((i+s)/2),a=u[l],r.moveToElementText(a),c=r.compareEndPoints(n?"StartToStart":"EndToEnd",t);if(c>0)s=l-1;else{if(!(c<0))return{node:a};i=l+1}}if(c<0){a?r.collapse(!1):(r.moveToElementText(h),r.collapse(!0),a=h,o=!0),f=0;while(r.compareEndPoints(n?"StartToStart":"StartToEnd",t)!==0){if(r.move("character",1)===0||h!=r.parentElement())break;f++}}else{r.collapse(!0),f=0;while(r.compareEndPoints(n?"StartToStart":"StartToEnd",t)!==0){if(r.move("character",-1)===0||h!=r.parentElement())break;f++}}return{node:a,position:c,offset:f,inside:o}}function o(){function h(e){var t=s(r,e),n,o,u=0,a,f,l;n=t.node,o=t.offset;if(t.inside&&!n.hasChildNodes()){i[e?"setStart":"setEnd"](n,0);return}if(o===f){i[e?"setStartBefore":"setEndAfter"](n);return}if(t.position<0){a=t.inside?n.firstChild:n.nextSibling;if(!a){i[e?"setStartAfter":"setEndAfter"](n);return}if(!o){a.nodeType==3?i[e?"setStart":"setEnd"](a,0):i[e?"setStartBefore":"setEndBefore"](a);return}while(a){l=a.nodeValue,u+=l.length;if(u>=o){n=a,u-=o,u=l.length-u;break}a=a.nextSibling}}else{a=n.previousSibling;if(!a)return i[e?"setStartBefore":"setEndBefore"](n);if(!o){n.nodeType==3?i[e?"setStart":"setEnd"](a,n.nodeValue.length):i[e?"setStartAfter":"setEndAfter"](a);return}while(a){u+=a.nodeValue.length;if(u>=o){n=a,u-=o;break}a=a.previousSibling}}i[e?"setStart":"setEnd"](n,u)}var r=e.getRng(),i=n.createRng(),o,u,a,f,l,c;o=r.item?r.item(0):r.parentElement();if(o.ownerDocument!=n.doc)return i;u=e.isCollapsed();if(r.item)return i.setStart(o.parentNode,n.nodeIndex(o)),i.setEnd(i.startContainer,i.startOffset+1),i;try{h(!0),u||h()}catch(p){if(p.number!=-2147024809)throw p;l=t.getBookmark(2),a=r.duplicate(),a.collapse(!0),o=a.parentElement(),u||(a=r.duplicate(),a.collapse(!1),f=a.parentElement(),f.innerHTML=f.innerHTML),o.innerHTML=o.innerHTML,t.moveToBookmark(l),r=e.getRng(),h(!0),u||h()}return i}var t=this,n=e.dom,r=!0,i=!1;this.getBookmark=function(t){function a(e){var t,r,i,s,o=[];t=e.parentNode,r=n.getRoot().parentNode;while(t!=r&&t.nodeType!==9){i=t.children,s=i.length;while(s--)if(e===i[s]){o.push(s);break}e=t,t=t.parentNode}return o}function f(e){var t;t=s(r,e);if(t)return{position:t.position,offset:t.offset,indexes:a(t.node),inside:t.inside}}var r=e.getRng(),i,o,u={};return t===2&&(r.item?u.start={ctrl:!0,indexes:a(r.item(0))}:(u.start=f(!0),e.isCollapsed()||(u.end=f()))),u},this.moveToBookmark=function(e){function i(e){var t,r,i,s;t=n.getRoot();for(r=e.length-1;r>=0;r--)s=t.children,i=e[r],i<=s.length-1&&(t=s[i]);return t}function s(n){var s=e[n?"start":"end"],o,u,a;s&&(o=s.position>0,u=r.createTextRange(),u.moveToElementText(i(s.indexes)),offset=s.offset,offset!==a?(u.collapse(s.inside||o),u.moveStart("character",o?-offset:offset)):u.collapse(n),t.setEndPoint(n?"StartToStart":"EndToStart",u),n&&t.collapse(!0))}var t,r=n.doc.body;e.start&&(e.start.ctrl?(t=r.createControlRange(),t.addElement(i(e.start.indexes)),t.select()):(t=r.createTextRange(),s(!0),s(),t.select()))},this.addRange=function(t){function h(e){var t,s,h,p,d;h=n.create("a"),t=e?o:a,s=e?u:f,p=r.duplicate();if(t==l||t==l.documentElement)t=c,s=0;t.nodeType==3?(t.parentNode.insertBefore(h,t),p.moveToElementText(h),p.moveStart("character",s),n.remove(h),r.setEndPoint(e?"StartToStart":"EndToEnd",p)):(d=t.childNodes,d.length?(s>=d.length?n.insertAfter(h,d[d.length-1]):t.insertBefore(h,d[s]),p.moveToElementText(h)):t.canHaveHTML&&(t.innerHTML="<span>ï»¿</span>",h=t.firstChild,p.moveToElementText(h),p.collapse(i)),r.setEndPoint(e?"StartToStart":"EndToEnd",p),n.remove(h))}var r,s,o,u,a,f,l=e.dom.doc,c=l.body;o=t.startContainer,u=t.startOffset,a=t.endContainer,f=t.endOffset,r=c.createTextRange();if(o==a&&o.nodeType==1){if(u==f&&!o.hasChildNodes()){if(o.canHaveHTML){o.innerHTML="<span>ï»¿</span><span>ï»¿</span>",r.moveToElementText(o.lastChild),r.select(),n.doc.selection.clear(),o.innerHTML="";return}u=n.nodeIndex(o),o=o.parentNode}if(u==f-1)try{s=c.createControlRange(),s.addElement(o.childNodes[u]),s.select();return}catch(p){}}h(!0),h(),r.select()},this.getRangeAt=o}tinymce.dom.TridentSelection=e}(),function(e){e.dom.Element=function(t,n){var r=this,i,s;r.settings=n=n||{},r.id=t,r.dom=i=n.dom||e.DOM,e.isIE||(s=i.get(r.id)),e.each("getPos,getRect,getParent,add,setStyle,getStyle,setStyles,setAttrib,setAttribs,getAttrib,addClass,removeClass,hasClass,getOuterHTML,setOuterHTML,remove,show,hide,isHidden,setHTML,get".split(/,/),function(e){r[e]=function(){var n=[t],s;for(s=0;s<arguments.length;s++)n.push(arguments[s]);return n=i[e].apply(i,n),r.update(e),n}}),e.extend(r,{on:function(t,n,i){return e.dom.Event.add(r.id,t,n,i)},getXY:function(){return{x:parseInt(r.getStyle("left")),y:parseInt(r.getStyle("top"))}},getSize:function(){var e=i.get(r.id);return{w:parseInt(r.getStyle("width")||e.clientWidth),h:parseInt(r.getStyle("height")||e.clientHeight)}},moveTo:function(e,t){r.setStyles({left:e,top:t})},moveBy:function(e,t){var n=r.getXY();r.moveTo(n.x+e,n.y+t)},resizeTo:function(e,t){r.setStyles({width:e,height:t})},resizeBy:function(e,t){var n=r.getSize();r.resizeTo(n.w+e,n.h+t)},update:function(t){var s;if(e.isIE6&&n.blocker){t=t||"";if(t.indexOf("get")===0||t.indexOf("has")===0||t.indexOf("is")===0)return;if(t=="remove"){i.remove(r.blocker);return}r.blocker?s=i.get(r.blocker):(r.blocker=i.uniqueId(),s=i.add(n.container||i.getRoot(),"iframe",{id:r.blocker,style:"position:absolute;",frameBorder:0,src:'javascript:""'}),i.setStyle(s,"opacity",0)),i.setStyles(s,{left:r.getStyle("left",1),top:r.getStyle("top",1),width:r.getStyle("width",1),height:r.getStyle("height",1),display:r.getStyle("display",1),zIndex:parseInt(r.getStyle("zIndex",1)||0)-1})}}})}}(tinymce),function(e){function t(e){return e.replace(/[\n\r]+/g,"")}var n=e.is,r=e.isIE,i=e.each,s=e.dom.TreeWalker;e.create("tinymce.dom.Selection",{Selection:function(t,n,r){var s=this;s.dom=t,s.win=n,s.serializer=r,i(["onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent"],function(t){s[t]=new e.util.Dispatcher(s)}),s.win.getSelection||(s.tridentSel=new e.dom.TridentSelection(s)),e.isIE&&t.boxModel&&this._fixIESelection(),e.addUnload(s.destroy,s)},setCursorLocation:function(e,t){var n=this,r=n.dom.createRng();r.setStart(e,t),r.setEnd(e,t),n.setRng(r),n.collapse(!1)},getContent:function(e){var t=this,r=t.getRng(),i=t.dom.create("body"),s=t.getSel(),o,u,a;return e=e||{},o=u="",e.get=!0,e.format=e.format||"html",e.forced_root_block="",t.onBeforeGetContent.dispatch(t,e),e.format=="text"?t.isCollapsed()?"":r.text||(s.toString?s.toString():""):(r.cloneContents?(a=r.cloneContents(),a&&i.appendChild(a)):n(r.item)||n(r.htmlText)?(i.innerHTML="<br>"+(r.item?r.item(0).outerHTML:r.htmlText),i.removeChild(i.firstChild)):i.innerHTML=r.toString(),/^\s/.test(i.innerHTML)&&(o=" "),/\s+$/.test(i.innerHTML)&&(u=" "),e.getInner=!0,e.content=t.isCollapsed()?"":o+t.serializer.serialize(i,e)+u,t.onGetContent.dispatch(t,e),e.content)},setContent:function(e,t){var n=this,r=n.getRng(),i,s=n.win.document,o,u;t=t||{format:"html"},t.set=!0,e=t.content=e,t.no_events||n.onBeforeSetContent.dispatch(n,t),e=t.content;if(r.insertNode){e+='<span id="__caret">_</span>',r.startContainer==s&&r.endContainer==s?s.body.innerHTML=e:(r.deleteContents(),s.body.childNodes.length===0?s.body.innerHTML=e:r.createContextualFragment?r.insertNode(r.createContextualFragment(e)):(o=s.createDocumentFragment(),u=s.createElement("div"),o.appendChild(u),u.outerHTML=e,r.insertNode(o))),i=n.dom.get("__caret"),r=s.createRange(),r.setStartBefore(i),r.setEndBefore(i),n.setRng(r),n.dom.remove("__caret");try{n.setRng(r)}catch(a){}}else r.item&&(s.execCommand("Delete",!1,null),r=n.getRng()),/^\s+/.test(e)?(r.pasteHTML('<span id="__mce_tmp">_</span>'+e),n.dom.remove("__mce_tmp")):r.pasteHTML(e);t.no_events||n.onSetContent.dispatch(n,t)},getStart:function(){var e=this.getRng(),t,n,r,i;if(e.duplicate||e.item){if(e.item)return e.item(0);r=e.duplicate(),r.collapse(1),t=r.parentElement(),n=i=e.parentElement();while(i=i.parentNode)if(i==t){t=n;break}return t}return t=e.startContainer,t.nodeType==1&&t.hasChildNodes()&&(t=t.childNodes[Math.min(t.childNodes.length-1,e.startOffset)]),t&&t.nodeType==3?t.parentNode:t},getEnd:function(){var e=this,t=e.getRng(),n,r;return t.duplicate||t.item?t.item?t.item(0):(t=t.duplicate(),t.collapse(0),n=t.parentElement(),n&&n.nodeName=="BODY"?n.lastChild||n:n):(n=t.endContainer,r=t.endOffset,n.nodeType==1&&n.hasChildNodes()&&(n=n.childNodes[r>0?r-1:r]),n&&n.nodeType==3?n.parentNode:n)},getBookmark:function(e,t){function d(e,t){var n=0;return i(r.select(e),function(e,r){e==t&&(n=r)}),n}function v(){function o(e,r){var s=e[r?"startContainer":"endContainer"],o=e[r?"startOffset":"endOffset"],u=[],a,f,l=0;if(s.nodeType==3){if(t)for(a=s.previousSibling;a&&a.nodeType==3;a=a.previousSibling)o+=a.nodeValue.length;u.push(o)}else f=s.childNodes,o>=f.length&&f.length&&(l=1,o=Math.max(0,f.length-1)),u.push(n.dom.nodeIndex(f[o],t)+l);for(;s&&s!=i;s=s.parentNode)u.push(n.dom.nodeIndex(s,t));return u}var e=n.getRng(!0),i=r.getRoot(),s={};return s.start=o(e,!0),n.isCollapsed()||(s.end=o(e)),s}var n=this,r=n.dom,s,o,u,a,f,l,c,h="ï»¿",p;if(e==2)return n.tridentSel?n.tridentSel.getBookmark(e):v();if(e)return{rng:n.getRng()};s=n.getRng(),u=r.uniqueId(),a=tinyMCE.activeEditor.selection.isCollapsed(),p="overflow:hidden;line-height:0px";if(s.duplicate||s.item){if(!!s.item)return l=s.item(0),f=l.nodeName,{name:f,index:d(f,l)};o=s.duplicate();try{s.collapse(),s.pasteHTML('<span data-mce-type="bookmark" id="'+u+'_start" style="'+p+'">'+h+"</span>"),a||(o.collapse(!1),s.moveToElementText(o.parentElement()),s.compareEndPoints("StartToEnd",o)===0&&o.move("character",-1),o.pasteHTML('<span data-mce-type="bookmark" id="'+u+'_end" style="'+p+'">'+h+"</span>"))}catch(m){return null}}else{l=n.getNode(),f=l.nodeName;if(f=="IMG")return{name:f,index:d(f,l)};if(s.startContainer.nodeType==9)return;o=s.cloneRange(),a||(o.collapse(!1),o.insertNode(r.create("span",{"data-mce-type":"bookmark",id:u+"_end",style:p},h))),s.collapse(!0),s.insertNode(r.create("span",{"data-mce-type":"bookmark",id:u+"_start",style:p},h))}return n.moveToBookmark({id:u,keep:1}),{id:u}},moveToBookmark:function(t){function d(e){var n=t[e?"start":"end"],r,i,s,o;if(n){s=n[0];for(i=f,r=n.length-1;r>=1;r--){o=i.childNodes;if(n[r]>o.length-1)return;i=o[n[r]]}i.nodeType===3&&(s=Math.min(n[0],i.nodeValue.length)),i.nodeType===1&&(s=Math.min(n[0],i.childNodes.length)),e?a.setStart(i,s):a.setEnd(i,s)}return!0}function v(n){var r=s.get(t.id+"_"+n),o,u,a,f,d=t.keep;if(r){o=r.parentNode,n=="start"?(d?(o=r.firstChild,u=1):u=s.nodeIndex(r),l=c=o,h=p=u):(d?(o=r.firstChild,u=1):u=s.nodeIndex(r),c=o,p=u);if(!d){f=r.previousSibling,a=r.nextSibling,i(e.grep(r.childNodes),function(e){e.nodeType==3&&(e.nodeValue=e.nodeValue.replace(/\uFEFF/g,""))});while(r=s.get(t.id+"_"+n))s.remove(r,1);f&&a&&f.nodeType==a.nodeType&&f.nodeType==3&&!e.isOpera&&(u=f.nodeValue.length,f.appendData(a.nodeValue),s.remove(a),n=="start"?(l=c=f,h=p=u):(c=f,p=u))}}}function m(e){return s.isBlock(e)&&!e.innerHTML&&!r&&(e.innerHTML='<br data-mce-bogus="1" />'),e}var n=this,s=n.dom,o,u,a,f,l,c,h,p;if(t)if(t.start){a=s.createRng(),f=s.getRoot();if(n.tridentSel)return n.tridentSel.moveToBookmark(t);d(!0)&&d()&&n.setRng(a)}else t.id?(v("start"),v("end"),l&&(a=s.createRng(),a.setStart(m(l),h),a.setEnd(m(c),p),n.setRng(a))):t.name?n.select(s.select(t.name)[t.index]):t.rng&&n.setRng(t.rng)},select:function(t,n){function a(t,n){var r=new s(t,t);do{if(t.nodeType==3&&e.trim(t.nodeValue).length!==0){n?o.setStart(t,0):o.setEnd(t,t.nodeValue.length);return}if(t.nodeName=="BR"){n?o.setStartBefore(t):o.setEndBefore(t);return}}while(t=n?r.next():r.prev())}var r=this,i=r.dom,o=i.createRng(),u;return t&&(u=i.nodeIndex(t),o.setStart(t.parentNode,u),o.setEnd(t.parentNode,u+1),n&&(a(t,1),a(t)),r.setRng(o)),t},isCollapsed:function(){var e=this,t=e.getRng(),n=e.getSel();return!t||t.item?!1:t.compareEndPoints?t.compareEndPoints("StartToEnd",t)===0:!n||t.collapsed},collapse:function(e){var t=this,n=t.getRng(),r;n.item&&(r=n.item(0),n=t.win.document.body.createTextRange(),n.moveToElementText(r)),n.collapse(!!e),t.setRng(n)},getSel:function(){var e=this,t=this.win;return t.getSelection?t.getSelection():t.document.selection},getRng:function(t){var n=this,r,i,s,o=n.win.document;if(t&&n.tridentSel)return n.tridentSel.getRangeAt(0);try{if(r=n.getSel())i=r.rangeCount>0?r.getRangeAt(0):r.createRange?r.createRange():o.createRange()}catch(u){}return e.isIE&&i&&i.setStart&&o.selection.createRange().item&&(s=o.selection.createRange().item(0),i=o.createRange(),i.setStartBefore(s),i.setEndAfter(s)),i||(i=o.createRange?o.createRange():o.body.createTextRange()),n.selectedRange&&n.explicitRange&&(i.compareBoundaryPoints(i.START_TO_START,n.selectedRange)===0&&i.compareBoundaryPoints(i.END_TO_END,n.selectedRange)===0?i=n.explicitRange:(n.selectedRange=null,n.explicitRange=null)),i},setRng:function(e){var t,n=this;if(!n.tridentSel){t=n.getSel();if(t){n.explicitRange=e;try{t.removeAllRanges()}catch(r){}t.addRange(e),n.selectedRange=t.rangeCount>0?t.getRangeAt(0):null}}else{if(e.cloneRange)try{n.tridentSel.addRange(e);return}catch(r){}try{e.select()}catch(r){}}},setNode:function(e){var t=this;return t.setContent(t.dom.getOuterHTML(e)),e},getNode:function(){function o(e,t){var n=e;while(e&&e.nodeType===3&&e.length===0)e=t?e.nextSibling:e.previousSibling;return e||n}var e=this,t=e.getRng(),n=e.getSel(),r,i=t.startContainer,s=t.endContainer;if(!t)return e.dom.getRoot();if(t.setStart){r=t.commonAncestorContainer;if(!t.collapsed){t.startContainer==t.endContainer&&t.endOffset-t.startOffset<2&&t.startContainer.hasChildNodes()&&(r=t.startContainer.childNodes[t.startOffset]);if(i.nodeType===3&&s.nodeType===3){i.length===t.startOffset?i=o(i.nextSibling,!0):i=i.parentNode,t.endOffset===0?s=o(s.previousSibling,!1):s=s.parentNode;if(i&&i===s)return i}}return r&&r.nodeType==3?r.parentNode:r}return t.item?t.item(0):t.parentElement()},getSelectedBlocks:function(e,t){var n=this,r=n.dom,i,o,u,a=[];i=r.getParent(e||n.getStart(),r.isBlock),o=r.getParent(t||n.getEnd(),r.isBlock),i&&a.push(i);if(i&&o&&i!=o){u=i;var f=new s(i,r.getRoot());while((u=f.next())&&u!=o)r.isBlock(u)&&a.push(u)}return o&&i!=o&&a.push(o),a},normalize:function(){function o(e){function d(e,t){var n,a;t=t||o,n=new s(t,f.getParent(t.parentNode,f.isBlock)||l);while(c=n[e?"prev":"next"]()){if(c.nodeType===3&&c.nodeValue.length>0){o=c,u=e?c.nodeValue.length:0,r=!0;return}if(f.isBlock(c)||h[c.nodeName.toLowerCase()])return;a=c}i&&a&&(o=a,r=!0,u=0)}var o,u,a,f=t.dom,l=f.getRoot(),c,h,p;o=n[(e?"start":"end")+"Container"],u=n[(e?"start":"end")+"Offset"],h=f.schema.getNonEmptyElements(),o.nodeType===9&&(o=o.body,u=0);if(o===l){if(e){c=o.childNodes[u>0?u-1:0];if(c){p=c.nodeName.toLowerCase();if(h[c.nodeName]||c.nodeName=="TABLE")return}}if(o.hasChildNodes()){o=o.childNodes[Math.min(!e&&u>0?u-1:u,o.childNodes.length-1)],u=0;if(o.hasChildNodes()){c=o,a=new s(o,l);do{if(c.nodeType===3&&c.nodeValue.length>0){u=e?0:c.nodeValue.length,o=c,r=!0;break}if(h[c.nodeName.toLowerCase()]){u=f.nodeIndex(c),o=c.parentNode,c.nodeName=="IMG"&&!e&&u++,r=!0;break}}while(c=e?a.next():a.prev())}}}i&&(o.nodeType===3&&u===0&&d(!0),o.nodeType===1&&o.childNodes[u]&&o.childNodes[u].nodeName==="BR"&&d(!0,o.childNodes[u])),e&&!i&&o.nodeType===3&&u===o.nodeValue.length&&d(!1),r&&n["set"+(e?"Start":"End")](o,u)}var t=this,n,r,i;if(e.isIE)return;n=t.getRng(),i=n.collapsed,o(!0),i||o(),r&&(i&&n.collapse(!0),t.setRng(n))},destroy:function(t){var n=this;n.win=null,t||e.removeUnload(n.destroy)},_fixIESelection:function(){function o(e,t){var r=n.createTextRange();try{r.moveToPoint(e,t)}catch(i){r=null}return r}function u(e){var t;e.button?(t=o(e.x,e.y),t&&(t.compareEndPoints("StartToStart",i)>0?t.setEndPoint("StartToStart",i):t.setEndPoint("EndToEnd",i),t.select())):a()}function a(){var n=t.selection.createRange();i&&!n.item&&n.compareEndPoints("StartToEnd",n)===0&&i.select(),e.unbind(t,"mouseup",a),e.unbind(t,"mousemove",u),i=r=0}var e=this.dom,t=e.doc,n=t.body,r,i,s;t.documentElement.unselectable=!0,e.bind(t,["mousedown","contextmenu"],function(n){if(n.target.nodeName==="HTML"){r&&a(),s=t.documentElement;if(s.scrollHeight>s.clientHeight)return;r=1,i=o(n.x,n.y),i&&(e.bind(t,"mouseup",a),e.bind(t,"mousemove",u),e.win.focus(),i.select())}})}})}(tinymce),function(e){e.dom.Serializer=function(t,n,r){var i,s,o=e.isIE,u=e.each,a;return t.apply_source_formatting||(t.indent=!1),n=n||e.DOM,r=r||new e.html.Schema(t),t.entity_encoding=t.entity_encoding||"named",t.remove_trailing_brs="remove_trailing_brs"in t?t.remove_trailing_brs:!0,i=new e.util.Dispatcher(self),s=new e.util.Dispatcher(self),a=new e.html.DomParser(t,r),a.addAttributeFilter("src,href,style",function(e,r){var i=e.length,s,o,u="data-mce-"+r,a=t.url_converter,f=t.url_converter_scope,l;while(i--)s=e[i],o=s.attributes.map[u],o!==l?(s.attr(r,o.length>0?o:null),s.attr(u,null)):(o=s.attributes.map[r],r==="style"?o=n.serializeStyle(n.parseStyle(o),s.name):a&&(o=a.call(f,o,r,s.name)),s.attr(r,o.length>0?o:null))}),a.addAttributeFilter("class",function(e,t){var n=e.length,r,i;while(n--)r=e[n],i=r.attr("class").replace(/\s*mce(Item\w+|Selected)\s*/g,""),r.attr("class",i.length>0?i:null)}),a.addAttributeFilter("data-mce-type",function(e,t,n){var r=e.length,i;while(r--)i=e[r],i.attributes.map["data-mce-type"]==="bookmark"&&!n.cleanup&&i.remove()}),a.addAttributeFilter("data-mce-expando",function(e,t,n){var r=e.length;while(r--)e[r].attr(t,null)}),a.addNodeFilter("script,style",function(e,t){function s(e){return e.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")}var n=e.length,r,i;while(n--)r=e[n],i=r.firstChild?r.firstChild.value:"",t==="script"?(r.attr("type",(r.attr("type")||"text/javascript").replace(/^mce\-/,"")),i.length>0&&(r.firstChild.value="// <![CDATA[\n"+s(i)+"\n// ]]>")):i.length>0&&(r.firstChild.value="<!--\n"+s(i)+"\n-->")}),a.addNodeFilter("#comment",function(e,t){var n=e.length,r;while(n--)r=e[n],r.value.indexOf("[CDATA[")===0?(r.name="#cdata",r.type=4,r.value=r.value.replace(/^\[CDATA\[|\]\]$/g,"")):r.value.indexOf("mce:protected ")===0&&(r.name="#text",r.type=3,r.raw=!0,r.value=unescape(r.value).substr(14))}),a.addNodeFilter("xml:namespace,input",function(e,t){var n=e.length,r;while(n--)r=e[n],r.type===7?r.remove():r.type===1&&t==="input"&&!("type"in r.attributes.map)&&r.attr("type","text")}),t.fix_list_elements&&a.addNodeFilter("ul,ol",function(e,t){var n=e.length,r,i;while(n--)r=e[n],i=r.parent,(i.name==="ul"||i.name==="ol")&&r.prev&&r.prev.name==="li"&&r.prev.append(r)}),a.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style",function(e,t){var n=e.length;while(n--)e[n].attr(t,null)}),{schema:r,addNodeFilter:a.addNodeFilter,addAttributeFilter:a.addAttributeFilter,onPreProcess:i,onPostProcess:s,serialize:function(f,l){var c,h,p,d,v;return o&&n.select("script,style,select,map").length>0?(v=f.innerHTML,f=f.cloneNode(!1),n.setHTML(f,v)):f=f.cloneNode(!0),c=f.ownerDocument.implementation,c.createHTMLDocument&&(h=c.createHTMLDocument(""),u(f.nodeName=="BODY"?f.childNodes:[f],function(e){h.body.appendChild(h.importNode(e,!0))}),f.nodeName!="BODY"?f=h.body.firstChild:f=h.body,p=n.doc,n.doc=h),l=l||{},l.format=l.format||"html",l.no_events||(l.node=f,i.dispatch(self,l)),d=new e.html.Serializer(t,r),l.content=d.serialize(a.parse(e.trim(l.getInner?f.innerHTML:n.getOuterHTML(f)),
l)),l.cleanup||(l.content=l.content.replace(/\uFEFF|\u200B/g,"")),l.no_events||s.dispatch(self,l),p&&(n.doc=p),l.node=null,l.content},addRules:function(e){r.addValidElements(e)},setRules:function(e){r.setValidElements(e)}}}}(tinymce),function(e){e.dom.ScriptLoader=function(t){function c(t,n){function f(){i.remove(a),s&&(s.onreadystatechange=s.onload=s=null),n()}function l(){typeof console!="undefined"&&console.log&&console.log("Failed to load: "+t)}var r=this,i=e.DOM,s,o,u,a;a=i.uniqueId();if(e.isIE6){o=new e.util.URI(t),u=location;if(o.host==u.hostname&&o.port==u.port&&o.protocol+":"==u.protocol&&o.protocol.toLowerCase()!="file"){e.util.XHR.send({url:e._addVer(o.getURI()),success:function(e){var t=i.create("script",{type:"text/javascript"});t.text=e,document.getElementsByTagName("head")[0].appendChild(t),i.remove(t),f()},error:l});return}}s=i.create("script",{id:a,type:"text/javascript",src:e._addVer(t)}),e.isIE||(s.onload=f),s.onerror=l,e.isOpera||(s.onreadystatechange=function(){var e=s.readyState;(e=="complete"||e=="loaded")&&f()}),(document.getElementsByTagName("head")[0]||document.body).appendChild(s)}var n=0,r=1,i=2,s={},o=[],u={},a=[],f=0,l;this.isDone=function(e){return s[e]==i},this.markDone=function(e){s[e]=i},this.add=this.load=function(e,t,r){var i,a=s[e];a==l&&(o.push(e),s[e]=n),t&&(u[e]||(u[e]=[]),u[e].push({func:t,scope:r||this}))},this.loadQueue=function(e,t){this.loadScripts(o,e,t)},this.loadScripts=function(t,n,o){function p(t){e.each(u[t],function(e){e.func.call(e.scope)}),u[t]=l}var h;a.push({func:n,scope:o||this}),h=function(){var n=e.grep(t);t.length=0,e.each(n,function(e){if(s[e]==i){p(e);return}s[e]!=r&&(s[e]=r,f++,c(e,function(){s[e]=i,f--,p(e),h()}))}),f||(e.each(a,function(e){e.func.call(e.scope)}),a.length=0)},h()}},e.ScriptLoader=new e.dom.ScriptLoader}(tinymce),function(e){e.dom.RangeUtils=function(t){var n="ï»¿";this.walk=function(n,r){function v(e){var t;return t=e[0],t.nodeType===3&&t===i&&s>=t.nodeValue.length&&e.splice(0,1),t=e[e.length-1],u===0&&e.length>0&&t===o&&t.nodeType===3&&e.splice(e.length-1,1),e}function m(e,t,n){var r=[];for(;e&&e!=n;e=e[t])r.push(e);return r}function g(e,t){do{if(e.parentNode==t)return e;e=e.parentNode}while(e)}function y(e,t,n){var i=n?"nextSibling":"previousSibling";for(c=e,h=c.parentNode;c&&c!=t;c=h)h=c.parentNode,p=m(c==e?c:c[i],i),p.length&&(n||p.reverse(),r(v(p)))}var i=n.startContainer,s=n.startOffset,o=n.endContainer,u=n.endOffset,a,f,l,c,h,p,d;d=t.select("td.mceSelected,th.mceSelected");if(d.length>0){e.each(d,function(e){r([e])});return}i.nodeType==1&&i.hasChildNodes()&&(i=i.childNodes[s]),o.nodeType==1&&o.hasChildNodes()&&(o=o.childNodes[Math.min(u-1,o.childNodes.length-1)]);if(i==o)return r(v([i]));a=t.findCommonAncestor(i,o);for(c=i;c;c=c.parentNode){if(c===o)return y(i,a,!0);if(c===a)break}for(c=o;c;c=c.parentNode){if(c===i)return y(o,a);if(c===a)break}f=g(i,a)||i,l=g(o,a)||o,y(i,f,!0),p=m(f==i?f:f.nextSibling,"nextSibling",l==o?l.nextSibling:l),p.length&&r(v(p)),y(o,l)},this.split=function(e){function s(e,t){return e.splitText(t)}var t=e.startContainer,n=e.startOffset,r=e.endContainer,i=e.endOffset;return t==r&&t.nodeType==3?n>0&&n<t.nodeValue.length&&(r=s(t,n),t=r.previousSibling,i>n?(i-=n,t=r=s(r,i).previousSibling,i=r.nodeValue.length,n=0):i=0):(t.nodeType==3&&n>0&&n<t.nodeValue.length&&(t=s(t,n),n=0),r.nodeType==3&&i>0&&i<r.nodeValue.length&&(r=s(r,i).previousSibling,i=r.nodeValue.length)),{startContainer:t,startOffset:n,endContainer:r,endOffset:i}}},e.dom.RangeUtils.compareRanges=function(e,t){if(e&&t){if(!e.item&&!e.duplicate)return e.startContainer==t.startContainer&&e.startOffset==t.startOffset;if(e.item&&t.item&&e.item(0)===t.item(0))return!0;if(e.isEqual&&t.isEqual&&t.isEqual(e))return!0}return!1}}(tinymce),function(e){var t=e.dom.Event,n=e.each;e.create("tinymce.ui.KeyboardNavigation",{KeyboardNavigation:function(r,i){var s=this,o=r.root,u=r.items,a=r.enableUpDown,f=r.enableLeftRight||!r.enableUpDown,l=r.excludeFromTabOrder,c,h,p,d,v;i=i||e.DOM,c=function(e){v=e.target.id},h=function(e){i.setAttrib(e.target.id,"tabindex","-1")},d=function(e){var t=i.get(v);i.setAttrib(t,"tabindex","0"),t.focus()},s.focus=function(){i.get(v).focus()},s.destroy=function(){n(u,function(e){i.unbind(i.get(e.id),"focus",c),i.unbind(i.get(e.id),"blur",h)}),i.unbind(i.get(o),"focus",d),i.unbind(i.get(o),"keydown",p),u=i=o=s.focus=c=h=p=d=null,s.destroy=function(){}},s.moveFocus=function(e,o){var a=-1,f=s.controls,l;if(!v)return;n(u,function(e,t){if(e.id===v)return a=t,!1}),a+=e,a<0?a=u.length-1:a>=u.length&&(a=0),l=u[a],i.setAttrib(v,"tabindex","-1"),i.setAttrib(l.id,"tabindex","0"),i.get(l.id).focus(),r.actOnFocus&&r.onAction(l.id),o&&t.cancel(o)},p=function(e){var n=37,i=39,o=38,u=40,l=27,c=14,h=13,p=32;switch(e.keyCode){case n:f&&s.moveFocus(-1);break;case i:f&&s.moveFocus(1);break;case o:a&&s.moveFocus(-1);break;case u:a&&s.moveFocus(1);break;case l:r.onCancel&&(r.onCancel(),t.cancel(e));break;case c:case h:case p:r.onAction&&(r.onAction(v),t.cancel(e))}},n(u,function(e,t){var n;e.id||(e.id=i.uniqueId("_mce_item_")),l?(i.bind(e.id,"blur",h),n="-1"):n=t===0?"0":"-1",i.setAttrib(e.id,"tabindex",n),i.bind(i.get(e.id),"focus",c)}),u[0]&&(v=u[0].id),i.setAttrib(o,"tabindex","-1"),i.bind(i.get(o),"focus",d),i.bind(i.get(o),"keydown",p)}})}(tinymce),function(e){var t=e.DOM,n=e.is;e.create("tinymce.ui.Control",{Control:function(t,n,r){this.id=t,this.settings=n=n||{},this.rendered=!1,this.onRender=new e.util.Dispatcher(this),this.classPrefix="",this.scope=n.scope||this,this.disabled=0,this.active=0,this.editor=r},setAriaProperty:function(e,n){var r=t.get(this.id+"_aria")||t.get(this.id);r&&t.setAttrib(r,"aria-"+e,!!n)},focus:function(){t.get(this.id).focus()},setDisabled:function(e){e!=this.disabled&&(this.setAriaProperty("disabled",e),this.setState("Disabled",e),this.setState("Enabled",!e),this.disabled=e)},isDisabled:function(){return this.disabled},setActive:function(e){e!=this.active&&(this.setState("Active",e),this.active=e,this.setAriaProperty("pressed",e))},isActive:function(){return this.active},setState:function(e,n){var r=t.get(this.id);e=this.classPrefix+e,n?t.addClass(r,e):t.removeClass(r,e)},isRendered:function(){return this.rendered},renderHTML:function(){},renderTo:function(e){t.setHTML(e,this.renderHTML())},postRender:function(){var e=this,t;n(e.disabled)&&(t=e.disabled,e.disabled=-1,e.setDisabled(t)),n(e.active)&&(t=e.active,e.active=-1,e.setActive(t))},remove:function(){t.remove(this.id),this.destroy()},destroy:function(){e.dom.Event.clear(this.id)}})}(tinymce),tinymce.create("tinymce.ui.Container:tinymce.ui.Control",{Container:function(e,t,n){this.parent(e,t,n),this.controls=[],this.lookup={}},add:function(e){return this.lookup[e.id]=e,this.controls.push(e),e},get:function(e){return this.lookup[e]}}),tinymce.create("tinymce.ui.Separator:tinymce.ui.Control",{Separator:function(e,t){this.parent(e,t),this.classPrefix="mceSeparator",this.setDisabled(!0)},renderHTML:function(){return tinymce.DOM.createHTML("span",{"class":this.classPrefix,role:"separator","aria-orientation":"vertical",tabindex:"-1"})}}),function(e){var t=e.is,n=e.DOM,r=e.each,i=e.walk;e.create("tinymce.ui.MenuItem:tinymce.ui.Control",{MenuItem:function(e,t){this.parent(e,t),this.classPrefix="mceMenuItem"},setSelected:function(e){this.setState("Selected",e),this.setAriaProperty("checked",!!e),this.selected=e},isSelected:function(){return this.selected},postRender:function(){var e=this;e.parent(),t(e.selected)&&e.setSelected(e.selected)}})}(tinymce),function(e){var t=e.is,n=e.DOM,r=e.each,i=e.walk;e.create("tinymce.ui.Menu:tinymce.ui.MenuItem",{Menu:function(t,n){var r=this;r.parent(t,n),r.items={},r.collapsed=!1,r.menuCount=0,r.onAddItem=new e.util.Dispatcher(this)},expand:function(e){var t=this;e&&i(t,function(e){e.expand&&e.expand()},"items",t),t.collapsed=!1},collapse:function(e){var t=this;e&&i(t,function(e){e.collapse&&e.collapse()},"items",t),t.collapsed=!0},isCollapsed:function(){return this.collapsed},add:function(t){return t.settings||(t=new e.ui.MenuItem(t.id||n.uniqueId(),t)),this.onAddItem.dispatch(this,t),this.items[t.id]=t},addSeparator:function(){return this.add({separator:!0})},addMenu:function(e){return e.collapse||(e=this.createMenu(e)),this.menuCount++,this.add(e)},hasMenus:function(){return this.menuCount!==0},remove:function(e){delete this.items[e.id]},removeAll:function(){var e=this;i(e,function(e){e.removeAll?e.removeAll():e.remove(),e.destroy()},"items",e),e.items={}},createMenu:function(t){var r=new e.ui.Menu(t.id||n.uniqueId(),t);return r.onAddItem.add(this.onAddItem.dispatch,this.onAddItem),r}})}(tinymce),function(e){var t=e.is,n=e.DOM,r=e.each,i=e.dom.Event,s=e.dom.Element;e.create("tinymce.ui.DropMenu:tinymce.ui.Menu",{DropMenu:function(r,i){i=i||{},i.container=i.container||n.doc.body,i.offset_x=i.offset_x||0,i.offset_y=i.offset_y||0,i.vp_offset_x=i.vp_offset_x||0,i.vp_offset_y=i.vp_offset_y||0,t(i.icons)&&!i.icons&&(i["class"]+=" mceNoIcons"),this.parent(r,i),this.onShowMenu=new e.util.Dispatcher(this),this.onHideMenu=new e.util.Dispatcher(this),this.classPrefix="mceMenu"},createMenu:function(t){var r=this,i=r.settings,s;return t.container=t.container||i.container,t.parent=r,t.constrain=t.constrain||i.constrain,t["class"]=t["class"]||i["class"],t.vp_offset_x=t.vp_offset_x||i.vp_offset_x,t.vp_offset_y=t.vp_offset_y||i.vp_offset_y,t.keyboard_focus=i.keyboard_focus,s=new e.ui.DropMenu(t.id||n.uniqueId(),t),s.onAddItem.add(r.onAddItem.dispatch,r.onAddItem),s},focus:function(){var e=this;e.keyboardNav&&e.keyboardNav.focus()},update:function(){var e=this,t=e.settings,r=n.get("menu_"+e.id+"_tbl"),i=n.get("menu_"+e.id+"_co"),s,o;s=t.max_width?Math.min(r.clientWidth,t.max_width):r.clientWidth,o=t.max_height?Math.min(r.clientHeight,t.max_height):r.clientHeight,n.boxModel?e.element.setStyles({width:s,height:o}):e.element.setStyles({width:s+2,height:o+2}),t.max_width&&n.setStyle(i,"width",s),t.max_height&&(n.setStyle(i,"height",o),r.clientHeight<t.max_height&&n.setStyle(i,"overflow","hidden"))},showMenu:function(t,o,u){var a=this,f=a.settings,l,c=n.getViewPort(),h,p,d,v,m=2,g,y,b=a.classPrefix;a.collapse(1);if(a.isMenuVisible)return;a.rendered?l=n.get("menu_"+a.id):(l=n.add(a.settings.container,a.renderNode()),r(a.items,function(e){e.postRender()}),a.element=new s("menu_"+a.id,{blocker:1,container:f.container})),e.isOpera||n.setStyles(l,{left:-65535,top:-65535}),n.show(l),a.update(),t+=f.offset_x||0,o+=f.offset_y||0,c.w-=4,c.h-=4,f.constrain&&(h=l.clientWidth-m,p=l.clientHeight-m,d=c.x+c.w,v=c.y+c.h,t+f.vp_offset_x+h>d&&(t=u?u-h:Math.max(0,d-f.vp_offset_x-h)),o+f.vp_offset_y+p>v&&(o=Math.max(0,v-f.vp_offset_y-p))),n.setStyles(l,{left:t,top:o}),a.element.update(),a.isMenuVisible=1,a.mouseClickFunc=i.add(l,"click",function(e){var t;e=e.target;if(e&&(e=n.getParent(e,"tr"))&&!n.hasClass(e,b+"ItemSub")){t=a.items[e.id];if(t.isDisabled())return;g=a;while(g)g.hideMenu&&g.hideMenu(),g=g.settings.parent;return t.settings.onclick&&t.settings.onclick(e),!1}}),a.hasMenus()&&(a.mouseOverFunc=i.add(l,"mouseover",function(e){var t,r,i;e=e.target;if(e&&(e=n.getParent(e,"tr"))){t=a.items[e.id],a.lastMenu&&a.lastMenu.collapse(1);if(t.isDisabled())return;e&&n.hasClass(e,b+"ItemSub")&&(r=n.getRect(e),t.showMenu(r.x+r.w-m,r.y-m,r.x),a.lastMenu=t,n.addClass(n.get(t.id).firstChild,b+"ItemActive"))}})),i.add(l,"keydown",a._keyHandler,a),a.onShowMenu.dispatch(a),f.keyboard_focus&&a._setupKeyboardNav()},hideMenu:function(e){var t=this,r=n.get("menu_"+t.id),s;if(!t.isMenuVisible)return;t.keyboardNav&&t.keyboardNav.destroy(),i.remove(r,"mouseover",t.mouseOverFunc),i.remove(r,"click",t.mouseClickFunc),i.remove(r,"keydown",t._keyHandler),n.hide(r),t.isMenuVisible=0,e||t.collapse(1),t.element&&t.element.hide(),(s=n.get(t.id))&&n.removeClass(s.firstChild,t.classPrefix+"ItemActive"),t.onHideMenu.dispatch(t)},add:function(e){var t=this,r;return e=t.parent(e),t.isRendered&&(r=n.get("menu_"+t.id))&&t._add(n.select("tbody",r)[0],e),e},collapse:function(e){this.parent(e),this.hideMenu(1)},remove:function(e){return n.remove(e.id),this.destroy(),this.parent(e)},destroy:function(){var e=this,t=n.get("menu_"+e.id);e.keyboardNav&&e.keyboardNav.destroy(),i.remove(t,"mouseover",e.mouseOverFunc),i.remove(n.select("a",t),"focus",e.mouseOverFunc),i.remove(t,"click",e.mouseClickFunc),i.remove(t,"keydown",e._keyHandler),e.element&&e.element.remove(),n.remove(t)},renderNode:function(){var e=this,t=e.settings,i,o,u,a;return a=n.create("div",{role:"listbox",id:"menu_"+e.id,"class":t["class"],style:"position:absolute;left:0;top:0;z-index:200000;outline:0"}),e.settings.parent&&n.setAttrib(a,"aria-parent","menu_"+e.settings.parent.id),u=n.add(a,"div",{role:"presentation",id:"menu_"+e.id+"_co","class":e.classPrefix+(t["class"]?" "+t["class"]:"")}),e.element=new s("menu_"+e.id,{blocker:1,container:t.container}),t.menu_line&&n.add(u,"span",{"class":e.classPrefix+"Line"}),i=n.add(u,"table",{role:"presentation",id:"menu_"+e.id+"_tbl",border:0,cellPadding:0,cellSpacing:0}),o=n.add(i,"tbody"),r(e.items,function(t){e._add(o,t)}),e.rendered=!0,a},_setupKeyboardNav:function(){var t,r,i=this;t=n.get("menu_"+i.id),r=n.select("a[role=option]","menu_"+i.id),r.splice(0,0,t),i.keyboardNav=new e.ui.KeyboardNavigation({root:"menu_"+i.id,items:r,onCancel:function(){i.hideMenu()},enableUpDown:!0}),t.focus()},_keyHandler:function(e){var t=this,n;switch(e.keyCode){case 37:t.settings.parent&&(t.hideMenu(),t.settings.parent.focus(),i.cancel(e));break;case 39:t.mouseOverFunc&&t.mouseOverFunc(e)}},_add:function(e,t){var r,i=t.settings,s,o,u,a=this.classPrefix,f;if(i.separator){o=n.add(e,"tr",{id:t.id,"class":a+"ItemSeparator"}),n.add(o,"td",{"class":a+"ItemSeparator"}),(r=o.previousSibling)&&n.addClass(r,"mceLast");return}r=o=n.add(e,"tr",{id:t.id,"class":a+"Item "+a+"ItemEnabled"}),r=u=n.add(r,i.titleItem?"th":"td"),r=s=n.add(r,"a",{id:t.id+"_aria",role:i.titleItem?"presentation":"option",href:"javascript:;",onclick:"return false;",onmousedown:"return false;"}),i.parent&&(n.setAttrib(s,"aria-haspopup","true"),n.setAttrib(s,"aria-owns","menu_"+t.id)),n.addClass(u,i["class"]),f=n.add(r,"span",{"class":"mceIcon"+(i.icon?" mce_"+i.icon:"")}),i.icon_src&&n.add(f,"img",{src:i.icon_src}),r=n.add(r,i.element||"span",{"class":"mceText",title:t.settings.title},t.settings.title),t.settings.style&&(typeof t.settings.style=="function"&&(t.settings.style=t.settings.style()),n.setAttrib(r,"style",t.settings.style)),e.childNodes.length==1&&n.addClass(o,"mceFirst"),(r=o.previousSibling)&&n.hasClass(r,a+"ItemSeparator")&&n.addClass(o,"mceFirst"),t.collapse&&n.addClass(o,a+"ItemSub"),(r=o.previousSibling)&&n.removeClass(r,"mceLast"),n.addClass(o,"mceLast")}})}(tinymce),function(e){var t=e.DOM;e.create("tinymce.ui.Button:tinymce.ui.Control",{Button:function(e,t,n){this.parent(e,t,n),this.classPrefix="mceButton"},renderHTML:function(){var e=this.classPrefix,n=this.settings,r,i;return i=t.encode(n.label||""),r='<a role="button" id="'+this.id+'" href="javascript:;" class="'+e+" "+e+"Enabled "+n["class"]+(i?" "+e+"Labeled":"")+'" onmousedown="return false;" onclick="return false;" aria-labelledby="'+this.id+'_voice" title="'+t.encode(n.title)+'">',n.image&&(!this.editor||!this.editor.forcedHighContrastMode)?r+='<img class="mceIcon" src="'+n.image+'" alt="'+t.encode(n.title)+'" />'+i:r+='<span class="mceIcon '+n["class"]+'"></span>'+(i?'<span class="'+e+'Label">'+i+"</span>":""),r+='<span class="mceVoiceLabel mceIconOnly" style="display: none;" id="'+this.id+'_voice">'+n.title+"</span>",r+="</a>",r},postRender:function(){var t=this,n=t.settings,r;e.isIE&&t.editor&&e.dom.Event.add(t.id,"mousedown",function(e){var n=t.editor.selection.getNode().nodeName;r=n==="IMG"?t.editor.selection.getBookmark():null}),e.dom.Event.add(t.id,"click",function(i){if(!t.isDisabled())return e.isIE&&t.editor&&r!==null&&t.editor.selection.moveToBookmark(r),n.onclick.call(n.scope,i)}),e.dom.Event.add(t.id,"keyup",function(r){if(!t.isDisabled()&&r.keyCode==e.VK.SPACEBAR)return n.onclick.call(n.scope,r)})}})}(tinymce),function(e){var t=e.DOM,n=e.dom.Event,r=e.each,i=e.util.Dispatcher,s;e.create("tinymce.ui.ListBox:tinymce.ui.Control",{ListBox:function(t,n,r){var s=this;s.parent(t,n,r),s.items=[],s.onChange=new i(s),s.onPostRender=new i(s),s.onAdd=new i(s),s.onRenderMenu=new e.util.Dispatcher(this),s.classPrefix="mceListBox",s.marked={}},select:function(e){var t=this,n,i;t.marked={};if(e==s)return t.selectByIndex(-1);e&&typeof e=="function"?i=e:i=function(t){return t==e},e!=t.selectedValue&&(r(t.items,function(e,r){if(i(e.value))return n=1,t.selectByIndex(r),!1}),n||t.selectByIndex(-1))},selectByIndex:function(e){var n=this,r,i,s;n.marked={},e!=n.selectedIndex&&(r=t.get(n.id+"_text"),s=t.get(n.id+"_voiceDesc"),i=n.items[e],i?(n.selectedValue=i.value,n.selectedIndex=e,t.setHTML(r,t.encode(i.title)),t.setHTML(s,n.settings.title+" - "+i.title),t.removeClass(r,"mceTitle"),t.setAttrib(n.id,"aria-valuenow",i.title)):(t.setHTML(r,t.encode(n.settings.title)),t.setHTML(s,t.encode(n.settings.title)),t.addClass(r,"mceTitle"),n.selectedValue=n.selectedIndex=null,t.setAttrib(n.id,"aria-valuenow",n.settings.title)),r=0)},mark:function(e){this.marked[e]=!0},add:function(t,n,r){var i=this;r=r||{},r=e.extend(r,{title:t,value:n}),i.items.push(r),i.onAdd.dispatch(i,r)},getLength:function(){return this.items.length},renderHTML:function(){var e="",n=this,r=n.settings,i=n.classPrefix;return e='<span role="listbox" aria-haspopup="true" aria-labelledby="'+n.id+'_voiceDesc" aria-describedby="'+n.id+'_voiceDesc"><table role="presentation" tabindex="0" id="'+n.id+'" cellpadding="0" cellspacing="0" class="'+i+" "+i+"Enabled"+(r["class"]?" "+r["class"]:"")+'"><tbody><tr>',e+="<td>"+t.createHTML("span",{id:n.id+"_voiceDesc","class":"voiceLabel",style:"display:none;"},n.settings.title),e+=t.createHTML("a",{id:n.id+"_text",tabindex:-1,href:"javascript:;","class":"mceText",onclick:"return false;",onmousedown:"return false;"},t.encode(n.settings.title))+"</td>",e+="<td>"+t.createHTML("a",{id:n.id+"_open",tabindex:-1,href:"javascript:;","class":"mceOpen",onclick:"return false;",onmousedown:"return false;"},'<span><span style="display:none;" class="mceIconOnly" aria-hidden="true">â¼</span></span>')+"</td>",e+="</tr></tbody></table></span>",e},showMenu:function(){var i=this,s,o=t.get(this.id),u;if(i.isDisabled()||i.items.length===0)return;if(i.menu&&i.menu.isMenuVisible)return i.hideMenu();i.isMenuRendered||(i.renderMenu(),i.isMenuRendered=!0),s=t.getPos(o),u=i.menu,u.settings.offset_x=s.x,u.settings.offset_y=s.y,u.settings.keyboard_focus=!e.isOpera,r(i.items,function(e){u.items[e.id]&&u.items[e.id].setSelected(0)}),r(i.items,function(e){u.items[e.id]&&i.marked[e.value]&&u.items[e.id].setSelected(1),e.value===i.selectedValue&&u.items[e.id].setSelected(1)}),u.showMenu(0,o.clientHeight),n.add(t.doc,"mousedown",i.hideMenu,i),t.addClass(i.id,i.classPrefix+"Selected")},hideMenu:function(e){var r=this;if(r.menu&&r.menu.isMenuVisible){t.removeClass(r.id,r.classPrefix+"Selected");if(!(!e||e.type!="mousedown"||e.target.id!=r.id+"_text"&&e.target.id!=r.id+"_open"))return;if(!e||!t.getParent(e.target,".mceMenu"))t.removeClass(r.id,r.classPrefix+"Selected"),n.remove(t.doc,"mousedown",r.hideMenu,r),r.menu.hideMenu()}},renderMenu:function(){var e=this,n;n=e.settings.control_manager.createDropMenu(e.id+"_menu",{menu_line:1,"class":e.classPrefix+"Menu mceNoIcons",max_width:150,max_height:150}),n.onHideMenu.add(function(){e.hideMenu(),e.focus()}),n.add({title:e.settings.title,"class":"mceMenuItemTitle",onclick:function(){e.settings.onselect("")!==!1&&e.select("")}}),r(e.items,function(r){r.value===s?n.add({title:r.title,role:"option","class":"mceMenuItemTitle",onclick:function(){e.settings.onselect("")!==!1&&e.select("")}}):(r.id=t.uniqueId(),r.role="option",r.onclick=function(){e.settings.onselect(r.value)!==!1&&e.select(r.value)},n.add(r))}),e.onRenderMenu.dispatch(e,n),e.menu=n},postRender:function(){var r=this,i=r.classPrefix;n.add(r.id,"click",r.showMenu,r),n.add(r.id,"keydown",function(e){e.keyCode==32&&(r.showMenu(e),n.cancel(e))}),n.add(r.id,"focus",function(){r._focused||(r.keyDownHandler=n.add(r.id,"keydown",function(e){e.keyCode==40&&(r.showMenu(),n.cancel(e))}),r.keyPressHandler=n.add(r.id,"keypress",function(e){var t;e.keyCode==13&&(t=r.selectedValue,r.selectedValue=null,n.cancel(e),r.settings.onselect(t))})),r._focused=1}),n.add(r.id,"blur",function(){n.remove(r.id,"keydown",r.keyDownHandler),n.remove(r.id,"keypress",r.keyPressHandler),r._focused=0});if(e.isIE6||!t.boxModel)n.add(r.id,"mouseover",function(){t.hasClass(r.id,i+"Disabled")||t.addClass(r.id,i+"Hover")}),n.add(r.id,"mouseout",function(){t.hasClass(r.id,i+"Disabled")||t.removeClass(r.id,i+"Hover")});r.onPostRender.dispatch(r,t.get(r.id))},destroy:function(){this.parent(),n.clear(this.id+"_text"),n.clear(this.id+"_open")}})}(tinymce),function(e){var t=e.DOM,n=e.dom.Event,r=e.each,i=e.util.Dispatcher,s;e.create("tinymce.ui.NativeListBox:tinymce.ui.ListBox",{NativeListBox:function(e,t){this.parent(e,t),this.classPrefix="mceNativeListBox"},setDisabled:function(e){t.get(this.id).disabled=e,this.setAriaProperty("disabled",e)},isDisabled:function(){return t.get(this.id).disabled},select:function(e){var t=this,n,i;if(e==s)return t.selectByIndex(-1);e&&typeof e=="function"?i=e:i=function(t){return t==e},e!=t.selectedValue&&(r(t.items,function(e,r){if(i(e.value))return n=1,t.selectByIndex(r),!1}),n||t.selectByIndex(-1))},selectByIndex:function(e){t.get(this.id).selectedIndex=e+1,this.selectedValue=this.items[e]?this.items[e].value:null},add:function(e,n,r){var i,s=this;r=r||{},r.value=n,s.isRendered()&&t.add(t.get(this.id),"option",r,e),i={title:e,value:n,attribs:r},s.items.push(i),s.onAdd.dispatch(s,i)},getLength:function(){return this.items.length},renderHTML:function(){var e,n=this;return e=t.createHTML("option",{value:""},"-- "+n.settings.title+" --"),r(n.items,function(n){e+=t.createHTML("option",{value:n.value},n.title)}),e=t.createHTML("select",{id:n.id,"class":"mceNativeListBox","aria-labelledby":n.id+"_aria"},e),e+=t.createHTML("span",{id:n.id+"_aria",style:"display: none"},n.settings.title),e},postRender:function(){function o(e){var t=r.items[e.target.selectedIndex-1];t&&(t=t.value)&&(r.onChange.dispatch(r,t),r.settings.onselect&&r.settings.onselect(t))}var r=this,i,s=!0;r.rendered=!0,n.add(r.id,"change",o),n.add(r.id,"keydown",function(t){var u;n.remove(r.id,"change",i),s=!1,u=n.add(r.id,"blur",function(){if(s)return;s=!0,n.add(r.id,"change",o),n.remove(r.id,"blur",u)});if(!(!e.isWebKit||t.keyCode!=37&&t.keyCode!=39))return n.prevent(t);if(t.keyCode==13||t.keyCode==32)return o(t),n.cancel(t)}),r.onPostRender.dispatch(r,t.get(r.id))}})}(tinymce),function(e){var t=e.DOM,n=e.dom.Event,r=e.each;e.create("tinymce.ui.MenuButton:tinymce.ui.Button",{MenuButton:function(n,r,i){this.parent(n,r,i),this.onRenderMenu=new e.util.Dispatcher(this),r.menu_container=r.menu_container||t.doc.body},showMenu:function(){var e=this,r,i,s=t.get(e.id),o;if(e.isDisabled())return;e.isMenuRendered||(e.renderMenu(),e.isMenuRendered=!0);if(e.isMenuVisible)return e.hideMenu();r=t.getPos(e.settings.menu_container),i=t.getPos(s),o=e.menu,o.settings.offset_x=i.x,o.settings.offset_y=i.y,o.settings.vp_offset_x=i.x,o.settings.vp_offset_y=i.y,o.settings.keyboard_focus=e._focused,o.showMenu(0,s.firstChild.clientHeight),n.add(t.doc,"mousedown",e.hideMenu,e),e.setState("Selected",1),e.isMenuVisible=1},renderMenu:function(){var e=this,t;t=e.settings.control_manager.createDropMenu(e.id+"_menu",{menu_line:1,"class":this.classPrefix+"Menu",icons:e.settings.icons}),t.onHideMenu.add(function(){e.hideMenu(),e.focus()}),e.onRenderMenu.dispatch(e,t),e.menu=t},hideMenu:function(e){var r=this;if(e&&e.type=="mousedown"&&t.getParent(e.target,function(e){return e.id===r.id||e.id===r.id+"_open"}))return;if(!e||!t.getParent(e.target,".mceMenu"))r.setState("Selected",0),n.remove(t.doc,"mousedown",r.hideMenu,r),r.menu&&r.menu.hideMenu();r.isMenuVisible=0},postRender:function(){var e=this,t=e.settings;n.add(e.id,"click",function(){e.isDisabled()||(t.onclick&&t.onclick(e.value),e.showMenu())})}})}(tinymce),function(e){var t=e.DOM,n=e.dom.Event,r=e.each;e.create("tinymce.ui.SplitButton:tinymce.ui.MenuButton",{SplitButton:function(e,t,n){this.parent(e,t,n),this.classPrefix="mceSplitButton"},renderHTML:function(){var e,n=this,r=n.settings,i;return e="<tbody><tr>",r.image?i=t.createHTML("img ",{src:r.image,role:"presentation","class":"mceAction "+r["class"]}):i=t.createHTML("span",{"class":"mceAction "+r["class"]},""),i+=t.createHTML("span",{"class":"mceVoiceLabel mceIconOnly",id:n.id+"_voice",style:"display:none;"},r.title),e+="<td >"+t.createHTML("a",{role:"button",id:n.id+"_action",tabindex:"-1",href:"javascript:;","class":"mceAction "+r["class"],onclick:"return false;",onmousedown:"return false;",title:r.title},i)+"</td>",i=t.createHTML("span",{"class":"mceOpen "+r["class"]},'<span style="display:none;" class="mceIconOnly" aria-hidden="true">â¼</span>'),e+="<td >"+t.createHTML("a",{role:"button",id:n.id+"_open",tabindex:"-1",href:"javascript:;","class":"mceOpen "+r["class"],onclick:"return false;",onmousedown:"return false;",title:r.title},i)+"</td>",e+="</tr></tbody>",e=t.createHTML("table",{role:"presentation","class":"mceSplitButton mceSplitButtonEnabled "+r["class"],cellpadding:"0",cellspacing:"0",title:r.title},e),t.createHTML("div",{id:n.id,role:"button",tabindex:"0","aria-labelledby":n.id+"_voice","aria-haspopup":"true"},e)},postRender:function(){var r=this,i=r.settings,s;i.onclick&&(s=function(e){r.isDisabled()||(i.onclick(r.value),n.cancel(e))},n.add(r.id+"_action","click",s),n.add(r.id,["click","keydown"],function(e){var t=32,i=14,o=13,u=38,a=40;if((e.keyCode===32||e.keyCode===13||e.keyCode===14)&&!e.altKey&&!e.ctrlKey&&!e.metaKey)s(),n.cancel(e);else if(e.type==="click"||e.keyCode===a)r.showMenu(),n.cancel(e)})),n.add(r.id+"_open","click",function(e){r.showMenu(),n.cancel(e)}),n.add([r.id,r.id+"_open"],"focus",function(){r._focused=1}),n.add([r.id,r.id+"_open"],"blur",function(){r._focused=0});if(e.isIE6||!t.boxModel)n.add(r.id,"mouseover",function(){t.hasClass(r.id,"mceSplitButtonDisabled")||t.addClass(r.id,"mceSplitButtonHover")}),n.add(r.id,"mouseout",function(){t.hasClass(r.id,"mceSplitButtonDisabled")||t.removeClass(r.id,"mceSplitButtonHover")})},destroy:function(){this.parent(),n.clear(this.id+"_action"),n.clear(this.id+"_open"),n.clear(this.id)}})}(tinymce),function(e){var t=e.DOM,n=e.dom.Event,r=e.is,i=e.each;e.create("tinymce.ui.ColorSplitButton:tinymce.ui.SplitButton",{ColorSplitButton:function(t,n,r){var i=this;i.parent(t,n,r),i.settings=n=e.extend({colors:"000000,993300,333300,003300,003366,000080,333399,333333,800000,FF6600,808000,008000,008080,0000FF,666699,808080,FF0000,FF9900,99CC00,339966,33CCCC,3366FF,800080,999999,FF00FF,FFCC00,FFFF00,00FF00,00FFFF,00CCFF,993366,C0C0C0,FF99CC,FFCC99,FFFF99,CCFFCC,CCFFFF,99CCFF,CC99FF,FFFFFF",grid_width:8,default_color:"#888888"},i.settings),i.onShowMenu=new e.util.Dispatcher(i),i.onHideMenu=new e.util.Dispatcher(i),i.value=n.default_color},showMenu:function(){var e=this,r,i,s,o;if(e.isDisabled())return;e.isMenuRendered||(e.renderMenu(),e.isMenuRendered=!0);if(e.isMenuVisible)return e.hideMenu();s=t.get(e.id),t.show(e.id+"_menu"),t.addClass(s,"mceSplitButtonSelected"),o=t.getPos(s),t.setStyles(e.id+"_menu",{left:o.x,top:o.y+s.firstChild.clientHeight,zIndex:2e5}),s=0,n.add(t.doc,"mousedown",e.hideMenu,e),e.onShowMenu.dispatch(e),e._focused&&(e._keyHandler=n.add(e.id+"_menu","keydown",function(t){t.keyCode==27&&e.hideMenu()}),t.select("a",e.id+"_menu")[0].focus()),e.isMenuVisible=1},hideMenu:function(e){var r=this;if(r.isMenuVisible){if(e&&e.type=="mousedown"&&t.getParent(e.target,function(e){return e.id===r.id+"_open"}))return;if(!e||!t.getParent(e.target,".mceSplitButtonMenu"))t.removeClass(r.id,"mceSplitButtonSelected"),n.remove(t.doc,"mousedown",r.hideMenu,r),n.remove(r.id+"_menu","keydown",r._keyHandler),t.hide(r.id+"_menu");r.isMenuVisible=0,r.onHideMenu.dispatch()}},renderMenu:function(){var s=this,o,u=0,a=s.settings,f,l,c,h,p;return h=t.add(a.menu_container,"div",{role:"listbox",id:s.id+"_menu","class":a.menu_class+" "+a["class"],style:"position:absolute;left:0;top:-1000px;"}),o=t.add(h,"div",{"class":a["class"]+" mceSplitButtonMenu"}),t.add(o,"span",{"class":"mceMenuLine"}),f=t.add(o,"table",{role:"presentation","class":"mceColorSplitMenu"}),l=t.add(f,"tbody"),u=0,i(r(a.colors,"array")?a.colors:a.colors.split(","),function(n){n=n.replace(/^#/,""),u--||(c=t.add(l,"tr"),u=a.grid_width-1),f=t.add(c,"td");var r={href:"javascript:;",style:{backgroundColor:"#"+n},title:s.editor.getLang("colors."+n,n),"data-mce-color":"#"+n};e.isIE||(r.role="option"),f=t.add(f,"a",r),s.editor.forcedHighContrastMode&&(f=t.add(f,"canvas",{width:16,height:16,"aria-hidden":"true"}),f.getContext&&(p=f.getContext("2d"))?(p.fillStyle="#"+n,p.fillRect(0,0,16,16)):t.remove(f))}),a.more_colors_func&&(f=t.add(l,"tr"),f=t.add(f,"td",{colspan:a.grid_width,"class":"mceMoreColors"}),f=t.add(f,"a",{role:"option",id:s.id+"_more",href:"javascript:;",onclick:"return false;","class":"mceMoreColors"},a.more_colors_title),n.add(f,"click",function(e){return a.more_colors_func.call(a.more_colors_scope||this),n.cancel(e)})),t.addClass(o,"mceColorSplitMenu"),new e.ui.KeyboardNavigation({root:s.id+"_menu",items:t.select("a",s.id+"_menu"),onCancel:function(){s.hideMenu(),s.focus()}}),n.add(s.id+"_menu","mousedown",function(e){return n.cancel(e)}),n.add(s.id+"_menu","click",function(e){var n;return e=t.getParent(e.target,"a",l),e&&e.nodeName.toLowerCase()=="a"&&(n=e.getAttribute("data-mce-color"))&&s.setColor(n),!1}),h},setColor:function(e){this.displayColor(e),this.hideMenu(),this.settings.onselect(e)},displayColor:function(e){var n=this;t.setStyle(n.id+"_preview","backgroundColor",e),n.value=e},postRender:function(){var e=this,n=e.id;e.parent(),t.add(n+"_action","div",{id:n+"_preview","class":"mceColorPreview"}),t.setStyle(e.id+"_preview","backgroundColor",e.value)},destroy:function(){this.parent(),n.clear(this.id+"_menu"),n.clear(this.id+"_more"),t.remove(this.id+"_menu")}})}(tinymce),function(e){var t=e.DOM,n=e.each,r=e.dom.Event;e.create("tinymce.ui.ToolbarGroup:tinymce.ui.Container",{renderHTML:function(){var n=this,r=[],i=n.controls,s=e.each,o=n.settings;return r.push('<div id="'+n.id+'" role="group" aria-labelledby="'+n.id+'_voice">'),r.push("<span role='application'>"),r.push('<span id="'+n.id+'_voice" class="mceVoiceLabel" style="display:none;">'+t.encode(o.name)+"</span>"),s(i,function(e){r.push(e.renderHTML())}),r.push("</span>"),r.push("</div>"),r.join("")},focus:function(){var e=this;t.get(e.id).focus()},postRender:function(){var r=this,i=[];n(r.controls,function(e){n(e.controls,function(e){e.id&&i.push(e)})}),r.keyNav=new e.ui.KeyboardNavigation({root:r.id,items:i,onCancel:function(){e.isWebKit&&t.get(r.editor.id+"_ifr").focus(),r.editor.focus()},excludeFromTabOrder:!r.settings.tab_focus_toolbar})},destroy:function(){var e=this;e.parent(),e.keyNav.destroy(),r.clear(e.id)}})}(tinymce),function(e){var t=e.DOM,n=e.each;e.create("tinymce.ui.Toolbar:tinymce.ui.Container",{renderHTML:function(){var e=this,n="",r,i,s=e.settings,o,u,a,f;f=e.controls;for(o=0;o<f.length;o++)i=f[o],u=f[o-1],a=f[o+1],o===0&&(r="mceToolbarStart",i.Button?r+=" mceToolbarStartButton":i.SplitButton?r+=" mceToolbarStartSplitButton":i.ListBox&&(r+=" mceToolbarStartListBox"),n+=t.createHTML("td",{"class":r},t.createHTML("span",null,"<!-- IE -->"))),u&&i.ListBox&&(u.Button||u.SplitButton)&&(n+=t.createHTML("td",{"class":"mceToolbarEnd"},t.createHTML("span",null,"<!-- IE -->"))),t.stdMode?n+='<td style="position: relative">'+i.renderHTML()+"</td>":n+="<td>"+i.renderHTML()+"</td>",a&&i.ListBox&&(a.Button||a.SplitButton)&&(n+=t.createHTML("td",{"class":"mceToolbarStart"},t.createHTML("span",null,"<!-- IE -->")));return r="mceToolbarEnd",i.Button?r+=" mceToolbarEndButton":i.SplitButton?r+=" mceToolbarEndSplitButton":i.ListBox&&(r+=" mceToolbarEndListBox"),n+=t.createHTML("td",{"class":r},t.createHTML("span",null,"<!-- IE -->")),t.createHTML("table",{id:e.id,"class":"mceToolbar"+(s["class"]?" "+s["class"]:""),cellpadding:"0",cellspacing:"0",align:e.settings.align||"",role:"presentation",tabindex:"-1"},"<tbody><tr>"+n+"</tr></tbody>")}})}(tinymce),function(e){var t=e.util.Dispatcher,n=e.each;e.create("tinymce.AddOnManager",{AddOnManager:function(){var e=this;e.items=[],e.urls={},e.lookup={},e.onAdd=new t(e)},get:function(e){return this.lookup[e]?this.lookup[e].instance:undefined},dependencies:function(e){var t;return this.lookup[e]&&(t=this.lookup[e].dependencies),t||[]},requireLangPack:function(t){var n=e.settings;n&&n.language&&n.language_load!==!1&&e.ScriptLoader
.add(this.urls[t]+"/langs/"+n.language+".js")},add:function(e,t,n){return this.items.push(t),this.lookup[e]={instance:t,dependencies:n},this.onAdd.dispatch(this,e,t),t},createUrl:function(e,t){return typeof t=="object"?t:{prefix:e.prefix,resource:t,suffix:e.suffix}},addComponents:function(t,n){var r=this.urls[t];e.each(n,function(t){e.ScriptLoader.add(r+"/"+t)})},load:function(t,n,r,i){function u(){var o=s.dependencies(t);e.each(o,function(e){var t=s.createUrl(n,e);s.load(t.resource,t,undefined,undefined)}),r&&(i?r.call(i):r.call(e.ScriptLoader))}var s=this,o=n;if(s.urls[t])return;typeof n=="object"&&(o=n.prefix+n.resource+n.suffix),o.indexOf("/")!==0&&o.indexOf("://")==-1&&(o=e.baseURL+"/"+o),s.urls[t]=o.substring(0,o.lastIndexOf("/")),s.lookup[t]?u():e.ScriptLoader.add(o,u,i)}}),e.PluginManager=new e.AddOnManager,e.ThemeManager=new e.AddOnManager}(tinymce),function(e){var t=e.each,n=e.extend,r=e.DOM,i=e.dom.Event,s=e.ThemeManager,o=e.PluginManager,u=e.explode,a=e.util.Dispatcher,f,l=0;e.documentBaseURL=window.location.href.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(e.documentBaseURL)||(e.documentBaseURL+="/"),e.baseURL=(new e.util.URI(e.documentBaseURL)).toAbsolute(e.baseURL),e.baseURI=new e.util.URI(e.baseURL),e.onBeforeUnload=new a(e),i.add(window,"beforeunload",function(t){e.onBeforeUnload.dispatch(e,t)}),e.onAddEditor=new a(e),e.onRemoveEditor=new a(e),e.EditorManager=n(e,{editors:[],i18n:{},activeEditor:null,init:function(s){function d(e){var t=e.id;return t||(t=e.name,t&&!r.get(t)?t=e.name:t=r.uniqueId(),e.setAttribute("id",t)),t}function v(t,n,r){var i=t[n];if(!i)return;return e.is(i,"string")&&(r=i.replace(/\.\w+$/,""),r=r?e.resolve(r):0,i=e.resolve(i)),i.apply(r||this,Array.prototype.slice.call(arguments,2))}function m(e,t){return t.constructor===RegExp?t.test(e.className):r.hasClass(e,t)}var o=this,a,f=e.ScriptLoader,c,h=[],p;s=n({theme:"simple",language:"en"},s),o.settings=s,i.bind(window,"ready",function(){var n,i;v(s,"onpageload");switch(s.mode){case"exact":n=s.elements||"",n.length>0&&t(u(n),function(n){r.get(n)?(p=new e.Editor(n,s),h.push(p),p.render(1)):t(document.forms,function(i){t(i.elements,function(t){t.name===n&&(n="mce_editor_"+l++,r.setAttrib(t,"id",n),p=new e.Editor(n,s),h.push(p),p.render(1))})})});break;case"textareas":case"specific_textareas":t(r.select("textarea"),function(t){if(s.editor_deselector&&m(t,s.editor_deselector))return;if(!s.editor_selector||m(t,s.editor_selector))p=new e.Editor(d(t),s),h.push(p),p.render(1)});break;default:s.types?t(s.types,function(n){t(r.select(n.selector),function(t){var r=new e.Editor(d(t),e.extend({},s,n));h.push(r),r.render(1)})}):s.selector&&t(r.select(s.selector),function(t){var n=new e.Editor(d(t),s);h.push(n),n.render(1)})}s.oninit&&(n=i=0,t(h,function(e){i++,e.initialized?n++:e.onInit.add(function(){n++,n==i&&v(s,"oninit")}),n==i&&v(s,"oninit")}))})},get:function(e){return e===f?this.editors:this.editors[e]},getInstanceById:function(e){return this.get(e)},add:function(t){var n=this,r=n.editors;return r[t.id]=t,r.push(t),n._setActive(t),n.onAddEditor.dispatch(n,t),e.adapter&&e.adapter.patchEditor(t),t},remove:function(e){var t=this,n,r=t.editors;if(!r[e.id])return null;delete r[e.id];for(n=0;n<r.length;n++)if(r[n]==e){r.splice(n,1);break}return t.activeEditor==e&&t._setActive(r[0]),e.destroy(),t.onRemoveEditor.dispatch(t,e),e},execCommand:function(t,n,r){function u(){s.destroy(),o.detachEvent("onunload",u),o=o.tinyMCE=o.tinymce=null}var i=this,s=i.get(r),o;switch(t){case"mceFocus":return s.focus(),!0;case"mceAddEditor":case"mceAddControl":return i.get(r)||(new e.Editor(r,i.settings)).render(),!0;case"mceAddFrameControl":return o=r.window,o.tinyMCE=tinyMCE,o.tinymce=e,e.DOM.doc=o.document,e.DOM.win=o,s=new e.Editor(r.element_id,r),s.render(),e.isIE&&o.attachEvent("onunload",u),r.page_window=null,!0;case"mceRemoveEditor":case"mceRemoveControl":return s&&s.remove(),!0;case"mceToggleEditor":if(!s)return i.execCommand("mceAddControl",0,r),!0;return s.isHidden()?s.show():s.hide(),!0}return i.activeEditor?i.activeEditor.execCommand(t,n,r):!1},execInstanceCommand:function(e,t,n,r){var i=this.get(e);return i?i.execCommand(t,n,r):!1},triggerSave:function(){t(this.editors,function(e){e.save()})},addI18n:function(n,r){var i,s=this.i18n;e.is(n,"string")?t(r,function(e,t){s[n+"."+t]=e}):t(n,function(e,n){t(e,function(e,r){t(e,function(e,t){r==="common"?s[n+"."+t]=e:s[n+"."+r+"."+t]=e})})})},_setActive:function(e){this.selectedInstance=this.activeEditor=e}})}(tinymce),function(e){var t=e.DOM,n=e.dom.Event,r=e.extend,i=e.each,s=e.isGecko,o=e.isIE,u=e.isWebKit,a=e.is,f=e.ThemeManager,l=e.PluginManager,c=e.explode;e.create("tinymce.Editor",{Editor:function(t,n){var i=this,s=!0;i.settings=n=r({id:t,language:"en",theme:"simple",skin:"default",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:e.documentBaseURL,add_form_submit_trigger:s,submit_patch:s,add_unload_trigger:s,convert_urls:s,relative_urls:s,remove_script_host:s,table_inline_editing:!1,object_resizing:s,accessibility_focus:s,doctype:e.isIE6?'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">':"<!DOCTYPE>",visual:s,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",apply_source_formatting:s,directionality:"ltr",forced_root_block:"p",hidden_input:s,padd_empty_editor:s,render_ui:s,indentation:"30px",fix_table_elements:s,inline_styles:s,convert_fonts_to_spans:s,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure",validate:s,entity_encoding:"named",url_converter:i.convertURL,url_converter_scope:i,ie7_compat:s},n),i.id=i.editorId=t,i.isNotDirty=!1,i.plugins={},i.documentBaseURI=new e.util.URI(n.document_base_url||e.documentBaseURL,{base_uri:tinyMCE.baseURI}),i.baseURI=e.baseURI,i.contentCSS=[],i.setupEvents(),i.execCommands={},i.queryStateCommands={},i.queryValueCommands={},i.execCallback("setup",i)},render:function(r){function h(){o.language&&o.language_load!==!1&&a.add(e.baseURL+"/langs/"+o.language+".js"),o.theme&&o.theme.charAt(0)!="-"&&!f.urls[o.theme]&&f.load(o.theme,"themes/"+o.theme+"/editor_template"+e.suffix+".js"),i(c(o.plugins),function(t){if(t&&!l.urls[t])if(t.charAt(0)=="-"){t=t.substr(1,t.length);var n=l.dependencies(t);i(n,function(t){var n={prefix:"plugins/",resource:t,suffix:"/editor_plugin"+e.suffix+".js"};t=l.createUrl(n,t),l.load(t.resource,t)})}else{if(t=="safari")return;l.load(t,{prefix:"plugins/",resource:t,suffix:"/editor_plugin"+e.suffix+".js"})}}),a.loadQueue(function(){s.removed||s.init()})}var s=this,o=s.settings,u=s.id,a=e.ScriptLoader;if(!n.domLoaded){n.add(window,"ready",function(){s.render()});return}tinyMCE.settings=o;if(!s.getElement())return;if(e.isIDevice&&!e.isIOS5)return;!/TEXTAREA|INPUT/i.test(s.getElement().nodeName)&&o.hidden_input&&t.getParent(u,"form")&&t.insertAfter(t.create("input",{type:"hidden",name:u}),u),e.WindowManager&&(s.windowManager=new e.WindowManager(s)),o.encoding=="xml"&&s.onGetContent.add(function(e,n){n.save&&(n.content=t.encode(n.content))}),o.add_form_submit_trigger&&s.onSubmit.addToTop(function(){s.initialized&&(s.save(),s.isNotDirty=1)}),o.add_unload_trigger&&(s._beforeUnload=tinyMCE.onBeforeUnload.add(function(){s.initialized&&!s.destroyed&&!s.isHidden()&&s.save({format:"raw",no_events:!0})})),e.addUnload(s.destroy,s),o.submit_patch&&s.onBeforeRenderUI.add(function(){var t=s.getElement().form;if(!t)return;if(t._mceOldSubmit)return;!t.submit.nodeType&&!t.submit.length&&(s.formElement=t,t._mceOldSubmit=t.submit,t.submit=function(){return e.triggerSave(),s.isNotDirty=1,s.formElement._mceOldSubmit(s.formElement)}),t=null}),h()},init:function(){function E(t){var n=l.get(t),s=l.urls[t]||e.documentBaseURL.replace(/\/$/,""),o;n&&e.inArray(w,t)===-1&&(i(l.dependencies(t),function(e){E(e)}),o=new n(r,s),r.plugins[t]=o,o.init&&(o.init(r,s),w.push(t)))}var n,r=this,s=r.settings,u,a,h=r.getElement(),p,d,v,m,g,y,b,w=[];e.add(r),s.aria_label=s.aria_label||t.getAttrib(h,"aria-label",r.getLang("aria.rich_text_area")),s.theme&&(s.theme=s.theme.replace(/-/,""),p=f.get(s.theme),r.theme=new p,r.theme.init&&r.theme.init(r,f.urls[s.theme]||e.documentBaseURL.replace(/\/$/,""))),i(c(s.plugins.replace(/\-/g,"")),E),s.popup_css!==!1&&(s.popup_css?s.popup_css=r.documentBaseURI.toAbsolute(s.popup_css):s.popup_css=r.baseURI.toAbsolute("themes/"+s.theme+"/skins/"+s.skin+"/dialog.css")),s.popup_css_add&&(s.popup_css+=","+r.documentBaseURI.toAbsolute(s.popup_css_add)),r.controlManager=new e.ControlManager(r),r.onExecCommand.add(function(e,t){/^(FontName|FontSize)$/.test(t)||r.nodeChanged()}),r.onBeforeRenderUI.dispatch(r,r.controlManager),s.render_ui&&r.theme&&(u=s.width||h.style.width||h.offsetWidth,a=s.height||h.style.height||h.offsetHeight,r.orgDisplay=h.style.display,y=/^[0-9\.]+(|px)$/i,y.test(""+u)&&(u=Math.max(parseInt(u,10)+(p.deltaWidth||0),100)),y.test(""+a)&&(a=Math.max(parseInt(a,10)+(p.deltaHeight||0),100)),p=r.theme.renderUI({targetNode:h,width:u,height:a,deltaWidth:s.delta_width,deltaHeight:s.delta_height}),r.editorContainer=p.editorContainer),s.content_css&&i(c(s.content_css),function(e){r.contentCSS.push(r.documentBaseURI.toAbsolute(e))});if(s.content_editable)return h=n=p=null,r.initContentBody();document.domain&&location.hostname!=document.domain&&(e.relaxedDomain=document.domain),t.setStyles(p.sizeContainer||p.editorContainer,{width:u,height:a}),a=(p.iframeHeight||a)+(typeof a=="number"?p.deltaHeight||0:""),a<100&&(a=100),r.iframeHTML=s.doctype+'<html><head xmlns="http://www.w3.org/1999/xhtml">',s.document_base_url!=e.documentBaseURL&&(r.iframeHTML+='<base href="'+r.documentBaseURI.getURI()+'" />'),s.ie7_compat?r.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=7" />':r.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=edge" />',r.iframeHTML+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';for(b=0;b<r.contentCSS.length;b++)r.iframeHTML+='<link type="text/css" rel="stylesheet" href="'+r.contentCSS[b]+'" />';r.contentCSS=[],m=s.body_id||"tinymce",m.indexOf("=")!=-1&&(m=r.getParam("body_id","","hash"),m=m[r.id]||m),g=s.body_class||"",g.indexOf("=")!=-1&&(g=r.getParam("body_class","","hash"),g=g[r.id]||""),r.iframeHTML+='</head><body id="'+m+'" class="mceContentBody '+g+'" onload="window.parent.tinyMCE.get(\''+r.id+"').onLoad.dispatch();\"><br></body></html>",e.relaxedDomain&&(o||e.isOpera&&parseFloat(opera.version())<11)&&(v='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinyMCE.get("'+r.id+'");document.write(ed.iframeHTML);document.close();ed.initContentBody();})()'),n=t.add(p.iframeContainer,"iframe",{id:r.id+"_ifr",src:v||'javascript:""',frameBorder:"0",allowTransparency:"true",title:s.aria_label,style:{width:"100%",height:a,display:"block"}}),r.contentAreaContainer=p.iframeContainer,t.get(p.editorContainer).style.display=r.orgDisplay,t.get(r.id).style.display="none",t.setAttrib(r.id,"aria-hidden",!0),(!e.relaxedDomain||!v)&&r.initContentBody(),h=n=p=null},initContentBody:function(){var n=this,r=n.settings,s=t.get(n.id),u=n.getDoc(),a,f;(!o||!e.relaxedDomain)&&!r.content_editable&&(u.open(),u.write(n.iframeHTML),u.close(),e.relaxedDomain&&(u.domain=e.relaxedDomain)),r.content_editable&&(t.addClass(s,"mceContentBody"),n.contentDocument=u=r.content_document||document,n.contentWindow=r.content_window||window,n.bodyElement=s,r.content_document=r.content_window=null),f=n.getBody(),f.disabled=!0,r.readonly||(f.contentEditable=n.getParam("content_editable_state",!0)),f.disabled=!1,n.schema=new e.html.Schema(r),n.dom=new e.dom.DOMUtils(u,{keep_values:!0,url_converter:n.convertURL,url_converter_scope:n,hex_colors:r.force_hex_style_colors,class_filter:r.class_filter,update_styles:!0,root_element:r.content_editable?n.id:null,schema:n.schema}),n.parser=new e.html.DomParser(r,n.schema),n.parser.addAttributeFilter("src,href,style",function(e,t){var r=e.length,i,s=n.dom,o,u;while(r--)i=e[r],o=i.attr(t),u="data-mce-"+t,i.attributes.map[u]||(t==="style"?i.attr(u,s.serializeStyle(s.parseStyle(o),i.name)):i.attr(u,n.convertURL(o,t,i.name)))}),n.parser.addNodeFilter("script",function(e,t){var n=e.length,r;while(n--)r=e[n],r.attr("type","mce-"+(r.attr("type")||"text/javascript"))}),n.parser.addNodeFilter("#cdata",function(e,t){var n=e.length,r;while(n--)r=e[n],r.type=8,r.name="#comment",r.value="[CDATA["+r.value+"]]"}),n.parser.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(t,r){var i=t.length,s,o=n.schema.getNonEmptyElements();while(i--)s=t[i],s.isEmpty(o)&&(s.empty().append(new e.html.Node("br",1)).shortEnded=!0)}),n.serializer=new e.dom.Serializer(r,n.dom,n.schema),n.selection=new e.dom.Selection(n.dom,n.getWin(),n.serializer),n.formatter=new e.Formatter(n),n.undoManager=new e.UndoManager(n),n.forceBlocks=new e.ForceBlocks(n),n.enterKey=new e.EnterKey(n),n.editorCommands=new e.EditorCommands(n),n.serializer.onPreProcess.add(function(e,t){return n.onPreProcess.dispatch(n,t,e)}),n.serializer.onPostProcess.add(function(e,t){return n.onPostProcess.dispatch(n,t,e)}),n.onPreInit.dispatch(n),r.gecko_spellcheck||(u.body.spellcheck=!1),r.readonly||n.bindNativeEvents(),n.controlManager.onPostRender.dispatch(n,n.controlManager),n.onPostRender.dispatch(n),n.quirks=e.util.Quirks(n),r.directionality&&(f.dir=r.directionality),r.nowrap&&(f.style.whiteSpace="nowrap"),r.protect&&n.onBeforeSetContent.add(function(e,t){i(r.protect,function(e){t.content=t.content.replace(e,function(e){return"<!--mce:protected "+escape(e)+"-->"})})}),n.onSetContent.add(function(){n.addVisual(n.getBody())}),r.padd_empty_editor&&n.onPostProcess.add(function(e,t){t.content=t.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,"")}),n.load({initial:!0,format:"html"}),n.startContent=n.getContent({format:"raw"}),n.initialized=!0,n.onInit.dispatch(n),n.execCallback("setupcontent_callback",n.id,f,u),n.execCallback("init_instance_callback",n),n.focus(!0),n.nodeChanged({initial:!0}),i(n.contentCSS,function(e){n.dom.loadCSS(e)}),r.auto_focus&&setTimeout(function(){var t=e.get(r.auto_focus);t.selection.select(t.getBody(),1),t.selection.collapse(1),t.getBody().focus(),t.getWin().focus()},100),s=u=f=null},focus:function(t){var n,r=this,i=r.selection,s=r.settings.content_editable,o,u,a=r.getDoc(),f;if(!t){o=i.getRng(),o.item&&(u=o.item(0)),r._refreshContentEditable(),s||r.getWin().focus();if(e.isGecko||s)f=r.getBody(),f.setActive?f.setActive():f.focus(),s&&i.normalize();u&&u.ownerDocument==a&&(o=a.body.createControlRange(),o.addElement(u),o.select())}e.activeEditor!=r&&((n=e.activeEditor)!=null&&n.onDeactivate.dispatch(n,r),r.onActivate.dispatch(r,n)),e._setActive(r)},execCallback:function(t){var n=this,r=n.settings[t],i;if(!r)return;return n.callbackLookup&&(i=n.callbackLookup[t])&&(r=i.func,i=i.scope),a(r,"string")&&(i=r.replace(/\.\w+$/,""),i=i?e.resolve(i):0,r=e.resolve(r),n.callbackLookup=n.callbackLookup||{},n.callbackLookup[t]={func:r,scope:i}),r.apply(i||n,Array.prototype.slice.call(arguments,1))},translate:function(t){var n=this.settings.language||"en",r=e.i18n;return t?r[n+"."+t]||t.replace(/\{\#([^\}]+)\}/g,function(e,t){return r[n+"."+t]||"{#"+t+"}"}):""},getLang:function(t,n){return e.i18n[(this.settings.language||"en")+"."+t]||(a(n)?n:"{#"+t+"}")},getParam:function(t,n,r){var s=e.trim,o=a(this.settings[t])?this.settings[t]:n,u;return r==="hash"?(u={},a(o,"string")?i(o.indexOf("=")>0?o.split(/[;,](?![^=;,]*(?:[;,]|$))/):o.split(","),function(e){e=e.split("="),e.length>1?u[s(e[0])]=s(e[1]):u[s(e[0])]=s(e)}):u=o,u):o},nodeChanged:function(e){var t=this,n=t.selection,r;t.initialized&&(e=e||{},n.normalize(),r=n.getStart()||t.getBody(),r=o&&r.ownerDocument!=t.getDoc()?t.getBody():r,e.parents=[],t.dom.getParent(r,function(t){if(t.nodeName=="BODY")return!0;e.parents.push(t)}),t.onNodeChange.dispatch(t,e?e.controlManager||t.controlManager:t.controlManager,r,n.isCollapsed(),e))},addButton:function(e,t){var n=this;n.buttons=n.buttons||{},n.buttons[e]=t},addCommand:function(e,t,n){this.execCommands[e]={func:t,scope:n||this}},addQueryStateHandler:function(e,t,n){this.queryStateCommands[e]={func:t,scope:n||this}},addQueryValueHandler:function(e,t,n){this.queryValueCommands[e]={func:t,scope:n||this}},addShortcut:function(e,t,n,r){var s=this,o;return s.settings.custom_shortcuts===!1?!1:(s.shortcuts=s.shortcuts||{},a(n,"string")&&(o=n,n=function(){s.execCommand(o,!1,null)}),a(n,"object")&&(o=n,n=function(){s.execCommand(o[0],o[1],o[2])}),i(c(e),function(e){var o={func:n,scope:r||this,desc:s.translate(t),alt:!1,ctrl:!1,shift:!1};i(c(e,"+"),function(e){switch(e){case"alt":case"ctrl":case"shift":o[e]=!0;break;default:o.charCode=e.charCodeAt(0),o.keyCode=e.toUpperCase().charCodeAt(0)}}),s.shortcuts[(o.ctrl?"ctrl":"")+","+(o.alt?"alt":"")+","+(o.shift?"shift":"")+","+o.keyCode]=o}),!0)},execCommand:function(e,t,n,s){var o=this,u=0,a,f;!/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint|SelectAll)$/.test(e)&&(!s||!s.skip_focus)&&o.focus(),s=r({},s),o.onBeforeExecCommand.dispatch(o,e,t,n,s);if(s.terminate)return!1;if(o.execCallback("execcommand_callback",o.id,o.selection.getNode(),e,t,n))return o.onExecCommand.dispatch(o,e,t,n,s),!0;if(a=o.execCommands[e]){f=a.func.call(a.scope,t,n);if(f!==!0)return o.onExecCommand.dispatch(o,e,t,n,s),f}i(o.plugins,function(r){if(r.execCommand&&r.execCommand(e,t,n))return o.onExecCommand.dispatch(o,e,t,n,s),u=1,!1});if(u)return!0;if(o.theme&&o.theme.execCommand&&o.theme.execCommand(e,t,n))return o.onExecCommand.dispatch(o,e,t,n,s),!0;if(o.editorCommands.execCommand(e,t,n))return o.onExecCommand.dispatch(o,e,t,n,s),!0;o.getDoc().execCommand(e,t,n),o.onExecCommand.dispatch(o,e,t,n,s)},queryCommandState:function(e){var t=this,n,r;if(t._isHidden())return;if(n=t.queryStateCommands[e]){r=n.func.call(n.scope);if(r!==!0)return r}n=t.editorCommands.queryCommandState(e);if(n!==-1)return n;try{return this.getDoc().queryCommandState(e)}catch(i){}},queryCommandValue:function(e){var t=this,n,r;if(t._isHidden())return;if(n=t.queryValueCommands[e]){r=n.func.call(n.scope);if(r!==!0)return r}n=t.editorCommands.queryCommandValue(e);if(a(n))return n;try{return this.getDoc().queryCommandValue(e)}catch(i){}},show:function(){var e=this;t.show(e.getContainer()),t.hide(e.id),e.load()},hide:function(){var e=this,n=e.getDoc();o&&n&&n.execCommand("SelectAll"),e.save(),t.hide(e.getContainer()),t.setStyle(e.id,"display",e.orgDisplay)},isHidden:function(){return!t.isHidden(this.id)},setProgressState:function(e,t,n){return this.onSetProgressState.dispatch(this,e,t,n),e},load:function(e){var t=this,n=t.getElement(),r;if(n)return e=e||{},e.load=!0,r=t.setContent(a(n.value)?n.value:n.innerHTML,e),e.element=n,e.no_events||t.onLoadContent.dispatch(t,e),e.element=n=null,r},save:function(e){var n=this,r=n.getElement(),s,o;if(!r||!n.initialized)return;return e=e||{},e.save=!0,e.element=r,s=e.content=n.getContent(e),e.no_events||n.onSaveContent.dispatch(n,e),s=e.content,/TEXTAREA|INPUT/i.test(r.nodeName)?r.value=s:(r.innerHTML=s,(o=t.getParent(n.id,"form"))&&i(o.elements,function(e){if(e.name==n.id)return e.value=s,!1})),e.element=r=null,s},setContent:function(t,n){var r=this,i,s=r.getBody(),o;n=n||{},n.format=n.format||"html",n.set=!0,n.content=t,n.no_events||r.onBeforeSetContent.dispatch(r,n),t=n.content;if(!e.isIE&&(t.length===0||/^\s+$/.test(t))){o=r.settings.forced_root_block,o?t="<"+o+'><br data-mce-bogus="1"></'+o+">":t='<br data-mce-bogus="1">',s.innerHTML=t,r.selection.select(s,!0),r.selection.collapse(!0);return}return n.format!=="raw"&&(t=(new e.html.Serializer({},r.schema)).serialize(r.parser.parse(t))),n.content=e.trim(t),r.dom.setHTML(s,n.content),n.no_events||r.onSetContent.dispatch(r,n),r.selection.normalize(),n.content},getContent:function(t){var n=this,r;return t=t||{},t.format=t.format||"html",t.get=!0,t.getInner=!0,t.no_events||n.onBeforeGetContent.dispatch(n,t),t.format=="raw"?r=n.getBody().innerHTML:r=n.serializer.serialize(n.getBody(),t),t.content=e.trim(r),t.no_events||n.onGetContent.dispatch(n,t),t.content},isDirty:function(){var t=this;return e.trim(t.startContent)!=e.trim(t.getContent({format:"raw",no_events:1}))&&!t.isNotDirty},getContainer:function(){var e=this;return e.container||(e.container=t.get(e.editorContainer||e.id+"_parent")),e.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return t.get(this.settings.content_element||this.id)},getWin:function(){var e=this,n;return e.contentWindow||(n=t.get(e.id+"_ifr"),n&&(e.contentWindow=n.contentWindow)),e.contentWindow},getDoc:function(){var e=this,t;return e.contentDocument||(t=e.getWin(),t&&(e.contentDocument=t.document)),e.contentDocument},getBody:function(){return this.bodyElement||this.getDoc().body},convertURL:function(e,t,n){var r=this,i=r.settings;return i.urlconverter_callback?r.execCallback("urlconverter_callback",e,n,!0,t):!i.convert_urls||n&&n.nodeName=="LINK"||e.indexOf("file:")===0?e:i.relative_urls?r.documentBaseURI.toRelative(e):(e=r.documentBaseURI.toAbsolute(e,i.remove_script_host),e)},addVisual:function(e){var t=this,n=t.settings,r=t.dom,s;e=e||t.getBody(),a(t.hasVisual)||(t.hasVisual=n.visual),i(r.select("table,a",e),function(e){var i;switch(e.nodeName){case"TABLE":s=n.visual_table_class||"mceItemTable",i=r.getAttrib(e,"border");if(!i||i=="0")t.hasVisual?r.addClass(e,s):r.removeClass(e,s);return;case"A":i=r.getAttrib(e,"name"),s="mceItemAnchor",i&&(t.hasVisual?r.addClass(e,s):r.removeClass(e,s));return}}),t.onVisualAid.dispatch(t,e,t.hasVisual)},remove:function(){var r=this,i=r.getContainer();r.removed||(r.removed=1,r.hide(),r.settings.content_editable||(n.clear(r.getWin()),n.clear(r.getDoc())),n.clear(r.getBody()),n.clear(r.formElement),n.unbind(i),r.execCallback("remove_instance_callback",r),r.onRemove.dispatch(r),r.onExecCommand.listeners=[],e.remove(r),t.remove(i))},destroy:function(t){var r=this;if(r.destroyed)return;s&&(n.unbind(r.getDoc()),n.unbind(r.getWin()),n.unbind(r.getBody())),t||(e.removeUnload(r.destroy),tinyMCE.onBeforeUnload.remove(r._beforeUnload),r.theme&&r.theme.destroy&&r.theme.destroy(),r.controlManager.destroy(),r.selection.destroy(),r.dom.destroy()),r.formElement&&(r.formElement.submit=r.formElement._mceOldSubmit,r.formElement._mceOldSubmit=null),r.contentAreaContainer=r.formElement=r.container=r.settings.content_element=r.bodyElement=r.contentDocument=r.contentWindow=null,r.selection&&(r.selection=r.selection.win=r.selection.dom=r.selection.dom.doc=null),r.destroyed=1},_refreshContentEditable:function(){var e=this,t,n;e._isHidden()&&(t=e.getBody(),n=t.parentNode,n.removeChild(t),n.appendChild(t),t.focus())},_isHidden:function(){var e;return s?(e=this.selection.getSel(),!e||!e.rangeCount||e.rangeCount===0):0}})}(tinymce),function(e){var t=e.each;e.Editor.prototype.setupEvents=function(){var n=this,r=n.settings;t(["onPreInit","onBeforeRenderUI","onPostRender","onLoad","onInit","onRemove","onActivate","onDeactivate","onClick","onEvent","onMouseUp","onMouseDown","onDblClick","onKeyDown","onKeyUp","onKeyPress","onContextMenu","onSubmit","onReset","onPaste","onPreProcess","onPostProcess","onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent","onLoadContent","onSaveContent","onNodeChange","onChange","onBeforeExecCommand","onExecCommand","onUndo","onRedo","onVisualAid","onSetProgressState","onSetAttrib"],function(t){n[t]=new e.util.Dispatcher(n)}),r.cleanup_callback&&(n.onBeforeSetContent.add(function(e,t){t.content=e.execCallback("cleanup_callback","insert_to_editor",t.content,t)}),n.onPreProcess.add(function(e,t){t.set&&e.execCallback("cleanup_callback","insert_to_editor_dom",t.node,t),t.get&&e.execCallback("cleanup_callback","get_from_editor_dom",t.node,t)}),n.onPostProcess.add(function(e,t){t.set&&(t.content=e.execCallback("cleanup_callback","insert_to_editor",t.content,t)),t.get&&(t.content=e.execCallback("cleanup_callback","get_from_editor",t.content,t))})),r.save_callback&&n.onGetContent.add(function(e,t){t.save&&(t.content=e.execCallback("save_callback",e.id,t.content,e.getBody()))}),r.handle_event_callback&&n.onEvent.add(function(e,t,r){n.execCallback("handle_event_callback",t,e,r)===!1&&Event.cancel(t)}),r.handle_node_change_callback&&n.onNodeChange.add(function(e,t,n){e.execCallback("handle_node_change_callback",e.id,n,-1,-1,!0,e.selection.isCollapsed())}),r.save_callback&&n.onSaveContent.add(function(e,t){var n=e.execCallback("save_callback",e.id,t.content,e.getBody());n&&(t.content=n)}),r.onchange_callback&&n.onChange.add(function(e,t){e.execCallback("onchange_callback",e,t)})},e.Editor.prototype.bindNativeEvents=function(){function u(e,t){var r=e.type;if(n.removed)return;n.onEvent.dispatch(n,e,t)!==!1&&n[o[e.fakeType||e.type]].dispatch(n,e,t)}function a(e){n.focus(!0)}function f(r,i){(r.altKey||r.ctrlKey||r.metaKey)&&t(n.shortcuts,function(t){var n=e.isMac?r.metaKey:r.ctrlKey;if(t.ctrl!=n||t.alt!=r.altKey||t.shift!=r.shiftKey)return;if(r.keyCode==t.keyCode||r.charCode&&r.charCode==t.charCode)return r.preventDefault(),i&&t.func.call(t.scope),!0})}var n=this,r,i=n.settings,s=n.dom,o;o={mouseup:"onMouseUp",mousedown:"onMouseDown",click:"onClick",keyup:"onKeyUp",keydown:"onKeyDown",keypress:"onKeyPress",submit:"onSubmit",reset:"onReset",contextmenu:"onContextMenu",dblclick:"onDblClick",paste:"onPaste"},t(o,function(t,r){var o=i.content_editable?n.getBody():n.getDoc();switch(r){case"contextmenu":s.bind(o,r,u);break;case"paste":s.bind(n.getBody(),r,u);break;case"submit":case"reset":s.bind(n.getElement().form||e.DOM.getParent(n.id,"form"),r,u);break;default:s.bind(o,r,u)}}),s.bind(i.content_editable?n.getBody():e.isGecko?n.getDoc():n.getWin(),"focus",function(e){n.focus(!0)}),i.content_editable&&e.isOpera&&(s.bind(n.getBody(),"click",a),s.bind(n.getBody(),"keydown",a)),n.onMouseUp.add(n.nodeChanged),n.onKeyUp.add(function(t,r){var i=r.keyCode;(i>=33&&i<=36||i>=37&&i<=40||i==13||i==45||i==46||i==8||e.isMac&&(i==91||i==93)||r.ctrlKey)&&n.nodeChanged()}),n.onReset.add(function(){n.setContent(n.startContent,{format:"raw"})}),n.onKeyUp.add(function(e,t){f(t)}),n.onKeyPress.add(function(e,t){f(t)}),n.onKeyDown.add(function(e,t){f(t,!0)}),e.isOpera&&n.onClick.add(function(e,t){t.preventDefault()})}}(tinymce),function(e){var t=e.each,n,r=!0,i=!1;e.EditorCommands=function(s){function h(e,t,n){var s;return e=e.toLowerCase(),(s=a.exec[e])?(s(e,t,n),r):i}function p(e){var t;return e=e.toLowerCase(),(t=a.state[e])?t(e):-1}function d(e){var t;return e=e.toLowerCase(),(t=a.value[e])?t(e):i}function v(e,n){n=n||"exec",t(e,function(e,r){t(r.toLowerCase().split(","),function(t){a[n][t]=e})})}function m(e,t,r){return t===n&&(t=i),r===n&&(r=null),s.getDoc().execCommand(e,t,r)}function g(e){return l.match(e)}function y(e,t){l.toggle(e,t?{value:t}:n)}function b(e){c=u.getBookmark(e)}function w(){u.moveToBookmark(c)}var o=s.dom,u=s.selection,a={state:{},exec:{},value:{}},f=s.settings,l=s.formatter,c;e.extend(this,{execCommand:h,queryCommandState:p,queryCommandValue:d,addCommands:v}),v({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){s.undoManager.add()},"Cut,Copy,Paste":function(t){var n=s.getDoc(),i;try{m(t)}catch(o){i=r}if(i||!n.queryCommandSupported(t))e.isGecko?s.windowManager.confirm(s.getLang("clipboard_msg"),function(e){e&&open("http://www.mozilla.org/editor/midasdemo/securityprefs.html","_blank")}):s.windowManager.alert(s.getLang("clipboard_no_support"))},unlink:function(e){u.isCollapsed()&&u.select(u.getNode()),m(e),u.collapse(i)},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(e){var n=e.substring(7);t("left,center,right,full".split(","),function(e){n!=e&&l.remove("align"+e)}),y("align"+n),h("mceRepaint")},"InsertUnorderedList,InsertOrderedList":function(e){var t,n;m(e),t=o.getParent(u.getNode(),"ol,ul"),t&&(n=t.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(n.nodeName)&&(b(),o.split(n,t),w()))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){y(e)},"ForeColor,HiliteColor,FontName":function(e,t,n){y(e,n)},FontSize:function(t,n,r){var i,s;r>=1&&r<=7&&(s=e.explode(f.font_size_style_values),i=e.explode(f.font_size_classes),i?r=i[r-1]||r:r=s[r-1]||r),y(t,r)},RemoveFormat:function(e){l.remove(e)},mceBlockQuote:function(e){y("blockquote")},FormatBlock:function(e,t,n){return y(n||"p")},mceCleanup:function(){var e=u.getBookmark();s.setContent(s.getContent({cleanup:r}),{cleanup:r}),u.moveToBookmark(e)},mceRemoveNode:function(e,t,n){var i=n||u.getNode();i!=s.getBody()&&(b(),s.dom.remove(i,r),w())},mceSelectNodeDepth:function(e,t,n){var r=0;o.getParent(u.getNode(),function(e){if(e.nodeType==1&&r++==n)return u.select(e),i},s.getBody())},mceSelectNode:function(e,t,n){u.select(n)},mceInsertContent:function(t,n,r){var i,a,f,l,c,h,p,d,v,m,g,y,b,w;i=s.parser,a=new e.html.Serializer({},s.schema),b='<span id="mce_marker" data-mce-type="bookmark">ï»¿</span>',h={content:r,format:"html"},u.onBeforeSetContent.dispatch(u,h),r=h.content,r.indexOf("{$caret}")==-1&&(r+="{$caret}"),r=r.replace(/\{\$caret\}/,b),u.isCollapsed()||s.getDoc().execCommand("Delete",!1,null),f=u.getNode(),h={context:f.nodeName.toLowerCase()},c=i.parse(r,h),g=c.lastChild;if(g.attr("id")=="mce_marker"){p=g;for(g=g.prev;g;g=g.walk(!0))if(g.type==3||!o.isBlock(g.name)){g.parent.insert(p,g,g.name==="br");break}}if(!h.invalid)r=a.serialize(c),g=f.firstChild,y=f.lastChild,!g||g===y&&g.nodeName==="BR"?o.setHTML(f,r):u.setContent(r);else{u.setContent(b),f=s.selection.getNode(),l=s.getBody(),f.nodeType==9?f=g=l:g=f;while(g!==l)f=g,g=g.parentNode;r=f==l?l.innerHTML:o.getOuterHTML(f),r=a.serialize(i.parse(r.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return a.serialize(c)}))),f==l?o.setHTML(l,r):o.setOuterHTML(f,r)}p=o.get("mce_marker"),d=o.getRect(p),v=o.getViewPort(s.getWin());if(d.y+d.h>v.y+v.h||d.y<v.y||d.x>v.x+v.w||d.x<v.x)w=e.isIE?s.getDoc().documentElement:s.getBody(),w.scrollLeft=d.x,w.scrollTop=d.y-v.h+25;m=o.createRng(),g=p.previousSibling,g&&g.nodeType==3?m.setStart(g,g.nodeValue.length):(m.setStartBefore(p),m.setEndBefore(p)),o.remove(p),u.setRng(m),u.onSetContent.dispatch(u,h),s.addVisual()},mceInsertRawHTML:function(e,t,n){u.setContent("tiny_mce_marker"),s.setContent(s.getContent().replace(/tiny_mce_marker/g,function(){return n}))},mceSetContent:function(e,t,n){s.setContent(n)},"Indent,Outdent":function(e){var n,r,i;n=f.indentation,r=/[a-z%]+$/i.exec(n),n=parseInt(n),!p("InsertUnorderedList")&&!p("InsertOrderedList")?(!f.forced_root_block&&!o.getParent(u.getNode(),o.isBlock)&&l.apply("div"),t(u.getSelectedBlocks(),function(t){e=="outdent"?(i=Math.max(0,parseInt(t.style.paddingLeft||0)-n),o.setStyle(t,"paddingLeft",i?i+r:"")):o.setStyle(t,"paddingLeft",parseInt(t.style.paddingLeft||0)+n+r)})):m(e)},mceRepaint:function(){var t;if(e.isGecko)try{b(r),u.getSel()&&u.getSel().selectAllChildren(s.getBody()),u.collapse(r),w()}catch(n){}},mceToggleFormat:function(e,t,n){l.toggle(n)},InsertHorizontalRule:function(){s.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){s.hasVisual=!s.hasVisual,s.addVisual()},mceReplaceContent:function(e,t,n){s.execCommand("mceInsertContent",!1,n.replace(/\{\$selection\}/g,u.getContent({format:"text"})))},mceInsertLink:function(e,t,n){var r;typeof n=="string"&&(n={href:n}),r=o.getParent(u.getNode(),"a"),n.href=n.href.replace(" ","%20"),(!r||!n.href)&&l.remove("link"),n.href&&l.apply("link",n,r)},selectAll:function(){var e=o.getRoot(),t=o.createRng();t.setStart(e,0),t.setEnd(e,e.childNodes.length),s.selection.setRng(t)}}),v({"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(t){var n="align"+t.substring(7),i=u.isCollapsed()?[u.getNode()]:u.getSelectedBlocks(),s=e.map(i,function(e){return!!l.matchNode(e,n)});return e.inArray(s,r)!==-1},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){return g(e)},mceBlockQuote:function(){return g("blockquote")},Outdent:function(){var e;if(f.inline_styles){if((e=o.getParent(u.getStart(),o.isBlock))&&parseInt(e.style.paddingLeft)>0)return r;if((e=o.getParent(u.getEnd(),o.isBlock))&&parseInt(e.style.paddingLeft)>0)return r}return p("InsertUnorderedList")||p("InsertOrderedList")||!f.inline_styles&&!!o.getParent(u.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList":function(e){return o.getParent(u.getNode(),e=="insertunorderedlist"?"UL":"OL")}},"state"),v({"FontSize,FontName":function(e){var t=0,n;if(n=o.getParent(u.getNode(),"span"))e=="fontsize"?t=n.style.fontSize
:t=n.style.fontFamily.replace(/, /g,",").replace(/[\'\"]/g,"").toLowerCase();return t}},"value"),v({Undo:function(){s.undoManager.undo()},Redo:function(){s.undoManager.redo()}})}}(tinymce),function(e){var t=e.util.Dispatcher;e.UndoManager=function(n){function l(){return e.trim(n.getContent({format:"raw",no_events:1}).replace(/<span[^>]+data-mce-bogus[^>]+>[\u200B\uFEFF]+<\/span>/g,""))}function c(){r.typing=!1,r.add()}var r,i=0,s=[],o,u,a,f;return u=new t(r),a=new t(r),f=new t(r),u.add(function(e,t){if(e.hasUndo())return n.onChange.dispatch(n,t,e)}),a.add(function(e,t){return n.onUndo.dispatch(n,t,e)}),f.add(function(e,t){return n.onRedo.dispatch(n,t,e)}),n.onInit.add(function(){r.add()}),n.onBeforeExecCommand.add(function(e,t,n,i,s){t!="Undo"&&t!="Redo"&&t!="mceRepaint"&&(!s||!s.skip_undo)&&r.beforeChange()}),n.onExecCommand.add(function(e,t,n,i,s){t!="Undo"&&t!="Redo"&&t!="mceRepaint"&&(!s||!s.skip_undo)&&r.add()}),n.onSaveContent.add(c),n.dom.bind(n.dom.getRoot(),"dragend",c),n.dom.bind(n.getDoc(),e.isGecko?"blur":"focusout",function(e){!n.removed&&r.typing&&c()}),n.onKeyUp.add(function(e,t){var n=t.keyCode;(n>=33&&n<=36||n>=37&&n<=40||n==45||n==13||t.ctrlKey)&&c()}),n.onKeyDown.add(function(e,t){var n=t.keyCode;if(n>=33&&n<=36||n>=37&&n<=40||n==45){r.typing&&c();return}(n<16||n>20)&&n!=224&&n!=91&&!r.typing&&(r.beforeChange(),r.typing=!0,r.add())}),n.onMouseDown.add(function(e,t){r.typing&&c()}),n.addShortcut("ctrl+z","undo_desc","Undo"),n.addShortcut("ctrl+y","redo_desc","Redo"),r={data:s,typing:!1,onAdd:u,onUndo:a,onRedo:f,beforeChange:function(){o=n.selection.getBookmark(2,!0)},add:function(e){var t,u=n.settings,a;e=e||{},e.content=l(),a=s[i];if(a&&a.content==e.content)return null;s[i]&&(s[i].beforeBookmark=o);if(u.custom_undo_redo_levels&&s.length>u.custom_undo_redo_levels){for(t=0;t<s.length-1;t++)s[t]=s[t+1];s.length--,i=s.length}return e.bookmark=n.selection.getBookmark(2,!0),i<s.length-1&&(s.length=i+1),s.push(e),i=s.length-1,r.onAdd.dispatch(r,e),n.isNotDirty=0,e},undo:function(){var e,t;return r.typing&&(r.add(),r.typing=!1),i>0&&(e=s[--i],n.setContent(e.content,{format:"raw"}),n.selection.moveToBookmark(e.beforeBookmark),r.onUndo.dispatch(r,e)),e},redo:function(){var e;return i<s.length-1&&(e=s[++i],n.setContent(e.content,{format:"raw"}),n.selection.moveToBookmark(e.bookmark),r.onRedo.dispatch(r,e)),e},clear:function(){s=[],i=0,r.typing=!1},hasUndo:function(){return i>0||this.typing},hasRedo:function(){return i<s.length-1&&!this.typing}},r}}(tinymce),tinymce.ForceBlocks=function(e){function s(){var s=r.getStart(),o=e.getBody(),u,a,f,l,c,h,p,d=-16777215;if(!s||s.nodeType!==1||!t.forced_root_block)return;while(s!=o){if(i[s.nodeName])return;s=s.parentNode}u=r.getRng(),u.setStart?(a=u.startContainer,f=u.startOffset,l=u.endContainer,c=u.endOffset):(u.item&&(s=u.item(0),u=e.getDoc().body.createTextRange(),u.moveToElementText(s)),tmpRng=u.duplicate(),tmpRng.collapse(!0),f=tmpRng.move("character",d)*-1,tmpRng.collapsed||(tmpRng=u.duplicate(),tmpRng.collapse(!1),c=tmpRng.move("character",d)*-1-f)),s=o.firstChild;while(s)s.nodeType===3||s.nodeType==1&&!i[s.nodeName]?(h||(h=n.create(t.forced_root_block),s.parentNode.insertBefore(h,s)),p=s,s=s.nextSibling,h.appendChild(p)):(h=null,s=s.nextSibling);if(u.setStart)u.setStart(a,f),u.setEnd(l,c),r.setRng(u);else try{u=e.getDoc().body.createTextRange(),u.moveToElementText(o),u.collapse(!0),u.moveStart("character",f),c>0&&u.moveEnd("character",c),u.select()}catch(v){}e.nodeChanged()}var t=e.settings,n=e.dom,r=e.selection,i=e.schema.getBlockElements();t.forced_root_block&&(e.onKeyUp.add(s),e.onClick.add(s))},function(e){var t=e.DOM,n=e.dom.Event,r=e.each,i=e.extend;e.create("tinymce.ControlManager",{ControlManager:function(t,n){var i=this,s;n=n||{},i.editor=t,i.controls={},i.onAdd=new e.util.Dispatcher(i),i.onPostRender=new e.util.Dispatcher(i),i.prefix=n.prefix||t.id+"_",i._cls={},i.onPostRender.add(function(){r(i.controls,function(e){e.postRender()})})},get:function(e){return this.controls[this.prefix+e]||this.controls[e]},setActive:function(e,t){var n=null;return(n=this.get(e))&&n.setActive(t),n},setDisabled:function(e,t){var n=null;return(n=this.get(e))&&n.setDisabled(t),n},add:function(e){var t=this;return e&&(t.controls[e.id]=e,t.onAdd.dispatch(e,t)),e},createControl:function(e){var t,n=this,i=n.editor;r(i.plugins,function(r){if(r.createControl){t=r.createControl(e,n);if(t)return!1}});switch(e){case"|":case"separator":return n.createSeparator()}return!t&&i.buttons&&(t=i.buttons[e])?n.createButton(e,t):n.add(t)},createDropMenu:function(t,n,r){var s=this,o=s.editor,u,a,f,l;n=i({"class":"mceDropDown",constrain:o.settings.constrain_menus},n),n["class"]=n["class"]+" "+o.getParam("skin")+"Skin";if(f=o.getParam("skin_variant"))n["class"]+=" "+o.getParam("skin")+"Skin"+f.substring(0,1).toUpperCase()+f.substring(1);return t=s.prefix+t,l=r||s._cls.dropmenu||e.ui.DropMenu,u=s.controls[t]=new l(t,n),u.onAddItem.add(function(e,t){var n=t.settings;n.title=o.getLang(n.title,n.title),n.onclick||(n.onclick=function(e){n.cmd&&o.execCommand(n.cmd,n.ui||!1,n.value)})}),o.onRemove.add(function(){u.destroy()}),e.isIE&&(u.onShowMenu.add(function(){o.focus(),a=o.selection.getBookmark(1)}),u.onHideMenu.add(function(){a&&(o.selection.moveToBookmark(a),a=0)})),s.add(u)},createListBox:function(t,r,s){function c(t){return t.settings.use_accessible_selects&&!e.isGecko}var o=this,u=o.editor,a,f,l;return o.get(t)?null:(r.title=u.translate(r.title),r.scope=r.scope||u,r.onselect||(r.onselect=function(e){u.execCommand(r.cmd,r.ui||!1,e||r.value)}),r=i({title:r.title,"class":"mce_"+t,scope:r.scope,control_manager:o},r),t=o.prefix+t,u.settings.use_native_selects||c(u)?f=new e.ui.NativeListBox(t,r):(l=s||o._cls.listbox||e.ui.ListBox,f=new l(t,r,u)),o.controls[t]=f,e.isWebKit&&f.onPostRender.add(function(e,t){n.add(t,"mousedown",function(){u.bookmark=u.selection.getBookmark(1)}),n.add(t,"focus",function(){u.selection.moveToBookmark(u.bookmark),u.bookmark=null})}),f.hideMenu&&u.onMouseDown.add(f.hideMenu,f),o.add(f))},createButton:function(t,n,r){var s=this,o=s.editor,u,a,f;return s.get(t)?null:(n.title=o.translate(n.title),n.label=o.translate(n.label),n.scope=n.scope||o,!n.onclick&&!n.menu_button&&(n.onclick=function(){o.execCommand(n.cmd,n.ui||!1,n.value)}),n=i({title:n.title,"class":"mce_"+t,unavailable_prefix:o.getLang("unavailable",""),scope:n.scope,control_manager:s},n),t=s.prefix+t,n.menu_button?(f=r||s._cls.menubutton||e.ui.MenuButton,a=new f(t,n,o),o.onMouseDown.add(a.hideMenu,a)):(f=s._cls.button||e.ui.Button,a=new f(t,n,o)),s.add(a))},createMenuButton:function(e,t,n){return t=t||{},t.menu_button=1,this.createButton(e,t,n)},createSplitButton:function(t,n,r){var s=this,o=s.editor,u,a,f;return s.get(t)?null:(n.title=o.translate(n.title),n.scope=n.scope||o,n.onclick||(n.onclick=function(e){o.execCommand(n.cmd,n.ui||!1,e||n.value)}),n.onselect||(n.onselect=function(e){o.execCommand(n.cmd,n.ui||!1,e||n.value)}),n=i({title:n.title,"class":"mce_"+t,scope:n.scope,control_manager:s},n),t=s.prefix+t,f=r||s._cls.splitbutton||e.ui.SplitButton,a=s.add(new f(t,n,o)),o.onMouseDown.add(a.hideMenu,a),a)},createColorSplitButton:function(t,n,r){var s=this,o=s.editor,u,a,f,l;return s.get(t)?null:(n.title=o.translate(n.title),n.scope=n.scope||o,n.onclick||(n.onclick=function(t){e.isIE&&(l=o.selection.getBookmark(1)),o.execCommand(n.cmd,n.ui||!1,t||n.value)}),n.onselect||(n.onselect=function(e){o.execCommand(n.cmd,n.ui||!1,e||n.value)}),n=i({title:n.title,"class":"mce_"+t,menu_class:o.getParam("skin")+"Skin",scope:n.scope,more_colors_title:o.getLang("more_colors")},n),t=s.prefix+t,f=r||s._cls.colorsplitbutton||e.ui.ColorSplitButton,a=new f(t,n,o),o.onMouseDown.add(a.hideMenu,a),o.onRemove.add(function(){a.destroy()}),e.isIE&&(a.onShowMenu.add(function(){o.focus(),l=o.selection.getBookmark(1)}),a.onHideMenu.add(function(){l&&(o.selection.moveToBookmark(l),l=0)})),s.add(a))},createToolbar:function(t,n,r){var i,s=this,o;return t=s.prefix+t,o=r||s._cls.toolbar||e.ui.Toolbar,i=new o(t,n,s.editor),s.get(t)?null:s.add(i)},createToolbarGroup:function(t,n,r){var i,s=this,o;return t=s.prefix+t,o=r||this._cls.toolbarGroup||e.ui.ToolbarGroup,i=new o(t,n,s.editor),s.get(t)?null:s.add(i)},createSeparator:function(t){var n=t||this._cls.separator||e.ui.Separator;return new n},setControlType:function(e,t){return this._cls[e.toLowerCase()]=t},destroy:function(){r(this.controls,function(e){e.destroy()}),this.controls=null}})}(tinymce),function(e){var t=e.util.Dispatcher,n=e.each,r=e.isIE,i=e.isOpera;e.create("tinymce.WindowManager",{WindowManager:function(e){var n=this;n.editor=e,n.onOpen=new t(n),n.onClose=new t(n),n.params={},n.features={}},open:function(t,s){var o=this,u="",a,f,l=o.editor.settings.dialog_type=="modal",c,h,p,d=e.DOM.getViewPort(),v;t=t||{},s=s||{},h=i?d.w:screen.width,p=i?d.h:screen.height,t.name=t.name||"mc_"+(new Date).getTime(),t.width=parseInt(t.width||320),t.height=parseInt(t.height||240),t.resizable=!0,t.left=t.left||parseInt(h/2)-t.width/2,t.top=t.top||parseInt(p/2)-t.height/2,s.inline=!1,s.mce_width=t.width,s.mce_height=t.height,s.mce_auto_focus=t.auto_focus,l&&r&&(t.center=!0,t.help=!1,t.dialogWidth=t.width+"px",t.dialogHeight=t.height+"px",t.scroll=t.scrollbars||!1),n(t,function(t,n){e.is(t,"boolean")&&(t=t?"yes":"no"),/^(name|url)$/.test(n)||(r&&l?u+=(u?";":"")+n+":"+t:u+=(u?",":"")+n+"="+t)}),o.features=t,o.params=s,o.onOpen.dispatch(o,t,s),v=t.url||t.file,v=e._addVer(v);try{r&&l?(c=1,window.showModalDialog(v,window,u)):c=window.open(v,t.name,u)}catch(m){}c||alert(o.editor.getLang("popup_blocked"))},close:function(e){e.close(),this.onClose.dispatch(this)},createInstance:function(t,n,r,i,s,o){var u=e.resolve(t);return new u(n,r,i,s,o)},confirm:function(e,t,n,r){r=r||window,t.call(n||this,r.confirm(this._decode(this.editor.getLang(e,e))))},alert:function(e,t,n,r){var i=this;r=r||window,r.alert(i._decode(i.editor.getLang(e,e))),t&&t.call(n||i)},resizeBy:function(e,t,n){n.resizeBy(e,t)},_decode:function(t){return e.DOM.decode(t).replace(/\\n/g,"\n")}})}(tinymce),function(e){e.Formatter=function(t){function y(e){return e instanceof Array}function b(e,t){return i.getParents(e,t,i.getRoot())}function w(e){return e.nodeType===1&&e.id==="_mce_caret"}function E(){T({alignleft:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"left"},defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{"float":"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"center"},defaultBlock:"div"},{selector:"img",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"}},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"}}],alignright:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"right"},defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{"float":"right"}}],alignfull:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"justify"},defaultBlock:"div"}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},wrap_links:!1},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},wrap_links:!1},fontname:{inline:"span",styles:{fontFamily:"%value"}},fontsize:{inline:"span",styles:{fontSize:"%value"}},fontsize_class:{inline:"span",attributes:{"class":"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(e){return!0},onformat:function(e,t,n){r(n,function(t,n){i.setAttrib(e,n,t)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]}),r("p h1 h2 h3 h4 h5 h6 div address pre div code dt dd samp".split(/\s/),function(e){T(e,{block:e,remove:"all"})}),T(t.settings.formats)}function S(){t.addShortcut("ctrl+b","bold_desc","Bold"),t.addShortcut("ctrl+i","italic_desc","Italic"),t.addShortcut("ctrl+u","underline_desc","Underline");for(var e=1;e<=6;e++)t.addShortcut("ctrl+"+e,"",["FormatBlock",!1,"h"+e]);t.addShortcut("ctrl+7","",["FormatBlock",!1,"p"]),t.addShortcut("ctrl+8","",["FormatBlock",!1,"div"]),t.addShortcut("ctrl+9","",["FormatBlock",!1,"address"])}function x(e){return e?n[e]:n}function T(e,t){e&&(typeof e!="string"?r(e,function(e,t){T(t,e)}):(t=t.length?t:[t],r(t,function(e){e.deep===m&&(e.deep=!e.selector),e.split===m&&(e.split=!e.selector||e.inline),e.remove===m&&e.selector&&!e.inline&&(e.remove="none"),e.selector&&e.inline&&(e.mixed=!0,e.block_expand=!0),typeof e.classes=="string"&&(e.classes=e.classes.split(/\s+/))}),n[e]=t))}function k(n,c,h){function T(e,t){t=t||m,e&&(t.onformat&&t.onformat(e,t,c,h),r(t.styles,function(t,n){i.setStyle(e,n,j(t,c))}),r(t.attributes,function(t,n){i.setAttrib(e,n,j(t,c))}),r(t.classes,function(t){t=j(t,c),i.hasClass(e,t)||i.addClass(e,t)}))}function N(){function e(e,t){var n=new o(t);for(h=n.current();h;h=n.prev())if(h.childNodes.length>1||h==e||h.tagName=="BR")return h}var n=t.selection.getRng(),r=n.startContainer,i=n.endContainer;if(r!=i&&n.endOffset===0){var s=e(r,i),u=s.nodeType==3?s.length:s.childNodes.length;n.setEnd(s,u)}return n}function L(t,n,s,o,u){var a=[],f=-1,l,c=-1,h=-1,p;return r(t.childNodes,function(e,t){if(e.nodeName==="UL"||e.nodeName==="OL")return f=t,l=e,!1}),r(t.childNodes,function(e,t){e.nodeName==="SPAN"&&i.getAttrib(e,"data-mce-type")=="bookmark"&&(e.id==n.id+"_start"?c=t:e.id==n.id+"_end"&&(h=t))}),f<=0||c<f&&h>f?(r(e.grep(t.childNodes),u),0):(p=i.clone(s,d),r(e.grep(t.childNodes),function(e,t){if(c<f&&t<f||c>f&&t>f)a.push(e),e.parentNode.removeChild(e)}),c<f?t.insertBefore(p,l):c>f&&t.insertBefore(p,l.nextSibling),o.push(p),r(a,function(e){p.appendChild(e)}),p)}function A(t,s,o){var l=[],h,y,b=!0;h=m.inline||m.block,y=i.create(h),T(y),u.walk(t,function(t){function f(t){var v,E,x,N,C;C=b,v=t.nodeName.toLowerCase(),E=t.parentNode.nodeName.toLowerCase(),t.nodeType===1&&g(t)&&(C=b,b=g(t)==="true",N=!0);if(H(v,"br")){u=0,m.block&&i.remove(t);return}if(m.wrapper&&O(t,n,c)){u=0;return}if(b&&!N&&m.block&&!m.wrapper&&V(v)){t=i.rename(t,h),T(t),l.push(t),u=0;return}if(m.selector){r(p,function(e){if("collapsed"in e&&e.collapsed!==S)return;i.is(t,e.selector)&&!w(t)&&(T(t,e),x=!0)});if(!m.inline||x){u=0;return}}b&&!N&&a(h,v)&&a(E,h)&&(!!o||t.nodeType!==3||t.nodeValue.length!==1||t.nodeValue.charCodeAt(0)!==65279)&&!w(t)?(u||(u=i.clone(y,d),t.parentNode.insertBefore(u,t),l.push(u)),u.appendChild(t)):v=="li"&&s?u=L(t,s,y,l,f):(u=0,r(e.grep(t.childNodes),f),N&&(b=C),u=0)}var u;r(t,f)}),m.wrap_links===!1&&r(l,function(t){function n(t){var s,o,u;if(t.nodeName==="A"){o=i.clone(y,d),l.push(o),u=e.grep(t.childNodes);for(s=0;s<u.length;s++)o.appendChild(u[s]);t.appendChild(o)}r(e.grep(t.childNodes),n)}n(t)}),r(l,function(e){function s(e){var t=0;return r(e.childNodes,function(e){!F(e)&&!W(e)&&t++}),t}function o(e){var t,n;return r(e.childNodes,function(e){if(e.nodeType==1&&!W(e)&&!w(e))return t=e,d}),t&&P(t,m)&&(n=i.clone(t,d),T(n),i.replace(n,e,v),i.remove(t,1)),n||e}var t;t=s(e);if((l.length>1||!f(e))&&t===0){i.remove(e,1);return}if(m.inline||m.wrapper){!m.exact&&t===1&&(e=o(e)),r(p,function(t){r(i.select(t.inline,e),function(e){var n;if(t.wrap_links===!1){n=e.parentNode;do if(n.nodeName==="A")return;while(n=n.parentNode)}R(t,c,e,t.exact?e:null)})});if(O(e.parentNode,n,c))return i.remove(e,1),e=0,v;m.merge_with_parents&&i.getParent(e.parentNode,function(t){if(O(t,n,c))return i.remove(e,1),e=0,v}),e&&m.merge_siblings!==!1&&(e=X(z(e),e),e=X(e,z(e,v)))}})}var p=x(n),m=p[0],y,b,E,S=s.isCollapsed();if(m)if(h)h.nodeType?(b=i.createRng(),b.setStartBefore(h),b.setEndAfter(h),A(q(b,p),null,!0)):A(h,null,!0);else if(!S||!m.inline||i.select("td.mceSelected,th.mceSelected").length){var M=t.selection.getNode();!l&&p[0].defaultBlock&&!i.getParent(M,i.isBlock)&&k(p[0].defaultBlock),t.selection.setRng(N()),y=s.getBookmark(),A(q(s.getRng(v),p),y),m.styles&&(m.styles.color||m.styles.textDecoration)&&(e.walk(M,C,"childNodes"),C(M)),s.moveToBookmark(y),K(s.getRng(v)),t.nodeChanged()}else J("apply",n,c)}function L(n,o,a){function E(t){var n,r,i,s,u,a;t.nodeType===1&&g(t)&&(u=w,w=g(t)==="true",a=!0),n=e.grep(t.childNodes);if(w&&!a)for(r=0,i=l.length;r<i;r++)if(R(l[r],o,t,t))break;if(h.deep&&n.length){for(r=0,i=n.length;r<i;r++)E(n[r]);a&&(w=u)}}function S(e){var t;return r(b(e.parentNode).reverse(),function(e){var r;!t&&e.id!="_start"&&e.id!="_end"&&(r=O(e,n,o),r&&r.split!==!1&&(t=e))}),t}function T(e,t,n,r){var s,u,a,c,p,v;if(e){v=e.parentNode;for(s=t.parentNode;s&&s!=v;s=s.parentNode){u=i.clone(s,d);for(p=0;p<l.length;p++)if(R(l[p],o,u,u)){u=0;break}u&&(a&&u.appendChild(a),c||(c=u),a=u)}r&&(!h.mixed||!f(e))&&(t=i.split(e,t)),a&&(n.parentNode.insertBefore(a,n),c.appendChild(n))}return t}function C(e){return T(S(e),e,e,!0)}function k(e){var t=i.get(e?"_start":"_end"),n=t[e?"firstChild":"lastChild"];return W(n)&&(n=n[e?"firstChild":"lastChild"]),i.remove(t,!0),n}function L(e){var n,i,s;e=q(e,l,v),h.split&&(n=$(e,v),i=$(e),n!=i?(s=n.firstChild,n.nodeName=="TD"&&s&&(n=s),n=I(n,"span",{id:"_start","data-mce-type":"bookmark"}),i=I(i,"span",{id:"_end","data-mce-type":"bookmark"}),C(n),C(i),n=k(v),i=k()):n=i=C(n),e.startContainer=n.parentNode,e.startOffset=c(n),e.endContainer=i.parentNode,e.endOffset=c(i)+1),u.walk(e,function(e){r(e,function(e){E(e),e.nodeType===1&&t.dom.getStyle(e,"text-decoration")==="underline"&&e.parentNode&&N(e.parentNode)==="underline"&&R({deep:!1,exact:!0,inline:"span",styles:{textDecoration:"underline"}},null,e)})})}var l=x(n),h=l[0],p,m,y,w=!0;if(a){a.nodeType?(y=i.createRng(),y.setStartBefore(a),y.setEndAfter(a),L(y)):L(a);return}!s.isCollapsed()||!h.inline||i.select("td.mceSelected,th.mceSelected").length?(p=s.getBookmark(),L(s.getRng(v)),s.moveToBookmark(p),h.inline&&M(n,o,s.getStart())&&K(s.getRng(!0)),t.nodeChanged()):J("remove",n,o)}function A(e,t,n){var r=x(e);!M(e,t,n)||"toggle"in r[0]&&!r[0].toggle?k(e,t,n):L(e,t,n)}function O(e,t,n,r){function f(e,t,s){var o,u,a=t[s],f;if(t.onmatch)return t.onmatch(e,t,s);if(a)if(a.length===m){for(o in a)if(a.hasOwnProperty(o)){s==="attributes"?u=i.getAttrib(e,o):u=B(e,o);if(r&&!u&&!t.exact)return;if((!r||t.exact)&&!H(u,j(a[o],n)))return}}else for(f=0;f<a.length;f++)if(s==="attributes"?i.getAttrib(e,a[f]):B(e,a[f]))return t;return t}var s=x(t),o,u,a;if(s&&e)for(u=0;u<s.length;u++){o=s[u];if(P(e,o)&&f(e,o,"attributes")&&f(e,o,"styles")){if(a=o.classes)for(u=0;u<a.length;u++)if(!i.hasClass(e,a[u]))return;return o}}}function M(e,t,n){function o(n){return n=i.getParent(n,function(n){return!!O(n,e,t,!0)}),O(n,e,t)}var r;return n?o(n):(n=s.getNode(),o(n)?v:(r=s.getStart(),r!=n&&o(r)?v:d))}function _(e,t){var n,r=[],o={},u,a,f;return n=s.getStart(),i.getParent(n,function(n){var i,s;for(i=0;i<e.length;i++)s=e[i],!o[s]&&O(n,s,t)&&(o[s]=!0,r.push(s))}),r}function D(e){var t=x(e),n,r,o,u,a;if(t){n=s.getStart(),r=b(n);for(u=t.length-1;u>=0;u--){a=t[u].selector;if(!a)return v;for(o=r.length-1;o>=0;o--)if(i.is(r[o],a))return v}}return d}function P(e,t){if(H(e,t.inline))return v;if(H(e,t.block))return v;if(t.selector)return i.is(e,t.selector)}function H(e,t){return e=e||"",t=t||"",e=""+(e.nodeName||e),t=""+(t.nodeName||t),e.toLowerCase()==t.toLowerCase()}function B(e,t){var n=i.getStyle(e,t);if(t=="color"||t=="backgroundColor")n=i.toHex(n);return t=="fontWeight"&&n==700&&(n="bold"),""+n}function j(e,t){return typeof e!="string"?e=e(t):t&&(e=e.replace(/%(\w+)/g,function(e,n){return t[n]||e})),e}function F(e){return e&&e.nodeType===3&&/^([\t \r\n]+|)$/.test(e.nodeValue)}function I(e,t,n){var r=i.create(t,n);return e.parentNode.insertBefore(r,e),r.appendChild(e),r}function q(e,n,r){function w(e){var t,r,s,o,u,a;t=r=e?h:v,u=e?"previousSibling":"nextSibling",a=i.getRoot();if(t.nodeType==3&&!F(t))if(e?p>0:y<t.nodeValue.length)return t;for(;;){if(!n[0].block_expand&&f(r))return r;for(o=r[u];o;o=o[u])if(!W(o)&&!F(o))return r;if(r.parentNode==a){t=r;break}r=r.parentNode}return t}function E(e,t){t===m&&(t=e.nodeType===3?e.length:e.childNodes.length);while(e&&e.hasChildNodes())e=e.childNodes[t],e&&(t=e.nodeType===3?e.length:e.childNodes.length);return{node:e,offset:t}}function S(e){var t=e;while(t){if(t.nodeType===1&&g(t))return g(t)==="false"?t:e;t=t.parentNode}return e}function x(e,n,s){function h(e,t){var n,i,o=e.nodeValue;return typeof t=="undefined"&&(t=s?o.length:0),s?(n=o.lastIndexOf(" ",t),i=o.lastIndexOf("Â ",t),n=n>i?n:i,n!==-1&&!r&&n++):(n=o.indexOf(" ",t),i=o.indexOf("Â ",t),n=n!==-1&&(i===-1||n<i)?n:i),n}var u,a,l,c;if(e.nodeType===3){l=h(e,n);if(l!==-1)return{container:e,offset:l};c=e}u=new o(e,i.getParent(e,f)||t.getBody());while(a=u[s?"prev":"next"]())if(a.nodeType===3){c=a,l=h(a);if(l!==-1)return{container:a,offset:l}}else if(f(a))break;if(c)return s?n=0:n=c.length,{container:c,offset:n}}function T(t,r){var s,o,u,a;t.nodeType==3&&t.nodeValue.length===0&&t[r]&&(t=t[r]),s=b(t);for(o=0;o<s.length;o++)for(u=0;u<n.length;u++){a=n[u];if("collapsed"in a&&a.collapsed!==e.collapsed)continue;if(i.is(s[o],a.selector))return s[o]}return t}function N(e,t,r){var s;n[0].wrapper||(s=i.getParent(e,n[0].block)),s||(s=i.getParent(e.nodeType==3?e.parentNode:e,f)),s&&n[0].wrapper&&(s=b(s,"ul,ol").reverse()[0]||s);if(!s){s=e;while(s[t]&&!f(s[t])){s=s[t];if(H(s,"br"))break}}return s||e}var s,u,a,l,h=e.startContainer,p=e.startOffset,v=e.endContainer,y=e.endOffset;h.nodeType==1&&h.hasChildNodes()&&(u=h.childNodes.length-1,h=h.childNodes[p>u?u:p],h.nodeType==3&&(p=0)),v.nodeType==1&&v.hasChildNodes()&&(u=v.childNodes.length-1,v=v.childNodes[y>u?u:y-1],v.nodeType==3&&(y=v.nodeValue.length)),h=S(h),v=S(v);if(W(h.parentNode)||W(h))h=W(h)?h:h.parentNode,h=h.nextSibling||h,h.nodeType==3&&(p=0);if(W(v.parentNode)||W(v))v=W(v)?v:v.parentNode,v=v.previousSibling||v,v.nodeType==3&&(y=v.length);if(n[0].inline){e.collapsed&&(l=x(h,p,!0),l&&(h=l.container,p=l.offset),l=x(v,y),l&&(v=l.container,y=l.offset)),a=E(v,y);if(a.node){while(a.node&&a.offset===0&&a.node.previousSibling)a=E(a.node.previousSibling);a.node&&a.offset>0&&a.node.nodeType===3&&a.node.nodeValue.charAt(a.offset-1)===" "&&a.offset>1&&(v=a.node,v.splitText(a.offset-1))}}if(n[0].inline||n[0].block_expand){if(!n[0].inline||h.nodeType!=3||p===0)h=w(!0);if(!n[0].inline||v.nodeType!=3||y===v.nodeValue.length)v=w()}n[0].selector&&n[0].expand!==d&&!n[0].inline&&(h=T(h,"previousSibling"),v=T(v,"nextSibling"));if(n[0].block||n[0].selector)h=N(h,"previousSibling"),v=N(v,"nextSibling"),n[0].block&&(f(h)||(h=w(!0)),f(v)||(v=w()));return h.nodeType==1&&(p=c(h),h=h.parentNode),v.nodeType==1&&(y=c(v)+1,v=v.parentNode),{startContainer:h,startOffset:p,endContainer:v,endOffset:y}}function R(e,t,n,s){var o,u,a;if(!P(n,e))return d;if(e.remove!="all"){r(e.styles,function(e,r){e=j(e,t),typeof r=="number"&&(r=e,s=0),(!s||H(B(s,r),e))&&i.setStyle(n,r,""),a=1}),a&&i.getAttrib(n,"style")==""&&(n.removeAttribute("style"),n.removeAttribute("data-mce-style")),r(e.attributes,function(e,o){var u;e=j(e,t),typeof o=="number"&&(o=e,s=0);if(!s||H(i.getAttrib(s,o),e)){if(o=="class"){e=i.getAttrib(n,o);if(e){u="",r(e.split(/\s+/),function(e){/mce\w+/.test(e)&&(u+=(u?" ":"")+e)});if(u){i.setAttrib(n,o,u);return}}}o=="class"&&n.removeAttribute("className"),p.test(o)&&n.removeAttribute("data-mce-"+o),n.removeAttribute(o)}}),r(e.classes,function(e){e=j(e,t),(!s||i.hasClass(s,e))&&i.removeClass(n,e)}),u=i.getAttribs(n);for(o=0;o<u.length;o++)if(u[o].nodeName.indexOf("_")!==0)return d}if(e.remove!="none")return U(n,e),v}function U(t,n){function u(e,t,n){return e=z(e,t,n),!e||e.nodeName=="BR"||f(e)}var s=t.parentNode,o;n.block&&(l?s==i.getRoot()&&(!n.list_block||!H(t,n.list_block))&&r(e.grep(t.childNodes),function(e){a(l,e.nodeName.toLowerCase())?o?o.appendChild(e):o=I(e,l):o=0}):f(t)&&!f(s)&&(!u(t,d)&&!u(t.firstChild,v,1)&&t.insertBefore(i.create("br"),t.firstChild),!u(t,v)&&!u(t.lastChild,d,1)&&t.appendChild(i.create("br"))));if(n.selector&&n.inline&&!H(n.inline,t))return;i.remove(t,1)}function z(e,t,n){if(e){t=t?"nextSibling":"previousSibling";for(e=n?e:e[t];e;e=e[t])if(e.nodeType==1||!F(e))return e}}function W(e){return e&&e.nodeType==1&&e.getAttribute("data-mce-type")=="bookmark"}function X(t,n){function a(e,t){function n(e){var t={};return r(i.getAttribs(e),function(n){var r=n.nodeName.toLowerCase();r.indexOf("_")!==0&&r!=="style"&&(t[r]=i.getAttrib(e,r))}),t}function s(e,t){var n,r;for(r in e)if(e.hasOwnProperty(r)){n=t[r];if(n===m)return d;if(e[r]!=n)return d;delete t[r]}for(r in t)if(t.hasOwnProperty(r))return d;return v}return e.nodeName!=t.nodeName?d:s(n(e),n(t))?s(i.parseStyle(i.getAttrib(e,"style")),i.parseStyle(i.getAttrib(t,"style")))?v:d:d}function f(e,t){for(o=e;o;o=o[t]){if(o.nodeType==3&&o.nodeValue.length!==0)return e;if(o.nodeType==1&&!W(o))return o}return e}var s,o,u;if(t&&n){t=f(t,"previousSibling"),n=f(n,"nextSibling");if(a(t,n)){for(o=t.nextSibling;o&&o!=n;)u=o,o=o.nextSibling,t.appendChild(u);return i.remove(n),r(e.grep(n.childNodes),function(e){t.appendChild(e)}),t}}return n}function V(e){return/^(h[1-6]|p|div|pre|address|dl|dt|dd)$/.test(e)}function $(e,n){var r,i,s,u;return r=e[n?"startContainer":"endContainer"],i=e[n?"startOffset":"endOffset"],r.nodeType==1&&(s=r.childNodes.length-1,!n&&i&&i--,r=r.childNodes[i>s?s:i]),r.nodeType===3&&n&&i>=r.nodeValue.length&&(r=(new o(r,t.getBody())).next()||r),r.nodeType===3&&!n&&i===0&&(r=(new o(r,t.getBody())).prev()||r),r}function J(n,r,a){function c(e){var n=i.create("span",{id:f,"data-mce-bogus":!0,style:l?"color:red":""});return e&&n.appendChild(t.getDoc().createTextNode(h)),n}function p(e,t){while(e){if(e.nodeType===3&&e.nodeValue!==h||e.childNodes.length>1)return!1;t&&e.nodeType===1&&t.push(e),e=e.firstChild}return!0}function d(e){while(e){if(e.id===f)return e;e=e.parentNode}}function v(e){var t;if(e){t=new o(e,e);for(e=t.current();e;e=t.next())if(e.nodeType===3)return e}}function m(e,t){var n,r;if(!e){e=d(s.getStart());if(!e)while(e=i.get(f))m(e,!1)}else r=s.getRng(!0),p(e)?(t!==!1&&(r.setStartBefore(e),r.setEndBefore(e)),i.remove(e)):(n=v(e),n.nodeValue.charAt(0)===h&&(n=n.deleteData(0,1)),i.remove(e,1)),s.setRng(r)}function g(){var e,t,n,i,o,f,l;e=s.getRng(!0),i=e.startOffset,f=e.startContainer,l=f.nodeValue,t=d(s.getStart()),t&&(n=v(t)),l&&i>0&&i<l.length&&/\w/.test(l.charAt(i))&&/\w/.test(l.charAt(i-1))?(o=s.getBookmark(),e.collapse(!0),e=q(e,x(r)),e=u.split(e),k(r,a,e),s.moveToBookmark(o)):(!t||n.nodeValue!==h?(t=c(!0),n=t.firstChild,e.insertNode(t),i=1,k(r,a,t)):k(r,a,t),s.setCursorLocation(n,i))}function y(){var e=s.getRng(!0),t,n,o,f,l,p,d=[],v,m;t=e.startContainer,n=e.startOffset,l=t;if(t.nodeType==3){if(n!=t.nodeValue.length||t.nodeValue===h)f=!0;l=l.parentNode}while(l){if(O(l,r,a)){p=l;break}l.nextSibling&&(f=!0),d.push(l),l=l.parentNode}if(!p)return;if(f)o=s.getBookmark(),e.collapse(!0),e=q(e,x(r),!0),e=u.split(e),L(r,a,e),s.moveToBookmark(o);else{m=c(),l=m;for(v=d.length-1;v>=0;v--)l.appendChild(i.clone(d[v],!1)),l=l.firstChild;l.appendChild(i.doc.createTextNode(h)),l=l.firstChild,i.insertAfter(m,p),s.setCursorLocation(l,1)}}var f="_mce_caret",l=t.settings.caret_debug;self._hasCaretEvents||(t.onBeforeGetContent.addToTop(function(){var e=[],t;if(p(d(s.getStart()),e)){t=e.length;while(t--)i.setAttrib(e[t],"data-mce-bogus","1")}}),e.each("onMouseUp onKeyUp".split(" "),function(e){t[e].addToTop(function(){m()})}),t.onKeyDown.addToTop(function(e,t){var n=t.keyCode;(n==8||n==37||n==39)&&m(d(s.getStart()))}),self._hasCaretEvents=!0),n=="apply"?g():y()}function K(e){var t=e.startContainer,n=e.startOffset,r,u,a,f,l;t.nodeType==3&&n>=t.nodeValue.length&&(n=c(t),t=t.parentNode,r=!0);if(t.nodeType==1){f=t.childNodes,t=f[Math.min(n,f.length-1)],u=new o(t,i.getParent(t,i.isBlock)),(n>f.length-1||r)&&u.next();for(a=u.current();a;a=u.next())if(a.nodeType==3&&!F(a)){l=i.create("a",null,h),a.parentNode.insertBefore(l,a),e.setStart(a,0),s.setRng(e),i.remove(l);return}}}var n={},r=e.each,i=t.dom,s=t.selection,o=e.dom.TreeWalker,u=new e.dom.RangeUtils(i),a=t.schema.isValidChild,f=i.isBlock,l=t.settings.forced_root_block,c=i.nodeIndex,h=e.isGecko?"â":"ï»¿",p=/^(src|href|style)$/,d=!1,v=!0,m,g=i.getContentEditable,N=function(e){var n;return t.dom.getParent(e,function(e){return n=t.dom.getStyle(e,"text-decoration"),n&&n!=="none"}),n},C=function(e){var n;e.nodeType===1&&e.parentNode&&e.parentNode.nodeType===1&&(n=N(e.parentNode),t.dom.getStyle(e,"color")&&n?t.dom.setStyle(e,"text-decoration",n):t.dom.getStyle(e,"textdecoration")===n&&t.dom.setStyle(e,"text-decoration",null))};e.extend(this,{get:x,register:T,apply:k,remove:L,toggle:A,match:M,matchAll:_,matchNode:O,canApply:D}),E(),S()}}(tinymce),tinymce.onAddEditor.add(function(e,t){function o(t,n){e.each(n,function(e,n){e&&i.setStyle(t,n,e)}),i.rename(t,"span")}function u(r,o){i=r.dom,s.convert_fonts_to_spans&&e.each(i.select("font,u,strike",o.node),function(e){n[e.nodeName.toLowerCase()](t.dom,e)})}var n,r,i,s=t.settings;s.inline_styles&&(r=e.explode(s.font_size_legacy_values),n={font:function(e,t){o(t,{backgroundColor:t.style.backgroundColor,color:t.color,fontFamily:t.face,fontSize:r[parseInt(t.size,10)-1]})},u:function(e,t){o(t,{textDecoration:"underline"})},strike:function(e,t){o(t,{textDecoration:"line-through"})}},t.onPreProcess.add(u),t.onSetContent.add(u),t.onInit.add(function(){t.selection.onSetContent.add(u)}))}),function(e){var t=e.dom.TreeWalker;e.EnterKey=function(n){function u(u){function S(e){return e&&r.isBlock(e)&&!/^(TD|TH|CAPTION)$/.test(e.nodeName)&&!/^(fixed|absolute)/i.test(e.style.position)&&r.getContentEditable(e)!=="true"}function x(e){var s,o,u,a,f,l=e,c;u=r.createRng();if(e.hasChildNodes()){s=new t(e,e);while(o=s.current()){if(o.nodeType==3){u.setStart(o,0),u.setEnd(o,0);break}if(/^(BR|IMG)$/.test(o.nodeName)){u.setStartBefore(o),u.setEndBefore(o);break}l=o,o=s.next()}o||(u.setStart(l,0),u.setEnd(l,0))}else if(e.nodeName=="BR")if(e.nextSibling&&r.isBlock(e.nextSibling)){if(!d||d<9)c=r.create("br"),e.parentNode.insertBefore(c,e);u.setStartBefore(e),u.setEndBefore(e)}else u.setStartAfter(e),u.setEndAfter(e);else u.setStart(e,0),u.setEnd(e,0);i.setRng(u),r.remove(c),f=r.getViewPort(n.getWin()),a=r.getPos(e).y,(a<f.y||a+25>f.y+f.h)&&n.getWin().scrollTo(0,a<f.y?a:a-f.h+25)}function T(t){var n=c,i,o,u;i=t||y=="TABLE"?r.create(t||w):p.cloneNode(!1),u=i;if(s.keep_styles!==!1)do/^(SPAN|STRONG|B|EM|I|FONT|STRIKE|U)$/.test(n.nodeName)&&(o=n.cloneNode(!1),r.setAttrib(o,"id",""),i.hasChildNodes()?(o.appendChild(i.firstChild),i.appendChild(o)):(u=o,i.appendChild(o)));while(n=n.parentNode);return e.isIE||(u.innerHTML="<br>"),i}function N(e){var n,r,i;if(c.nodeType==3&&(e?h>0:h<c.nodeValue.length))return!1;if(c.parentNode==p&&E&&!e)return!0;if(c.nodeName==="TABLE"||c.previousSibling&&c.previousSibling.nodeName=="TABLE")return E&&!e||!E&&e;n=new t(c,p);while(r=e?n.prev():n.next())if(r.nodeType===1){if(r.getAttribute("data-mce-bogus"))continue;i=r.nodeName.toLowerCase();if(i==="IMG")return!1}else if(r.nodeType===3&&!/^[ \t\r\n]*$/.test(r.nodeValue))return!1;return!0}function C(e,t){var n,i,s,o,u,f=w||"P";i=r.getParent(e,r.isBlock);if(!i||!S(i)){i=i||l;if(!i.hasChildNodes())return n=r.create(f),i.appendChild(n),a.setStart(n,0),a.setEnd(n,0),n;o=e;while(o.parentNode!=i)o=o.parentNode;while(o&&!r.isBlock(o))s=o,o=o.previousSibling;if(s){n=r.create(f),s.parentNode.insertBefore(n,s),o=s;while(o&&!r.isBlock(o))u=o.nextSibling,n.appendChild(o),o=u;a.setStart(e,t),a.setEnd(e,t)}}return e}function k(){function e(e){var t=g[e?"firstChild":"lastChild"];while(t){if(t.nodeType==1)break;t=t[e?"nextSibling":"previousSibling"]}return t===p}v=w?T(w):r.create("BR"),e(!0)&&e()?r.replace(v,g):e(!0)?g.parentNode.insertBefore(v,g):e()?r.insertAfter(v,g):(f=a.cloneRange(),f.setStartAfter(p),f.setEndAfter(g),m=f.extractContents(),r.insertAfter(m,g),r.insertAfter(v,g)),r.remove(p),x(v),o.add()}function L(){var e=new t(c,p),n;while(n=e.current()){if(n.nodeName=="BR")return!0;n=e.next()}}function A(){var t,n;c&&c.nodeType==3&&h>=c.nodeValue.length&&!e.isIE&&!L()&&(t=r.create("br"),a.insertNode(t),a.setStartAfter(t),a.setEndAfter(t),n=!0),t=r.create("br"),a.insertNode(t),e.isIE&&y=="PRE"&&(!d||d<8)&&t.parentNode.insertBefore(r.doc.createTextNode("\r"),t),n?(a.setStartBefore
(t),a.setEndBefore(t)):(a.setStartAfter(t),a.setEndAfter(t)),i.setRng(a),o.add()}function O(e){do e.nodeType===3&&(e.nodeValue=e.nodeValue.replace(/^[\r\n]+/,"")),e=e.firstChild;while(e)}function M(e){var t=r.getRoot(),n,i;n=e;while(n!==t&&r.getContentEditable(n)!=="false")r.getContentEditable(n)==="true"&&(i=n),n=n.parentNode;return n!==t?i:t}var a=i.getRng(!0),f,l,c,h,p,d,v,m,g,y,b,w,E;if(!a.collapsed){n.execCommand("Delete");return}if(u.isDefaultPrevented())return;c=a.startContainer,h=a.startOffset,w=s.forced_root_block,w=w?w.toUpperCase():"",d=r.doc.documentMode,c.nodeType==1&&c.hasChildNodes()&&(E=h>c.childNodes.length-1,c=c.childNodes[Math.min(h,c.childNodes.length-1)]||c,h=0),l=M(c);if(!l)return;o.beforeChange();if(!r.isBlock(l)&&l!=r.getRoot()){(!w||u.shiftKey)&&A();return}if(w&&!u.shiftKey||!w&&u.shiftKey)c=C(c,h);p=r.getParent(c,r.isBlock),g=p?r.getParent(p.parentNode,r.isBlock):null,y=p?p.nodeName.toUpperCase():"",b=g?g.nodeName.toUpperCase():"";if(y=="LI"&&r.isEmpty(p)){if(/^(UL|OL|LI)$/.test(g.parentNode.nodeName))return!1;k();return}if(y=="PRE"&&s.br_in_pre!==!1){if(!u.shiftKey){A();return}}else if(!w&&!u.shiftKey&&y!="LI"||w&&u.shiftKey){A();return}w=w||"P",N()?(/^(H[1-6]|PRE)$/.test(y)&&b!="HGROUP"?v=T(w):v=T(),s.end_container_on_empty_block&&S(g)&&r.isEmpty(p)?v=r.split(g,p):r.insertAfter(v,p)):N(!0)?v=p.parentNode.insertBefore(T(),p):(f=a.cloneRange(),f.setEndAfter(p),m=f.extractContents(),O(m),v=m.firstChild,r.insertAfter(m,p)),r.setAttrib(v,"id",""),x(v),o.add()}var r=n.dom,i=n.selection,s=n.settings,o=n.undoManager;n.onKeyDown.add(function(e,t){t.keyCode==13&&u(t)!==!1&&t.preventDefault()})}}(tinymce),function(i,za,p){i.fn.dataTableSettings=[];var D=i.fn.dataTableSettings;i.fn.dataTableExt={};var n=i.fn.dataTableExt;n.sVersion="1.8.2",n.sErrMode="alert",n.iApiIndex=0,n.oApi={},n.afnFiltering=[],n.aoFeatures=[],n.ofnSearch={},n.afnSortData=[],n.oStdClasses={sPagePrevEnabled:"paginate_enabled_previous",sPagePrevDisabled:"paginate_disabled_previous",sPageNextEnabled:"paginate_enabled_next",sPageNextDisabled:"paginate_disabled_next",sPageJUINext:"",sPageJUIPrev:"",sPageButton:"paginate_button",sPageButtonActive:"paginate_active",sPageButtonStaticDisabled:"paginate_button paginate_button_disabled",sPageFirst:"first",sPagePrevious:"previous",sPageNext:"next",sPageLast:"last",sStripeOdd:"odd",sStripeEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate paging_",sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"sorting_asc",sSortDesc:"sorting_desc",sSortable:"sorting",sSortableAsc:"sorting_asc_disabled",sSortableDesc:"sorting_desc_disabled",sSortableNone:"sorting_disabled",sSortColumn:"sorting_",sSortJUIAsc:"",sSortJUIDesc:"",sSortJUI:"",sSortJUIAscAllowed:"",sSortJUIDescAllowed:"",sSortJUIWrapper:"",sSortIcon:"",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead",sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot",sScrollFootInner:"dataTables_scrollFootInner",sFooterTH:""},n.oJUIClasses={sPagePrevEnabled:"fg-button ui-button ui-state-default ui-corner-left",sPagePrevDisabled:"fg-button ui-button ui-state-default ui-corner-left ui-state-disabled",sPageNextEnabled:"fg-button ui-button ui-state-default ui-corner-right",sPageNextDisabled:"fg-button ui-button ui-state-default ui-corner-right ui-state-disabled",sPageJUINext:"ui-icon ui-icon-circle-arrow-e",sPageJUIPrev:"ui-icon ui-icon-circle-arrow-w",sPageButton:"fg-button ui-button ui-state-default",sPageButtonActive:"fg-button ui-button ui-state-default ui-state-disabled",sPageButtonStaticDisabled:"fg-button ui-button ui-state-default ui-state-disabled",sPageFirst:"first ui-corner-tl ui-corner-bl",sPagePrevious:"previous",sPageNext:"next",sPageLast:"last ui-corner-tr ui-corner-br",sStripeOdd:"odd",sStripeEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate fg-buttonset ui-buttonset fg-buttonset-multi ui-buttonset-multi paging_",sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"ui-state-default",sSortDesc:"ui-state-default",sSortable:"ui-state-default",sSortableAsc:"ui-state-default",sSortableDesc:"ui-state-default",sSortableNone:"ui-state-default",sSortColumn:"sorting_",sSortJUIAsc:"css_right ui-icon ui-icon-triangle-1-n",sSortJUIDesc:"css_right ui-icon ui-icon-triangle-1-s",sSortJUI:"css_right ui-icon ui-icon-carat-2-n-s",sSortJUIAscAllowed:"css_right ui-icon ui-icon-carat-1-n",sSortJUIDescAllowed:"css_right ui-icon ui-icon-carat-1-s",sSortJUIWrapper:"DataTables_sort_wrapper",sSortIcon:"DataTables_sort_icon",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead ui-state-default",sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot ui-state-default",sScrollFootInner:"dataTables_scrollFootInner",sFooterTH:"ui-state-default"},n.oPagination={two_button:{fnInit:function(e,t,n){var r,s,o;e.bJUI?(r=p.createElement("a"),s=p.createElement("a"),o=p.createElement("span"),o.className=e.oClasses.sPageJUINext,s.appendChild(o),o=p.createElement("span"),o.className=e.oClasses.sPageJUIPrev,r.appendChild(o)):(r=p.createElement("div"),s=p.createElement("div")),r.className=e.oClasses.sPagePrevDisabled,s.className=e.oClasses.sPageNextDisabled,r.title=e.oLanguage.oPaginate.sPrevious,s.title=e.oLanguage.oPaginate.sNext,t.appendChild(r),t.appendChild(s),i(r).bind("click.DT",function(){e.oApi._fnPageChange(e,"previous")&&n(e)}),i(s).bind("click.DT",function(){e.oApi._fnPageChange(e,"next")&&n(e)}),i(r).bind("selectstart.DT",function(){return!1}),i(s).bind("selectstart.DT",function(){return!1}),e.sTableId!==""&&typeof e.aanFeatures.p=="undefined"&&(t.setAttribute("id",e.sTableId+"_paginate"),r.setAttribute("id",e.sTableId+"_previous"),s.setAttribute("id",e.sTableId+"_next"))},fnUpdate:function(e){if(e.aanFeatures.p)for(var t=e.aanFeatures.p,n=0,r=t.length;n<r;n++)t[n].childNodes.length!==0&&(t[n].childNodes[0].className=e._iDisplayStart===0?e.oClasses.sPagePrevDisabled:e.oClasses.sPagePrevEnabled,t[n].childNodes[1].className=e.fnDisplayEnd()==e.fnRecordsDisplay()?e.oClasses.sPageNextDisabled:e.oClasses.sPageNextEnabled)}},iFullNumbersShowPages:5,full_numbers:{fnInit:function(e,t,n){var r=p.createElement("span"),s=p.createElement("span"),o=p.createElement("span"),u=p.createElement("span"),a=p.createElement("span");r.innerHTML=e.oLanguage.oPaginate.sFirst,s.innerHTML=e.oLanguage.oPaginate.sPrevious,u.innerHTML=e.oLanguage.oPaginate.sNext,a.innerHTML=e.oLanguage.oPaginate.sLast;var f=e.oClasses;r.className=f.sPageButton+" "+f.sPageFirst,s.className=f.sPageButton+" "+f.sPagePrevious,u.className=f.sPageButton+" "+f.sPageNext,a.className=f.sPageButton+" "+f.sPageLast,t.appendChild(r),t.appendChild(s),t.appendChild(o),t.appendChild(u),t.appendChild(a),i(r).bind("click.DT",function(){e.oApi._fnPageChange(e,"first")&&n(e)}),i(s).bind("click.DT",function(){e.oApi._fnPageChange(e,"previous")&&n(e)}),i(u).bind("click.DT",function(){e.oApi._fnPageChange(e,"next")&&n(e)}),i(a).bind("click.DT",function(){e.oApi._fnPageChange(e,"last")&&n(e)}),i("span",t).bind("mousedown.DT",function(){return!1}).bind("selectstart.DT",function(){return!1}),e.sTableId!==""&&typeof e.aanFeatures.p=="undefined"&&(t.setAttribute("id",e.sTableId+"_paginate"),r.setAttribute("id",e.sTableId+"_first"),s.setAttribute("id",e.sTableId+"_previous"),u.setAttribute("id",e.sTableId+"_next"),a.setAttribute("id",e.sTableId+"_last"))},fnUpdate:function(e,t){if(e.aanFeatures.p){var r=n.oPagination.iFullNumbersShowPages,s=Math.floor(r/2),o=Math.ceil(e.fnRecordsDisplay()/e._iDisplayLength),u=Math.ceil(e._iDisplayStart/e._iDisplayLength)+1,a="",f,l=e.oClasses;o<r?(s=1,f=o):u<=s?(s=1,f=r):u>=o-s?(s=o-r+1,f=o):(s=u-Math.ceil(r/2)+1,f=s+r-1);for(r=s;r<=f;r++)a+=u!=r?'<span class="'+l.sPageButton+'">'+r+"</span>":'<span class="'+l.sPageButtonActive+'">'+r+"</span>";f=e.aanFeatures.p;var c,h=function(n){e._iDisplayStart=(this.innerHTML*1-1)*e._iDisplayLength,t(e),n.preventDefault()},p=function(){return!1};r=0;for(s=f.length;r<s;r++)f[r].childNodes.length!==0&&(c=i("span:eq(2)",f[r]),c.html(a),i("span",c).bind("click.DT",h).bind("mousedown.DT",p).bind("selectstart.DT",p),c=f[r].getElementsByTagName("span"),c=[c[0],c[1],c[c.length-2],c[c.length-1]],i(c).removeClass(l.sPageButton+" "+l.sPageButtonActive+" "+l.sPageButtonStaticDisabled),u==1?(c[0].className+=" "+l.sPageButtonStaticDisabled,c[1].className+=" "+l.sPageButtonStaticDisabled):(c[0].className+=" "+l.sPageButton,c[1].className+=" "+l.sPageButton),o===0||u==o||e._iDisplayLength==-1?(c[2].className+=" "+l.sPageButtonStaticDisabled,c[3].className+=" "+l.sPageButtonStaticDisabled):(c[2].className+=" "+l.sPageButton,c[3].className+=" "+l.sPageButton))}}}},n.oSort={"string-asc":function(e,t){return typeof e!="string"&&(e=""),typeof t!="string"&&(t=""),e=e.toLowerCase(),t=t.toLowerCase(),e<t?-1:e>t?1:0},"string-desc":function(e,t){return typeof e!="string"&&(e=""),typeof t!="string"&&(t=""),e=e.toLowerCase(),t=t.toLowerCase(),e<t?1:e>t?-1:0},"html-asc":function(e,t){return e=e.replace(/<.*?>/g,"").toLowerCase(),t=t.replace(/<.*?>/g,"").toLowerCase(),e<t?-1:e>t?1:0},"html-desc":function(e,t){return e=e.replace(/<.*?>/g,"").toLowerCase(),t=t.replace(/<.*?>/g,"").toLowerCase(),e<t?1:e>t?-1:0},"date-asc":function(e,t){e=Date.parse(e),t=Date.parse(t);if(isNaN(e)||e==="")e=Date.parse("01/01/1970 00:00:00");if(isNaN(t)||t==="")t=Date.parse("01/01/1970 00:00:00");return e-t},"date-desc":function(e,t){e=Date.parse(e),t=Date.parse(t);if(isNaN(e)||e==="")e=Date.parse("01/01/1970 00:00:00");if(isNaN(t)||t==="")t=Date.parse("01/01/1970 00:00:00");return t-e},"numeric-asc":function(e,t){return(e=="-"||e===""?0:e*1)-(t=="-"||t===""?0:t*1)},"numeric-desc":function(e,t){return(t=="-"||t===""?0:t*1)-(e=="-"||e===""?0:e*1)}},n.aTypes=[function(e){if(typeof e=="number")return"numeric";if(typeof e!="string")return null;var t,n=!1;t=e.charAt(0);if("0123456789-".indexOf(t)==-1)return null;for(var r=1;r<e.length;r++){t=e.charAt(r);if("0123456789.".indexOf(t)==-1)return null;if(t=="."){if(n)return null;n=!0}}return"numeric"},function(e){var t=Date.parse(e);return t!==null&&!isNaN(t)||typeof e=="string"&&e.length===0?"date":null},function(e){return typeof e=="string"&&e.indexOf("<")!=-1&&e.indexOf(">")!=-1?"html":null}],n.fnVersionCheck=function(e){var t=function(e,t){for(;e.length<t;)e+="0";return e},r=n.sVersion.split(".");e=e.split(".");for(var i="",s="",o=0,u=e.length;o<u;o++)i+=t(r[o],3),s+=t(e[o],3);return parseInt(i,10)>=parseInt(s,10)},n._oExternConfig={iNextUnique:0},i.fn.dataTable=function(g){function l(){this.fnRecordsTotal=function(){return this.oFeatures.bServerSide?parseInt(this._iRecordsTotal,10):this.aiDisplayMaster.length},this.fnRecordsDisplay=function(){return this.oFeatures.bServerSide?parseInt(this._iRecordsDisplay,10):this.aiDisplay.length},this.fnDisplayEnd=function(){return this.oFeatures.bServerSide?this.oFeatures.bPaginate===!1||this._iDisplayLength==-1?this._iDisplayStart+this.aiDisplay.length:Math.min(this._iDisplayStart+this._iDisplayLength,this._iRecordsDisplay):this._iDisplayEnd},this.sInstance=this.oInstance=null,this.oFeatures={bPaginate:!0,bLengthChange:!0,bFilter:!0,bSort:!0,bInfo:!0,bAutoWidth:!0,bProcessing:!1,bSortClasses:!0,bStateSave:!1,bServerSide:!1,bDeferRender:!1},this.oScroll={sX:"",sXInner:"",sY:"",bCollapse:!1,bInfinite:!1,iLoadGap:100,iBarWidth:0,bAutoCss:!0},this.aanFeatures=[],this.oLanguage={sProcessing:"Processing...",sLengthMenu:"Show _MENU_ entries",sZeroRecords:"No matching records found",sEmptyTable:"No data available in table",sLoadingRecords:"Loading...",sInfo:"Showing _START_ to _END_ of _TOTAL_ entries",sInfoEmpty:"Showing 0 to 0 of 0 entries",sInfoFiltered:"(filtered from _MAX_ total entries)",sInfoPostFix:"",sInfoThousands:",",sSearch:"Search:",sUrl:"",oPaginate:{sFirst:"First",sPrevious:"Previous",sNext:"Next",sLast:"Last"},fnInfoCallback:null},this.aoData=[],this.aiDisplay=[],this.aiDisplayMaster=[],this.aoColumns=[],this.aoHeader=[],this.aoFooter=[],this.iNextId=0,this.asDataSearch=[],this.oPreviousSearch={sSearch:"",bRegex:!1,bSmart:!0},this.aoPreSearchCols=[],this.aaSorting=[[0,"asc",0]],this.aaSortingFixed=null,this.asStripeClasses=[],this.asDestroyStripes=[],this.sDestroyWidth=0,this.fnFooterCallback=this.fnHeaderCallback=this.fnRowCallback=null,this.aoDrawCallback=[],this.fnInitComplete=this.fnPreDrawCallback=null,this.sTableId="",this.nTableWrapper=this.nTBody=this.nTFoot=this.nTHead=this.nTable=null,this.bInitialised=this.bDeferLoading=!1,this.aoOpenRows=[],this.sDom="lfrtip",this.sPaginationType="two_button",this.iCookieDuration=7200,this.sCookiePrefix="SpryMedia_DataTables_",this.fnCookieCallback=null,this.aoStateSave=[],this.aoStateLoad=[],this.sAjaxSource=this.oLoadedState=null,this.sAjaxDataProp="aaData",this.bAjaxDataGet=!0,this.jqXHR=null,this.fnServerData=function(e,t,n,r){r.jqXHR=i.ajax({url:e,data:t,success:function(e){i(r.oInstance).trigger("xhr",r),n(e)},dataType:"json",cache:!1,error:function(e,t){t=="parsererror"&&alert("DataTables warning: JSON data from server could not be parsed. This is caused by a JSON formatting error.")}})},this.aoServerParams=[],this.fnFormatNumber=function(e){if(e<1e3)return e;var t=e+"";e=t.split("");var n="";t=t.length;for(var r=0;r<t;r++)r%3===0&&r!==0&&(n=this.oLanguage.sInfoThousands+n),n=e[t-r-1]+n;return n},this.aLengthMenu=[10,25,50,100],this.bDrawing=this.iDraw=0,this.iDrawError=-1,this._iDisplayLength=10,this._iDisplayStart=0,this._iDisplayEnd=10,this._iRecordsDisplay=this._iRecordsTotal=0,this.bJUI=!1,this.oClasses=n.oStdClasses,this.bSortCellsTop=this.bSorted=this.bFiltered=!1,this.oInit=null,this.aoDestroyCallback=[]}function s(e){return function(){var t=[A(this[n.iApiIndex])].concat(Array.prototype.slice.call(arguments));return n.oApi[e].apply(this,t)}}function t(e){var n,r,i=e.iInitDisplayStart;if(e.bInitialised===!1)setTimeout(function(){t(e)},200);else{Aa(e),X(e),M(e,e.aoHeader),e.nTFoot&&M(e,e.aoFooter),K(e,!0),e.oFeatures.bAutoWidth&&ga(e),n=0;for(r=e.aoColumns.length;n<r;n++)e.aoColumns[n].sWidth!==null&&(e.aoColumns[n].nTh.style.width=q(e.aoColumns[n].sWidth));e.oFeatures.bSort?R(e):e.oFeatures.bFilter?N(e,e.oPreviousSearch):(e.aiDisplay=e.aiDisplayMaster.slice(),E(e),C(e)),e.sAjaxSource!==null&&!e.oFeatures.bServerSide?(r=[],ha(e,r),e.fnServerData.call(e.oInstance,e.sAjaxSource,r,function(t){var r=t;e.sAjaxDataProp!==""&&(r=aa(e.sAjaxDataProp)(t));for(n=0;n<r.length;n++)v(e,r[n]);e.iInitDisplayStart=i,e.oFeatures.bSort?R(e):(e.aiDisplay=e.aiDisplayMaster.slice(),E(e),C(e)),K(e,!1),w(e,t)},e)):e.oFeatures.bServerSide||(K(e,!1),w(e))}}function w(e,t){e._bInitComplete=!0,typeof e.fnInitComplete=="function"&&(typeof t!="undefined"?e.fnInitComplete.call(e.oInstance,e,t):e.fnInitComplete.call(e.oInstance,e))}function y(e,n,r){e.oLanguage=i.extend(!0,e.oLanguage,n),typeof n.sEmptyTable=="undefined"&&typeof n.sZeroRecords!="undefined"&&o(e.oLanguage,n,"sZeroRecords","sEmptyTable"),typeof n.sLoadingRecords=="undefined"&&typeof n.sZeroRecords!="undefined"&&o(e.oLanguage,n,"sZeroRecords","sLoadingRecords"),r&&t(e)}function F(e,t){var n=e.aoColumns.length;t={sType:null,_bAutoType:!0,bVisible:!0,bSearchable:!0,bSortable:!0,asSorting:["asc","desc"],sSortingClass:e.oClasses.sSortable,sSortingClassJUI:e.oClasses.sSortJUI,sTitle:t?t.innerHTML:"",sName:"",sWidth:null,sWidthOrig:null,sClass:null,fnRender:null,bUseRendered:!0,iDataSort:n,mDataProp:n,fnGetData:null,fnSetData:null,sSortDataType:"std",sDefaultContent:null,sContentPadding:"",nTh:t?t:p.createElement("th"),nTf:null},e.aoColumns.push(t),typeof e.aoPreSearchCols[n]=="undefined"||e.aoPreSearchCols[n]===null?e.aoPreSearchCols[n]={sSearch:"",bRegex:!1,bSmart:!0}:(typeof e.aoPreSearchCols[n].bRegex=="undefined"&&(e.aoPreSearchCols[n].bRegex=!0),typeof e.aoPreSearchCols[n].bSmart=="undefined"&&(e.aoPreSearchCols[n].bSmart=!0)),x(e,n,null)}function x(e,t,n){t=e.aoColumns[t],typeof n!="undefined"&&n!==null&&(typeof n.sType!="undefined"&&(t.sType=n.sType,t._bAutoType=!1),o(t,n,"bVisible"),o(t,n,"bSearchable"),o(t,n,"bSortable"),o(t,n,"sTitle"),o(t,n,"sName"),o(t,n,"sWidth"),o(t,n,"sWidth","sWidthOrig"),o(t,n,"sClass"),o(t,n,"fnRender"),o(t,n,"bUseRendered"),o(t,n,"iDataSort"),o(t,n,"mDataProp"),o(t,n,"asSorting"),o(t,n,"sSortDataType"),o(t,n,"sDefaultContent"),o(t,n,"sContentPadding")),t.fnGetData=aa(t.mDataProp),t.fnSetData=Ba(t.mDataProp),e.oFeatures.bSort||(t.bSortable=!1),!t.bSortable||i.inArray("asc",t.asSorting)==-1&&i.inArray("desc",t.asSorting)==-1?(t.sSortingClass=e.oClasses.sSortableNone,t.sSortingClassJUI=""):t.bSortable||i.inArray("asc",t.asSorting)==-1&&i.inArray("desc",t.asSorting)==-1?(t.sSortingClass=e.oClasses.sSortable,t.sSortingClassJUI=e.oClasses.sSortJUI):i.inArray("asc",t.asSorting)!=-1&&i.inArray("desc",t.asSorting)==-1?(t.sSortingClass=e.oClasses.sSortableAsc,t.sSortingClassJUI=e.oClasses.sSortJUIAscAllowed):i.inArray("asc",t.asSorting)==-1&&i.inArray("desc",t.asSorting)!=-1&&(t.sSortingClass=e.oClasses.sSortableDesc,t.sSortingClassJUI=e.oClasses.sSortJUIDescAllowed)}function v(e,t){var n;n=i.isArray(t)?t.slice():i.extend(!0,{},t),t=e.aoData.length;var r={nTr:null,_iId:e.iNextId++,_aData:n,_anHidden:[],_sRowStripe:""};e.aoData.push(r);for(var s,o=0,u=e.aoColumns.length;o<u;o++)n=e.aoColumns[o],typeof n.fnRender=="function"&&n.bUseRendered&&n.mDataProp!==null&&O(e,t,o,n.fnRender({iDataRow:t,iDataColumn:o,aData:r._aData,oSettings:e})),n._bAutoType&&n.sType!="string"&&(s=G(e,t,o,"type"),s!==null&&s!==""&&(s=ia(s),n.sType===null?n.sType=s:n.sType!=s&&n.sType!="html"&&(n.sType="string")));return e.aiDisplayMaster.push(t),e.oFeatures.bDeferRender||z(e,t),t}function z(e,t){var n=e.aoData[t],r;if(n.nTr===null){n.nTr=p.createElement("tr"),typeof n._aData.DT_RowId!="undefined"&&n.nTr.setAttribute("id",n._aData.DT_RowId),typeof n._aData.DT_RowClass!="undefined"&&i(n.nTr).addClass(n._aData.DT_RowClass);for(var s=0,o=e.aoColumns.length;s<o;s++){var u=e.aoColumns[s];r=p.createElement("td"),r.innerHTML=typeof u.fnRender!="function"||!!u.bUseRendered&&u.mDataProp!==null?G(e,t,s,"display"):u.fnRender({iDataRow:t,iDataColumn:s,aData:n._aData,oSettings:e}),u.sClass!==null&&(r.className=u.sClass),u.bVisible?(n.nTr.appendChild(r),n._anHidden[s]=null):n._anHidden[s]=r}}}function $(e){var t,n,r,s,o,u,a,f,l;if(e.bDeferLoading||e.sAjaxSource===null){a=e.nTBody.childNodes,t=0;for(n=a.length;t<n;t++)if(a[t].nodeName.toUpperCase()=="TR"){f=e.aoData.length,e.aoData.push({nTr:a[t],_iId:e.iNextId++,_aData:[],_anHidden:[],_sRowStripe:""}),e.aiDisplayMaster.push(f),u=a[t].childNodes,r=o=0;for(s=u.length;r<s;r++){l=u[r].nodeName.toUpperCase();if(l=="TD"||l=="TH")O(e,f,o,i.trim(u[r].innerHTML)),o++}}}a=ba(e),u=[],t=0;for(n=a.length;t<n;t++){r=0;for(s=a[t].childNodes.length;r<s;r++)o=a[t].childNodes[r],l=o.nodeName.toUpperCase(),(l=="TD"||l=="TH")&&u.push(o)}u.length!=a.length*e.aoColumns.length&&J(e,1,"Unexpected number of TD elements. Expected "+a.length*e.aoColumns.length+" and got "+u.length+". DataTables does not support rowspan / colspan in the table body, and there must be one cell for each row/column combination."),r=0;for(s=e.aoColumns.length;r<s;r++){e.aoColumns[r].sTitle===null&&(e.aoColumns[r].sTitle=e.aoColumns[r].nTh.innerHTML),a=e.aoColumns[r]._bAutoType,l=typeof e.aoColumns[r].fnRender=="function",o=e.aoColumns[r].sClass!==null,f=e.aoColumns[r].bVisible;var c,h;if(a||l||o||!f){t=0;for(n=e.aoData.length;t<n;t++)c=u[t*s+r],a&&e.aoColumns[r].sType!="string"&&(h=G(e,t,r,"type"),h!==""&&(h=ia(h),e.aoColumns[r].sType===null?e.aoColumns[r].sType=h:e.aoColumns[r].sType!=h&&e.aoColumns[r].sType!="html"&&(e.aoColumns[r].sType="string"))),l&&(h=e.aoColumns[r].fnRender({iDataRow:t,iDataColumn:r,aData:e.aoData[t]._aData,oSettings:e}),c.innerHTML=h,e.aoColumns[r].bUseRendered&&O(e,t,r,h)),o&&(c.className+=" "+e.aoColumns[r].sClass),f?e.aoData[t]._anHidden[r]=null:(e.aoData[t]._anHidden[r]=c,c.parentNode.removeChild(c))}}}function X(e){var t,n,r;e.nTHead.getElementsByTagName("tr");if(e.nTHead.getElementsByTagName("th").length!==0){t=0;for(r=e.aoColumns.length;t<r;t++)n=e.aoColumns[t].nTh,e.aoColumns[t].sClass!==null&&i(n).addClass(e.aoColumns[t].sClass),e.aoColumns[t].sTitle!=n.innerHTML&&(n.innerHTML=e.aoColumns[t].sTitle)}else{var s=p.createElement("tr");t=0;for(r=e.aoColumns.length;t<r;t++)n=e.aoColumns[t].nTh,n.innerHTML=e.aoColumns[t].sTitle,e.aoColumns[t].sClass!==null&&i(n).addClass(e.aoColumns[t].sClass),s.appendChild(n);i(e.nTHead).html("")[0].appendChild(s),Y(e.aoHeader,e.nTHead)}if(e.bJUI){t=0;for(r=e.aoColumns.length;t<r;t++){n=e.aoColumns[t].nTh,s=p.createElement("div"),s.className=e.oClasses.sSortJUIWrapper,i(n).contents().appendTo(s);var o=p.createElement("span");o.className=e.oClasses.sSortIcon,s.appendChild(o),n.appendChild(s)}}r=function(){return this.onselectstart=function(){return!1},!1};if(e.oFeatures.bSort)for(t=0;t<e.aoColumns.length;t++)e.aoColumns[t].bSortable!==!1?(ja(e,e.aoColumns[t].nTh,t),i(e.aoColumns[t].nTh).bind("mousedown.DT",r)):i(e.aoColumns[t].nTh).addClass(e.oClasses.sSortableNone);e.oClasses.sFooterTH!==""&&i(e.nTFoot).children("tr").children("th").addClass(e.oClasses.sFooterTH);if(e.nTFoot!==null){n=S(e,null,e.aoFooter),t=0;for(r=e.aoColumns.length;t<r;t++)typeof n[t]!="undefined"&&(e.aoColumns[t].nTf=n[t])}}function M(e,t,n){var r,i,s,o=[],u=[],a=e.aoColumns.length;typeof n=="undefined"&&(n=!1),r=0;for(i=t.length;r<i;r++){o[r]=t[r].slice(),o[r].nTr=t[r].nTr;for(s=a-1;s>=0;s--)!e.aoColumns[s].bVisible&&!n&&o[r].splice(s,1);u.push([])}r=0;for(i=o.length;r<i;r++){if(o[r].nTr){e=0;for(s=o[r].nTr.childNodes.length;e<s;e++)o[r].nTr.removeChild(o[r].nTr.childNodes[0])}s=0;for(t=o[r].length;s<t;s++){a=n=1;if(typeof u[r][s]=="undefined"){o[r].nTr.appendChild(o[r][s].cell);for(u[r][s]=1;typeof o[r+n]!="undefined"&&o[r][s].cell==o[r+n][s].cell;)u[r+n][s]=1,n++;for(;typeof o[r][s+a]!="undefined"&&o[r][s].cell==o[r][s+a].cell;){for(e=0;e<n;e++)u[r+e][s+a]=1;a++}o[r][s].cell.rowSpan=n,o[r][s].cell.colSpan=a}}}}function C(e){var t,n,r=[],s=0,o=!1;t=e.asStripeClasses.length,n=e.aoOpenRows.length;if(e.fnPreDrawCallback===null||e.fnPreDrawCallback.call(e.oInstance,e)!==!1){e.bDrawing=!0,typeof e.iInitDisplayStart!="undefined"&&e.iInitDisplayStart!=-1&&(e._iDisplayStart=e.oFeatures.bServerSide?e.iInitDisplayStart:e.iInitDisplayStart>=e.fnRecordsDisplay()?0:e.iInitDisplayStart,e.iInitDisplayStart=-1,E(e));if(e.bDeferLoading)e.bDeferLoading=!1,e.iDraw++;else if(e.oFeatures.bServerSide){if(!e.bDestroying&&!Ca(e))return}else e.iDraw++;if(e.aiDisplay.length!==0){var u=e._iDisplayStart,a=e._iDisplayEnd;e.oFeatures.bServerSide&&(u=0,a=e.aoData.length);for(u=u;u<a;u++){var f=e.aoData[e.aiDisplay[u]];f.nTr===null&&z(e,e.aiDisplay[u]);var l=f.nTr;if(t!==0){var c=e.asStripeClasses[s%t];f._sRowStripe!=c&&(i(l).removeClass(f._sRowStripe).addClass(c),f._sRowStripe=c)}typeof e.fnRowCallback=="function"&&(l=e.fnRowCallback.call(e.oInstance,l,e.aoData[e.aiDisplay[u]]._aData,s,u),!l&&!o&&(J(e,0,"A node was not returned by fnRowCallback"),o=!0)),r.push(l),s++;if(n!==0)for(f=0;f<n;f++)l==e.aoOpenRows[f].nParent&&r.push(e.aoOpenRows[f].nTr)}}else r[0]=p.createElement("tr"),typeof e.asStripeClasses[0]!="undefined"&&(r[0].className=e.asStripeClasses[0]),o=e.oLanguage.sZeroRecords.replace("_MAX_",e.fnFormatNumber(e.fnRecordsTotal())),e.iDraw==1&&e.sAjaxSource!==null&&!e.oFeatures.bServerSide?o=e.oLanguage.sLoadingRecords:typeof e.oLanguage.sEmptyTable!="undefined"&&e.fnRecordsTotal()===0&&(o=e.oLanguage.sEmptyTable),t=p.createElement("td"),t.setAttribute("valign","top"),t.colSpan=Z(e),t.className=e.oClasses.sRowEmpty,t.innerHTML=o,r[s].appendChild(t);typeof e.fnHeaderCallback=="function"&&e.fnHeaderCallback.call(e.oInstance,i(e.nTHead).children("tr")[0],ca(e),e._iDisplayStart,e.fnDisplayEnd(),e.aiDisplay),typeof e.fnFooterCallback=="function"&&e.fnFooterCallback.call(e.oInstance,i(e.nTFoot).children("tr")[0],ca(e),e._iDisplayStart,e.fnDisplayEnd(),e.aiDisplay),s=p.createDocumentFragment(),t=p.createDocumentFragment();if(e.nTBody){o=e.nTBody.parentNode,t.appendChild(e.nTBody);if(!e.oScroll.bInfinite||!e._bInitComplete||e.bSorted||e.bFiltered){n=e.nTBody.childNodes;for(t=n.length-1;t>=0;t--)n[t].parentNode.removeChild(n[t])}t=0;for(n=r.length;t<n;t++)s.appendChild(r[t]);e.nTBody.appendChild(s),o!==null&&o.appendChild(e.nTBody)}for(t=e.aoDrawCallback.length-1;t>=0;t--)e.aoDrawCallback[t].fn.call(e.oInstance,e);i(e.oInstance).trigger("draw",e),e.bSorted=!1,e.bFiltered=!1,e.bDrawing=!1,e.oFeatures.bServerSide&&(K(e,!1),typeof e._bInitComplete=="undefined"&&w(e))}}function da(e){e.oFeatures.bSort?R(e,e.oPreviousSearch):e.oFeatures.bFilter?N(e,e.oPreviousSearch):(E(e),C(e))}function Ca(e){if(e.bAjaxDataGet){e.iDraw++,K(e,!0);var t=Da(e);return ha(e,t),e.fnServerData.call(e.oInstance,e.sAjaxSource,t,function(t){Ea(e,t)},e),!1}return!0}function Da(e){var t=e.aoColumns.length,n=[],r,i;n.push({name:"sEcho",value:e.iDraw}),n.push({name:"iColumns",value:t}),n.push({name:"sColumns",value:ka(e)}),n.push({name:"iDisplayStart",value:e._iDisplayStart}),n.push({name:"iDisplayLength",value:e.oFeatures.bPaginate!==!1?e._iDisplayLength:-1});for(i=0;i<t;i++)r=e.aoColumns[i].mDataProp,n.push({name:"mDataProp_"+i,value:typeof r=="function"?"function":r});if(e.oFeatures.bFilter!==!1){n.push({name:"sSearch",value:e.oPreviousSearch.sSearch}),n.push({name:"bRegex",value:e.oPreviousSearch.bRegex});for(i=0;i<t;i++)n.push({name:"sSearch_"+i,value:e.aoPreSearchCols[i].sSearch}),n.push({name:"bRegex_"+i,value:e.aoPreSearchCols[i].bRegex}),n.push({name:"bSearchable_"+i,value:e.aoColumns[i].bSearchable})}if(e.oFeatures.bSort!==!1){r=e.aaSortingFixed!==null?e.aaSortingFixed.length:0;var s=e.aaSorting.length;n.push({name:"iSortingCols",value:r+s});for(i=0;i<r;i++)n.push({name:"iSortCol_"+i,value:e.aaSortingFixed[i][0]}),n.push({name:"sSortDir_"+i,value:e.aaSortingFixed[i][1]});for(i=0;i<s;i++)n.push({name:"iSortCol_"+(i+r),value:e.aaSorting[i][0]}),n.push({name:"sSortDir_"+(i+r),value:e.aaSorting[i][1]});for(i=0;i<t;i++)n.push({name:"bSortable_"+i,value:e.aoColumns[i].bSortable})}return n}function ha(e,t){for(var n=0,r=e.aoServerParams.length;n<r;n++)e.aoServerParams[n].fn.call(e.oInstance,t)}function Ea(e,t){if(typeof t.sEcho!="undefined"){if(t.sEcho*1<e.iDraw)return;e.iDraw=t.sEcho*1}(!e.oScroll.bInfinite||e.oScroll.bInfinite&&(e.bSorted||e.bFiltered))&&la(e),e._iRecordsTotal=t.iTotalRecords,e._iRecordsDisplay=t.iTotalDisplayRecords;var n=ka(e);if(n=typeof t.sColumns!="undefined"&&n!==""&&t.sColumns!=n)var r=Fa(e,t.sColumns);t=aa(e.sAjaxDataProp)(t);for(var i=0,s=t.length;i<s;i++)if(n){for(var o=[],u=0,a=e.aoColumns.length;u<a;u++)o.push(t[i][r[u]]);v(e,o)}else v(e,t[i]);e.aiDisplay=e.aiDisplayMaster.slice(),e.bAjaxDataGet=!1,C(e),e.bAjaxDataGet=!0,K(e,!1)}function Aa(e){var t=p.createElement("div");e.nTable.parentNode.insertBefore(t,e.nTable),e.nTableWrapper=p.createElement("div"),e.nTableWrapper.className=e.oClasses.sWrapper,e.sTableId!==""&&e.nTableWrapper.setAttribute("id",e.sTableId+"_wrapper"),e.nTableReinsertBefore=e.nTable.nextSibling;for(var r=e.nTableWrapper,i=e.sDom.split(""),s,o,u,a,f,l,c,h=0;h<i.length;h++){o=0,u=i[h];if(u=="<"){a=p.createElement("div"),f=i[h+1];if(f=="'"||f=='"'){l="";for(c=2;i[h+c]!=f;)l+=i[h+c],c++;l=="H"?l="fg-toolbar ui-toolbar ui-widget-header ui-corner-tl ui-corner-tr ui-helper-clearfix":l=="F"&&(l="fg-toolbar ui-toolbar ui-widget-header ui-corner-bl ui-corner-br ui-helper-clearfix"),l.indexOf(".")!=-1?(f=l.split("."),a.setAttribute("id",f[0].substr(1,f[0].length-1)),a.className=f[1]):l.charAt(0)=="#"?a.setAttribute("id",l.substr(1,l.length-1)):a.className=l,h+=c}r.appendChild(a),r=a}else if(u==">")r=r.parentNode;else if(u=="l"&&e.oFeatures.bPaginate&&e.oFeatures.bLengthChange)s=Ga(e),o=1;else if(u=="f"&&e.oFeatures.bFilter)s=Ha(e),o=1;else if(u=="r"&&e.oFeatures.bProcessing)s=Ia(e),o=1;else if(u=="t")s=Ja(e),o=1;else if(u=="i"&&e.oFeatures.bInfo)s=Ka(e),o=1;else if(u=="p"&&e.oFeatures.bPaginate)s=La(e),o=1;else if(n.aoFeatures.length!==0){a=n.aoFeatures,c=0;for(f=a.length;c<f;c++)if(u==a[c].cFeature){if(s=a[c].fnInit(e))o=1;break}}o==1&&s!==null&&(typeof e.aanFeatures[u]!="object"&&(e.aanFeatures[u]=[]),e.aanFeatures[u].push(s),r.appendChild(s))}t.parentNode.replaceChild(e.nTableWrapper,t)}function Ja(e){if(e.oScroll.sX===""&&e.oScroll.sY==="")return e.nTable;var t=p.createElement("div"),r=p.createElement("div"),s=p.createElement("div"),o=p.createElement("div"),u=p.createElement("div"),a=p.createElement("div"),f=e.nTable.cloneNode(!1),l=e.nTable.cloneNode(!1),c=e.nTable.getElementsByTagName("thead")[0],h=e.nTable.getElementsByTagName("tfoot").length===0?null:e.nTable.getElementsByTagName("tfoot")[0],d=typeof g.bJQueryUI!="undefined"&&g.bJQueryUI?n.oJUIClasses:n.oStdClasses;r.appendChild(s),u.appendChild(a),o.appendChild(e.nTable),t.appendChild(r),t.appendChild(o),s.appendChild(f),f.appendChild(c),h!==null&&(t.appendChild(u),a.appendChild(l),l.appendChild(h)),t.className=d.sScrollWrapper,r.className=d.sScrollHead,s.className=d.sScrollHeadInner,o.className=d.sScrollBody,u.className=d.sScrollFoot,a.className=d.sScrollFootInner,e.oScroll.bAutoCss&&(r.style.overflow="hidden",r.style.position="relative",u.style.overflow="hidden",o.style.overflow="auto"),r.style.border="0",r.style.width="100%",u.style.border="0",s.style.width="150%",f.removeAttribute("id"),f.style.marginLeft="0",e.nTable.style.marginLeft="0",h!==null&&(l.removeAttribute("id"),l.style.marginLeft="0"),s=i(e.nTable).children("caption"),a=0;for(l=s.length;a<l;a++)f.appendChild(s[a]);return e.oScroll.sX!==""&&(r.style.width=q(e.oScroll.sX),o.style.width=q(e.oScroll.sX),h!==null&&(u.style.width=q(e.oScroll.sX)),i(o).scroll(function(){r.scrollLeft=this.scrollLeft,h!==null&&(u.scrollLeft=this.scrollLeft)})),e.oScroll.sY!==""&&(o.style.height=q(e.oScroll.sY)),e.aoDrawCallback.push({fn:Ma,sName:"scrolling"}),e.oScroll.bInfinite&&i(o).scroll(function(){e.bDrawing||i(this).scrollTop()+i(this).height()>i(e.nTable).height()-e.oScroll.iLoadGap&&e.fnDisplayEnd()<e.fnRecordsDisplay()&&(ma(e,"next"),E(e),C(e))}),e.nScrollHead=r,e.nScrollFoot=u,t}function Ma(e){var t=e.nScrollHead.getElementsByTagName("div")[0],n=t.getElementsByTagName("table")[0],r=e.nTable.parentNode,s,o,u,a,f,l,c,h,p=[],d=e.nTFoot!==null?e.nScrollFoot.getElementsByTagName("div")[0]:null,v=e.nTFoot!==null?d.getElementsByTagName("table")[0]:null,m=i.browser.msie&&i.browser.version<=7;u=e.nTable.getElementsByTagName("thead"),u.length>0&&e.nTable.removeChild(u[0]),e.nTFoot!==null&&(f=e.nTable.getElementsByTagName("tfoot"),f.length>0&&e.nTable.removeChild(f[0])),u=e.nTHead.cloneNode(!0),e.nTable.insertBefore(u,e.nTable.childNodes[0]),e.nTFoot!==null&&(f=e.nTFoot.cloneNode(!0),e.nTable.insertBefore(f,e.nTable.childNodes[1])),e.oScroll.sX===""&&(r.style.width="100%",t.parentNode.style.width="100%");var g=S(e,u);s=0;for(o=g.length;s<o;s++)c=Na(e,s),g[s].style.width=e.aoColumns[c].sWidth;e.nTFoot!==null&&P(function(e){e.style.width=""},f.getElementsByTagName("tr")),s=i(e.nTable).outerWidth(),e.oScroll.sX===""?(e.nTable.style.width="100%",m&&(r.scrollHeight>r.offsetHeight||i(r).css("overflow-y")=="scroll")&&(e.nTable.style.width=q(i(e.nTable).outerWidth()-e.oScroll.iBarWidth))):e.oScroll.sXInner!==""?e.nTable.style.width=q(e.oScroll.sXInner):s==i(r).width()&&i(r).height()<i(e.nTable).height()?(e.nTable.style.width=q(s-e.oScroll.iBarWidth),i(e.nTable).outerWidth()>s-e.oScroll.iBarWidth&&(e.nTable.style.width=q(s))):e.nTable.style.width=q(s),s=i(e.nTable).outerWidth(),o=e.nTHead.getElementsByTagName("tr"),u=u.getElementsByTagName("tr"),P(function(e,t){l=e.style,l.paddingTop="0",l.paddingBottom="0",l.borderTopWidth="0",l.borderBottomWidth="0",l.height=0,h=i(e).width(),t.style.width=q(h),p.push(h)},u,o),i(u).height(0),e.nTFoot!==null&&(a=f.getElementsByTagName("tr"),f=e.nTFoot.getElementsByTagName("tr"),P(function(e,t){l=e.style,l.paddingTop="0",l.paddingBottom="0",l.borderTopWidth="0",l.borderBottomWidth="0",l.height=0,h=i(e).width(),t.style.width=q(h),p.push(h)},a,f),i(a).height(0)),P(function(e){e.innerHTML="",e.style.width=q(p.shift())},u),e.nTFoot!==null&&P(function(e){e.innerHTML="",e.style.width=q(p.shift())},a),i(e.nTable).outerWidth()<s?(a=r.scrollHeight>r.offsetHeight||i(r).css("overflow-y")=="scroll"?s+e.oScroll.iBarWidth:s,m&&(r.scrollHeight>r.offsetHeight||i(r).css("overflow-y")=="scroll")&&(e.nTable.style.width=q(a-e.oScroll.iBarWidth)),r.style.width=q(a),t.parentNode.style.width=q(a),e.nTFoot!==null&&(d.parentNode.style.width=q(a)),e.oScroll.sX===""?J(e,1,"The table cannot fit into the current element which will cause column misalignment. The table has been drawn at its minimum possible width."
):e.oScroll.sXInner!==""&&J(e,1,"The table cannot fit into the current element which will cause column misalignment. Increase the sScrollXInner value or remove it to allow automatic calculation")):(r.style.width=q("100%"),t.parentNode.style.width=q("100%"),e.nTFoot!==null&&(d.parentNode.style.width=q("100%"))),e.oScroll.sY===""&&m&&(r.style.height=q(e.nTable.offsetHeight+e.oScroll.iBarWidth)),e.oScroll.sY!==""&&e.oScroll.bCollapse&&(r.style.height=q(e.oScroll.sY),m=e.oScroll.sX!==""&&e.nTable.offsetWidth>r.offsetWidth?e.oScroll.iBarWidth:0,e.nTable.offsetHeight<r.offsetHeight&&(r.style.height=q(i(e.nTable).height()+m))),m=i(e.nTable).outerWidth(),n.style.width=q(m),t.style.width=q(m+e.oScroll.iBarWidth),e.nTFoot!==null&&(d.style.width=q(e.nTable.offsetWidth+e.oScroll.iBarWidth),v.style.width=q(e.nTable.offsetWidth));if(e.bSorted||e.bFiltered)r.scrollTop=0}function ea(e){if(e.oFeatures.bAutoWidth===!1)return!1;ga(e);for(var t=0,n=e.aoColumns.length;t<n;t++)e.aoColumns[t].nTh.style.width=e.aoColumns[t].sWidth}function Ha(e){var t=e.oLanguage.sSearch;t=t.indexOf("_INPUT_")!==-1?t.replace("_INPUT_",'<input type="text" />'):t===""?'<input type="text" />':t+' <input type="text" />';var n=p.createElement("div");return n.className=e.oClasses.sFilter,n.innerHTML="<label>"+t+"</label>",e.sTableId!==""&&typeof e.aanFeatures.f=="undefined"&&n.setAttribute("id",e.sTableId+"_filter"),t=i("input",n),t.val(e.oPreviousSearch.sSearch.replace('"',"&quot;")),t.bind("keyup.DT",function(){for(var t=e.aanFeatures.f,n=0,r=t.length;n<r;n++)t[n]!=i(this).parents("div.dataTables_filter")[0]&&i("input",t[n]).val(this.value);this.value!=e.oPreviousSearch.sSearch&&N(e,{sSearch:this.value,bRegex:e.oPreviousSearch.bRegex,bSmart:e.oPreviousSearch.bSmart})}),t.bind("keypress.DT",function(e){if(e.keyCode==13)return!1}),n}function N(e,t,r){Oa(e,t.sSearch,r,t.bRegex,t.bSmart);for(t=0;t<e.aoPreSearchCols.length;t++)Pa(e,e.aoPreSearchCols[t].sSearch,t,e.aoPreSearchCols[t].bRegex,e.aoPreSearchCols[t].bSmart);n.afnFiltering.length!==0&&Qa(e),e.bFiltered=!0,i(e.oInstance).trigger("filter",e),e._iDisplayStart=0,E(e),C(e),oa(e,0)}function Qa(e){for(var t=n.afnFiltering,r=0,i=t.length;r<i;r++)for(var s=0,o=0,u=e.aiDisplay.length;o<u;o++){var a=e.aiDisplay[o-s];t[r](e,fa(e,a,"filter"),a)||(e.aiDisplay.splice(o-s,1),s++)}}function Pa(e,t,n,r,i){if(t!==""){var s=0;t=pa(t,r,i);for(r=e.aiDisplay.length-1;r>=0;r--)i=qa(G(e,e.aiDisplay[r],n,"filter"),e.aoColumns[n].sType),t.test(i)||(e.aiDisplay.splice(r,1),s++)}}function Oa(e,t,r,i,s){var o=pa(t,i,s);if(typeof r=="undefined"||r===null)r=0;n.afnFiltering.length!==0&&(r=1);if(t.length<=0)e.aiDisplay.splice(0,e.aiDisplay.length),e.aiDisplay=e.aiDisplayMaster.slice();else if(e.aiDisplay.length==e.aiDisplayMaster.length||e.oPreviousSearch.sSearch.length>t.length||r==1||t.indexOf(e.oPreviousSearch.sSearch)!==0){e.aiDisplay.splice(0,e.aiDisplay.length),oa(e,1);for(r=0;r<e.aiDisplayMaster.length;r++)o.test(e.asDataSearch[r])&&e.aiDisplay.push(e.aiDisplayMaster[r])}else{var u=0;for(r=0;r<e.asDataSearch.length;r++)o.test(e.asDataSearch[r])||(e.aiDisplay.splice(r-u,1),u++)}e.oPreviousSearch.sSearch=t,e.oPreviousSearch.bRegex=i,e.oPreviousSearch.bSmart=s}function oa(e,t){if(!e.oFeatures.bServerSide){e.asDataSearch.splice(0,e.asDataSearch.length),t=typeof t!="undefined"&&t==1?e.aiDisplayMaster:e.aiDisplay;for(var n=0,r=t.length;n<r;n++)e.asDataSearch[n]=ra(e,fa(e,t[n],"filter"))}}function ra(e,t){var n="";typeof e.__nTmpFilter=="undefined"&&(e.__nTmpFilter=p.createElement("div"));for(var r=e.__nTmpFilter,i=0,s=e.aoColumns.length;i<s;i++)e.aoColumns[i].bSearchable&&(n+=qa(t[i],e.aoColumns[i].sType)+"  ");return n.indexOf("&")!==-1&&(r.innerHTML=n,n=r.textContent?r.textContent:r.innerText,n=n.replace(/\n/g," ").replace(/\r/g,"")),n}function pa(e,t,n){return n?(e=t?e.split(" "):sa(e).split(" "),e="^(?=.*?"+e.join(")(?=.*?")+").*$",new RegExp(e,"i")):(e=t?e:sa(e),new RegExp(e,"i"))}function qa(e,t){return typeof n.ofnSearch[t]=="function"?n.ofnSearch[t](e):t=="html"?e.replace(/\n/g," ").replace(/<.*?>/g,""):typeof e=="string"?e.replace(/\n/g," "):e===null?"":e}function R(e,t){var r,s,o,u,a=[],f=[],l=n.oSort;s=e.aoData;var c=e.aoColumns;if(!e.oFeatures.bServerSide&&(e.aaSorting.length!==0||e.aaSortingFixed!==null)){a=e.aaSortingFixed!==null?e.aaSortingFixed.concat(e.aaSorting):e.aaSorting.slice();for(r=0;r<a.length;r++){var h=a[r][0];o=ta(e,h),u=e.aoColumns[h].sSortDataType;if(typeof n.afnSortData[u]!="undefined"){var p=n.afnSortData[u](e,h,o);o=0;for(u=s.length;o<u;o++)O(e,o,h,p[o])}}r=0;for(s=e.aiDisplayMaster.length;r<s;r++)f[e.aiDisplayMaster[r]]=r;var d=a.length;e.aiDisplayMaster.sort(function(t,n){var i,s;for(r=0;r<d;r++){i=c[a[r][0]].iDataSort,s=c[i].sType,i=l[(s?s:"string")+"-"+a[r][1]](G(e,t,i,"sort"),G(e,n,i,"sort"));if(i!==0)return i}return l["numeric-asc"](f[t],f[n])})}(typeof t=="undefined"||t)&&!e.oFeatures.bDeferRender&&V(e),e.bSorted=!0,i(e.oInstance).trigger("sort",e),e.oFeatures.bFilter?N(e,e.oPreviousSearch,1):(e.aiDisplay=e.aiDisplayMaster.slice(),e._iDisplayStart=0,E(e),C(e))}function ja(e,t,n,r){i(t).bind("click.DT",function(t){if(e.aoColumns[n].bSortable!==!1){var i=function(){var r,i;if(t.shiftKey){for(var s=!1,o=0;o<e.aaSorting.length;o++)if(e.aaSorting[o][0]==n){s=!0,r=e.aaSorting[o][0],i=e.aaSorting[o][2]+1,typeof e.aoColumns[r].asSorting[i]=="undefined"?e.aaSorting.splice(o,1):(e.aaSorting[o][1]=e.aoColumns[r].asSorting[i],e.aaSorting[o][2]=i);break}s===!1&&e.aaSorting.push([n,e.aoColumns[n].asSorting[0],0])}else e.aaSorting.length==1&&e.aaSorting[0][0]==n?(r=e.aaSorting[0][0],i=e.aaSorting[0][2]+1,typeof e.aoColumns[r].asSorting[i]=="undefined"&&(i=0),e.aaSorting[0][1]=e.aoColumns[r].asSorting[i],e.aaSorting[0][2]=i):(e.aaSorting.splice(0,e.aaSorting.length),e.aaSorting.push([n,e.aoColumns[n].asSorting[0],0]));R(e)};e.oFeatures.bProcessing?(K(e,!0),setTimeout(function(){i(),e.oFeatures.bServerSide||K(e,!1)},0)):i(),typeof r=="function"&&r(e)}})}function V(e){var t,n,r,s,o,u=e.aoColumns.length,a=e.oClasses;for(t=0;t<u;t++)e.aoColumns[t].bSortable&&i(e.aoColumns[t].nTh).removeClass(a.sSortAsc+" "+a.sSortDesc+" "+e.aoColumns[t].sSortingClass);s=e.aaSortingFixed!==null?e.aaSortingFixed.concat(e.aaSorting):e.aaSorting.slice();for(t=0;t<e.aoColumns.length;t++)if(e.aoColumns[t].bSortable){o=e.aoColumns[t].sSortingClass,r=-1;for(n=0;n<s.length;n++)if(s[n][0]==t){o=s[n][1]=="asc"?a.sSortAsc:a.sSortDesc,r=n;break}i(e.aoColumns[t].nTh).addClass(o),e.bJUI&&(n=i("span",e.aoColumns[t].nTh),n.removeClass(a.sSortJUIAsc+" "+a.sSortJUIDesc+" "+a.sSortJUI+" "+a.sSortJUIAscAllowed+" "+a.sSortJUIDescAllowed),n.addClass(r==-1?e.aoColumns[t].sSortingClassJUI:s[r][1]=="asc"?a.sSortJUIAsc:a.sSortJUIDesc))}else i(e.aoColumns[t].nTh).addClass(e.aoColumns[t].sSortingClass);o=a.sSortColumn;if(e.oFeatures.bSort&&e.oFeatures.bSortClasses){r=Q(e);if(e.oFeatures.bDeferRender)i(r).removeClass(o+"1 "+o+"2 "+o+"3");else if(r.length>=u)for(t=0;t<u;t++)if(r[t].className.indexOf(o+"1")!=-1){n=0;for(e=r.length/u;n<e;n++)r[u*n+t].className=i.trim(r[u*n+t].className.replace(o+"1",""))}else if(r[t].className.indexOf(o+"2")!=-1){n=0;for(e=r.length/u;n<e;n++)r[u*n+t].className=i.trim(r[u*n+t].className.replace(o+"2",""))}else if(r[t].className.indexOf(o+"3")!=-1){n=0;for(e=r.length/u;n<e;n++)r[u*n+t].className=i.trim(r[u*n+t].className.replace(" "+o+"3",""))}a=1;var f;for(t=0;t<s.length;t++){f=parseInt(s[t][0],10),n=0;for(e=r.length/u;n<e;n++)r[u*n+f].className+=" "+o+a;a<3&&a++}}}function La(e){if(e.oScroll.bInfinite)return null;var t=p.createElement("div");return t.className=e.oClasses.sPaging+e.sPaginationType,n.oPagination[e.sPaginationType].fnInit(e,t,function(e){E(e),C(e)}),typeof e.aanFeatures.p=="undefined"&&e.aoDrawCallback.push({fn:function(e){n.oPagination[e.sPaginationType].fnUpdate(e,function(e){E(e),C(e)})},sName:"pagination"}),t}function ma(e,t){var n=e._iDisplayStart;return t=="first"?e._iDisplayStart=0:t=="previous"?(e._iDisplayStart=e._iDisplayLength>=0?e._iDisplayStart-e._iDisplayLength:0,e._iDisplayStart<0&&(e._iDisplayStart=0)):t=="next"?e._iDisplayLength>=0?e._iDisplayStart+e._iDisplayLength<e.fnRecordsDisplay()&&(e._iDisplayStart+=e._iDisplayLength):e._iDisplayStart=0:t=="last"?e._iDisplayLength>=0?(t=parseInt((e.fnRecordsDisplay()-1)/e._iDisplayLength,10)+1,e._iDisplayStart=(t-1)*e._iDisplayLength):e._iDisplayStart=0:J(e,0,"Unknown paging action: "+t),i(e.oInstance).trigger("page",e),n!=e._iDisplayStart}function Ka(e){var t=p.createElement("div");return t.className=e.oClasses.sInfo,typeof e.aanFeatures.i=="undefined"&&(e.aoDrawCallback.push({fn:Ra,sName:"information"}),e.sTableId!==""&&t.setAttribute("id",e.sTableId+"_info")),t}function Ra(e){if(!!e.oFeatures.bInfo&&e.aanFeatures.i.length!==0){var t=e._iDisplayStart+1,n=e.fnDisplayEnd(),r=e.fnRecordsTotal(),s=e.fnRecordsDisplay(),o=e.fnFormatNumber(t),u=e.fnFormatNumber(n),a=e.fnFormatNumber(r),f=e.fnFormatNumber(s);e.oScroll.bInfinite&&(o=e.fnFormatNumber(1)),o=e.fnRecordsDisplay()===0&&e.fnRecordsDisplay()==e.fnRecordsTotal()?e.oLanguage.sInfoEmpty+e.oLanguage.sInfoPostFix:e.fnRecordsDisplay()===0?e.oLanguage.sInfoEmpty+" "+e.oLanguage.sInfoFiltered.replace("_MAX_",a)+e.oLanguage.sInfoPostFix:e.fnRecordsDisplay()==e.fnRecordsTotal()?e.oLanguage.sInfo.replace("_START_",o).replace("_END_",u).replace("_TOTAL_",f)+e.oLanguage.sInfoPostFix:e.oLanguage.sInfo.replace("_START_",o).replace("_END_",u).replace("_TOTAL_",f)+" "+e.oLanguage.sInfoFiltered.replace("_MAX_",e.fnFormatNumber(e.fnRecordsTotal()))+e.oLanguage.sInfoPostFix,e.oLanguage.fnInfoCallback!==null&&(o=e.oLanguage.fnInfoCallback(e,t,n,r,s,o)),e=e.aanFeatures.i,t=0;for(n=e.length;t<n;t++)i(e[t]).html(o)}}function Ga(e){if(e.oScroll.bInfinite)return null;var t='<select size="1" '+(e.sTableId===""?"":'name="'+e.sTableId+'_length"')+">",n,r;if(e.aLengthMenu.length==2&&typeof e.aLengthMenu[0]=="object"&&typeof e.aLengthMenu[1]=="object"){n=0;for(r=e.aLengthMenu[0].length;n<r;n++)t+='<option value="'+e.aLengthMenu[0][n]+'">'+e.aLengthMenu[1][n]+"</option>"}else{n=0;for(r=e.aLengthMenu.length;n<r;n++)t+='<option value="'+e.aLengthMenu[n]+'">'+e.aLengthMenu[n]+"</option>"}t+="</select>";var s=p.createElement("div");return e.sTableId!==""&&typeof e.aanFeatures.l=="undefined"&&s.setAttribute("id",e.sTableId+"_length"),s.className=e.oClasses.sLength,s.innerHTML="<label>"+e.oLanguage.sLengthMenu.replace("_MENU_",t)+"</label>",i('select option[value="'+e._iDisplayLength+'"]',s).attr("selected",!0),i("select",s).bind("change.DT",function(){var t=i(this).val(),s=e.aanFeatures.l;n=0;for(r=s.length;n<r;n++)s[n]!=this.parentNode&&i("select",s[n]).val(t);e._iDisplayLength=parseInt(t,10),E(e),e.fnDisplayEnd()==e.fnRecordsDisplay()&&(e._iDisplayStart=e.fnDisplayEnd()-e._iDisplayLength,e._iDisplayStart<0&&(e._iDisplayStart=0)),e._iDisplayLength==-1&&(e._iDisplayStart=0),C(e)}),s}function Ia(e){var t=p.createElement("div");return e.sTableId!==""&&typeof e.aanFeatures.r=="undefined"&&t.setAttribute("id",e.sTableId+"_processing"),t.innerHTML=e.oLanguage.sProcessing,t.className=e.oClasses.sProcessing,e.nTable.parentNode.insertBefore(t,e.nTable),t}function K(e,t){if(e.oFeatures.bProcessing){e=e.aanFeatures.r;for(var n=0,r=e.length;n<r;n++)e[n].style.visibility=t?"visible":"hidden"}}function Na(e,t){for(var n=-1,r=0;r<e.aoColumns.length;r++){e.aoColumns[r].bVisible===!0&&n++;if(n==t)return r}return null}function ta(e,t){for(var n=-1,r=0;r<e.aoColumns.length;r++){e.aoColumns[r].bVisible===!0&&n++;if(r==t)return e.aoColumns[r].bVisible===!0?n:null}return null}function W(e,t){var n,r;n=e._iDisplayStart;for(r=e._iDisplayEnd;n<r;n++)if(e.aoData[e.aiDisplay[n]].nTr==t)return e.aiDisplay[n];n=0;for(r=e.aoData.length;n<r;n++)if(e.aoData[n].nTr==t)return n;return null}function Z(e){for(var t=0,n=0;n<e.aoColumns.length;n++)e.aoColumns[n].bVisible===!0&&t++;return t}function E(e){e._iDisplayEnd=e.oFeatures.bPaginate===!1?e.aiDisplay.length:e._iDisplayStart+e._iDisplayLength>e.aiDisplay.length||e._iDisplayLength==-1?e.aiDisplay.length:e._iDisplayStart+e._iDisplayLength}function Sa(e,t){if(!e||e===null||e==="")return 0;typeof t=="undefined"&&(t=p.getElementsByTagName("body")[0]);var n=p.createElement("div");return n.style.width=q(e),t.appendChild(n),e=n.offsetWidth,t.removeChild(n),e}function ga(e){var t=0,n,r=0,s=e.aoColumns.length,o,u=i("th",e.nTHead);for(o=0;o<s;o++)e.aoColumns[o].bVisible&&(r++,e.aoColumns[o].sWidth!==null&&(n=Sa(e.aoColumns[o].sWidthOrig,e.nTable.parentNode),n!==null&&(e.aoColumns[o].sWidth=q(n)),t++));if(s==u.length&&t===0&&r==s&&e.oScroll.sX===""&&e.oScroll.sY==="")for(o=0;o<e.aoColumns.length;o++)n=i(u[o]).width(),n!==null&&(e.aoColumns[o].sWidth=q(n));else{t=e.nTable.cloneNode(!1),o=e.nTHead.cloneNode(!0),r=p.createElement("tbody"),n=p.createElement("tr"),t.removeAttribute("id"),t.appendChild(o),e.nTFoot!==null&&(t.appendChild(e.nTFoot.cloneNode(!0)),P(function(e){e.style.width=""},t.getElementsByTagName("tr"))),t.appendChild(r),r.appendChild(n),r=i("thead th",t),r.length===0&&(r=i("tbody tr:eq(0)>td",t)),u=S(e,o);for(o=r=0;o<s;o++){var a=e.aoColumns[o];a.bVisible&&a.sWidthOrig!==null&&a.sWidthOrig!==""?u[o-r].style.width=q(a.sWidthOrig):a.bVisible?u[o-r].style.width="":r++}for(o=0;o<s;o++)e.aoColumns[o].bVisible&&(r=Ta(e,o),r!==null&&(r=r.cloneNode(!0),e.aoColumns[o].sContentPadding!==""&&(r.innerHTML+=e.aoColumns[o].sContentPadding),n.appendChild(r)));s=e.nTable.parentNode,s.appendChild(t),e.oScroll.sX!==""&&e.oScroll.sXInner!==""?t.style.width=q(e.oScroll.sXInner):e.oScroll.sX!==""?(t.style.width="",i(t).width()<s.offsetWidth&&(t.style.width=q(s.offsetWidth))):e.oScroll.sY!==""&&(t.style.width=q(s.offsetWidth)),t.style.visibility="hidden",Ua(e,t),s=i("tbody tr:eq(0)",t).children(),s.length===0&&(s=S(e,i("thead",t)[0]));if(e.oScroll.sX!==""){for(o=r=n=0;o<e.aoColumns.length;o++)e.aoColumns[o].bVisible&&(n+=e.aoColumns[o].sWidthOrig===null?i(s[r]).outerWidth():parseInt(e.aoColumns[o].sWidth.replace("px",""),10)+(i(s[r]).outerWidth()-i(s[r]).width()),r++);t.style.width=q(n),e.nTable.style.width=q(n)}for(o=r=0;o<e.aoColumns.length;o++)e.aoColumns[o].bVisible&&(n=i(s[r]).width(),n!==null&&n>0&&(e.aoColumns[o].sWidth=q(n)),r++);e.nTable.style.width=q(i(t).outerWidth()),t.parentNode.removeChild(t)}}function Ua(e,t){e.oScroll.sX===""&&e.oScroll.sY!==""?(i(t).width(),t.style.width=q(i(t).outerWidth()-e.oScroll.iBarWidth)):e.oScroll.sX!==""&&(t.style.width=q(i(t).outerWidth()))}function Ta(e,t){var n=Va(e,t);if(n<0)return null;if(e.aoData[n].nTr===null){var r=p.createElement("td");return r.innerHTML=G(e,n,t,""),r}return Q(e,n)[t]}function Va(e,t){for(var n=-1,r=-1,i=0;i<e.aoData.length;i++){var s=G(e,i,t,"display")+"";s=s.replace(/<.*?>/g,""),s.length>n&&(n=s.length,r=i)}return r}function q(e){if(e===null)return"0px";if(typeof e=="number")return e<0?"0px":e+"px";var t=e.charCodeAt(e.length-1);return t<48||t>57?e:e+"px"}function Za(e,t){if(e.length!=t.length)return 1;for(var n=0;n<e.length;n++)if(e[n]!=t[n])return 2;return 0}function ia(e){for(var t=n.aTypes,r=t.length,i=0;i<r;i++){var s=t[i](e);if(s!==null)return s}return"string"}function A(e){for(var t=0;t<D.length;t++)if(D[t].nTable==e)return D[t];return null}function ca(e){for(var t=[],n=e.aoData.length,r=0;r<n;r++)t.push(e.aoData[r]._aData);return t}function ba(e){for(var t=[],n=0,r=e.aoData.length;n<r;n++)e.aoData[n].nTr!==null&&t.push(e.aoData[n].nTr);return t}function Q(e,t){var n=[],r,i,s,o,u;i=0;var a=e.aoData.length;typeof t!="undefined"&&(i=t,a=t+1);for(i=i;i<a;i++){u=e.aoData[i];if(u.nTr!==null){t=[],s=0;for(o=u.nTr.childNodes.length;s<o;s++)r=u.nTr.childNodes[s].nodeName.toLowerCase(),(r=="td"||r=="th")&&t.push(u.nTr.childNodes[s]);s=r=0;for(o=e.aoColumns.length;s<o;s++)e.aoColumns[s].bVisible?n.push(t[s-r]):(n.push(u._anHidden[s]),r++)}}return n}function sa(e){return e.replace(new RegExp("(\\/|\\.|\\*|\\+|\\?|\\||\\(|\\)|\\[|\\]|\\{|\\}|\\\\|\\$|\\^)","g"),"\\$1")}function ua(e,t){for(var n=-1,r=0,i=e.length;r<i;r++)e[r]==t?n=r:e[r]>t&&e[r]--;n!=-1&&e.splice(n,1)}function Fa(e,t){t=t.split(",");for(var n=[],r=0,i=e.aoColumns.length;r<i;r++)for(var s=0;s<i;s++)if(e.aoColumns[r].sName==t[s]){n.push(s);break}return n}function ka(e){for(var t="",n=0,r=e.aoColumns.length;n<r;n++)t+=e.aoColumns[n].sName+",";return t.length==r?"":t.slice(0,-1)}function J(e,t,r){e=e.sTableId===""?"DataTables warning: "+r:"DataTables warning (table id = '"+e.sTableId+"'): "+r;if(t===0){if(n.sErrMode!="alert")throw e;alert(e)}else typeof console!="undefined"&&typeof console.log!="undefined"&&console.log(e)}function la(e){e.aoData.splice(0,e.aoData.length),e.aiDisplayMaster.splice(0,e.aiDisplayMaster.length),e.aiDisplay.splice(0,e.aiDisplay.length),E(e)}function va(e){if(!!e.oFeatures.bStateSave&&typeof e.bDestroying=="undefined"){var t,n,r,i="{";i+='"iCreate":'+(new Date).getTime()+",",i+='"iStart":'+(e.oScroll.bInfinite?0:e._iDisplayStart)+",",i+='"iEnd":'+(e.oScroll.bInfinite?e._iDisplayLength:e._iDisplayEnd)+",",i+='"iLength":'+e._iDisplayLength+",",i+='"sFilter":"'+encodeURIComponent(e.oPreviousSearch.sSearch)+'",',i+='"sFilterEsc":'+!e.oPreviousSearch.bRegex+",",i+='"aaSorting":[ ';for(t=0;t<e.aaSorting.length;t++)i+="["+e.aaSorting[t][0]+',"'+e.aaSorting[t][1]+'"],';i=i.substring(0,i.length-1),i+="],",i+='"aaSearchCols":[ ';for(t=0;t<e.aoPreSearchCols.length;t++)i+='["'+encodeURIComponent(e.aoPreSearchCols[t].sSearch)+'",'+!e.aoPreSearchCols[t].bRegex+"],";i=i.substring(0,i.length-1),i+="],",i+='"abVisCols":[ ';for(t=0;t<e.aoColumns.length;t++)i+=e.aoColumns[t].bVisible+",";i=i.substring(0,i.length-1),i+="]",t=0;for(n=e.aoStateSave.length;t<n;t++)r=e.aoStateSave[t].fn(e,i),r!==""&&(i=r);i+="}",Wa(e.sCookiePrefix+e.sInstance,i,e.iCookieDuration,e.sCookiePrefix,e.fnCookieCallback)}}function Xa(a,b){if(a.oFeatures.bStateSave){var c,d,f;d=wa(a.sCookiePrefix+a.sInstance);if(d!==null&&d!==""){try{c=typeof i.parseJSON=="function"?i.parseJSON(d.replace(/'/g,'"')):eval("("+d+")")}catch(e){return}d=0;for(f=a.aoStateLoad.length;d<f;d++)if(!a.aoStateLoad[d].fn(a,c))return;a.oLoadedState=i.extend(!0,{},c),a._iDisplayStart=c.iStart,a.iInitDisplayStart=c.iStart,a._iDisplayEnd=c.iEnd,a._iDisplayLength=c.iLength,a.oPreviousSearch.sSearch=decodeURIComponent(c.sFilter),a.aaSorting=c.aaSorting.slice(),a.saved_aaSorting=c.aaSorting.slice(),typeof c.sFilterEsc!="undefined"&&(a.oPreviousSearch.bRegex=!c.sFilterEsc);if(typeof c.aaSearchCols!="undefined")for(d=0;d<c.aaSearchCols.length;d++)a.aoPreSearchCols[d]={sSearch:decodeURIComponent(c.aaSearchCols[d][0]),bRegex:!c.aaSearchCols[d][1]};if(typeof c.abVisCols!="undefined"){b.saved_aoColumns=[];for(d=0;d<c.abVisCols.length;d++)b.saved_aoColumns[d]={},b.saved_aoColumns[d].bVisible=c.abVisCols[d]}}}}function Wa(a,b,c,d,f){var e=new Date;e.setTime(e.getTime()+c*1e3),c=za.location.pathname.split("/"),a=a+"_"+c.pop().replace(/[\/:]/g,"").toLowerCase();var h;f!==null?(h=typeof i.parseJSON=="function"?i.parseJSON(b):eval("("+b+")"),b=f(a,h,e.toGMTString(),c.join("/")+"/")):b=a+"="+encodeURIComponent(b)+"; expires="+e.toGMTString()+"; path="+c.join("/")+"/",f="",e=9999999999999;if((wa(a)!==null?p.cookie.length:b.length+p.cookie.length)+10>4096){a=p.cookie.split(";");for(var j=0,k=a.length;j<k;j++)if(a[j].indexOf(d)!=-1){var m=a[j].split("=");try{h=eval("("+decodeURIComponent(m[1])+")")}catch(u){continue}typeof h.iCreate!="undefined"&&h.iCreate<e&&(f=m[0],e=h.iCreate)}f!==""&&(p.cookie=f+"=; expires=Thu, 01-Jan-1970 00:00:01 GMT; path="+c.join("/")+"/")}p.cookie=b}function wa(e){var t=za.location.pathname.split("/");e=e+"_"+t[t.length-1].replace(/[\/:]/g,"").toLowerCase()+"=",t=p.cookie.split(";");for(var n=0;n<t.length;n++){for(var r=t[n];r.charAt(0)==" ";)r=r.substring(1,r.length);if(r.indexOf(e)===0)return decodeURIComponent(r.substring(e.length,r.length))}return null}function Y(e,t){t=i(t).children("tr");var n,r,s,o,u,a,f,l,c=function(e,t,n){for(;typeof e[t][n]!="undefined";)n++;return n};e.splice(0,e.length),r=0;for(a=t.length;r<a;r++)e.push([]);r=0;for(a=t.length;r<a;r++){s=0;for(f=t[r].childNodes.length;s<f;s++){n=t[r].childNodes[s];if(n.nodeName.toUpperCase()=="TD"||n.nodeName.toUpperCase()=="TH"){var h=n.getAttribute("colspan")*1,p=n.getAttribute("rowspan")*1;h=!h||h===0||h===1?1:h,p=!p||p===0||p===1?1:p,l=c(e,r,0);for(u=0;u<h;u++)for(o=0;o<p;o++)e[r+o][l+u]={cell:n,unique:h==1?!0:!1},e[r+o].nTr=t[r]}}}}function S(e,t,n){var r=[];typeof n=="undefined"&&(n=e.aoHeader,typeof t!="undefined"&&(n=[],Y(n,t))),t=0;for(var i=n.length;t<i;t++)for(var s=0,o=n[t].length;s<o;s++)n[t][s].unique&&(typeof r[s]=="undefined"||!e.bSortCellsTop)&&(r[s]=n[t][s].cell);return r}function Ya(){var e=p.createElement("p"),t=e.style;t.width="100%",t.height="200px",t.padding="0px";var n=p.createElement("div");return t=n.style,t.position="absolute",t.top="0px",t.left="0px",t.visibility="hidden",t.width="200px",t.height="150px",t.padding="0px",t.overflow="hidden",n.appendChild(e),p.body.appendChild(n),t=e.offsetWidth,n.style.overflow="scroll",e=e.offsetWidth,t==e&&(e=n.clientWidth),p.body.removeChild(n),t-e}function P(e,t,n){for(var r=0,i=t.length;r<i;r++)for(var s=0,o=t[r].childNodes.length;s<o;s++)t[r].childNodes[s].nodeType==1&&(typeof n!="undefined"?e(t[r].childNodes[s],n[r].childNodes[s]):e(t[r].childNodes[s]))}function o(e,t,n,r){typeof r=="undefined"&&(r=n),typeof t[n]!="undefined"&&(e[r]=t[n])}function fa(e,t,n){for(var r=[],i=0,s=e.aoColumns.length;i<s;i++)r.push(G(e,t,i,n));return r}function G(e,t,n,r){var i=e.aoColumns[n];if((n=i.fnGetData(e.aoData[t]._aData))===undefined)return e.iDrawError!=e.iDraw&&i.sDefaultContent===null&&(J(e,0,"Requested unknown parameter '"+i.mDataProp+"' from the data source for row "+t),e.iDrawError=e.iDraw),i.sDefaultContent;if(n===null&&i.sDefaultContent!==null)n=i.sDefaultContent;else if(typeof n=="function")return n();return r=="display"&&n===null?"":n}function O(e,t,n,r){e.aoColumns[n].fnSetData(e.aoData[t]._aData,r)}function aa(e){if(e===null)return function(){return null};if(typeof e=="function")return function(t){return e(t)};if(typeof e=="string"&&e.indexOf(".")!=-1){var t=e.split(".");return t.length==2?function(e){return e[t[0]][t[1]]}:t.length==3?function(e){return e[t[0]][t[1]][t[2]]}:function(e){for(var n=0,r=t.length;n<r;n++)e=e[t[n]];return e}}return function(t){return t[e]}}function Ba(e){if(e===null)return function(){};if(typeof e=="function")return function(t,n){return e(t,n)};if(typeof e=="string"&&e.indexOf(".")!=-1){var t=e.split(".");return t.length==2?function(e,n){e[t[0]][t[1]]=n}:t.length==3?function(e,n){e[t[0]][t[1]][t[2]]=n}:function(e,n){for(var r=0,i=t.length-1;r<i;r++)e=e[t[r]];e[t[t.length-1]]=n}}return function(t,n){t[e]=n}}this.oApi={},this.fnDraw=function(e){var t=A(this[n.iApiIndex]);typeof e!="undefined"&&e===!1?(E(t),C(t)):da(t)},this.fnFilter=function(e,t,r,s,o){var u=A(this[n.iApiIndex]);if(u.oFeatures.bFilter){typeof r=="undefined"&&(r=!1),typeof s=="undefined"&&(s=!0),typeof o=="undefined"&&(o=!0);if(typeof t=="undefined"||t===null){N(u,{sSearch:e,bRegex:r,bSmart:s},1);if(o&&typeof u.aanFeatures.f!="undefined"){t=u.aanFeatures.f,r=0;for(s=t.length;r<s;r++)i("input",t[r]).val(e)}}else u.aoPreSearchCols[t].sSearch=e,u.aoPreSearchCols[t].bRegex=r,u.aoPreSearchCols[t].bSmart=s,N(u,u.oPreviousSearch,1)}},this.fnSettings=function(){return A(this[n.iApiIndex])},this.fnVersionCheck=n.fnVersionCheck,this.fnSort=function(e){var t=A(this[n.iApiIndex]);t.aaSorting=e,R(t)},this.fnSortListener=function(e,t,r){ja(A(this[n.iApiIndex]),e,t,r)},this.fnAddData=function(e,t){if(e.length===0)return[];var r=[],i,s=A(this[n.iApiIndex]);if(typeof e[0]=="object")for(var o=0;o<e.length;o++){i=v(s,e[o]);if(i==-1)return r;r.push(i)}else{i=v(s,e);if(i==-1)return r;r.push(i)}return s.aiDisplay=s.aiDisplayMaster.slice(),(typeof t=="undefined"||t)&&da(s),r},this.fnDeleteRow=function(e,t,r){var s=A(this[n.iApiIndex]);e=typeof e=="object"?W(s,e):e;var o=s.aoData.splice(e,1),u=i.inArray(e,s.aiDisplay);s.asDataSearch.splice(u,1),ua(s.aiDisplayMaster,e),ua(s.aiDisplay,e),typeof t=="function"&&t.call(this,s,o),s._iDisplayStart>=s.aiDisplay.length&&(s._iDisplayStart-=s._iDisplayLength,s._iDisplayStart<0&&(s._iDisplayStart=0));if(typeof r=="undefined"||r)E(s),C(s);return o},this.fnClearTable=function(e){var t=A(this[n.iApiIndex]);la(t),(typeof e=="undefined"||e)&&C(t)},this.fnOpen=function(e,t,r){var s=A(this[n.iApiIndex]);this.fnClose(e);var o=p.createElement("tr"),u=p.createElement("td");return o.appendChild(u),u.className=r,u.colSpan=Z(s),typeof t.jquery!="undefined"||typeof t=="object"?u.appendChild(t):u.innerHTML=t,t=i("tr",s.nTBody),i.inArray(e,t)!=-1&&i(o).insertAfter(e),s.aoOpenRows.push({nTr:o,nParent:e}),o},this.fnClose=function(e){for(var t=A(this[n.iApiIndex]),r=0;r<t.aoOpenRows.length;r++)if(t.aoOpenRows[r].nParent==e)return(e=t.aoOpenRows[r].nTr.parentNode)&&e.removeChild(t.aoOpenRows[r].nTr),t.aoOpenRows.splice(r,1),0;return 1},this.fnGetData=function(e,t){var r=A(this[n.iApiIndex]);return typeof e!="undefined"?(e=typeof e=="object"?W(r,e):e,typeof t!="undefined"?G(r,e,t,""):typeof r.aoData[e]!="undefined"?r.aoData[e]._aData:null):ca(r)},this.fnGetNodes=function(e){var t=A(this[n.iApiIndex]);return typeof e!="undefined"?typeof t.aoData[e]!="undefined"?t.aoData[e].nTr:null:ba(t)},this.fnGetPosition=function(e){var t=A(this[n.iApiIndex]),r=e.nodeName.toUpperCase();if(r=="TR")return W(t,e);if(r=="TD"||r=="TH"){r=W(t,e.parentNode);for(var i=Q(t,r),s=0;s<t.aoColumns.length;s++)if(i[s]==e)return[r,ta(t,s),s]}return null},this.fnUpdate=function(e,t,r,s,o){var u=A(this[n.iApiIndex]);t=typeof t=="object"?W(u,t):t;if(i.isArray(e)&&typeof e=="object"){u.aoData[t]._aData=e.slice();for(r=0;r<u.aoColumns.length;r++)this.fnUpdate(G(u,t,r),t,r,!1,!1)}else if(e!==null&&typeof e=="object"){u.aoData[t]._aData=i.extend(!0,{},e);for(r=0;r<u.aoColumns.length;r++)this.fnUpdate(G(u,t,r),t,r,!1,!1)}else e=e,O(u,t,r,e),u.aoColumns[r].fnRender!==null&&(e=u.aoColumns[r].fnRender({iDataRow:t,iDataColumn:r,aData:u.aoData[t]._aData,oSettings:u}),u.aoColumns[r].bUseRendered&&O(u,t,r,e)),u.aoData[t].nTr!==null&&(Q(u,t)[r].innerHTML=e);return r=i.inArray(t,u.aiDisplay),u.asDataSearch[r]=ra(u,fa(u,t,"filter")),(typeof o=="undefined"||o)&&ea(u),(typeof s=="undefined"||s)&&da(u),0},this.fnSetColumnVis=function(e,t,r){var i=A(this[n.iApiIndex]),s,o;o=i.aoColumns.length;var u,a;if(i.aoColumns[e].bVisible!=t){if(t){for(s=a=0;s<e;s++)i.aoColumns[s].bVisible&&a++;a=a>=Z(i);if(!a)for(s=e;s<o;s++)if(i.aoColumns[s].bVisible){u=s;break}s=0;for(o=i.aoData.length;s<o;s++)i.aoData[s].nTr!==null&&(a?i.aoData[s].nTr.appendChild(i.aoData[s]._anHidden[e]):i.aoData[s].nTr.insertBefore(i.aoData[s]._anHidden[e],Q(i,s)[u]))}else{s=0;for(o=i.aoData.length;s<o;s++)i.aoData[s].nTr!==null&&(u=Q(i,s)[e],i.aoData[s]._anHidden[e]=u,u.parentNode.removeChild(u))}i.aoColumns[e].bVisible=t,M(i,i.aoHeader),i.nTFoot&&M(i,i.aoFooter),s=0;for(o=i.aoOpenRows.length;s<o;s++)i.aoOpenRows[s].nTr.colSpan=Z(i);if(typeof r=="undefined"||r)ea(i),C(i);va(i)}},this.fnPageChange=function(e,t){var r=A(this[n.iApiIndex]);ma(r,e),E(r),(typeof t=="undefined"||t)&&C(r)},this.fnDestroy=function(){var e=A(this[n.iApiIndex]),t=e.nTableWrapper.parentNode,r=e.nTBody,s,o;e.bDestroying=!0,s=0;for(o=e.aoDestroyCallback.length;s<o;s++)e.aoDestroyCallback[s].fn();s=0;for(o=e.aoColumns.length;s<o;s++)e.aoColumns[s].bVisible===!1&&this.fnSetColumnVis(s,!0);i(e.nTableWrapper).find("*").andSelf().unbind(".DT"),i("tbody>tr>td."+e.oClasses.sRowEmpty,e.nTable).parent().remove(),e.nTable!=e.nTHead.parentNode&&(i(e.nTable).children("thead").remove(),e.nTable.appendChild(e.nTHead)),e.nTFoot&&e.nTable!=e.nTFoot.parentNode&&(i(e.nTable).children("tfoot").remove(),e.nTable.appendChild(e.nTFoot)),e.nTable.parentNode.removeChild(e.nTable),i(e.nTableWrapper).remove(),e.aaSorting=[],e.aaSortingFixed=[],V(e),i(ba(e)).removeClass(e.asStripeClasses.join(" ")),e.bJUI?(i("th",e.nTHead).removeClass([n.oStdClasses.sSortable,n.oJUIClasses.sSortableAsc,n.oJUIClasses.sSortableDesc,n.oJUIClasses.sSortableNone].join(" ")),i("th span."+n.oJUIClasses.sSortIcon,e.nTHead).remove(),i("th",e.nTHead).each(function(){var e=i("div."+n.oJUIClasses.sSortJUIWrapper,this),t=e.contents();i(this).append(t),e.remove()})):i("th",e.nTHead).removeClass([n.oStdClasses.sSortable,n.oStdClasses.sSortableAsc,n.oStdClasses.sSortableDesc,n.oStdClasses.sSortableNone].join(" ")),e.nTableReinsertBefore?t.insertBefore(e.nTable,e.nTableReinsertBefore):t.appendChild(e.nTable),s=0;for(o=e.aoData.length;s<o;s++)e.aoData[s].nTr!==null&&r.appendChild(e.aoData[s].nTr);e.oFeatures.bAutoWidth===!0&&(e.nTable.style.width=q(e.sDestroyWidth)),i(r).children("tr:even").addClass(e.asDestroyStripes[0]),i(r).children("tr:odd").addClass(e.asDestroyStripes[1]),s=0;for(o=D.length;s<o;s++)D[s]==e&&D.splice(s,1);e=null},this.fnAdjustColumnSizing=function(e){var t=A(this[n.iApiIndex]);ea(t),typeof e=="undefined"||e?this.fnDraw(!1):(t.oScroll.sX!==""||t.oScroll.sY!=="")&&this.oApi._fnScrollDraw(t)};for(var xa in n.oApi)xa&&(this[xa]=s(xa));this.oApi._fnExternApiFunc=s,this.oApi._fnInitialise=t,this.oApi._fnInitComplete=w,this.oApi._fnLanguageProcess=y,this.oApi._fnAddColumn=F,this.oApi._fnColumnOptions=x,this.oApi._fnAddData=v,this.oApi._fnCreateTr=z,this.oApi._fnGatherData=$,this.oApi._fnBuildHead=X,this.oApi._fnDrawHead=M,this.oApi._fnDraw=C,this.oApi._fnReDraw=da,this.oApi._fnAjaxUpdate=Ca,this.oApi._fnAjaxParameters=Da,this.oApi._fnAjaxUpdateDraw=Ea,this.oApi._fnServerParams=ha,this.oApi._fnAddOptionsHtml=Aa,this.oApi._fnFeatureHtmlTable=Ja,this.oApi._fnScrollDraw=Ma,this.oApi._fnAdjustColumnSizing=ea,this.oApi._fnFeatureHtmlFilter=Ha,this.oApi._fnFilterComplete=N,this.oApi._fnFilterCustom=Qa,this.oApi._fnFilterColumn=Pa,this.oApi._fnFilter=Oa,this.oApi._fnBuildSearchArray=oa,this.oApi._fnBuildSearchRow=ra,this.oApi._fnFilterCreateSearch=pa,this.oApi._fnDataToSearch=qa,this.oApi._fnSort=R,this.oApi._fnSortAttachListener=ja,this.oApi._fnSortingClasses=V,this.oApi._fnFeatureHtmlPaginate=La,this.oApi._fnPageChange=ma,this.oApi._fnFeatureHtmlInfo=Ka,this.oApi._fnUpdateInfo=Ra,this.oApi._fnFeatureHtmlLength=Ga,this.oApi._fnFeatureHtmlProcessing=Ia,this.oApi._fnProcessingDisplay=K,this.oApi._fnVisibleToColumnIndex=Na,this.oApi._fnColumnIndexToVisible=ta,this.oApi._fnNodeToDataIndex=W,this.oApi._fnVisbleColumns=Z,this.oApi._fnCalculateEnd=E,this.oApi._fnConvertToWidth=Sa,this.oApi._fnCalculateColumnWidths=ga,this.oApi._fnScrollingWidthAdjust=Ua,this.oApi._fnGetWidestNode=Ta,this.oApi._fnGetMaxLenString=Va,this.oApi._fnStringToCss=q,this.oApi._fnArrayCmp=Za,this.oApi._fnDetectType=ia,this.oApi._fnSettingsFromNode=A,this.oApi._fnGetDataMaster=ca,this.oApi._fnGetTrNodes=ba,this.oApi._fnGetTdNodes=Q,this.oApi._fnEscapeRegex=sa,this.oApi._fnDeleteIndex=ua,this.oApi._fnReOrderIndex=Fa,this.oApi._fnColumnOrdering=ka,this.oApi._fnLog=J,this.oApi._fnClearTable=la,this.oApi._fnSaveState=va,this.oApi._fnLoadState=Xa,this.oApi._fnCreateCookie=Wa,this.oApi._fnReadCookie=wa,this.oApi._fnDetectHeader=Y,this.oApi._fnGetUniqueThs=S,this.oApi._fnScrollBarWidth=Ya,this.oApi._fnApplyToChildren=P,this.oApi._fnMap=o,this.oApi._fnGetRowData=fa,this.oApi._fnGetCellData=G,this.oApi._fnSetCellData=O,this.oApi._fnGetObjectDataFn=aa,this.oApi._fnSetObjectDataFn=Ba;var ya=this;return this.each(function(){var e=0,r,s,u,a;e=0;for(r=D.length;e<r;e++){if(D[e].nTable==this){if(typeof g=="undefined"||typeof g.bRetrieve!="undefined"&&g.bRetrieve===!0)return D[e].oInstance;if(typeof g.bDestroy!="undefined"&&g.bDestroy===!0){D[e].oInstance.fnDestroy();break}J(D[e],0,"Cannot reinitialise DataTable.\n\nTo retrieve the DataTables object for this table, please pass either no arguments to the dataTable() function, or set bRetrieve to true. Alternatively, to destory the old table and create a new one, set bDestroy to true (note that a lot of changes to the configuration can be made through the API which is usually much faster).");return}if(D[e].sTableId!==""&&D[e].sTableId==this.getAttribute("id")){D.splice(e,1);break}}var f=new l;D.push(f);var c=!1,h=!1;e=this.getAttribute("id"),e!==null?(f.sTableId=e,f.sInstance=e):f.sInstance=n._oExternConfig.iNextUnique++;if(this.nodeName.toLowerCase()!="table")J(f,0,"Attempted to initialise DataTables on a node which is not a table: "+this.nodeName);else{f.nTable=this,f.oInstance=ya.length==1?ya:i(this).dataTable(),f.oApi=ya.oApi,f.sDestroyWidth=i(this).width();if(typeof g!="undefined"&&g!==null){f.oInit=g,o(f.oFeatures,g,"bPaginate"),o(f.oFeatures,g,"bLengthChange"),o(f.oFeatures,g,"bFilter"),o(f.oFeatures,g,"bSort"),o(f.oFeatures,g,"bInfo"),o(f.oFeatures,g,"bProcessing"),o(f.oFeatures,g,"bAutoWidth"),o(f.oFeatures,g,"bSortClasses"),o(f.oFeatures,g,"bServerSide"),o(f.oFeatures,g,"bDeferRender"),o(f.oScroll,g,"sScrollX","sX"),o(f.oScroll,g,"sScrollXInner"
,"sXInner"),o(f.oScroll,g,"sScrollY","sY"),o(f.oScroll,g,"bScrollCollapse","bCollapse"),o(f.oScroll,g,"bScrollInfinite","bInfinite"),o(f.oScroll,g,"iScrollLoadGap","iLoadGap"),o(f.oScroll,g,"bScrollAutoCss","bAutoCss"),o(f,g,"asStripClasses","asStripeClasses"),o(f,g,"asStripeClasses"),o(f,g,"fnPreDrawCallback"),o(f,g,"fnRowCallback"),o(f,g,"fnHeaderCallback"),o(f,g,"fnFooterCallback"),o(f,g,"fnCookieCallback"),o(f,g,"fnInitComplete"),o(f,g,"fnServerData"),o(f,g,"fnFormatNumber"),o(f,g,"aaSorting"),o(f,g,"aaSortingFixed"),o(f,g,"aLengthMenu"),o(f,g,"sPaginationType"),o(f,g,"sAjaxSource"),o(f,g,"sAjaxDataProp"),o(f,g,"iCookieDuration"),o(f,g,"sCookiePrefix"),o(f,g,"sDom"),o(f,g,"bSortCellsTop"),o(f,g,"oSearch","oPreviousSearch"),o(f,g,"aoSearchCols","aoPreSearchCols"),o(f,g,"iDisplayLength","_iDisplayLength"),o(f,g,"bJQueryUI","bJUI"),o(f.oLanguage,g,"fnInfoCallback"),typeof g.fnDrawCallback=="function"&&f.aoDrawCallback.push({fn:g.fnDrawCallback,sName:"user"}),typeof g.fnServerParams=="function"&&f.aoServerParams.push({fn:g.fnServerParams,sName:"user"}),typeof g.fnStateSaveCallback=="function"&&f.aoStateSave.push({fn:g.fnStateSaveCallback,sName:"user"}),typeof g.fnStateLoadCallback=="function"&&f.aoStateLoad.push({fn:g.fnStateLoadCallback,sName:"user"}),f.oFeatures.bServerSide&&f.oFeatures.bSort&&f.oFeatures.bSortClasses?f.aoDrawCallback.push({fn:V,sName:"server_side_sort_classes"}):f.oFeatures.bDeferRender&&f.aoDrawCallback.push({fn:V,sName:"defer_sort_classes"}),typeof g.bJQueryUI!="undefined"&&g.bJQueryUI&&(f.oClasses=n.oJUIClasses,typeof g.sDom=="undefined"&&(f.sDom='<"H"lfr>t<"F"ip>'));if(f.oScroll.sX!==""||f.oScroll.sY!=="")f.oScroll.iBarWidth=Ya();typeof g.iDisplayStart!="undefined"&&typeof f.iInitDisplayStart=="undefined"&&(f.iInitDisplayStart=g.iDisplayStart,f._iDisplayStart=g.iDisplayStart),typeof g.bStateSave!="undefined"&&(f.oFeatures.bStateSave=g.bStateSave,Xa(f,g),f.aoDrawCallback.push({fn:va,sName:"state_save"})),typeof g.iDeferLoading!="undefined"&&(f.bDeferLoading=!0,f._iRecordsTotal=g.iDeferLoading,f._iRecordsDisplay=g.iDeferLoading),typeof g.aaData!="undefined"&&(h=!0),typeof g!="undefined"&&typeof g.aoData!="undefined"&&(g.aoColumns=g.aoData),typeof g.oLanguage!="undefined"&&(typeof g.oLanguage.sUrl!="undefined"&&g.oLanguage.sUrl!==""?(f.oLanguage.sUrl=g.oLanguage.sUrl,i.getJSON(f.oLanguage.sUrl,null,function(e){y(f,e,!0)}),c=!0):y(f,g.oLanguage,!1))}else g={};typeof g.asStripClasses=="undefined"&&typeof g.asStripeClasses=="undefined"&&(f.asStripeClasses.push(f.oClasses.sStripeOdd),f.asStripeClasses.push(f.oClasses.sStripeEven)),s=!1,u=i(this).children("tbody").children("tr"),e=0;for(r=f.asStripeClasses.length;e<r;e++)if(u.filter(":lt(2)").hasClass(f.asStripeClasses[e])){s=!0;break}s&&(f.asDestroyStripes=["",""],i(u[0]).hasClass(f.oClasses.sStripeOdd)&&(f.asDestroyStripes[0]+=f.oClasses.sStripeOdd+" "),i(u[0]).hasClass(f.oClasses.sStripeEven)&&(f.asDestroyStripes[0]+=f.oClasses.sStripeEven),i(u[1]).hasClass(f.oClasses.sStripeOdd)&&(f.asDestroyStripes[1]+=f.oClasses.sStripeOdd+" "),i(u[1]).hasClass(f.oClasses.sStripeEven)&&(f.asDestroyStripes[1]+=f.oClasses.sStripeEven),u.removeClass(f.asStripeClasses.join(" "))),s=[];var d;e=this.getElementsByTagName("thead"),e.length!==0&&(Y(f.aoHeader,e[0]),s=S(f));if(typeof g.aoColumns=="undefined"){d=[],e=0;for(r=s.length;e<r;e++)d.push(null)}else d=g.aoColumns;e=0;for(r=d.length;e<r;e++)typeof g.saved_aoColumns!="undefined"&&g.saved_aoColumns.length==r&&(d[e]===null&&(d[e]={}),d[e].bVisible=g.saved_aoColumns[e].bVisible),F(f,s?s[e]:null);if(typeof g.aoColumnDefs!="undefined")for(e=g.aoColumnDefs.length-1;e>=0;e--){var m=g.aoColumnDefs[e].aTargets;i.isArray(m)||J(f,1,"aTargets must be an array of targets, not a "+typeof m),s=0;for(u=m.length;s<u;s++)if(typeof m[s]=="number"&&m[s]>=0){for(;f.aoColumns.length<=m[s];)F(f);x(f,m[s],g.aoColumnDefs[e])}else if(typeof m[s]=="number"&&m[s]<0)x(f,f.aoColumns.length+m[s],g.aoColumnDefs[e]);else if(typeof m[s]=="string"){r=0;for(a=f.aoColumns.length;r<a;r++)(m[s]=="_all"||i(f.aoColumns[r].nTh).hasClass(m[s]))&&x(f,r,g.aoColumnDefs[e])}}if(typeof d!="undefined"){e=0;for(r=d.length;e<r;e++)x(f,e,d[e])}e=0;for(r=f.aaSorting.length;e<r;e++){f.aaSorting[e][0]>=f.aoColumns.length&&(f.aaSorting[e][0]=0),d=f.aoColumns[f.aaSorting[e][0]],typeof f.aaSorting[e][2]=="undefined"&&(f.aaSorting[e][2]=0),typeof g.aaSorting=="undefined"&&typeof f.saved_aaSorting=="undefined"&&(f.aaSorting[e][1]=d.asSorting[0]),s=0;for(u=d.asSorting.length;s<u;s++)if(f.aaSorting[e][1]==d.asSorting[s]){f.aaSorting[e][2]=s;break}}V(f),e=i(this).children("thead"),e.length===0&&(e=[p.createElement("thead")],this.appendChild(e[0])),f.nTHead=e[0],e=i(this).children("tbody"),e.length===0&&(e=[p.createElement("tbody")],this.appendChild(e[0])),f.nTBody=e[0],e=i(this).children("tfoot"),e.length>0&&(f.nTFoot=e[0],Y(f.aoFooter,f.nTFoot));if(h)for(e=0;e<g.aaData.length;e++)v(f,g.aaData[e]);else $(f);f.aiDisplay=f.aiDisplayMaster.slice(),f.bInitialised=!0,c===!1&&t(f)}})}}(jQuery,window,document),!function(e){"use strict";e(function(){e.support.transition=function(){var e=function(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},n;for(n in t)if(e.style[n]!==undefined)return t[n]}();return e&&{end:e}}()})}(window.jQuery),!function(e){"use strict";var t='[data-dismiss="alert"]',n=function(n){e(n).on("click",t,this.close)};n.prototype.close=function(t){function s(){i.trigger("closed").remove()}var n=e(this),r=n.attr("data-target"),i;r||(r=n.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,"")),i=e(r),t&&t.preventDefault(),i.length||(i=n.hasClass("alert")?n:n.parent()),i.trigger(t=e.Event("close"));if(t.isDefaultPrevented())return;i.removeClass("in"),e.support.transition&&i.hasClass("fade")?i.on(e.support.transition.end,s):s()},e.fn.alert=function(t){return this.each(function(){var r=e(this),i=r.data("alert");i||r.data("alert",i=new n(this)),typeof t=="string"&&i[t].call(r)})},e.fn.alert.Constructor=n,e(document).on("click.alert.data-api",t,n.prototype.close)}(window.jQuery),!function(e){"use strict";var t=function(t,n){this.$element=e(t),this.options=e.extend({},e.fn.button.defaults,n)};t.prototype.setState=function(e){var t="disabled",n=this.$element,r=n.data(),i=n.is("input")?"val":"html";e+="Text",r.resetText||n.data("resetText",n[i]()),n[i](r[e]||this.options[e]),setTimeout(function(){e=="loadingText"?n.addClass(t).attr(t,t):n.removeClass(t).removeAttr(t)},0)},t.prototype.toggle=function(){var e=this.$element.closest('[data-toggle="buttons-radio"]');e&&e.find(".active").removeClass("active"),this.$element.toggleClass("active")},e.fn.button=function(n){return this.each(function(){var r=e(this),i=r.data("button"),s=typeof n=="object"&&n;i||r.data("button",i=new t(this,s)),n=="toggle"?i.toggle():n&&i.setState(n)})},e.fn.button.defaults={loadingText:"loading..."},e.fn.button.Constructor=t,e(document).on("click.button.data-api","[data-toggle^=button]",function(t){var n=e(t.target);n.hasClass("btn")||(n=n.closest(".btn")),n.button("toggle")})}(window.jQuery),!function(e){"use strict";var t=function(t,n){this.$element=e(t),this.options=n,this.options.slide&&this.slide(this.options.slide),this.options.pause=="hover"&&this.$element.on("mouseenter",e.proxy(this.pause,this)).on("mouseleave",e.proxy(this.cycle,this))};t.prototype={cycle:function(t){return t||(this.paused=!1),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},to:function(t){var n=this.$element.find(".item.active"),r=n.parent().children(),i=r.index(n),s=this;if(t>r.length-1||t<0)return;return this.sliding?this.$element.one("slid",function(){s.to(t)}):i==t?this.pause().cycle():this.slide(t>i?"next":"prev",e(r[t]))},pause:function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition.end&&(this.$element.trigger(e.support.transition.end),this.cycle()),clearInterval(this.interval),this.interval=null,this},next:function(){if(this.sliding)return;return this.slide("next")},prev:function(){if(this.sliding)return;return this.slide("prev")},slide:function(t,n){var r=this.$element.find(".item.active"),i=n||r[t](),s=this.interval,o=t=="next"?"left":"right",u=t=="next"?"first":"last",a=this,f;this.sliding=!0,s&&this.pause(),i=i.length?i:this.$element.find(".item")[u](),f=e.Event("slide",{relatedTarget:i[0]});if(i.hasClass("active"))return;if(e.support.transition&&this.$element.hasClass("slide")){this.$element.trigger(f);if(f.isDefaultPrevented())return;i.addClass(t),i[0].offsetWidth,r.addClass(o),i.addClass(o),this.$element.one(e.support.transition.end,function(){i.removeClass([t,o].join(" ")).addClass("active"),r.removeClass(["active",o].join(" ")),a.sliding=!1,setTimeout(function(){a.$element.trigger("slid")},0)})}else{this.$element.trigger(f);if(f.isDefaultPrevented())return;r.removeClass("active"),i.addClass("active"),this.sliding=!1,this.$element.trigger("slid")}return s&&this.cycle(),this}},e.fn.carousel=function(n){return this.each(function(){var r=e(this),i=r.data("carousel"),s=e.extend({},e.fn.carousel.defaults,typeof n=="object"&&n),o=typeof n=="string"?n:s.slide;i||r.data("carousel",i=new t(this,s)),typeof n=="number"?i.to(n):o?i[o]():s.interval&&i.cycle()})},e.fn.carousel.defaults={interval:5e3,pause:"hover"},e.fn.carousel.Constructor=t,e(document).on("click.carousel.data-api","[data-slide]",function(t){var n=e(this),r,i=e(n.attr("data-target")||(r=n.attr("href"))&&r.replace(/.*(?=#[^\s]+$)/,"")),s=e.extend({},i.data(),n.data());i.carousel(s),t.preventDefault()})}(window.jQuery),!function(e){"use strict";var t=function(t,n){this.$element=e(t),this.options=e.extend({},e.fn.collapse.defaults,n),this.options.parent&&(this.$parent=e(this.options.parent)),this.options.toggle&&this.toggle()};t.prototype={constructor:t,dimension:function(){var e=this.$element.hasClass("width");return e?"width":"height"},show:function(){var t,n,r,i;if(this.transitioning)return;t=this.dimension(),n=e.camelCase(["scroll",t].join("-")),r=this.$parent&&this.$parent.find("> .accordion-group > .in");if(r&&r.length){i=r.data("collapse");if(i&&i.transitioning)return;r.collapse("hide"),i||r.data("collapse",null)}this.$element[t](0),this.transition("addClass",e.Event("show"),"shown"),e.support.transition&&this.$element[t](this.$element[0][n])},hide:function(){var t;if(this.transitioning)return;t=this.dimension(),this.reset(this.$element[t]()),this.transition("removeClass",e.Event("hide"),"hidden"),this.$element[t](0)},reset:function(e){var t=this.dimension();return this.$element.removeClass("collapse")[t](e||"auto")[0].offsetWidth,this.$element[e!==null?"addClass":"removeClass"]("collapse"),this},transition:function(t,n,r){var i=this,s=function(){n.type=="show"&&i.reset(),i.transitioning=0,i.$element.trigger(r)};this.$element.trigger(n);if(n.isDefaultPrevented())return;this.transitioning=1,this.$element[t]("in"),e.support.transition&&this.$element.hasClass("collapse")?this.$element.one(e.support.transition.end,s):s()},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}},e.fn.collapse=function(n){return this.each(function(){var r=e(this),i=r.data("collapse"),s=typeof n=="object"&&n;i||r.data("collapse",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.collapse.defaults={toggle:!0},e.fn.collapse.Constructor=t,e(document).on("click.collapse.data-api","[data-toggle=collapse]",function(t){var n=e(this),r,i=n.attr("data-target")||t.preventDefault()||(r=n.attr("href"))&&r.replace(/.*(?=#[^\s]+$)/,""),s=e(i).data("collapse")?"toggle":n.data();n[e(i).hasClass("in")?"addClass":"removeClass"]("collapsed"),e(i).collapse(s)})}(window.jQuery),!function(e){"use strict";function r(){e(t).each(function(){i(e(this)).removeClass("open")})}function i(t){var n=t.attr("data-target"),r;return n||(n=t.attr("href"),n=n&&/#/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,"")),r=e(n),r.length||(r=t.parent()),r}var t="[data-toggle=dropdown]",n=function(t){var n=e(t).on("click.dropdown.data-api",this.toggle);e("html").on("click.dropdown.data-api",function(){n.parent().removeClass("open")})};n.prototype={constructor:n,toggle:function(t){var n=e(this),s,o;if(n.is(".disabled, :disabled"))return;return s=i(n),o=s.hasClass("open"),r(),o||(s.toggleClass("open"),n.focus()),!1},keydown:function(t){var n,r,s,o,u,a;if(!/(38|40|27)/.test(t.keyCode))return;n=e(this),t.preventDefault(),t.stopPropagation();if(n.is(".disabled, :disabled"))return;o=i(n),u=o.hasClass("open");if(!u||u&&t.keyCode==27)return n.click();r=e("[role=menu] li:not(.divider) a",o);if(!r.length)return;a=r.index(r.filter(":focus")),t.keyCode==38&&a>0&&a--,t.keyCode==40&&a<r.length-1&&a++,~a||(a=0),r.eq(a).focus()}},e.fn.dropdown=function(t){return this.each(function(){var r=e(this),i=r.data("dropdown");i||r.data("dropdown",i=new n(this)),typeof t=="string"&&i[t].call(r)})},e.fn.dropdown.Constructor=n,e(document).on("click.dropdown.data-api touchstart.dropdown.data-api",r).on("click.dropdown touchstart.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.dropdown.data-api touchstart.dropdown.data-api",t,n.prototype.toggle).on("keydown.dropdown.data-api touchstart.dropdown.data-api",t+", [role=menu]",n.prototype.keydown)}(window.jQuery),!function(e){"use strict";var t=function(t,n){this.options=n,this.$element=e(t).delegate('[data-dismiss="modal"]',"click.dismiss.modal",e.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};t.prototype={constructor:t,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var t=this,n=e.Event("show");this.$element.trigger(n);if(this.isShown||n.isDefaultPrevented())return;this.isShown=!0,this.escape(),this.backdrop(function(){var n=e.support.transition&&t.$element.hasClass("fade");t.$element.parent().length||t.$element.appendTo(document.body),t.$element.show(),n&&t.$element[0].offsetWidth,t.$element.addClass("in").attr("aria-hidden",!1),t.enforceFocus(),n?t.$element.one(e.support.transition.end,function(){t.$element.focus().trigger("shown")}):t.$element.focus().trigger("shown")})},hide:function(t){t&&t.preventDefault();var n=this;t=e.Event("hide"),this.$element.trigger(t);if(!this.isShown||t.isDefaultPrevented())return;this.isShown=!1,this.escape(),e(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),e.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal()},enforceFocus:function(){var t=this;e(document).on("focusin.modal",function(e){t.$element[0]!==e.target&&!t.$element.has(e.target).length&&t.$element.focus()})},escape:function(){var e=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(t){t.which==27&&e.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var t=this,n=setTimeout(function(){t.$element.off(e.support.transition.end),t.hideModal()},500);this.$element.one(e.support.transition.end,function(){clearTimeout(n),t.hideModal()})},hideModal:function(e){this.$element.hide().trigger("hidden"),this.backdrop()},removeBackdrop:function(){this.$backdrop.remove(),this.$backdrop=null},backdrop:function(t){var n=this,r=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var i=e.support.transition&&r;this.$backdrop=e('<div class="modal-backdrop '+r+'" />').appendTo(document.body),this.$backdrop.click(this.options.backdrop=="static"?e.proxy(this.$element[0].focus,this.$element[0]):e.proxy(this.hide,this)),i&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),i?this.$backdrop.one(e.support.transition.end,t):t()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(e.support.transition.end,e.proxy(this.removeBackdrop,this)):this.removeBackdrop()):t&&t()}},e.fn.modal=function(n){return this.each(function(){var r=e(this),i=r.data("modal"),s=e.extend({},e.fn.modal.defaults,r.data(),typeof n=="object"&&n);i||r.data("modal",i=new t(this,s)),typeof n=="string"?i[n]():s.show&&i.show()})},e.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},e.fn.modal.Constructor=t,e(document).on("click.modal.data-api",'[data-toggle="modal"]',function(t){var n=e(this),r=n.attr("href"),i=e(n.attr("data-target")||r&&r.replace(/.*(?=#[^\s]+$)/,"")),s=i.data("modal")?"toggle":e.extend({remote:!/#/.test(r)&&r},i.data(),n.data());t.preventDefault(),i.modal(s).one("hide",function(){n.focus()})})}(window.jQuery),!function(e){"use strict";var t=function(e,t){this.init("tooltip",e,t)};t.prototype={constructor:t,init:function(t,n,r){var i,s;this.type=t,this.$element=e(n),this.options=this.getOptions(r),this.enabled=!0,this.options.trigger=="click"?this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this)):this.options.trigger!="manual"&&(i=this.options.trigger=="hover"?"mouseenter":"focus",s=this.options.trigger=="hover"?"mouseleave":"blur",this.$element.on(i+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(s+"."+this.type,this.options.selector,e.proxy(this.leave,this))),this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(t){return t=e.extend({},e.fn[this.type].defaults,t,this.$element.data()),t.delay&&typeof t.delay=="number"&&(t.delay={show:t.delay,hide:t.delay}),t},enter:function(t){var n=e(t.currentTarget)[this.type](this._options).data(this.type);if(!n.options.delay||!n.options.delay.show)return n.show();clearTimeout(this.timeout),n.hoverState="in",this.timeout=setTimeout(function(){n.hoverState=="in"&&n.show()},n.options.delay.show)},leave:function(t){var n=e(t.currentTarget)[this.type](this._options).data(this.type);this.timeout&&clearTimeout(this.timeout);if(!n.options.delay||!n.options.delay.hide)return n.hide();n.hoverState="out",this.timeout=setTimeout(function(){n.hoverState=="out"&&n.hide()},n.options.delay.hide)},show:function(){var e,t,n,r,i,s,o;if(this.hasContent()&&this.enabled){e=this.tip(),this.setContent(),this.options.animation&&e.addClass("fade"),s=typeof this.options.placement=="function"?this.options.placement.call(this,e[0],this.$element[0]):this.options.placement,t=/in/.test(s),e.detach().css({top:0,left:0,display:"block"}).insertAfter(this.$element),n=this.getPosition(t),r=e[0].offsetWidth,i=e[0].offsetHeight;switch(t?s.split(" ")[1]:s){case"bottom":o={top:n.top+n.height,left:n.left+n.width/2-r/2};break;case"top":o={top:n.top-i,left:n.left+n.width/2-r/2};break;case"left":o={top:n.top+n.height/2-i/2,left:n.left-r};break;case"right":o={top:n.top+n.height/2-i/2,left:n.left+n.width}}e.offset(o).addClass(s).addClass("in")}},setContent:function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},hide:function(){function r(){var t=setTimeout(function(){n.off(e.support.transition.end).detach()},500);n.one(e.support.transition.end,function(){clearTimeout(t),n.detach()})}var t=this,n=this.tip();return n.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?r():n.detach(),this},fixTitle:function(){var e=this.$element;(e.attr("title")||typeof e.attr("data-original-title")!="string")&&e.attr("data-original-title",e.attr("title")||"").removeAttr("title")},hasContent:function(){return this.getTitle()},getPosition:function(t){return e.extend({},t?{top:0,left:0}:this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight})},getTitle:function(){var e,t=this.$element,n=this.options;return e=t.attr("data-original-title")||(typeof n.title=="function"?n.title.call(t[0]):n.title),e},tip:function(){return this.$tip=this.$tip||e(this.options.template)},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(t){var n=e(t.currentTarget)[this.type](this._options).data(this.type);n[n.tip().hasClass("in")?"hide":"show"]()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}},e.fn.tooltip=function(n){return this.each(function(){var r=e(this),i=r.data("tooltip"),s=typeof n=="object"&&n;i||r.data("tooltip",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.tooltip.Constructor=t,e.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover",title:"",delay:0,html:!1}}(window.jQuery),!function(e){"use strict";var t=function(e,t){this.init("popover",e,t)};t.prototype=e.extend({},e.fn.tooltip.Constructor.prototype,{constructor:t,setContent:function(){var e=this.tip(),t=this.getTitle(),n=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content > *")[this.options.html?"html":"text"](n),e.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var e,t=this.$element,n=this.options;return e=t.attr("data-content")||(typeof n.content=="function"?n.content.call(t[0]):n.content),e},tip:function(){return this.$tip||(this.$tip=e(this.options.template)),this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}}),e.fn.popover=function(n){return this.each(function(){var r=e(this),i=r.data("popover"),s=typeof n=="object"&&n;i||r.data("popover",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.popover.Constructor=t,e.fn.popover.defaults=e.extend({},e.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><div class="popover-inner"><h3 class="popover-title"></h3><div class="popover-content"><p></p></div></div></div>'})}(window.jQuery),!function(e){"use strict";function t(t,n){var r=e.proxy(this.process,this),i=e(t).is("body")?e(window):e(t),s;this.options=e.extend({},e.fn.scrollspy.defaults,n),this.$scrollElement=i.on("scroll.scroll-spy.data-api",r),this.selector=(this.options.target||(s=e(t).attr("href"))&&s.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.$body=e("body"),this.refresh(),this.process()}t.prototype={constructor:t,refresh:function(){var t=this,n;this.offsets=e([]),this.targets=e([]),n=this.$body.find(this.selector).map(function(){var t=e(this),n=t.data("target")||t.attr("href"),r=/^#\w/.test(n)&&e(n);return r&&r.length&&[[r.position().top,n]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){t.offsets.push(this[0]),t.targets.push(this[1])})},process:function(){var e=this.$scrollElement.scrollTop()+this.options.offset,t=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,n=t-this.$scrollElement.height(),r=this.offsets,i=this.targets,s=this.activeTarget,o;if(e>=n)return s!=(o=i.last()[0])&&this.activate(o);for(o=r.length;o--;)s!=i[o]&&e>=r[o]&&(!r[o+1]||e<=r[o+1])&&this.activate(i[o])},activate:function(t){var n,r;this.activeTarget=t,e(this.selector).parent(".active").removeClass("active"),r=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',n=e(r).parent("li").addClass("active"),n.parent(".dropdown-menu").length&&(n=n.closest("li.dropdown").addClass("active")),n.trigger("activate")}},e.fn.scrollspy=function(n){return this.each(function(){var r=e(this),i=r.data("scrollspy"),s=typeof n=="object"&&n;i||r.data("scrollspy",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.scrollspy.Constructor=t,e.fn.scrollspy.defaults={offset:10},e(window).on("load",function(){e('[data-spy="scroll"]').each(function(){var t=e(this);t.scrollspy(t.data())})})}(window.jQuery),!function(e){"use strict";var t=function(t){this.element=e(t)};t.prototype={constructor:t,show:function(){var t=this.element,n=t.closest("ul:not(.dropdown-menu)"),r=t.attr("data-target"),i,s,o;r||(r=t.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,""));if(t.parent("li").hasClass("active"))return;i=n.find(".active:last a")[0],o=e.Event("show",{relatedTarget:i}),t.trigger(o);if(o.isDefaultPrevented())return;s=e(r),this.activate(t.parent("li"),n),this.activate(s,s.parent(),function(){t.trigger({type:"shown",relatedTarget:i})})},activate:function(t,n,r){function o(){i.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),t.addClass("active"),s?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu")&&t.closest("li.dropdown").addClass("active"),r&&r()}var i=n.find("> .active"),s=r&&e.support.transition&&i.hasClass("fade");s?i.one(e.support.transition.end,o):o(),i.removeClass("in")}},e.fn.tab=function(n){return this.each(function(){var r=e(this),i=r.data("tab");i||r.data("tab",i=new t(this)),typeof n=="string"&&i[n]()})},e.fn.tab.Constructor=t,e(document).on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(t){t.preventDefault(),e(this).tab("show")})}(window.jQuery),!function(e){"use strict";var t=function(t,n){this.$element=e(t),this.options=e.extend({},e.fn.typeahead.defaults,n),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.$menu=e(this.options.menu).appendTo("body"),this.source=this.options.source,this.shown=!1,this.listen()};t.prototype={constructor:t,select:function(){var e=this.$menu.find(".active").attr("data-value");return this.$element.val(this.updater(e)).change(),this.hide()},updater:function(e){return e},show:function(){var t=e.extend({},this.$element.offset(),{height:this.$element[0].offsetHeight});return this.$menu.css({top:t.top+t.height,left:t.left}),this.$menu.show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(t){var n;return this.query=this.$element.val(),!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(n=e.isFunction(this.source)?this.source(this.query,e.proxy(this.process,this)):this.source,n?this.process(n):this)},process:function(t){var n=this;return t=e.grep(t,function(e){return n.matcher(e)}),t=this.sorter(t),t.length?this.render(t.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(e){return~e.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(e){var t=[],n=[],r=[],i;while(i=e.shift())i.toLowerCase().indexOf(this.query.toLowerCase())?~i.indexOf(this.query)?n.push(i):r.push(i):t.push(i);return t.concat(n,r)},highlighter:function(e){var t=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return e.replace(new RegExp("("+t+")","ig"),function(e,t){return"<strong>"+t+"</strong>"})},render:function(t){var n=this;return t=e(t).map(function(t,r){return t=e(n.options.item).attr("data-value",r),t.find("a").html(n.highlighter(r)),t[0]}),t.first().addClass("active"),this.$menu.html(t),this},next:function(t){var n=this.$menu.find(".active").removeClass("active"),r=n.next();r.length||(r=e(this.$menu.find("li")[0])),r.addClass("active")},prev:function(e){var t=this.$menu.find(".active").removeClass("active"),n=t.prev();n.length||(n=this.$menu.find("li").last()),n.addClass("active")},listen:function(){this.$element.on("blur",e.proxy(this.blur,this)).on("keypress",e.proxy(this.keypress,this)).on("keyup",e.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",e.proxy(this.keydown,this)),this.$menu.on("click",e.proxy(this.click,this)).on("mouseenter","li",e.proxy(this.mouseenter,this))},eventSupported:function(e){var t=e in this.$element;return t||(this.$element.setAttribute(e,"return;"),t=typeof this.$element[e]=="function"),t},move:function(e){if(!this.shown)return;switch(e.keyCode){case 9:case 13:case 27:e.preventDefault();break;case 38:e.preventDefault(),this.prev();break;case 40:e.preventDefault(),this.next()}e.stopPropagation()},keydown:function(t){this.suppressKeyPressRepeat=!~e.inArray(t.keyCode,[40,38,9,13,27]),this.move(t)},keypress:function(e){if(this.suppressKeyPressRepeat)return;this.move(e)},keyup:function(e){switch(e.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}e.stopPropagation(),e.preventDefault()},blur:function(e){var t=this;setTimeout(function(){t.hide()},150)},click:function(e){e.stopPropagation(),e.preventDefault(),this.select()},mouseenter:function(t){this.$menu.find(".active").removeClass("active"),e(t.currentTarget).addClass("active")}},e.fn.typeahead=function(n){return this.each(function(){var r=e(this),i=r.data("typeahead"),s=typeof n=="object"&&n;i||r.data("typeahead",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1},e.fn.typeahead.Constructor=t,e(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(t){var n=e(this);if(n.data("typeahead"))return;t.preventDefault(),n.typeahead(n.data())})}(window.jQuery),!function(e){"use strict";var t=function(t,n){this.options=e.extend({},e.fn.affix.defaults,n),this.$window=e(window).on("scroll.affix.data-api",e.proxy(this.checkPosition,this)).on("click.affix.data-api",e.proxy(function(){setTimeout(e.proxy(this.checkPosition,this),1)},this)),this.$element=e(t),this.checkPosition()};t.prototype.checkPosition=function(){if(!this.$element.is(":visible"))return;var t=e(document).height(),n=this.$window.scrollTop(),r=this.$element.offset(),i=this.options.offset,s=i.bottom,o=i.top,u="affix affix-top affix-bottom",a;typeof i!="object"&&(s=o=i),typeof o=="function"&&(o=i.top()),typeof s=="function"&&(s=i.bottom()),a=this.unpin!=null&&n+this.unpin<=r.top?!1:s!=null&&r.top+this.$element.height()>=t-s?"bottom":o!=null&&n<=o?"top":!1;if(this.affixed===a)return;this.affixed=a,this.unpin=a=="bottom"?r.top-n:null,this.$element.removeClass(u).addClass("affix"+(a?"-"+a:""))},e.fn.affix=function(n){return this.each(function(){var r=e(this),i=r.data("affix"),s=typeof n=="object"&&n;i||r.data("affix",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.affix.Constructor=t,e.fn.affix.defaults={offset:0},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var t=e(this),n=t.data();n.offset=n.offset||{},n.offsetBottom&&(n.offset.bottom=n.offsetBottom),n.offsetTop&&(n.offset.top=n.offsetTop),t.affix(n)})})}(window.jQuery),!function(e){function t(){return new Date(Date.UTC.apply(Date,arguments))}var n=function(t,n){var s=this;this.element=e(t),this.language=n.language||this.element.data("date-language")||"en",this.language=this.language in r?this.language:"en",this.format=i.parseFormat(n.format||this.element.data("date-format")||"mm/dd/yyyy"),this.picker=e(i.template).appendTo("body").on({click:e.proxy(this.click,this)}),this.isInput=this.element.is("input"),this.component=this.element.is(".date")?this.element.find(".add-on"):!1,this.hasInput=this.component&&this.element.find("input").length,this.component&&this.component.length===0&&(this.component=!1),this.isInput?this.element.on({focus:e.proxy(this.show,this),keyup:e.proxy(this.update,this),keydown:e.proxy(this.keydown,this)}):this.component&&this.hasInput?(this.element.find("input").on({focus:e.proxy(this.show,this),keyup:e.proxy(this.update,this),keydown:e.proxy(this.keydown,this)}),this.component.on("click",e.proxy(this.show,this))):this.element.on("click",e.proxy(this.show,this)),e(document).on("mousedown",function(t){e(t.target).closest(".datepicker").length==0&&s.hide()}),this.autoclose=!1,"autoclose"in n?this.autoclose=n.autoclose:"dateAutoclose"in this.element.data()&&(this.autoclose=this.element.data("date-autoclose")),this.keyboardNavigation=!0,"keyboardNavigation"in n?this.keyboardNavigation=n.keyboardNavigation:"dateKeyboardNavigation"in this.element.data()&&(this.keyboardNavigation=this.element.data("date-keyboard-navigation"));switch(n.startView||this.element.data("date-start-view")){case 2:case"decade":this.viewMode=this.startViewMode=2;break;case 1:case"year":this.viewMode=this.startViewMode=1;break;case 0:case"month":default:this.viewMode=this.startViewMode=0}this.weekStart=(n.weekStart||this.element.data("date-weekstart")||r[this.language].weekStart||0)%7,this.weekEnd=(this.weekStart+6)%7,this.startDate=-Infinity,this.endDate=Infinity,this.setStartDate(n.startDate||this.element.data("date-startdate")),this.setEndDate(n.endDate||this.element.data("date-enddate")),this.fillDow(),this.fillMonths(),this.update(),this.showMode
()};n.prototype={constructor:n,show:function(t){this.picker.show(),this.height=this.component?this.component.outerHeight():this.element.outerHeight(),this.update(),this.place(),e(window).on("resize",e.proxy(this.place,this)),t&&(t.stopPropagation(),t.preventDefault()),this.element.trigger({type:"show",date:this.date})},hide:function(t){this.picker.hide(),e(window).off("resize",this.place),this.viewMode=this.startViewMode,this.showMode(),this.isInput||e(document).off("mousedown",this.hide),t&&t.currentTarget.value&&this.setValue(),this.element.trigger({type:"hide",date:this.date})},setValue:function(){var e=i.formatDate(this.date,this.format,this.language);this.isInput?this.element.prop("value",e):(this.component&&this.element.find("input").prop("value",e),this.element.data("date",e))},setStartDate:function(e){this.startDate=e||-Infinity,this.startDate!==-Infinity&&(this.startDate=i.parseDate(this.startDate,this.format,this.language)),this.update(),this.updateNavArrows()},setEndDate:function(e){this.endDate=e||Infinity,this.endDate!==Infinity&&(this.endDate=i.parseDate(this.endDate,this.format,this.language)),this.update(),this.updateNavArrows()},place:function(){var t=parseInt(this.element.parents().filter(function(){return e(this).css("z-index")!="auto"}).first().css("z-index"))+10,n=this.component?this.component.offset():this.element.offset();this.picker.css({top:n.top+this.height,left:n.left,zIndex:t})},update:function(){this.date=i.parseDate(this.isInput?this.element.prop("value"):this.element.data("date")||this.element.find("input").prop("value"),this.format,this.language),this.date<this.startDate?this.viewDate=new Date(this.startDate):this.date>this.endDate?this.viewDate=new Date(this.endDate):this.viewDate=new Date(this.date),this.fill()},fillDow:function(){var e=this.weekStart,t="<tr>";while(e<this.weekStart+7)t+='<th class="dow">'+r[this.language].daysMin[e++%7]+"</th>";t+="</tr>",this.picker.find(".datepicker-days thead").append(t)},fillMonths:function(){var e="",t=0;while(t<12)e+='<span class="month">'+r[this.language].monthsShort[t++]+"</span>";this.picker.find(".datepicker-months td").html(e)},fill:function(){var e=new Date(this.viewDate),n=e.getUTCFullYear(),s=e.getUTCMonth(),o=this.startDate!==-Infinity?this.startDate.getUTCFullYear():-Infinity,u=this.startDate!==-Infinity?this.startDate.getUTCMonth():-Infinity,a=this.endDate!==Infinity?this.endDate.getUTCFullYear():Infinity,f=this.endDate!==Infinity?this.endDate.getUTCMonth():Infinity,l=this.date.valueOf();this.picker.find(".datepicker-days th:eq(1)").text(r[this.language].months[s]+" "+n),this.updateNavArrows(),this.fillMonths();var c=t(n,s-1,28,0,0,0,0),h=i.getDaysInMonth(c.getUTCFullYear(),c.getUTCMonth());c.setUTCDate(h),c.setUTCDate(h-(c.getUTCDay()-this.weekStart+7)%7);var p=new Date(c);p.setUTCDate(p.getUTCDate()+42),p=p.valueOf();var d=[],v;while(c.valueOf()<p){c.getUTCDay()==this.weekStart&&d.push("<tr>"),v="";if(c.getUTCFullYear()<n||c.getUTCFullYear()==n&&c.getUTCMonth()<s)v+=" old";else if(c.getUTCFullYear()>n||c.getUTCFullYear()==n&&c.getUTCMonth()>s)v+=" new";c.valueOf()==l&&(v+=" active");if(c.valueOf()<this.startDate||c.valueOf()>this.endDate)v+=" disabled";d.push('<td class="day'+v+'">'+c.getUTCDate()+"</td>"),c.getUTCDay()==this.weekEnd&&d.push("</tr>"),c.setUTCDate(c.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(d.join(""));var m=this.date.getUTCFullYear(),g=this.picker.find(".datepicker-months").find("th:eq(1)").text(n).end().find("span").removeClass("active");m==n&&g.eq(this.date.getUTCMonth()).addClass("active"),(n<o||n>a)&&g.addClass("disabled"),n==o&&g.slice(0,u).addClass("disabled"),n==a&&g.slice(f+1).addClass("disabled"),d="",n=parseInt(n/10,10)*10;var y=this.picker.find(".datepicker-years").find("th:eq(1)").text(n+"-"+(n+9)).end().find("td");n-=1;for(var b=-1;b<11;b++)d+='<span class="year'+(b==-1||b==10?" old":"")+(m==n?" active":"")+(n<o||n>a?" disabled":"")+'">'+n+"</span>",n+=1;y.html(d)},updateNavArrows:function(){var e=new Date(this.viewDate),t=e.getUTCFullYear(),n=e.getUTCMonth();switch(this.viewMode){case 0:this.startDate!==-Infinity&&t<=this.startDate.getUTCFullYear()&&n<=this.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.endDate!==Infinity&&t>=this.endDate.getUTCFullYear()&&n>=this.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:case 2:this.startDate!==-Infinity&&t<=this.startDate.getUTCFullYear()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.endDate!==Infinity&&t>=this.endDate.getUTCFullYear()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}},click:function(n){n.stopPropagation(),n.preventDefault();var r=e(n.target).closest("span, td, th");if(r.length==1)switch(r[0].nodeName.toLowerCase()){case"th":switch(r[0].className){case"switch":this.showMode(1);break;case"prev":case"next":var s=i.modes[this.viewMode].navStep*(r[0].className=="prev"?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,s);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,s)}this.fill()}break;case"span":if(!r.is(".disabled")){this.viewDate.setUTCDate(1);if(r.is(".month")){var o=r.parent().find("span").index(r);this.viewDate.setUTCMonth(o),this.element.trigger({type:"changeMonth",date:this.viewDate})}else{var u=parseInt(r.text(),10)||0;this.viewDate.setUTCFullYear(u),this.element.trigger({type:"changeYear",date:this.viewDate})}this.showMode(-1),this.fill()}break;case"td":if(r.is(".day")&&!r.is(".disabled")){var a=parseInt(r.text(),10)||1,u=this.viewDate.getUTCFullYear(),o=this.viewDate.getUTCMonth();r.is(".old")?o==0?(o=11,u-=1):o-=1:r.is(".new")&&(o==11?(o=0,u+=1):o+=1),this.date=t(u,o,a,0,0,0,0),this.viewDate=t(u,o,a,0,0,0,0),this.fill(),this.setValue(),this.element.trigger({type:"changeDate",date:this.date});var f;this.isInput?f=this.element:this.component&&(f=this.element.find("input")),f&&(f.change(),this.autoclose&&this.hide())}}},moveMonth:function(e,t){if(!t)return e;var n=new Date(e.valueOf()),r=n.getUTCDate(),i=n.getUTCMonth(),s=Math.abs(t),o,u;t=t>0?1:-1;if(s==1){u=t==-1?function(){return n.getUTCMonth()==i}:function(){return n.getUTCMonth()!=o},o=i+t,n.setUTCMonth(o);if(o<0||o>11)o=(o+12)%12}else{for(var a=0;a<s;a++)n=this.moveMonth(n,t);o=n.getUTCMonth(),n.setUTCDate(r),u=function(){return o!=n.getUTCMonth()}}while(u())n.setUTCDate(--r),n.setUTCMonth(o);return n},moveYear:function(e,t){return this.moveMonth(e,t*12)},dateWithinRange:function(e){return e>=this.startDate&&e<=this.endDate},keydown:function(e){if(this.picker.is(":not(:visible)")){e.keyCode==27&&this.show();return}var t=!1,n,r,i,s,o;switch(e.keyCode){case 27:this.hide(),e.preventDefault();break;case 37:case 39:if(!this.keyboardNavigation)break;n=e.keyCode==37?-1:1,e.ctrlKey?(s=this.moveYear(this.date,n),o=this.moveYear(this.viewDate,n)):e.shiftKey?(s=this.moveMonth(this.date,n),o=this.moveMonth(this.viewDate,n)):(s=new Date(this.date),s.setUTCDate(this.date.getUTCDate()+n),o=new Date(this.viewDate),o.setUTCDate(this.viewDate.getUTCDate()+n)),this.dateWithinRange(s)&&(this.date=s,this.viewDate=o,this.setValue(),this.update(),e.preventDefault(),t=!0);break;case 38:case 40:if(!this.keyboardNavigation)break;n=e.keyCode==38?-1:1,e.ctrlKey?(s=this.moveYear(this.date,n),o=this.moveYear(this.viewDate,n)):e.shiftKey?(s=this.moveMonth(this.date,n),o=this.moveMonth(this.viewDate,n)):(s=new Date(this.date),s.setUTCDate(this.date.getUTCDate()+n*7),o=new Date(this.viewDate),o.setUTCDate(this.viewDate.getUTCDate()+n*7)),this.dateWithinRange(s)&&(this.date=s,this.viewDate=o,this.setValue(),this.update(),e.preventDefault(),t=!0);break;case 13:this.hide(),e.preventDefault();break;case 9:this.hide()}if(t){this.element.trigger({type:"changeDate",date:this.date});var u;this.isInput?u=this.element:this.component&&(u=this.element.find("input")),u&&u.change()}},showMode:function(e){e&&(this.viewMode=Math.max(0,Math.min(2,this.viewMode+e))),this.picker.find(">div").hide().filter(".datepicker-"+i.modes[this.viewMode].clsName).show(),this.updateNavArrows()}},e.fn.datepicker=function(t){var r=Array.apply(null,arguments);return r.shift(),this.each(function(){var i=e(this),s=i.data("datepicker"),o=typeof t=="object"&&t;s||i.data("datepicker",s=new n(this,e.extend({},e.fn.datepicker.defaults,o))),typeof t=="string"&&typeof s[t]=="function"&&s[t].apply(s,r)})},e.fn.datepicker.defaults={},e.fn.datepicker.Constructor=n;var r=e.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}},i={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(e){return e%4===0&&e%100!==0||e%400===0},getDaysInMonth:function(e,t){return[31,i.isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]},validParts:/dd?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[-`{-~\t\n\r]+/g,parseFormat:function(e){var t=e.replace(this.validParts,"\0").split("\0"),n=e.match(this.validParts);if(!t||!t.length||!n||n.length==0)throw new Error("Invalid date format.");return{separators:t,parts:n}},parseDate:function(i,s,o){if(i instanceof Date)return i;if(/^[-+]\d+[dmwy]([\s,]+[-+]\d+[dmwy])*$/.test(i)){var u=/([-+]\d+)([dmwy])/,a=i.match(/([-+]\d+)([dmwy])/g),f,l;i=new Date;for(var c=0;c<a.length;c++){f=u.exec(a[c]),l=parseInt(f[1]);switch(f[2]){case"d":i.setUTCDate(i.getUTCDate()+l);break;case"m":i=n.prototype.moveMonth.call(n.prototype,i,l);break;case"w":i.setUTCDate(i.getUTCDate()+l*7);break;case"y":i=n.prototype.moveYear.call(n.prototype,i,l)}}return t(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate(),0,0,0)}var a=i&&i.match(this.nonpunctuation)||[],i=new Date,h={},p=["yyyy","yy","M","MM","m","mm","d","dd"],d={yyyy:function(e,t){return e.setUTCFullYear(t)},yy:function(e,t){return e.setUTCFullYear(2e3+t)},m:function(e,t){t-=1;while(t<0)t+=12;t%=12,e.setUTCMonth(t);while(e.getUTCMonth()!=t)e.setUTCDate(e.getUTCDate()-1);return e},d:function(e,t){return e.setUTCDate(t)}},v,m,f;d.M=d.MM=d.mm=d.m,d.dd=d.d,i=t(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate(),0,0,0);if(a.length==s.parts.length){for(var c=0,g=s.parts.length;c<g;c++){v=parseInt(a[c],10),f=s.parts[c];if(isNaN(v))switch(f){case"MM":m=e(r[o].months).filter(function(){var e=this.slice(0,a[c].length),t=a[c].slice(0,e.length);return e==t}),v=e.inArray(m[0],r[o].months)+1;break;case"M":m=e(r[o].monthsShort).filter(function(){var e=this.slice(0,a[c].length),t=a[c].slice(0,e.length);return e==t}),v=e.inArray(m[0],r[o].monthsShort)+1}h[f]=v}for(var c=0,y;c<p.length;c++)y=p[c],y in h&&d[y](i,h[y])}return i},formatDate:function(t,n,i){var s={d:t.getUTCDate(),m:t.getUTCMonth()+1,M:r[i].monthsShort[t.getUTCMonth()],MM:r[i].months[t.getUTCMonth()],yy:t.getUTCFullYear().toString().substring(2),yyyy:t.getUTCFullYear()};s.dd=(s.d<10?"0":"")+s.d,s.mm=(s.m<10?"0":"")+s.m;var t=[],o=e.extend([],n.separators);for(var u=0,a=n.parts.length;u<a;u++)o.length&&t.push(o.shift()),t.push(s[n.parts[u]]);return t.join("")},headTemplate:'<thead><tr><th class="prev"><i class="icon-arrow-left"/></th><th colspan="5" class="switch"></th><th class="next"><i class="icon-arrow-right"/></th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>'};i.template='<div class="datepicker dropdown-menu"><div class="datepicker-days"><table class=" table-condensed">'+i.headTemplate+"<tbody></tbody>"+"</table>"+"</div>"+'<div class="datepicker-months">'+'<table class="table-condensed">'+i.headTemplate+i.contTemplate+"</table>"+"</div>"+'<div class="datepicker-years">'+'<table class="table-condensed">'+i.headTemplate+i.contTemplate+"</table>"+"</div>"+"</div>"}(window.jQuery),function(e,t){function i(t,n){var r,i,o,u=t.nodeName.toLowerCase();return"area"===u?(r=t.parentNode,i=r.name,!t.href||!i||r.nodeName.toLowerCase()!=="map"?!1:(o=e("img[usemap=#"+i+"]")[0],!!o&&s(o))):(/input|select|textarea|button|object/.test(u)?!t.disabled:"a"===u?t.href||n:n)&&s(t)}function s(t){return e.expr.filters.visible(t)&&!e(t).parents().andSelf().filter(function(){return e.css(this,"visibility")==="hidden"}).length}var n=0,r=/^ui-id-\d+$/;e.ui=e.ui||{};if(e.ui.version)return;e.extend(e.ui,{version:"1.9.1",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({_focus:e.fn.focus,focus:function(t,n){return typeof t=="number"?this.each(function(){var r=this;setTimeout(function(){e(r).focus(),n&&n.call(r)},t)}):this._focus.apply(this,arguments)},scrollParent:function(){var t;return e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?t=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):t=this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(n){if(n!==t)return this.css("zIndex",n);if(this.length){var r=e(this[0]),i,s;while(r.length&&r[0]!==document){i=r.css("position");if(i==="absolute"||i==="relative"||i==="fixed"){s=parseInt(r.css("zIndex"),10);if(!isNaN(s)&&s!==0)return s}r=r.parent()}}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++n)})},removeUniqueId:function(){return this.each(function(){r.test(this.id)&&e(this).removeAttr("id")})}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(n,r){function u(t,n,r,s){return e.each(i,function(){n-=parseFloat(e.css(t,"padding"+this))||0,r&&(n-=parseFloat(e.css(t,"border"+this+"Width"))||0),s&&(n-=parseFloat(e.css(t,"margin"+this))||0)}),n}var i=r==="Width"?["Left","Right"]:["Top","Bottom"],s=r.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+r]=function(n){return n===t?o["inner"+r].call(this):this.each(function(){e(this).css(s,u(this,n)+"px")})},e.fn["outer"+r]=function(t,n){return typeof t!="number"?o["outer"+r].call(this,t):this.each(function(){e(this).css(s,u(this,t,!0,n)+"px")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,r){return!!e.data(t,r[3])},focusable:function(t){return i(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var n=e.attr(t,"tabindex"),r=isNaN(n);return(r||n>=0)&&i(t,!r)}}),e(function(){var t=document.body,n=t.appendChild(n=document.createElement("div"));n.offsetHeight,e.extend(n.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),e.support.minHeight=n.offsetHeight===100,e.support.selectstart="onselectstart"in n,t.removeChild(n).style.display="none"}),function(){var t=/msie ([\w.]+)/.exec(navigator.userAgent.toLowerCase())||[];e.ui.ie=t.length?!0:!1,e.ui.ie6=parseFloat(t[1],10)===6}(),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,n,r){var i,s=e.ui[t].prototype;for(i in r)s.plugins[i]=s.plugins[i]||[],s.plugins[i].push([n,r[i]])},call:function(e,t,n){var r,i=e.plugins[t];if(!i||!e.element[0].parentNode||e.element[0].parentNode.nodeType===11)return;for(r=0;r<i.length;r++)e.options[i[r][0]]&&i[r][1].apply(e.element,n)}},contains:e.contains,hasScroll:function(t,n){if(e(t).css("overflow")==="hidden")return!1;var r=n&&n==="left"?"scrollLeft":"scrollTop",i=!1;return t[r]>0?!0:(t[r]=1,i=t[r]>0,t[r]=0,i)},isOverAxis:function(e,t,n){return e>t&&e<t+n},isOver:function(t,n,r,i,s,o){return e.ui.isOverAxis(t,r,s)&&e.ui.isOverAxis(n,i,o)}})}(jQuery),function(e,t){var n=0,r=Array.prototype.slice,i=e.cleanData;e.cleanData=function(t){for(var n=0,r;(r=t[n])!=null;n++)try{e(r).triggerHandler("remove")}catch(s){}i(t)},e.widget=function(t,n,r){var i,s,o,u,a=t.split(".")[0];t=t.split(".")[1],i=a+"-"+t,r||(r=n,n=e.Widget),e.expr[":"][i.toLowerCase()]=function(t){return!!e.data(t,i)},e[a]=e[a]||{},s=e[a][t],o=e[a][t]=function(e,t){if(!this._createWidget)return new o(e,t);arguments.length&&this._createWidget(e,t)},e.extend(o,s,{version:r.version,_proto:e.extend({},r),_childConstructors:[]}),u=new n,u.options=e.widget.extend({},u.options),e.each(r,function(t,i){e.isFunction(i)&&(r[t]=function(){var e=function(){return n.prototype[t].apply(this,arguments)},r=function(e){return n.prototype[t].apply(this,e)};return function(){var t=this._super,n=this._superApply,s;return this._super=e,this._superApply=r,s=i.apply(this,arguments),this._super=t,this._superApply=n,s}}())}),o.prototype=e.widget.extend(u,{widgetEventPrefix:u.widgetEventPrefix||t},r,{constructor:o,namespace:a,widgetName:t,widgetBaseClass:i,widgetFullName:i}),s?(e.each(s._childConstructors,function(t,n){var r=n.prototype;e.widget(r.namespace+"."+r.widgetName,o,n._proto)}),delete s._childConstructors):n._childConstructors.push(o),e.widget.bridge(t,o)},e.widget.extend=function(n){var i=r.call(arguments,1),s=0,o=i.length,u,a;for(;s<o;s++)for(u in i[s])a=i[s][u],i[s].hasOwnProperty(u)&&a!==t&&(e.isPlainObject(a)?n[u]=e.isPlainObject(n[u])?e.widget.extend({},n[u],a):e.widget.extend({},a):n[u]=a);return n},e.widget.bridge=function(n,i){var s=i.prototype.widgetFullName;e.fn[n]=function(o){var u=typeof o=="string",a=r.call(arguments,1),f=this;return o=!u&&a.length?e.widget.extend.apply(null,[o].concat(a)):o,u?this.each(function(){var r,i=e.data(this,s);if(!i)return e.error("cannot call methods on "+n+" prior to initialization; "+"attempted to call method '"+o+"'");if(!e.isFunction(i[o])||o.charAt(0)==="_")return e.error("no such method '"+o+"' for "+n+" widget instance");r=i[o].apply(i,a);if(r!==i&&r!==t)return f=r&&r.jquery?f.pushStack(r.get()):r,!1}):this.each(function(){var t=e.data(this,s);t?t.option(o||{})._init():new i(o,this)}),f}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,r){r=e(r||this.defaultElement||this)[0],this.element=e(r),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),r!==this&&(e.data(r,this.widgetName,this),e.data(r,this.widgetFullName,this),this._on(this.element,{remove:function(e){e.target===r&&this.destroy()}}),this.document=e(r.style?r.ownerDocument:r.document||r),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(n,r){var i=n,s,o,u;if(arguments.length===0)return e.widget.extend({},this.options);if(typeof n=="string"){i={},s=n.split("."),n=s.shift();if(s.length){o=i[n]=e.widget.extend({},this.options[n]);for(u=0;u<s.length-1;u++)o[s[u]]=o[s[u]]||{},o=o[s[u]];n=s.pop();if(r===t)return o[n]===t?null:o[n];o[n]=r}else{if(r===t)return this.options[n]===t?null:this.options[n];i[n]=r}}return this._setOptions(i),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,e==="disabled"&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,n){var r,i=this;n?(t=r=e(t),this.bindings=this.bindings.add(t)):(n=t,t=this.element,r=this.widget()),e.each(n,function(n,s){function o(){if(i.options.disabled===!0||e(this).hasClass("ui-state-disabled"))return;return(typeof s=="string"?i[s]:s).apply(i,arguments)}typeof s!="string"&&(o.guid=s.guid=s.guid||o.guid||e.guid++);var u=n.match(/^(\w+)\s*(.*)$/),a=u[1]+i.eventNamespace,f=u[2];f?r.delegate(f,a,o):t.bind(a,o)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function n(){return(typeof e=="string"?r[e]:e).apply(r,arguments)}var r=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,r){var i,s,o=this.options[t];r=r||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],s=n.originalEvent;if(s)for(i in s)i in n||(n[i]=s[i]);return this.element.trigger(n,r),!(e.isFunction(o)&&o.apply(this.element[0],[n].concat(r))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(r,i,s){typeof i=="string"&&(i={effect:i});var o,u=i?i===!0||typeof i=="number"?n:i.effect||n:t;i=i||{},typeof i=="number"&&(i={duration:i}),o=!e.isEmptyObject(i),i.complete=s,i.delay&&r.delay(i.delay),o&&e.effects&&(e.effects.effect[u]||e.uiBackCompat!==!1&&e.effects[u])?r[t](i):u!==t&&r[u]?r[u](i.duration,i.easing,s):r.queue(function(n){e(this)[t](),s&&s.call(r[0]),n()})}}),e.uiBackCompat!==!1&&(e.Widget.prototype._getCreateOptions=function(){return e.metadata&&e.metadata.get(this.element[0])[this.widgetName]})}(jQuery),function(e,t){var n=!1;e(document).mouseup(function(e){n=!1}),e.widget("ui.mouse",{version:"1.9.1",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(n){if(!0===e.data(n.target,t.widgetName+".preventClickEvent"))return e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(n)return;this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var r=this,i=t.which===1,s=typeof this.options.cancel=="string"&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;if(!i||s||!this._mouseCapture(t))return!0;this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){r.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)){this._mouseStarted=this._mouseStart(t)!==!1;if(!this._mouseStarted)return t.preventDefault(),!0}return!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return r._mouseMove(e)},this._mouseUpDelegate=function(e){return r._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),n=!0,!0},_mouseMove:function(t){return!e.ui.ie||document.documentMode>=9||!!t.button?this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted):this._mouseUp(t)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(e){return this.mouseDelayMet},_mouseStart:function(e){},_mouseDrag:function(e){},_mouseStop:function(e){},_mouseCapture:function(e){return!0}})}(jQuery),function(e,t){function h(e,t,n){return[parseInt(e[0],10)*(l.test(e[0])?t/100:1),parseInt(e[1],10)*(l.test(e[1])?n/100:1)]}function p(t,n){return parseInt(e.css(t,n),10)||0}e.ui=e.ui||{};var n,r=Math.max,i=Math.abs,s=Math.round,o=/left|center|right/,u=/top|center|bottom/,a=/[\+\-]\d+%?/,f=/^\w+/,l=/%$/,c=e.fn.position;e.position={scrollbarWidth:function(){if(n!==t)return n;var r,i,s=e("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=s.children()[0];return e("body").append(s),r=o.offsetWidth,s.css("overflow","scroll"),i=o.offsetWidth,r===i&&(i=s[0].clientWidth),s.remove(),n=r-i},getScrollInfo:function(t){var n=t.isWindow?"":t.element.css("overflow-x"),r=t.isWindow?"":t.element.css("overflow-y"),i=n==="scroll"||n==="auto"&&t.width<t.element[0].scrollWidth,s=r==="scroll"||r==="auto"&&t.height<t.element[0].scrollHeight;return{width:i?e.position.scrollbarWidth():0,height:s?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var n=e(t||window),r=e.isWindow(n[0]);return{element:n,isWindow:r,offset:n.offset()||{left:0,top:0},scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:r?n.width():n.outerWidth(),height:r?n.height():n.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return c.apply(this,arguments);t=e.extend({},t);var n,l,d,v,m,g=e(t.of),y=e.position.getWithinInfo(t.within),b=e.position.getScrollInfo(y),w=g[0],E=(t.collision||"flip").split(" "),S={};return w.nodeType===9?(l=g.width(),d=g.height(),v={top:0,left:0}):e.isWindow(w)?(l=g.width(),d=g.height(),v={top:g.scrollTop(),left:g.scrollLeft()}):w.preventDefault?(t.at="left top",l=d=0,v={top:w.pageY,left:w.pageX}):(l=g.outerWidth(),d=g.outerHeight(),v=g.offset()),m=e.extend({},v),e.each(["my","at"],function(){var e=(t[this]||"").split(" "),n,r;e.length===1&&(e=o.test(e[0])?e.concat(["center"]):u.test(e[0])?["center"].concat(e):["center","center"]),e[0]=o.test(e[0])?e[0]:"center",e[1]=u.test(e[1])?e[1]:"center",n=a.exec(e[0]),r=a.exec(e[1]),S[this]=[n?n[0]:0,r?r[0]:0],t[this]=[f.exec(e[0])[0],f.exec(e[1])[0]]}),E.length===1&&(E[1]=E[0]),t.at[0]==="right"?m.left+=l:t.at[0]==="center"&&(m.left+=l/2),t.at[1]==="bottom"?m.top+=d:t.at[1]==="center"&&(m.top+=d/2),n=h(S.at,l,d),m.left+=n[0],m.top+=n[1],this.each(function(){var o,u,a=e(this),f=a.outerWidth(),c=a.outerHeight(),w=p(this,"marginLeft"),x=p(this,"marginTop"),T=f+w+p(this,"marginRight")+b.width,N=c+x+p(this,"marginBottom")+b.height,C=e.extend({},m),k=h(S.my,a.outerWidth(),a.outerHeight());t.my[0]==="right"?C.left-=f:t.my[0]==="center"&&(C.left-=f/2),t.my[1]==="bottom"?C.top-=c:t.my[1]==="center"&&(C.top-=c/2),C.left+=k[0],C.top+=k[1],e.support.offsetFractions||(C.left=s(C.left),C.top=s(C.top)),o={marginLeft:w,marginTop:x},e.each(["left","top"],function(r,i){e.ui.position[E[r]]&&e.ui.position[E[r]][i](C,{targetWidth:l,targetHeight:d,elemWidth:f,elemHeight:c,collisionPosition:o,collisionWidth:T,collisionHeight:N,offset:[n[0]+k[0],n[1]+k[1]],my:t.my,at:t.at,within:y,elem:a})}),e.fn.bgiframe&&a.bgiframe(),t.using&&(u=function(e){var n=v.left-C.left,s=n+l-f,o=v.top-C.top,u=o+d-c,h={target:{element:g,left:v.left,top:v.top,width:l,height:d},element:{element:a,left:C.left,top:C.top,width:f,height:c},horizontal:s<0?"left":n>0?"right":"center",vertical:u<0?"top":o>0?"bottom":"middle"};l<f&&i(n+s)<l&&(h.horizontal="center"),d<c&&i(o+u)<d&&(h.vertical="middle"),r(i(n),i(s))>r(i(o),i(u))?h.important="horizontal":h.important="vertical",t.using.call(this,e,h)}),a.offset(e.extend(C,{using:u}))})},e.ui.position={fit:{left:function(e,t){var n=t.within,i=n.isWindow?n.scrollLeft:n.offset.left,s=n.width,o=e.left-t.collisionPosition.marginLeft,u=i-o,a=o+t.collisionWidth-s-i,f;t.collisionWidth>s?u>0&&a<=0?(f=e.left+u+t.collisionWidth-s-i,e.left+=u-f):a>0&&u<=0?e.left=i:u>a?e.left=i+s-t.collisionWidth:e.left=i:u>0?e.left+=u:a>0?e.left-=a:e.left=r(e.left-o,e.left)},top:function(e,t){var n=t.within,i=n.isWindow?n.scrollTop:n.offset.top,s=t.within.height,o=e.top-t.collisionPosition.marginTop,u=i-o,a=o+t.collisionHeight-s-i,f;t.collisionHeight>s?u>0&&a<=0?(f=e.top+u+t.collisionHeight-s-i,e.top+=u-f):a>0&&u<=0?e.top=i:u>a?e.top=i+s-t.collisionHeight:e.top=i:u>0?e.top+=u:a>0?e.top-=a:e.top=r(e.top-o,e.top)}},flip:{left:function(e,t){var n=t.within,r=n.offset.left+n.scrollLeft,s=n.width,o=n.isWindow?n.scrollLeft:n.offset.left,u=e.left-t.collisionPosition.marginLeft,a=u-o,f=u+t.collisionWidth-s-o,l=t.my[0]==="left"?-t.elemWidth:t.my[0]==="right"?t.elemWidth:0,c=t.at[0]==="left"?t.targetWidth:t.at[0]==="right"?-t.targetWidth:0,h=-2*t.offset[0],p,d;if(a<0){p=e.left+l+c+h+t.collisionWidth-s-r;if(p<0||p<i(a))e.left+=l+c+h}else if(f>0){d=e.left-t.collisionPosition.marginLeft+l+c+h-o;if(d>0||i(d)<f)e.left+=l+c+h}},top:function(e,t){var n=t.within,r=n.offset.top+n.scrollTop,s=n.height,o=n.isWindow?n.scrollTop:n.offset.top,u=e.top-t.collisionPosition.marginTop,a=u-o,f=u+t.collisionHeight-s-o,l=t.my[1]==="top",c=l?-t.elemHeight:t.my[1]==="bottom"?t.elemHeight:0,h=t.at[1]==="top"?t.targetHeight:t.at[1]==="bottom"?-t.targetHeight:0,p=-2*t.offset[1],d,v;a<0?(v=e.top+c+h+p+t.collisionHeight-s-r,e.top+c+h+p>a&&(v<0||v<i(a))&&(e.top+=c+h+p)):f>0&&(d=e.top-t.collisionPosition.marginTop+c+h+p-o,e.top+c+h+p>f&&(d>0||i(d)<f)&&(e.top+=c+h+p))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,n,r,i,s,o=document.getElementsByTagName("body")[0],u=document.createElement("div");t=document.createElement(o?"div":"body"),r={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},o&&e.extend(r,{position:"absolute",left:"-1000px",top:"-1000px"});for(s in r)t.style[s]=r[s];t.appendChild(u),n=o||document.documentElement,n.insertBefore(t,n.firstChild),u.style.cssText="position: absolute; left: 10.7432222px;",i=e(u).offset().left,e.support.offsetFractions=i>10&&i<11,t.innerHTML="",n.removeChild(t)}(),e.uiBackCompat!==!1&&function(e){var n=e.fn.position;e.fn.position=function(r){if(!r||!r.offset)return n.call(this,r);var i=r.offset.split(" "),s=r.at.split(" ");return i.length===1&&(i[1]=i[0]),/^\d/.test(i[0])&&(i[0]="+"+i[0]),/^\d/.test(i[1])&&(i[1]="+"+i[1]),s.length===1&&(/left|center|right/.test(s[0])?s[1]="center":(s[1]=s[0],s[0]="center")),n.call(this,e.extend(r,{at:s[0]+i[0]+" "+s[1]+i[1],offset:t}))}}(jQuery)}(jQuery),function(e,t){e.widget("ui.draggable",e.ui.mouse,{version:"1.9.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){this.options.helper=="original"&&!/^(?:r|a|f)/
.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(t){var n=this.options;return this.helper||n.disabled||e(t.target).is(".ui-resizable-handle")?!1:(this.handle=this._getHandle(t),this.handle?(e(n.iframeFix===!0?"iframe":n.iframeFix).each(function(){e('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(t){var n=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),n.containment&&this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,n){this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute");if(!n){var r=this._uiHash();if(this._trigger("drag",t,r)===!1)return this._mouseUp({}),!1;this.position=r.position}if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";return e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var n=!1;e.ui.ddmanager&&!this.options.dropBehaviour&&(n=e.ui.ddmanager.drop(this,t)),this.dropped&&(n=this.dropped,this.dropped=!1);var r=this.element[0],i=!1;while(r&&(r=r.parentNode))r==document&&(i=!0);if(!i&&this.options.helper==="original")return!1;if(this.options.revert=="invalid"&&!n||this.options.revert=="valid"&&n||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)){var s=this;e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){s._trigger("stop",t)!==!1&&s._clear()})}else this._trigger("stop",t)!==!1&&this._clear();return!1},_mouseUp:function(t){return e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){var n=!this.options.handle||!e(this.options.handle,this.element).length?!0:!1;return e(this.options.handle,this.element).find("*").andSelf().each(function(){this==t.target&&(n=!0)}),n},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t])):n.helper=="clone"?this.element.clone().removeAttr("id"):this.element;return r.parents("body").length||r.appendTo(n.appendTo=="parent"?this.element[0].parentNode:n.appendTo),r[0]!=this.element[0]&&!/(fixed|absolute)/.test(r.css("position"))&&r.css("position","absolute"),r},_adjustOffsetFromHelper:function(t){typeof t=="string"&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&e.ui.ie)t={top:0,left:0};return{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t=this.options;t.containment=="parent"&&(t.containment=this.helper[0].parentNode);if(t.containment=="document"||t.containment=="window")this.containment=[t.containment=="document"?0:e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t.containment=="document"?0:e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,(t.containment=="document"?0:e(window).scrollLeft())+e(t.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(t.containment=="document"?0:e(window).scrollTop())+(e(t.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(t.containment)&&t.containment.constructor!=Array){var n=e(t.containment),r=n[0];if(!r)return;var i=n.offset(),s=e(r).css("overflow")!="hidden";this.containment=[(parseInt(e(r).css("borderLeftWidth"),10)||0)+(parseInt(e(r).css("paddingLeft"),10)||0),(parseInt(e(r).css("borderTopWidth"),10)||0)+(parseInt(e(r).css("paddingTop"),10)||0),(s?Math.max(r.scrollWidth,r.offsetWidth):r.offsetWidth)-(parseInt(e(r).css("borderLeftWidth"),10)||0)-(parseInt(e(r).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(s?Math.max(r.scrollHeight,r.offsetHeight):r.offsetHeight)-(parseInt(e(r).css("borderTopWidth"),10)||0)-(parseInt(e(r).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=n}else t.containment.constructor==Array&&(this.containment=t.containment)},_convertPositionTo:function(t,n){n||(n=this.position);var r=t=="absolute"?1:-1,i=this.options,s=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(s[0].tagName);return{top:n.top+this.offset.relative.top*r+this.offset.parent.top*r-(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():o?0:s.scrollTop())*r,left:n.left+this.offset.relative.left*r+this.offset.parent.left*r-(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():o?0:s.scrollLeft())*r}},_generatePosition:function(t){var n=this.options,r=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,i=/(html|body)/i.test(r[0].tagName),s=t.pageX,o=t.pageY;if(this.originalPosition){var u;if(this.containment){if(this.relative_container){var a=this.relative_container.offset();u=[this.containment[0]+a.left,this.containment[1]+a.top,this.containment[2]+a.left,this.containment[3]+a.top]}else u=this.containment;t.pageX-this.offset.click.left<u[0]&&(s=u[0]+this.offset.click.left),t.pageY-this.offset.click.top<u[1]&&(o=u[1]+this.offset.click.top),t.pageX-this.offset.click.left>u[2]&&(s=u[2]+this.offset.click.left),t.pageY-this.offset.click.top>u[3]&&(o=u[3]+this.offset.click.top)}if(n.grid){var f=n.grid[1]?this.originalPageY+Math.round((o-this.originalPageY)/n.grid[1])*n.grid[1]:this.originalPageY;o=u?f-this.offset.click.top<u[1]||f-this.offset.click.top>u[3]?f-this.offset.click.top<u[1]?f+n.grid[1]:f-n.grid[1]:f:f;var l=n.grid[0]?this.originalPageX+Math.round((s-this.originalPageX)/n.grid[0])*n.grid[0]:this.originalPageX;s=u?l-this.offset.click.left<u[0]||l-this.offset.click.left>u[2]?l-this.offset.click.left<u[0]?l+n.grid[0]:l-n.grid[0]:l:l}}return{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():i?0:r.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():i?0:r.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,n,r){return r=r||this._uiHash(),e.ui.plugin.call(this,t,[n,r]),t=="drag"&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,n,r)},plugins:{},_uiHash:function(e){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,n){var r=e(this).data("draggable"),i=r.options,s=e.extend({},n,{item:r.element});r.sortables=[],e(i.connectToSortable).each(function(){var n=e.data(this,"sortable");n&&!n.options.disabled&&(r.sortables.push({instance:n,shouldRevert:n.options.revert}),n.refreshPositions(),n._trigger("activate",t,s))})},stop:function(t,n){var r=e(this).data("draggable"),i=e.extend({},n,{item:r.element});e.each(r.sortables,function(){this.instance.isOver?(this.instance.isOver=0,r.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,r.options.helper=="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,i))})},drag:function(t,n){var r=e(this).data("draggable"),i=this,s=function(t){var n=this.offset.click.top,r=this.offset.click.left,i=this.positionAbs.top,s=this.positionAbs.left,o=t.height,u=t.width,a=t.top,f=t.left;return e.ui.isOver(i+n,s+r,a,f,o,u)};e.each(r.sortables,function(s){var o=!1,u=this;this.instance.positionAbs=r.positionAbs,this.instance.helperProportions=r.helperProportions,this.instance.offset.click=r.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(o=!0,e.each(r.sortables,function(){return this.instance.positionAbs=r.positionAbs,this.instance.helperProportions=r.helperProportions,this.instance.offset.click=r.offset.click,this!=u&&this.instance._intersectsWith(this.instance.containerCache)&&e.ui.contains(u.instance.element[0],this.instance.element[0])&&(o=!1),o})),o?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(i).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return n.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=r.offset.click.top,this.instance.offset.click.left=r.offset.click.left,this.instance.offset.parent.left-=r.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=r.offset.parent.top-this.instance.offset.parent.top,r._trigger("toSortable",t),r.dropped=this.instance.element,r.currentItem=r.element,this.instance.fromOutside=r),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),r._trigger("fromSortable",t),r.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(t,n){var r=e("body"),i=e(this).data("draggable").options;r.css("cursor")&&(i._cursor=r.css("cursor")),r.css("cursor",i.cursor)},stop:function(t,n){var r=e(this).data("draggable").options;r._cursor&&e("body").css("cursor",r._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,n){var r=e(n.helper),i=e(this).data("draggable").options;r.css("opacity")&&(i._opacity=r.css("opacity")),r.css("opacity",i.opacity)},stop:function(t,n){var r=e(this).data("draggable").options;r._opacity&&e(n.helper).css("opacity",r._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(t,n){var r=e(this).data("draggable");r.scrollParent[0]!=document&&r.scrollParent[0].tagName!="HTML"&&(r.overflowOffset=r.scrollParent.offset())},drag:function(t,n){var r=e(this).data("draggable"),i=r.options,s=!1;if(r.scrollParent[0]!=document&&r.scrollParent[0].tagName!="HTML"){if(!i.axis||i.axis!="x")r.overflowOffset.top+r.scrollParent[0].offsetHeight-t.pageY<i.scrollSensitivity?r.scrollParent[0].scrollTop=s=r.scrollParent[0].scrollTop+i.scrollSpeed:t.pageY-r.overflowOffset.top<i.scrollSensitivity&&(r.scrollParent[0].scrollTop=s=r.scrollParent[0].scrollTop-i.scrollSpeed);if(!i.axis||i.axis!="y")r.overflowOffset.left+r.scrollParent[0].offsetWidth-t.pageX<i.scrollSensitivity?r.scrollParent[0].scrollLeft=s=r.scrollParent[0].scrollLeft+i.scrollSpeed:t.pageX-r.overflowOffset.left<i.scrollSensitivity&&(r.scrollParent[0].scrollLeft=s=r.scrollParent[0].scrollLeft-i.scrollSpeed)}else{if(!i.axis||i.axis!="x")t.pageY-e(document).scrollTop()<i.scrollSensitivity?s=e(document).scrollTop(e(document).scrollTop()-i.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<i.scrollSensitivity&&(s=e(document).scrollTop(e(document).scrollTop()+i.scrollSpeed));if(!i.axis||i.axis!="y")t.pageX-e(document).scrollLeft()<i.scrollSensitivity?s=e(document).scrollLeft(e(document).scrollLeft()-i.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<i.scrollSensitivity&&(s=e(document).scrollLeft(e(document).scrollLeft()+i.scrollSpeed))}s!==!1&&e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(r,t)}}),e.ui.plugin.add("draggable","snap",{start:function(t,n){var r=e(this).data("draggable"),i=r.options;r.snapElements=[],e(i.snap.constructor!=String?i.snap.items||":data(draggable)":i.snap).each(function(){var t=e(this),n=t.offset();this!=r.element[0]&&r.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:n.top,left:n.left})})},drag:function(t,n){var r=e(this).data("draggable"),i=r.options,s=i.snapTolerance,o=n.offset.left,u=o+r.helperProportions.width,a=n.offset.top,f=a+r.helperProportions.height;for(var l=r.snapElements.length-1;l>=0;l--){var c=r.snapElements[l].left,h=c+r.snapElements[l].width,p=r.snapElements[l].top,d=p+r.snapElements[l].height;if(!(c-s<o&&o<h+s&&p-s<a&&a<d+s||c-s<o&&o<h+s&&p-s<f&&f<d+s||c-s<u&&u<h+s&&p-s<a&&a<d+s||c-s<u&&u<h+s&&p-s<f&&f<d+s)){r.snapElements[l].snapping&&r.options.snap.release&&r.options.snap.release.call(r.element,t,e.extend(r._uiHash(),{snapItem:r.snapElements[l].item})),r.snapElements[l].snapping=!1;continue}if(i.snapMode!="inner"){var v=Math.abs(p-f)<=s,m=Math.abs(d-a)<=s,g=Math.abs(c-u)<=s,y=Math.abs(h-o)<=s;v&&(n.position.top=r._convertPositionTo("relative",{top:p-r.helperProportions.height,left:0}).top-r.margins.top),m&&(n.position.top=r._convertPositionTo("relative",{top:d,left:0}).top-r.margins.top),g&&(n.position.left=r._convertPositionTo("relative",{top:0,left:c-r.helperProportions.width}).left-r.margins.left),y&&(n.position.left=r._convertPositionTo("relative",{top:0,left:h}).left-r.margins.left)}var b=v||m||g||y;if(i.snapMode!="outer"){var v=Math.abs(p-a)<=s,m=Math.abs(d-f)<=s,g=Math.abs(c-o)<=s,y=Math.abs(h-u)<=s;v&&(n.position.top=r._convertPositionTo("relative",{top:p,left:0}).top-r.margins.top),m&&(n.position.top=r._convertPositionTo("relative",{top:d-r.helperProportions.height,left:0}).top-r.margins.top),g&&(n.position.left=r._convertPositionTo("relative",{top:0,left:c}).left-r.margins.left),y&&(n.position.left=r._convertPositionTo("relative",{top:0,left:h-r.helperProportions.width}).left-r.margins.left)}!r.snapElements[l].snapping&&(v||m||g||y||b)&&r.options.snap.snap&&r.options.snap.snap.call(r.element,t,e.extend(r._uiHash(),{snapItem:r.snapElements[l].item})),r.snapElements[l].snapping=v||m||g||y||b}}}),e.ui.plugin.add("draggable","stack",{start:function(t,n){var r=e(this).data("draggable").options,i=e.makeArray(e(r.stack)).sort(function(t,n){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(n).css("zIndex"),10)||0)});if(!i.length)return;var s=parseInt(i[0].style.zIndex)||0;e(i).each(function(e){this.style.zIndex=s+e}),this[0].style.zIndex=s+i.length}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,n){var r=e(n.helper),i=e(this).data("draggable").options;r.css("zIndex")&&(i._zIndex=r.css("zIndex")),r.css("zIndex",i.zIndex)},stop:function(t,n){var r=e(this).data("draggable").options;r._zIndex&&e(n.helper).css("zIndex",r._zIndex)}})}(jQuery),function(e,t){e.widget("ui.droppable",{version:"1.9.1",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var t=this.options,n=t.accept;this.isover=0,this.isout=1,this.accept=e.isFunction(n)?n:function(e){return e.is(n)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},e.ui.ddmanager.droppables[t.scope]=e.ui.ddmanager.droppables[t.scope]||[],e.ui.ddmanager.droppables[t.scope].push(this),t.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){var t=e.ui.ddmanager.droppables[this.options.scope];for(var n=0;n<t.length;n++)t[n]==this&&t.splice(n,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(t,n){t=="accept"&&(this.accept=e.isFunction(n)?n:function(e){return e.is(n)}),e.Widget.prototype._setOption.apply(this,arguments)},_activate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),n&&this._trigger("activate",t,this.ui(n))},_deactivate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),n&&this._trigger("deactivate",t,this.ui(n))},_over:function(t){var n=e.ui.ddmanager.current;if(!n||(n.currentItem||n.element)[0]==this.element[0])return;this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(n)))},_out:function(t){var n=e.ui.ddmanager.current;if(!n||(n.currentItem||n.element)[0]==this.element[0])return;this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(n)))},_drop:function(t,n){var r=n||e.ui.ddmanager.current;if(!r||(r.currentItem||r.element)[0]==this.element[0])return!1;var i=!1;return this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var t=e.data(this,"droppable");if(t.options.greedy&&!t.options.disabled&&t.options.scope==r.options.scope&&t.accept.call(t.element[0],r.currentItem||r.element)&&e.ui.intersect(r,e.extend(t,{offset:t.element.offset()}),t.options.tolerance))return i=!0,!1}),i?!1:this.accept.call(this.element[0],r.currentItem||r.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(r)),this.element):!1},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.ui.intersect=function(t,n,r){if(!n.offset)return!1;var i=(t.positionAbs||t.position.absolute).left,s=i+t.helperProportions.width,o=(t.positionAbs||t.position.absolute).top,u=o+t.helperProportions.height,a=n.offset.left,f=a+n.proportions.width,l=n.offset.top,c=l+n.proportions.height;switch(r){case"fit":return a<=i&&s<=f&&l<=o&&u<=c;case"intersect":return a<i+t.helperProportions.width/2&&s-t.helperProportions.width/2<f&&l<o+t.helperProportions.height/2&&u-t.helperProportions.height/2<c;case"pointer":var h=(t.positionAbs||t.position.absolute).left+(t.clickOffset||t.offset.click).left,p=(t.positionAbs||t.position.absolute).top+(t.clickOffset||t.offset.click).top,d=e.ui.isOver(p,h,l,a,n.proportions.height,n.proportions.width);return d;case"touch":return(o>=l&&o<=c||u>=l&&u<=c||o<l&&u>c)&&(i>=a&&i<=f||s>=a&&s<=f||i<a&&s>f);default:return!1}},e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,n){var r=e.ui.ddmanager.droppables[t.options.scope]||[],i=n?n.type:null,s=(t.currentItem||t.element).find(":data(droppable)").andSelf();e:for(var o=0;o<r.length;o++){if(r[o].options.disabled||t&&!r[o].accept.call(r[o].element[0],t.currentItem||t.element))continue;for(var u=0;u<s.length;u++)if(s[u]==r[o].element[0]){r[o].proportions.height=0;continue e}r[o].visible=r[o].element.css("display")!="none";if(!r[o].visible)continue;i=="mousedown"&&r[o]._activate.call(r[o],n),r[o].offset=r[o].element.offset(),r[o].proportions={width:r[o].element[0].offsetWidth,height:r[o].element[0].offsetHeight}}},drop:function(t,n){var r=!1;return e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options)return;!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance)&&(r=this._drop.call(this,n)||r),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,n))}),r},dragStart:function(t,n){t.element.parentsUntil("body").bind("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)})},drag:function(t,n){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,n),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(this.options.disabled||this.greedyChild||!this.visible)return;var r=e.ui.intersect(t,this,this.options.tolerance),i=!r&&this.isover==1?"isout":r&&this.isover==0?"isover":null;if(!i)return;var s;if(this.options.greedy){var o=this.options.scope,u=this.element.parents(":data(droppable)").filter(function(){return e.data(this,"droppable").options.scope===o});u.length&&(s=e.data(u[0],"droppable"),s.greedyChild=i=="isover"?1:0)}s&&i=="isover"&&(s.isover=0,s.isout=1,s._out.call(s,n)),this[i]=1,this[i=="isout"?"isover":"isout"]=0,this[i=="isover"?"_over":"_out"].call(this,n),s&&i=="isout"&&(s.isout=0,s.isover=1,s._over.call(s,n))})},dragStop:function(t,n){t.element.parentsUntil("body").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)}}}(jQuery),function(e,t){e.widget("ui.sortable",e.ui.mouse,{version:"1.9.1",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?e.axis==="x"||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_setOption:function(t,n){t==="disabled"?(this.options[t]=n,this.widget().toggleClass("ui-sortable-disabled",!!n)):e.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,n){var r=this;if(this.reverting)return!1;if(this.options.disabled||this.options.type=="static")return!1;this._refreshItems(t);var i=null,s=e(t.target).parents().each(function(){if(e.data(this,r.widgetName+"-item")==r)return i=e(this),!1});e.data(t.target,r.widgetName+"-item")==r&&(i=e(t.target));if(!i)return!1;if(this.options.handle&&!n){var o=!1;e(this.options.handle,i).find("*").andSelf().each(function(){this==t.target&&(o=!0)});if(!o)return!1}return this.currentItem=i,this._removeCurrentsFromItems(),!0},_mouseStart:function(t,n,r){var i=this.options;this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),i.containment&&this._setContainment(),i.cursor&&(e("body").css("cursor")&&(this._storedCursor=e("body").css("cursor")),e("body").css("cursor",i.cursor)),i.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",i.opacity)),i.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",i.zIndex)),this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions();if(!r)for(var s=this.containers.length-1;s>=0;s--)this.containers[s]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs);if(this.options.scroll){var n=this.options,r=!1;this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<n.scrollSensitivity?this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop+n.scrollSpeed:t.pageY-this.overflowOffset.top<n.scrollSensitivity&&(this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop-n.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<n.scrollSensitivity?this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft+n.scrollSpeed:t.pageX-this.overflowOffset.left<n.scrollSensitivity&&(this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft-n.scrollSpeed)):(t.pageY-e(document).scrollTop()<n.scrollSensitivity?r=e(document).scrollTop(e(document).scrollTop()-n.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<n.scrollSensitivity&&(r=e(document).scrollTop(e(document).scrollTop()+n.scrollSpeed)),t.pageX-e(document).scrollLeft()<n.scrollSensitivity?r=e(document).scrollLeft(e(document).scrollLeft()-n.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<n.scrollSensitivity&&(r=e(document).scrollLeft(e(document).scrollLeft()+n.scrollSpeed))),r!==!1&&e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";for(var i=this.items.length-1;i>=0;i--){var s=this.items[i],o=s.item[0],u=this._intersectsWithPointer(s);if(!u)continue;if(s.instance!==this.currentContainer)continue;if(o!=this.currentItem[0]&&this.placeholder[u==1?"next":"prev"]()[0]!=o&&!e.contains(this.placeholder[0],o)&&(this.options.type=="semi-dynamic"?!e.contains(this.element[0],o):!0)){this.direction=u==1?"down":"up";if(this.options.tolerance!="pointer"&&!this._intersectsWithSides(s))break;this._rearrange(t,s),this._trigger("change",t,this._uiHash());break}}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,n){if(!t)return;e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t);if(this.options.revert){var r=this,i=this.placeholder.offset();this.reverting=!0,e(this.helper).animate({left:i.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:i.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){r._clear(t)})}else this._clear(t,n);return!1},cancel:function(){if(this.dragging){this._mouseUp({target:null}),this.options.helper=="original"?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.options.helper!="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var n=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},e(n).each(function(){var n=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[-=_](.+)/);n&&r.push((t.key||n[1]+"[]")+"="+(t.key&&t.expression?n[1]:n[2]))}),!r.length&&t.key&&r.push(t.key+"="),r.join("&")},toArray:function(t){var n=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},n.each(function(){r.push(e(t.item||this).attr(t.attribute||"id")||"")}),r},_intersectsWith:function(e){var t=this.positionAbs.left,n=t+this.helperProportions.width,r=this.positionAbs.top,i=r+this.helperProportions.height,s=e.left,o=s+e.width,u=e.top,a=u+e.height,f=this.offset.click.top,l=this.offset.click.left,c=r+f>u&&r+f<a&&t+l>s&&t+l<o;return this.options.tolerance=="pointer"||this.options.forcePointerForContainers||this.options.tolerance!="pointer"&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?c:s<t+this.helperProportions.width/2&&n-this.helperProportions.width/2<o&&u<r+this.helperProportions.height/2&&i-this.helperProportions.height/2<a},_intersectsWithPointer:function(t){var n=this.options.axis==="x"||e.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),r=this.options.axis==="y"||e.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width),i=n&&r,s=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return i?this.floating?o&&o=="right"||s=="down"?2:1:s&&(s=="down"?2:1):!1},_intersectsWithSides:function(t){var n=e.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),r=e.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),i=this._getDragVerticalDirection
(),s=this._getDragHorizontalDirection();return this.floating&&s?s=="right"&&r||s=="left"&&!r:i&&(i=="down"&&n||i=="up"&&!n)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return e!=0&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return e!=0&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor==String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){var n=[],r=[],i=this._connectWith();if(i&&t)for(var s=i.length-1;s>=0;s--){var o=e(i[s]);for(var u=o.length-1;u>=0;u--){var a=e.data(o[u],this.widgetName);a&&a!=this&&!a.options.disabled&&r.push([e.isFunction(a.options.items)?a.options.items.call(a.element):e(a.options.items,a.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),a])}}r.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(var s=r.length-1;s>=0;s--)r[s][0].each(function(){n.push(this)});return e(n)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var n=0;n<t.length;n++)if(t[n]==e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var n=this.items,r=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],i=this._connectWith();if(i&&this.ready)for(var s=i.length-1;s>=0;s--){var o=e(i[s]);for(var u=o.length-1;u>=0;u--){var a=e.data(o[u],this.widgetName);a&&a!=this&&!a.options.disabled&&(r.push([e.isFunction(a.options.items)?a.options.items.call(a.element[0],t,{item:this.currentItem}):e(a.options.items,a.element),a]),this.containers.push(a))}}for(var s=r.length-1;s>=0;s--){var f=r[s][1],l=r[s][0];for(var u=0,c=l.length;u<c;u++){var h=e(l[u]);h.data(this.widgetName+"-item",f),n.push({item:h,instance:f,width:0,height:0,left:0,top:0})}}},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var n=this.items.length-1;n>=0;n--){var r=this.items[n];if(r.instance!=this.currentContainer&&this.currentContainer&&r.item[0]!=this.currentItem[0])continue;var i=this.options.toleranceElement?e(this.options.toleranceElement,r.item):r.item;t||(r.width=i.outerWidth(),r.height=i.outerHeight());var s=i.offset();r.left=s.left,r.top=s.top}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(var n=this.containers.length-1;n>=0;n--){var s=this.containers[n].element.offset();this.containers[n].containerCache.left=s.left,this.containers[n].containerCache.top=s.top,this.containers[n].containerCache.width=this.containers[n].element.outerWidth(),this.containers[n].containerCache.height=this.containers[n].element.outerHeight()}return this},_createPlaceholder:function(t){t=t||this;var n=t.options;if(!n.placeholder||n.placeholder.constructor==String){var r=n.placeholder;n.placeholder={element:function(){var n=e(document.createElement(t.currentItem[0].nodeName)).addClass(r||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return r||(n.style.visibility="hidden"),n},update:function(e,i){if(r&&!n.forcePlaceholderSize)return;i.height()||i.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),i.width()||i.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10))}}}t.placeholder=e(n.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),n.placeholder.update(t,t.placeholder)},_contactContainers:function(t){var n=null,r=null;for(var i=this.containers.length-1;i>=0;i--){if(e.contains(this.currentItem[0],this.containers[i].element[0]))continue;if(this._intersectsWith(this.containers[i].containerCache)){if(n&&e.contains(this.containers[i].element[0],n.element[0]))continue;n=this.containers[i],r=i}else this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",t,this._uiHash(this)),this.containers[i].containerCache.over=0)}if(!n)return;if(this.containers.length===1)this.containers[r]._trigger("over",t,this._uiHash(this)),this.containers[r].containerCache.over=1;else{var s=1e4,o=null,u=this.containers[r].floating?"left":"top",a=this.containers[r].floating?"width":"height",f=this.positionAbs[u]+this.offset.click[u];for(var l=this.items.length-1;l>=0;l--){if(!e.contains(this.containers[r].element[0],this.items[l].item[0]))continue;if(this.items[l].item[0]==this.currentItem[0])continue;var c=this.items[l].item.offset()[u],h=!1;Math.abs(c-f)>Math.abs(c+this.items[l][a]-f)&&(h=!0,c+=this.items[l][a]),Math.abs(c-f)<s&&(s=Math.abs(c-f),o=this.items[l],this.direction=h?"up":"down")}if(!o&&!this.options.dropOnEmpty)return;this.currentContainer=this.containers[r],o?this._rearrange(t,o,null,!0):this._rearrange(t,null,this.containers[r].element,!0),this._trigger("change",t,this._uiHash()),this.containers[r]._trigger("change",t,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[r]._trigger("over",t,this._uiHash(this)),this.containers[r].containerCache.over=1}},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t,this.currentItem])):n.helper=="clone"?this.currentItem.clone():this.currentItem;return r.parents("body").length||e(n.appendTo!="parent"?n.appendTo:this.currentItem[0].parentNode)[0].appendChild(r[0]),r[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(r[0].style.width==""||n.forceHelperSize)&&r.width(this.currentItem.width()),(r[0].style.height==""||n.forceHelperSize)&&r.height(this.currentItem.height()),r},_adjustOffsetFromHelper:function(t){typeof t=="string"&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&e.ui.ie)t={top:0,left:0};return{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t=this.options;t.containment=="parent"&&(t.containment=this.helper[0].parentNode);if(t.containment=="document"||t.containment=="window")this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e(t.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(e(t.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(t.containment)){var n=e(t.containment)[0],r=e(t.containment).offset(),i=e(n).css("overflow")!="hidden";this.containment=[r.left+(parseInt(e(n).css("borderLeftWidth"),10)||0)+(parseInt(e(n).css("paddingLeft"),10)||0)-this.margins.left,r.top+(parseInt(e(n).css("borderTopWidth"),10)||0)+(parseInt(e(n).css("paddingTop"),10)||0)-this.margins.top,r.left+(i?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(e(n).css("borderLeftWidth"),10)||0)-(parseInt(e(n).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,r.top+(i?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(e(n).css("borderTopWidth"),10)||0)-(parseInt(e(n).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(t,n){n||(n=this.position);var r=t=="absolute"?1:-1,i=this.options,s=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(s[0].tagName);return{top:n.top+this.offset.relative.top*r+this.offset.parent.top*r-(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():o?0:s.scrollTop())*r,left:n.left+this.offset.relative.left*r+this.offset.parent.left*r-(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():o?0:s.scrollLeft())*r}},_generatePosition:function(t){var n=this.options,r=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,i=/(html|body)/i.test(r[0].tagName);this.cssPosition=="relative"&&(this.scrollParent[0]==document||this.scrollParent[0]==this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset());var s=t.pageX,o=t.pageY;if(this.originalPosition){this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(s=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(s=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top));if(n.grid){var u=this.originalPageY+Math.round((o-this.originalPageY)/n.grid[1])*n.grid[1];o=this.containment?u-this.offset.click.top<this.containment[1]||u-this.offset.click.top>this.containment[3]?u-this.offset.click.top<this.containment[1]?u+n.grid[1]:u-n.grid[1]:u:u;var a=this.originalPageX+Math.round((s-this.originalPageX)/n.grid[0])*n.grid[0];s=this.containment?a-this.offset.click.left<this.containment[0]||a-this.offset.click.left>this.containment[2]?a-this.offset.click.left<this.containment[0]?a+n.grid[0]:a-n.grid[0]:a:a}}return{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():i?0:r.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():i?0:r.scrollLeft())}},_rearrange:function(e,t,n,r){n?n[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],this.direction=="down"?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var i=this.counter;this._delay(function(){i==this.counter&&this.refreshPositions(!r)})},_clear:function(t,n){this.reverting=!1;var r=[];!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var i in this._storedCSS)if(this._storedCSS[i]=="auto"||this._storedCSS[i]=="static")this._storedCSS[i]="";this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!n&&r.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),(this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!n&&r.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(n||(r.push(function(e){this._trigger("remove",e,this._uiHash())}),r.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),r.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer))));for(var i=this.containers.length-1;i>=0;i--)n||r.push(function(e){return function(t){e._trigger("deactivate",t,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over&&(r.push(function(e){return function(t){e._trigger("out",t,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over=0);this._storedCursor&&e("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex",this._storedZIndex=="auto"?"":this._storedZIndex),this.dragging=!1;if(this.cancelHelperRemoval){if(!n){this._trigger("beforeStop",t,this._uiHash());for(var i=0;i<r.length;i++)r[i].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!1}n||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null;if(!n){for(var i=0;i<r.length;i++)r[i].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var n=t||this;return{helper:n.helper,placeholder:n.placeholder||e([]),position:n.position,originalPosition:n.originalPosition,offset:n.positionAbs,item:n.currentItem,sender:t?t.element:null}}})}(jQuery),function(e,t){var n=0;e.widget("ui.autocomplete",{version:"1.9.1",defaultElement:"<input>",options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var t,n,r;this.isMultiLine=this._isMultiLine(),this.valueMethod=this.element[this.element.is("input,textarea")?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(i){if(this.element.prop("readOnly")){t=!0,r=!0,n=!0;return}t=!1,r=!1,n=!1;var s=e.ui.keyCode;switch(i.keyCode){case s.PAGE_UP:t=!0,this._move("previousPage",i);break;case s.PAGE_DOWN:t=!0,this._move("nextPage",i);break;case s.UP:t=!0,this._keyEvent("previous",i);break;case s.DOWN:t=!0,this._keyEvent("next",i);break;case s.ENTER:case s.NUMPAD_ENTER:this.menu.active&&(t=!0,i.preventDefault(),this.menu.select(i));break;case s.TAB:this.menu.active&&this.menu.select(i);break;case s.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(i),i.preventDefault());break;default:n=!0,this._searchTimeout(i)}},keypress:function(r){if(t){t=!1,r.preventDefault();return}if(n)return;var i=e.ui.keyCode;switch(r.keyCode){case i.PAGE_UP:this._move("previousPage",r);break;case i.PAGE_DOWN:this._move("nextPage",r);break;case i.UP:this._keyEvent("previous",r);break;case i.DOWN:this._keyEvent("next",r)}},input:function(e){if(r){r=!1,e.preventDefault();return}this._searchTimeout(e)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){if(this.cancelBlur){delete this.cancelBlur;return}clearTimeout(this.searching),this.close(e),this._change(e)}}),this._initSource(),this.menu=e("<ul>").addClass("ui-autocomplete").appendTo(this.document.find(this.options.appendTo||"body")[0]).menu({input:e(),role:null}).zIndex(this.element.zIndex()+1).hide().data("menu"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var n=this.menu.element[0];e(t.target).closest(".ui-menu-item").length||this._delay(function(){var t=this;this.document.one("mousedown",function(r){r.target!==t.element[0]&&r.target!==n&&!e.contains(n,r.target)&&t.close()})})},menufocus:function(t,n){if(this.isNewMenu){this.isNewMenu=!1;if(t.originalEvent&&/^mouse/.test(t.originalEvent.type)){this.menu.blur(),this.document.one("mousemove",function(){e(t.target).trigger(t.originalEvent)});return}}var r=n.item.data("ui-autocomplete-item")||n.item.data("item.autocomplete");!1!==this._trigger("focus",t,{item:r})?t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(r.value):this.liveRegion.text(r.value)},menuselect:function(e,t){var n=t.item.data("ui-autocomplete-item")||t.item.data("item.autocomplete"),r=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=r,this._delay(function(){this.previous=r,this.selectedItem=n})),!1!==this._trigger("select",e,{item:n})&&this._value(n.value),this.term=this._value(),this.close(e),this.selectedItem=n}}),this.liveRegion=e("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertAfter(this.element),e.fn.bgiframe&&this.menu.element.bgiframe(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),e==="source"&&this._initSource(),e==="appendTo"&&this.menu.element.appendTo(this.document.find(t||"body")[0]),e==="disabled"&&t&&this.xhr&&this.xhr.abort()},_isMultiLine:function(){return this.element.is("textarea")?!0:this.element.is("input")?!1:this.element.prop("isContentEditable")},_initSource:function(){var t,n,r=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(n,r){r(e.ui.autocomplete.filter(t,n.term))}):typeof this.options.source=="string"?(n=this.options.source,this.source=function(t,i){r.xhr&&r.xhr.abort(),r.xhr=e.ajax({url:n,data:t,dataType:"json",success:function(e){i(e)},error:function(){i([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,e))},this.options.delay)},search:function(e,t){e=e!=null?e:this._value(),this.term=this._value();if(e.length<this.options.minLength)return this.close(t);if(this._trigger("search",t)===!1)return;return this._search(e)},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var e=this,t=++n;return function(r){t===n&&e.__response(r),e.pending--,e.pending||e.element.removeClass("ui-autocomplete-loading")}},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return typeof t=="string"?{label:t,value:t}:e.extend({label:t.label||t.value,value:t.value||t.label},t)})},_suggest:function(t){var n=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(n,t),this.menu.refresh(),n.show(),this._resizeMenu(),n.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,n){var r=this;e.each(n,function(e,n){r._renderItemData(t,n)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,n){return e("<li>").append(e("<a>").text(n.label)).appendTo(t)},_move:function(e,t){if(!this.menu.element.is(":visible")){this.search(null,t);return}if(this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)){this._value(this.term),this.menu.blur();return}this.menu[e](t)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){if(!this.isMultiLine||this.menu.element.is(":visible"))this._move(e,t),t.preventDefault()}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,n){var r=new RegExp(e.ui.autocomplete.escapeRegex(n),"i");return e.grep(t,function(e){return r.test(e.label||e.value||e)})}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var t;this._superApply(arguments);if(this.options.disabled||this.cancelSearch)return;e&&e.length?t=this.options.messages.results(e.length):t=this.options.messages.noResults,this.liveRegion.text(t)}})}(jQuery),function(e,t){var n=!1;e.widget("ui.menu",{version:"1.9.1",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,e.proxy(function(e){this.options.disabled&&e.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(e){e.preventDefault()},"click .ui-state-disabled > a":function(e){e.preventDefault()},"click .ui-menu-item:has(a)":function(t){var r=e(t.target).closest(".ui-menu-item");!n&&r.not(".ui-state-disabled").length&&(n=!0,this.select(t),r.has(".ui-menu").length?this.expand(t):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&this.active.parents(".ui-menu").length===1&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){var n=e(t.currentTarget);n.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(t,n)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var n=this.active||this.element.children(".ui-menu-item").eq(0);t||this.focus(e,n)},blur:function(t){this._delay(function(){e.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(t)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(t){e(t.target).closest(".ui-menu").length||this.collapseAll(t),n=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").andSelf().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var t=e(this);t.data("ui-menu-submenu-carat")&&t.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(t){function a(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var n,r,i,s,o,u=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:u=!1,r=this.previousFilter||"",i=String.fromCharCode(t.keyCode),s=!1,clearTimeout(this.filterTimer),i===r?s=!0:i=r+i,o=new RegExp("^"+a(i),"i"),n=this.activeMenu.children(".ui-menu-item").filter(function(){return o.test(e(this).children("a").text())}),n=s&&n.index(this.active.next())!==-1?this.active.nextAll(".ui-menu-item"):n,n.length||(i=String.fromCharCode(t.keyCode),o=new RegExp("^"+a(i),"i"),n=this.activeMenu.children(".ui-menu-item").filter(function(){return o.test(e(this).children("a").text())})),n.length?(this.focus(t,n),n.length>1?(this.previousFilter=i,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}u&&t.preventDefault()},_activate:function(e){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(e):this.select(e))},refresh:function(){var t,n=this.options.icons.submenu,r=this.element.find(this.options.menus+":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"});t=r.add(this.element),t.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),t.children(":not(.ui-menu-item)").each(function(){var t=e(this);/[^\-ââ\s]/.test(t.text())||t.addClass("ui-widget-content ui-menu-divider")}),t.children(".ui-state-disabled").attr("aria-disabled","true"),r.each(function(){var t=e(this),r=t.prev("a"),i=e("<span>").addClass("ui-menu-icon ui-icon "+n).data("ui-menu-submenu-carat",!0);r.attr("aria-haspopup","true").prepend(i),t.attr("aria-labelledby",r.attr("id"))}),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},focus:function(e,t){var n,r;this.blur(e,e&&e.type==="focus"),this._scrollIntoView(t),this.active=t.first(),r=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",r.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),e&&e.type==="keydown"?this._close():this.timer=this._delay(function(){this._close()},this.delay),n=t.children(".ui-menu"),n.length&&/^mouse/.test(e.type)&&this._startOpening(n),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var n,r,i,s,o,u;this._hasScroll()&&(n=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,r=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,i=t.offset().top-this.activeMenu.offset().top-n-r,s=this.activeMenu.scrollTop(),o=this.activeMenu.height(),u=t.height(),i<0?this.activeMenu.scrollTop(s+i):i+u>o&&this.activeMenu.scrollTop(s+i-o+u))},blur:function(e,t){t||clearTimeout(this.timer);if(!this.active)return;this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",e,{item:this.active})},_startOpening:function(e){clearTimeout(this.timer);if(e.attr("aria-hidden")!=="true")return;this.timer=this._delay(function(){this._close(),this._open(e)},this.delay)},_open:function(t){var n=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(n)},collapseAll:function(t,n){clearTimeout(this.timer),this.timer=this._delay(function(){var r=n?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));r.length||(r=this.element),this._close(r),this.blur(t),this.activeMenu=r},this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(e,t)}))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,n){var r;this.active&&(e==="first"||e==="last"?r=this.active[e==="first"?"prevAll":"nextAll"](".ui-menu-item").eq(-1):r=this.active[e+"All"](".ui-menu-item").eq(0));if(!r||!r.length||!this.active)r=this.activeMenu.children(".ui-menu-item")[t]();this.focus(n,r)},nextPage:function(t){var n,r,i;if(!this.active){this.next(t);return}if(this.isLastItem())return;this._hasScroll()?(r=this.active.offset().top,i=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return n=e(this),n.offset().top-r-i<0}),this.focus(t,n)):this.focus(t,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]())},previousPage:function(t){var n,r,i;if(!this.active){this.next(t);return}if(this.isFirstItem())return;this._hasScroll()?(r=this.active.offset().top,i=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return n=e(this),n.offset().top-r+i>0}),this.focus(t,n)):this.focus(t,this.activeMenu.children(".ui-menu-item").first())},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var n={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,n)}})}(jQuery),spud={admin:{}},$(document).ready(function(){typeof window.console=="undefined"&&(window.console={log:function(){},warn:function(){},error:function(){}}),spud.admin.editor.init(),$("#modal_window .modal-footer .form-submit").bind("click",function(){$("#modal_window .modal-body form").submit()}),$("#modal_window ").on("hidden",function(){$(this).find(".modal-footer-additional").remove(),$(this).find(".modal-footer-default").show(),$(this).removeData("modal")}),$("body").on("click","a.ajax",function(){var e=this.href,t=this.title,n=$("#modal_window");return $("#modal_window .modal-title").text(t),n.modal({remote:e+".js",show:!0}),!1}),$("body").on("ajax:success",'a[data-method="delete"]',function(e,t,n){$(this).closest("tr").fadeOut()}),$("a.button").button(),$("input[type=submit].btn").click(function(){$(this).button("loading")}),$("#multisite_switcher select").change(function(){$(this).parent().submit()})}),Spud=typeof Spud=="undefined"?{}:Spud,Spud.Admin=typeof Spud.Admin=="undefined"?{}:Spud.Admin,Spud.Admin.Dashboard=new function(){var e=this;e.editMode=!1,e.mouseIsDown=!1,e.init=function(){$(".admin_application").bind("mousedown",e.mouseDown),$(".admin_application").bind("mouseup",e.mouseUp),$(".admin_application").bind("click",e.mouseClick),$("#dashboard-editsave").click(e.saveDashboard),$("#dashboard-editcancel").click(e.cancelDashboard),$(".sortable").sortable({disabled:!0})},e.mouseDown=function(){e.mouseIsDown=!0,e.editMode==0&&setTimeout(function(){e.mouseIsDown&&e.enableEditMode()},1e3)},e.mouseClick=function(t){if(e.editMode)return t.stopPropagation(),!1},e.mouseUp=function(){e.mouseIsDown=!1},e.enableEditMode=function(){e.editMode=!0,$(".admin_application").addClass("jiggly"),$(".sortable").sortable("enable"),$("#dashboard-editmode").show()},e.saveDashboard=function(){e.saveOrder(),e.disableEditMode()},e.cancelDashboard=function(){$(".sortable"
).sortable("cancel"),e.disableEditMode()},e.disableEditMode=function(){e.editMode=!1,$("#dashboard-editmode").hide(),$(".admin_application").removeClass("jiggly"),$(".sortable").sortable("disable")},e.saveOrder=function(){var e=$(".sortable").sortable("toArray");for(var t=0;t<e.length;t++)e[t]=e[t].replace("application_name_","");var n=e.join(",");console.log(n),jQuery.ajax("/spud/save_key?key=app_order&value="+n)}},spud.admin.date_picker={},function(){var e=spud.admin.date_picker;parsePickerDate=function(e){var t=new Date,n=e.split(" "),r=n[0].split("-");return r.length>=3&&(t=new Date(parseInt(r[0],10),parseInt(r[1],10)-1,parseInt(r[2],10))),t},e.init=function(e){e=typeof e=="undefined"?".spud_form_date_picker":e,$(e).each(function(){var e=$(this),t=e.attr("name");e.attr("name",t.replace("[","_").replace("]","")),e.datepicker({format:"yyyy-mm-dd",autoclose:!0}),e.val(e.val().split(" ")[0]);var n=parsePickerDate(e.val()),r=$("<input type='hidden'/>");r.attr("name",t.replace("]","(1i)]")),r.val(n.getFullYear());var i=$("<input type='hidden'/>");i.attr("name",t.replace("]","(2i)]")),i.val(n.getMonth()+1);var s=$("<input type='hidden'/>");s.attr("name",t.replace("]","(3i)]")),s.val(n.getUTCDate()),r.insertAfter(e),i.insertAfter(e),s.insertAfter(e),e.bind("change",function(e){var t=parsePickerDate($(this).val());r.val(t.getFullYear()),i.val(t.getMonth()+1),s.val(t.getUTCDate())})})}}(),window.CodeMirror=function(){"use strict";function S(e,n){if(!(this instanceof S))return new S(e,n);this.options=n=n||{};for(var r in Xn)!n.hasOwnProperty(r)&&Xn.hasOwnProperty(r)&&(n[r]=Xn[r]);P(n);var i=typeof n.value=="string"?0:n.value.first,s=this.display=x(e,i);s.wrapper.CodeMirror=this,M(this),n.autofocus&&!d&&Dt(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,draggingText:!1,highlight:new ji},A(this),n.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap");var o=n.value;typeof o=="string"&&(o=new Gr(n.value,n.mode)),Nt(this,ti)(this,o),t&&setTimeout($i(_t,this,!0),20),Ht(this);var u;try{u=document.activeElement==s.input}catch(a){}u||n.autofocus&&!d?setTimeout($i(rn,this),20):sn(this),Nt(this,function(){for(var e in Wn)Wn.propertyIsEnumerable(e)&&Wn[e](this,n[e],$n);for(var t=0;t<Gn.length;++t)Gn[t](this)})()}function x(e,t){var r={},s=r.input=Yi("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none; font-size: 4px;");i?s.style.width="1000px":s.setAttribute("wrap","off"),p&&(s.style.border="1px solid black"),s.setAttribute("autocorrect","off"),s.setAttribute("autocapitalize","off"),r.inputDiv=Yi("div",[s],null,"overflow: hidden; position: relative; width: 3px; height: 0px;"),r.scrollbarH=Yi("div",[Yi("div",null,null,"height: 1px")],"CodeMirror-hscrollbar"),r.scrollbarV=Yi("div",[Yi("div",null,null,"width: 1px")],"CodeMirror-vscrollbar"),r.scrollbarFiller=Yi("div",null,"CodeMirror-scrollbar-filler"),r.lineDiv=Yi("div"),r.selectionDiv=Yi("div",null,null,"position: relative; z-index: 1"),r.cursor=Yi("div","Â ","CodeMirror-cursor"),r.otherCursor=Yi("div","Â ","CodeMirror-cursor CodeMirror-secondarycursor"),r.measure=Yi("div",null,"CodeMirror-measure"),r.lineSpace=Yi("div",[r.measure,r.selectionDiv,r.lineDiv,r.cursor,r.otherCursor],null,"position: relative; outline: none"),r.mover=Yi("div",[Yi("div",[r.lineSpace],"CodeMirror-lines")],null,"position: relative"),r.sizer=Yi("div",[r.mover],"CodeMirror-sizer"),r.heightForcer=Yi("div",null,null,"position: absolute; height: "+Hi+"px; width: 1px;"),r.gutters=Yi("div",null,"CodeMirror-gutters"),r.lineGutter=null;var o=Yi("div",[r.sizer,r.heightForcer,r.gutters],null,"position: relative; min-height: 100%");return r.scroller=Yi("div",[o],"CodeMirror-scroll"),r.scroller.setAttribute("tabIndex","-1"),r.wrapper=Yi("div",[r.inputDiv,r.scrollbarH,r.scrollbarV,r.scrollbarFiller,r.scroller],"CodeMirror"),n&&(r.gutters.style.zIndex=-1,r.scroller.style.paddingRight=0),e.appendChild?e.appendChild(r.wrapper):e(r.wrapper),p&&(s.style.width="0px"),i||(r.scroller.draggable=!0),f?(r.inputDiv.style.height="1px",r.inputDiv.style.position="absolute"):n&&(r.scrollbarH.style.minWidth=r.scrollbarV.style.minWidth="18px"),r.viewOffset=r.lastSizeC=0,r.showingFrom=r.showingTo=t,r.lineNumWidth=r.lineNumInnerWidth=r.lineNumChars=null,r.prevInput="",r.alignWidgets=!1,r.pollingFast=!1,r.poll=new ji,r.cachedCharWidth=r.cachedTextHeight=null,r.measureLineCache=[],r.measureLineCachePos=0,r.inaccurateSelection=!1,r.maxLine=null,r.maxLineLength=0,r.maxLineChanged=!1,r.wheelDX=r.wheelDY=r.wheelStartX=r.wheelStartY=null,r}function T(e){e.doc.mode=S.getMode(e.options,e.doc.modeOption),e.doc.iter(function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)}),e.doc.frontier=e.doc.first,Z(e,100),e.state.modeGen++,e.curOp&&Lt(e)}function N(e){e.options.lineWrapping?(e.display.wrapper.className+=" CodeMirror-wrap",e.display.sizer.style.minWidth=""):(e.display.wrapper.className=e.display.wrapper.className.replace(" CodeMirror-wrap",""),D(e)),k(e),Lt(e),ct(e),setTimeout(function(){H(e.display,e.doc.height)},100)}function C(e){var t=wt(e.display),n=e.options.lineWrapping,r=n&&Math.max(5,e.display.scroller.clientWidth/Et(e.display)-3);return function(i){return xr(e.doc,i)?0:n?(Math.ceil(i.text.length/r)||1)*t:t}}function k(e){var t=e.doc,n=C(e);t.iter(function(e){var t=n(e);t!=e.height&&si(e,t)})}function L(e){var t=tr[e.options.keyMap].style;e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-keymap-\S+/g,"")+(t?" cm-keymap-"+t:"")}function A(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),ct(e)}function O(e){M(e),Lt(e)}function M(e){var t=e.display.gutters,n=e.options.gutters;Zi(t);for(var r=0;r<n.length;++r){var i=n[r],s=t.appendChild(Yi("div",null,"CodeMirror-gutter "+i));i=="CodeMirror-linenumbers"&&(e.display.lineGutter=s,s.style.width=(e.display.lineNumWidth||1)+"px")}t.style.display=r?"":"none"}function _(e,t){if(t.height==0)return 0;var n=t.text.length,r,i=t;while(r=wr(i)){var s=r.find();i=ni(e,s.from.line),n+=s.from.ch-s.to.ch}i=t;while(r=Er(i)){var s=r.find();n-=i.text.length-s.from.ch,i=ni(e,s.to.line),n+=i.text.length-s.to.ch}return n}function D(e){var t=e.display,n=e.doc;t.maxLine=ni(n,n.first),t.maxLineLength=_(n,t.maxLine),t.maxLineChanged=!0,n.iter(function(e){var r=_(n,e);r>t.maxLineLength&&(t.maxLineLength=r,t.maxLine=e)})}function P(e){var t=!1;for(var n=0;n<e.gutters.length;++n)e.gutters[n]=="CodeMirror-linenumbers"&&(e.lineNumbers?t=!0:e.gutters.splice(n--,1));!t&&e.lineNumbers&&e.gutters.push("CodeMirror-linenumbers")}function H(e,t){var n=t+it(e);e.sizer.style.minHeight=e.heightForcer.style.top=n+"px";var r=Math.max(n,e.scroller.scrollHeight),i=e.scroller.scrollWidth>e.scroller.clientWidth,s=r>e.scroller.clientHeight;s?(e.scrollbarV.style.display="block",e.scrollbarV.style.bottom=i?os(e.measure)+"px":"0",e.scrollbarV.firstChild.style.height=r-e.scroller.clientHeight+e.scrollbarV.clientHeight+"px"):e.scrollbarV.style.display="",i?(e.scrollbarH.style.display="block",e.scrollbarH.style.right=s?os(e.measure)+"px":"0",e.scrollbarH.firstChild.style.width=e.scroller.scrollWidth-e.scroller.clientWidth+e.scrollbarH.clientWidth+"px"):e.scrollbarH.style.display="",i&&s?(e.scrollbarFiller.style.display="block",e.scrollbarFiller.style.height=e.scrollbarFiller.style.width=os(e.measure)+"px"):e.scrollbarFiller.style.display="",l&&os(e.measure)===0&&(e.scrollbarV.style.minWidth=e.scrollbarH.style.minHeight=c?"18px":"12px")}function B(e,t,n){var r=e.scroller.scrollTop,i=e.wrapper.clientHeight;typeof n=="number"?r=n:n&&(r=n.top,i=n.bottom-n.top),r=Math.floor(r-rt(e));var s=Math.ceil(r+i);return{from:ui(t,r),to:ui(t,s)}}function j(e){var t=e.display;if(!t.alignWidgets&&(!t.gutters.firstChild||!e.options.fixedGutter))return;var n=q(t)-t.scroller.scrollLeft+e.doc.scrollLeft,r=t.gutters.offsetWidth,i=n+"px";for(var s=t.lineDiv.firstChild;s;s=s.nextSibling)if(s.alignable)for(var o=0,u=s.alignable;o<u.length;++o)u[o].style.left=i;e.options.fixedGutter&&(t.gutters.style.left=n+r+"px")}function F(e){if(!e.options.lineNumbers)return!1;var t=e.doc,n=I(e.options,t.first+t.size-1),r=e.display;if(n.length!=r.lineNumChars){var i=r.measure.appendChild(Yi("div",[Yi("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),s=i.firstChild.offsetWidth,o=i.offsetWidth-s;return r.lineGutter.style.width="",r.lineNumInnerWidth=Math.max(s,r.lineGutter.offsetWidth-o),r.lineNumWidth=r.lineNumInnerWidth+o,r.lineNumChars=r.lineNumInnerWidth?n.length:-1,r.lineGutter.style.width=r.lineNumWidth+"px",!0}return!1}function I(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function q(e){return ns(e.scroller).left-ns(e.sizer).left}function R(e,t,n){var r=e.display.showingFrom,i=e.display.showingTo,s,o=B(e.display,e.doc,n);for(;;){if(!U(e,t,o))break;s=!0,_i(e,"update",e),(e.display.showingFrom!=r||e.display.showingTo!=i)&&_i(e,"viewportChange",e,e.display.showingFrom,e.display.showingTo),K(e),H(e.display,e.doc.height),n&&(n=Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,typeof n=="number"?n:n.top)),o=B(e.display,e.doc,n);if(o.from>=e.display.showingFrom&&o.to<=e.display.showingTo)break;t=[]}return s}function U(e,t,r){var i=e.display,s=e.doc;if(!i.wrapper.clientWidth){i.showingFrom=i.showingTo=s.first,i.viewOffset=0;return}if(t.length==0&&r.from>i.showingFrom&&r.to<i.showingTo)return;F(e)&&(t=[{from:s.first,to:s.first+s.size}]);var o=i.sizer.style.marginLeft=i.gutters.offsetWidth+"px";i.scrollbarH.style.left=e.options.fixedGutter?o:"0";var u=Infinity;if(e.options.lineNumbers)for(var a=0;a<t.length;++a)if(t[a].diff){u=t[a].from;break}var f=s.first+s.size,l=Math.max(r.from-e.options.viewportMargin,s.first),c=Math.min(f,r.to+e.options.viewportMargin);i.showingFrom<l&&l-i.showingFrom<20&&(l=Math.max(s.first,i.showingFrom)),i.showingTo>c&&i.showingTo-c<20&&(c=Math.min(f,i.showingTo));if(E){l=oi(Sr(s,ni(s,l)));while(c<f&&xr(s,ni(s,c)))++c}var h=[{from:Math.max(i.showingFrom,s.first),to:Math.min(i.showingTo,f)}];h[0].from>=h[0].to?h=[]:h=W(h,t);if(E)for(var a=0;a<h.length;++a){var p=h[a],d;while(d=Er(ni(s,p.to-1))){var v=d.find().from.line;if(!(v>p.from)){h.splice(a--,1);break}p.to=v}}var m=0;for(var a=0;a<h.length;++a){var p=h[a];p.from<l&&(p.from=l),p.to>c&&(p.to=c),p.from>=p.to?h.splice(a--,1):m+=p.to-p.from}if(m==c-l&&l==i.showingFrom&&c==i.showingTo){z(e);return}h.sort(function(e,t){return e.from-t.from});try{var g=document.activeElement}catch(y){}m<(c-l)*.7&&(i.lineDiv.style.display="none"),V(e,l,c,h,u),i.lineDiv.style.display="",g&&document.activeElement!=g&&g.offsetHeight&&g.focus();var b=l!=i.showingFrom||c!=i.showingTo||i.lastSizeC!=i.wrapper.clientHeight;b&&(i.lastSizeC=i.wrapper.clientHeight),i.showingFrom=l,i.showingTo=c,Z(e,100);var w=i.lineDiv.offsetTop;for(var S=i.lineDiv.firstChild,x;S;S=S.nextSibling)if(S.lineObj){if(n){var T=S.offsetTop+S.offsetHeight;x=T-w,w=T}else{var N=ns(S);x=N.bottom-N.top}var C=S.lineObj.height-x;x<2&&(x=wt(i));if(C>.001||C<-0.001){si(S.lineObj,x);var k=S.lineObj.widgets;if(k)for(var a=0;a<k.length;++a)k[a].height=k[a].node.offsetHeight}}return z(e),!0}function z(e){var t=e.display.viewOffset=ai(e,ni(e.doc,e.display.showingFrom));e.display.mover.style.top=t+"px"}function W(e,t){for(var n=0,r=t.length||0;n<r;++n){var i=t[n],s=[],o=i.diff||0;for(var u=0,a=e.length;u<a;++u){var f=e[u];i.to<=f.from&&i.diff?s.push({from:f.from+o,to:f.to+o}):i.to<=f.from||i.from>=f.to?s.push(f):(i.from>f.from&&s.push({from:f.from,to:i.from}),i.to<f.to&&s.push({from:i.to+o,to:f.to+o}))}e=s}return e}function X(e){var t=e.display,n={},r={};for(var i=t.gutters.firstChild,s=0;i;i=i.nextSibling,++s)n[e.options.gutters[s]]=i.offsetLeft,r[e.options.gutters[s]]=i.offsetWidth;return{fixedPos:q(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:n,gutterWidth:r,wrapperWidth:t.wrapper.clientWidth}}function V(e,t,n,r,s){function c(t){var n=t.nextSibling;return i&&v&&e.display.currentWheelTarget==t?(t.style.display="none",t.lineObj=null):t.parentNode.removeChild(t),n}var o=X(e),u=e.display,a=e.options.lineNumbers;!r.length&&(!i||!e.display.currentWheelTarget)&&Zi(u.lineDiv);var f=u.lineDiv,l=f.firstChild,h=r.shift(),p=t;e.doc.iter(t,n,function(t){h&&h.to==p&&(h=r.shift());if(xr(e.doc,t)){t.height!=0&&si(t,0);if(t.widgets&&l.previousSibling)for(var n=0;n<t.widgets.length;++n)if(t.widgets[n].showIfHidden){var i=l.previousSibling;if(/pre/i.test(i.nodeName)){var u=Yi("div",null,null,"position: relative");i.parentNode.replaceChild(u,i),u.appendChild(i),i=u}var d=i.appendChild(Yi("div",[t.widgets[n].node],"CodeMirror-linewidget"));J(t.widgets[n],d,i,o)}}else if(h&&h.from<=p&&h.to>p){while(l.lineObj!=t)l=c(l);a&&s<=p&&l.lineNumber&&ts(l.lineNumber,I(e.options,p)),l=l.nextSibling}else{if(t.widgets)for(var v=0,m=l,g;m&&v<20;++v,m=m.nextSibling)if(m.lineObj==t&&/div/i.test(m.nodeName)){g=m;break}var y=$(e,t,p,o,g);if(y!=g)f.insertBefore(y,l);else{while(l!=g)l=c(l);l=l.nextSibling}y.lineObj=t}++p});while(l)l=c(l)}function $(e,t,r,i,s){var o=qr(e,t),u=t.gutterMarkers,a=e.display,f;if(!e.options.lineNumbers&&!u&&!t.bgClass&&!t.wrapClass&&!t.widgets)return o;if(s){s.alignable=null;var l=!0,c=0;for(var h=s.firstChild,p;h;h=p){p=h.nextSibling;if(!/\bCodeMirror-linewidget\b/.test(h.className))s.removeChild(h);else{for(var d=0,v=!0;d<t.widgets.length;++d){var m=t.widgets[d],g=!1;m.above||(g=v,v=!1);if(m.node==h.firstChild){J(m,h,s,i),++c,g&&s.insertBefore(o,h);break}}if(d==t.widgets.length){l=!1;break}}}l&&c==t.widgets.length&&(f=s,s.className=t.wrapClass||"")}f||(f=Yi("div",null,t.wrapClass,"position: relative"),f.appendChild(o)),t.bgClass&&f.insertBefore(Yi("div",null,t.bgClass+" CodeMirror-linebackground"),f.firstChild);if(e.options.lineNumbers||u){var y=f.insertBefore(Yi("div",null,null,"position: absolute; left: "+(e.options.fixedGutter?i.fixedPos:-i.gutterTotalWidth)+"px"),f.firstChild);e.options.fixedGutter&&(f.alignable||(f.alignable=[])).push(y),e.options.lineNumbers&&(!u||!u["CodeMirror-linenumbers"])&&(f.lineNumber=y.appendChild(Yi("div",I(e.options,r),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+i.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+a.lineNumInnerWidth+"px")));if(u)for(var b=0;b<e.options.gutters.length;++b){var w=e.options.gutters[b],E=u.hasOwnProperty(w)&&u[w];E&&y.appendChild(Yi("div",[E],"CodeMirror-gutter-elt","left: "+i.gutterLeft[w]+"px; width: "+i.gutterWidth[w]+"px"))}}n&&(f.style.zIndex=2);if(t.widgets&&f!=s)for(var d=0,S=t.widgets;d<S.length;++d){var m=S[d],x=Yi("div",[m.node],"CodeMirror-linewidget");J(m,x,f,i),m.above?f.insertBefore(x,e.options.lineNumbers&&t.height!=0?y:o):f.appendChild(x),_i(m,"redraw")}return f}function J(e,t,n,r){if(e.noHScroll){(n.alignable||(n.alignable=[])).push(t);var i=r.wrapperWidth;t.style.left=r.fixedPos+"px",e.coverGutter||(i-=r.gutterTotalWidth,t.style.paddingLeft=r.gutterTotalWidth+"px"),t.style.width=i+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-r.gutterTotalWidth+"px"))}function K(e){var t=e.display,n=wn(e.doc.sel.from,e.doc.sel.to);n||e.options.showCursorWhenSelecting?Q(e):t.cursor.style.display=t.otherCursor.style.display="none",n?t.selectionDiv.style.display="none":G(e);if(e.options.moveInputWithCursor){var r=vt(e,e.doc.sel.head,"div"),i=ns(t.wrapper),s=ns(t.lineDiv);t.inputDiv.style.top=Math.max(0,Math.min(t.wrapper.clientHeight-10,r.top+s.top-i.top))+"px",t.inputDiv.style.left=Math.max(0,Math.min(t.wrapper.clientWidth-10,r.left+s.left-i.left))+"px"}}function Q(e){var t=e.display,n=vt(e,e.doc.sel.head,"div");t.cursor.style.left=n.left+"px",t.cursor.style.top=n.top+"px",t.cursor.style.height=Math.max(0,n.bottom-n.top)*e.options.cursorHeight+"px",t.cursor.style.display="",n.other?(t.otherCursor.style.display="",t.otherCursor.style.left=n.other.left+"px",t.otherCursor.style.top=n.other.top+"px",t.otherCursor.style.height=(n.other.bottom-n.other.top)*.85+"px"):t.otherCursor.style.display="none"}function G(e){function u(e,t,n,r){t<0&&(t=0),i.appendChild(Yi("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px; top: "+t+"px; width: "+(n==null?s-e:n)+"px; height: "+(r-t)+"px"))}function a(t,r,i,a){function h(n){return dt(e,bn(t,n),"div",f)}var f=ni(n,t),l=f.text.length,c=a?Infinity:-Infinity;return ps(fi(f),r||0,i==null?l:i,function(e,t,n){var f=h(e),p,d,v;if(e==t)p=f,d=v=f.left;else{p=h(t-1);if(n=="rtl"){var m=f;f=p,p=m}d=f.left,v=p.right}p.top-f.top>3&&(u(d,f.top,null,f.bottom),d=o,f.bottom<p.top&&u(d,f.bottom,null,p.top)),i==null&&t==l&&(v=s),r==null&&e==0&&(d=o),c=a?Math.min(p.top,c):Math.max(p.bottom,c),d<o+1&&(d=o),u(d,p.top,v-d,p.bottom)}),c}var t=e.display,n=e.doc,r=e.doc.sel,i=document.createDocumentFragment(),s=t.lineSpace.offsetWidth,o=st(e.display);if(r.from.line==r.to.line)a(r.from.line,r.from.ch,r.to.ch);else{var f=ni(n,r.from.line),l=f,c,h=[r.from.line,r.from.ch],p;while(c=Er(l)){var d=c.find();h.push(d.from.ch,d.to.line,d.to.ch);if(d.to.line==r.to.line){h.push(r.to.ch),p=!0;break}l=ni(n,d.to.line)}if(p)for(var v=0;v<h.length;v+=3)a(h[v],h[v+1],h[v+2]);else{var m,g,y=ni(n,r.to.line);r.from.ch?m=a(r.from.line,r.from.ch,null,!1):m=ai(e,f)-t.viewOffset,r.to.ch?g=a(r.to.line,wr(y)?null:0,r.to.ch,!0):g=ai(e,y)-t.viewOffset,m<g&&u(o,m,null,g)}}es(t.selectionDiv,i),t.selectionDiv.style.display=""}function Y(e){if(!e.state.focused)return;var t=e.display;clearInterval(t.blinker);var n=!0;t.cursor.style.visibility=t.otherCursor.style.visibility="",t.blinker=setInterval(function(){t.cursor.style.visibility=t.otherCursor.style.visibility=(n=!n)?"":"hidden"},e.options.cursorBlinkRate)}function Z(e,t){e.doc.mode.startState&&e.doc.frontier<e.display.showingTo&&e.state.highlight.set(t,$i(et,e))}function et(e){var t=e.doc;t.frontier<t.first&&(t.frontier=t.first);if(t.frontier>=e.display.showingTo)return;var n=+(new Date)+e.options.workTime,r=Yn(t.mode,nt(e,t.frontier)),i=[],s;t.iter(t.frontier,Math.min(t.first+t.size,e.display.showingTo+500),function(o){if(t.frontier>=e.display.showingFrom){var u=o.styles;o.styles=Hr(e,o,r);var a=!u||u.length!=o.styles.length;for(var f=0;!a&&f<u.length;++f)a=u[f]!=o.styles[f];a&&(s&&s.end==t.frontier?s.end++:i.push(s={start:t.frontier,end:t.frontier+1})),o.stateAfter=Yn(t.mode,r)}else jr(e,o,r),o.stateAfter=t.frontier%5==0?Yn(t.mode,r):null;++t.frontier;if(+(new Date)>n)return Z(e,e.options.workDelay),!0}),i.length&&Nt(e,function(){for(var e=0;e<i.length;++e)Lt(this,i[e].start,i[e].end)})()}function tt(e,t){var n,r,i=e.doc;for(var s=t,o=t-100;s>o;--s){if(s<=i.first)return i.first;var u=ni(i,s-1);if(u.stateAfter)return s;var a=Fi(u.text,null,e.options.tabSize);if(r==null||n>a)r=s-1,n=a}return r}function nt(e,t){var n=e.doc,r=e.display;if(!n.mode.startState)return!0;var i=tt(e,t),s=i>n.first&&ni(n,i-1).stateAfter;return s?s=Yn(n.mode,s):s=Zn(n.mode),n.iter(i,t,function(o){jr(e,o,s);var u=i==t-1||i%5==0||i>=r.showingFrom&&i<r.showingTo;o.stateAfter=u?Yn(n.mode,s):null,++i}),s}function rt(e){return e.lineSpace.offsetTop}function it(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function st(e){var t=es(e.measure,Yi("pre",null,null,"text-align: left")).appendChild(Yi("span","x"));return t.offsetLeft}function ot(e,t,n,r){var i=-1;r=r||at(e,t);for(var s=n;;s+=i){var o=r[s];if(o)break;i<0&&s==0&&(i=1)}return{left:s<n?o.right:o.left,right:s>n?o.left:o.right,top:o.top,bottom:o.bottom}}function ut(e,t){var n=e.display.measureLineCache;for(var r=0;r<n.length;++r){var i=n[r];if(i.text==t.text&&i.markedSpans==t.markedSpans&&e.display.scroller.clientWidth==i.width&&i.classes==t.textClass+"|"+t.bgClass+"|"+t.wrapClass)return i.measure}}function at(e,t){var n=ut(e,t);if(!n){n=ft(e,t);var r=e.display.measureLineCache,i={text:t.text,width:e.display.scroller.clientWidth,markedSpans:t.markedSpans,measure:n,classes:t.textClass+"|"+t.bgClass+"|"+t.wrapClass};r.length==16?r[++e.display.measureLineCachePos%16]=i:r.push(i)}return n}function ft(e,i){var s=e.display,o=Vi(i.text.length),u=qr(e,i,o);if(t&&!n&&!e.options.lineWrapping&&u.childNodes.length>100){var a=document.createDocumentFragment(),f=10,l=u.childNodes.length;for(var c=0,h=Math.ceil(l/f);c<h;++c){var p=Yi("div",null,null,"display: inline-block");for(var d=0;d<f&&l;++d)p.appendChild(u.firstChild),--l;a.appendChild(p)}u.appendChild(a)}es(s.measure,u);var v=ns(s.lineDiv),m=[],g=Vi(i.text.length),y=u.offsetHeight;r&&s.measure.first!=u&&es(s.measure,u);for(var c=0,b;c<o.length;++c)if(b=o[c]){var w=ns(b),E=Math.max(0,w.top-v.top),S=Math.min(w.bottom-v.top,y);for(var d=0;d<m.length;d+=2){var x=m[d],T=m[d+1];if(x>S||T<E)continue;if(x<=E&&T>=S||E<=x&&S>=T||Math.min(S,T)-Math.max(E,x)>=S-E>>1){m[d]=Math.min(E,x),m[d+1]=Math.max(S,T);break}}d==m.length&&m.push(E,S);var N=w.right;b.measureRight&&(N=ns(b.measureRight).left),g[c]={left:w.left-v.left,right:N-v.left,top:d}}for(var c=0,b;c<g.length;++c)if(b=g[c]){var C=b.top;b.top=m[C],b.bottom=m[C+1]}return g}function lt(e,t){var n=!1;if(t.markedSpans)for(var r=0;r<t.markedSpans;++r){var i=t.markedSpans[r];i.collapsed&&(i.to==null||i.to==t.text.length)&&(n=!0)}var s=!n&&ut(e,t);if(s)return ot(e,t,t.text.length,s).right;var o=qr(e,t),u=o.appendChild(as(e.display.measure));return es(e.display.measure,o),ns(u).right-ns(e.display.lineDiv).left}function ct(e){e.display.measureLineCache.length=e.display.measureLineCachePos=0,e.display.cachedCharWidth=e.display.cachedTextHeight=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function ht(e,t,n,r){if(t.widgets)for(var i=0;i<t.widgets.length;++i)if(t.widgets[i].above){var s=Ar(t.widgets[i]);n.top+=s,n.bottom+=s}if(r=="line")return n;r||(r="local");var o=ai(e,t);r!="local"&&(o-=e.display.viewOffset);if(r=="page"){var u=ns(e.display.lineSpace);o+=u.top+(window.pageYOffset||(document.documentElement||document.body).scrollTop);var a=u.left+(window.pageXOffset||(document.documentElement||document.body).scrollLeft);n.left+=a,n.right+=a}return n.top+=o,n.bottom+=o,n}function pt(e,t,n){if(n=="div")return t;var r=t.left,i=t.top;n=="page"&&(r-=window.pageXOffset||(document.documentElement||document.body).scrollLeft,i-=window.pageYOffset||(document.documentElement||document.body).scrollTop);var s=ns(e.display.lineSpace);r-=s.left,i-=s.top;if(n=="local"||!n){var o=ns(e.display.wrapper);r+=o.left,i+=o.top}return{left:r,top:i}}function dt(e,t,n,r){return r||(r=ni(e.doc,t.line)),ht(e,r,ot(e,r,t.ch),n)}function vt(e,t,n,r,i){function s(t,s){var o=ot(e,r,t,i);return s?o.left=o.right:o.right=o.left,ht(e,r,o,n)}r=r||ni(e.doc,t.line),i||(i=at(e,r));var o=fi(r),u=t.ch;if(!o)return s(u);var a,f,l=o[0].level;for(var c=0;c<o.length;++c){var h=o[c],p=h.level%2,d,v;if(h.from<u&&h.to>u)return s(u,p);var m=p?h.to:h.from,g=p?h.from:h.to;if(m==u)c&&h.level<(d=o[c-1]).level?v=s(d.level%2?d.from:d.to-1,!0):v=s(p&&h.from!=h.to?u-1:u),p==l?a=v:f=v;else if(g==u){var d=c<o.length-1&&o[c+1];if(!p&&d&&d.from==d.to)continue;d&&h.level<d.level?v=s(d.level%2?d.to-1:d.from):v=s(p?u:u-1,!0),p==l?a=v:f=v}}return l&&!u&&(f=s(o[0].to-1)),a?(f&&(a.other=f),a):f}function mt(e,t,n){var r=new bn(e,t);return n&&(r.outside=!0),r}function gt(e,t,n){var r=e.doc;n+=e.display.viewOffset;if(n<0)return mt(r.first,0,!0);var i=ui(r,n),s=r.first+r.size-1;if(i>s)return mt(r.first+r.size-1,ni(r,s).text.length,!0);t<0&&(t=0);for(;;){var o=ni(r,i),u=yt(e,o,i,t,n),a=Er(o),f=a&&a.find();if(!(a&&u.ch>=f.from.ch))return u;i=f.to.line}}function yt(e,t,n,r,i){function f(r){var i=vt(e,bn(n,r),"line",t,a);return o=!0,s>i.bottom?i.left-u:s<i.top?i.left+u:(o=!1,i.left)}var s=i-ai(e,t),o=!1,u=2*e.display.wrapper.clientWidth,a=at(e,t),l=fi(t),c=t.text.length,h=ms(t),p=gs(t),d=f(h),v=o,m=f(p),g=o;if(r>m)return mt(n,p,g);for(;;){if(l?p==h||p==ws(t,h,1):p-h<=1){var y=r-d<m-r,b=y?h:p;while(Gi.test(t.text.charAt(b)))++b;var w=mt(n,b,y?v:g);return w.after=y,w}var E=Math.ceil(c/2),S=h+E;if(l){S=h;for(var x=0;x<E;++x)S=ws(t,S,1)}var T=f(S);if(T>r){p=S,m=T;if(g=o)m+=1e3;c=E}else h=S,d=T,v=o,c-=E}}function wt(e){if(e.cachedTextHeight!=null)return e.cachedTextHeight;if(bt==null){bt=Yi("pre");for(var t=0;t<49;++t)bt.appendChild(document.createTextNode("x")),bt.appendChild(Yi("br"));bt.appendChild(document.createTextNode("x"))}es(e.measure,bt);var n=bt.offsetHeight/50;return n>3&&(e.cachedTextHeight=n),Zi(e.measure),n||1}function Et(e){if(e.cachedCharWidth!=null)return e.cachedCharWidth;var t=Yi("span","x"),n=Yi("pre",[t]);es(e.measure,n);var r=t.offsetWidth;return r>2&&(e.cachedCharWidth=r),r||10}function xt(e){e.curOp={changes:[],updateInput:null,userSelChange:null,textChanged:null,selectionChanged:!1,cursorActivity:!1,updateMaxLine:!1,updateScrollPos:!1,id:++St},Mi++||(Oi=[])}function Tt(e){var t=e.curOp,n=e.doc,r=e.display;e.curOp=null,t.updateMaxLine&&D(e);if(r.maxLineChanged&&!e.options.lineWrapping&&r.maxLine){var i=lt(e,r.maxLine);r.sizer.style.minWidth=Math.max(0,i+3+Hi)+"px",r.maxLineChanged=!1;var s=Math.max(0,r.sizer.offsetLeft+r.sizer.offsetWidth-r.scroller.clientWidth);s<n.scrollLeft&&!t.updateScrollPos&&Xt(e,Math.min(r.scroller.scrollLeft,s),!0)}var o,u;if(t.updateScrollPos)o=t.updateScrollPos;else if(t.selectionChanged&&r.scroller.clientHeight){var a=vt(e,n.sel.head);o=Hn(e,a.left,a.top,a.left,a.bottom)}if(t.changes.length||o&&o.scrollTop!=null)u=R(e,t.changes,o&&o.scrollTop),e.display.scroller.offsetHeight&&(e.doc.scrollTop=e.display.scroller.scrollTop);!u&&t.selectionChanged&&K(e),t.updateScrollPos?(r.scroller.scrollTop=r.scrollbarV.scrollTop=n.scrollTop=o.scrollTop,r.scroller.scrollLeft=r.scrollbarH.scrollLeft=n.scrollLeft=o.scrollLeft,j(e),t.scrollToPos&&Dn(e,Tn(e.doc,t.scrollToPos),t.scrollToPosMargin)):o&&_n(e),t.selectionChanged&&Y(e),e.state.focused&&t.updateInput&&_t(e,t.userSelChange);var f=t.maybeHiddenMarkers,l=t.maybeUnhiddenMarkers;if(f)for(var c=0;c<f.length;++c)f[c].lines.length||Ai(f[c],"hide");if(l)for(var c=0;c<l.length;++c)l[c].lines.length&&Ai(l[c],"unhide");var h;--Mi||(h=Oi,Oi=null),t.textChanged&&Ai(e,"change",e,t.textChanged),t.cursorActivity&&Ai(e,"cursorActivity",e);if(h)for(var c=0;c<h.length;++c)h[c]()}function Nt(e,t){return function(){var n=e||this,r=!n.curOp;r&&xt(n);try{var i=t.apply(n,arguments)}finally{r&&Tt(n)}return i}}function Ct(e){return function(){var t=this.cm&&!this.cm.curOp,n;t&&xt(this.cm);try{n=e.apply(this,arguments)}finally{t&&Tt(this.cm)}return n}}function kt(e,t){var n=!e.curOp,r;n&&xt(e);try{r=t()}finally{n&&Tt(e)}return r}function Lt(e,t,n,r){t==null&&(t=e.doc.first),n==null&&(n=e.doc.first+e.doc.size),e.curOp.changes.push({from:t,to:n,diff:r})}function At(e){if(e.display.pollingFast)return;e.display.poll.set(e.options.pollInterval,function(){Mt(e),e.state.focused&&At(e)})}function Ot(e){function n(){var r=Mt(e);!r&&!t?(t=!0,e.display.poll.set(60,n)):(e.display.pollingFast=!1,At(e))}var t=!1;e.display.pollingFast=!0,e.display.poll.set(20,n)}function Mt(e){var n=e.display.input,i=e.display.prevInput,s=e.doc,o=s.sel;if(!e.state.focused||ls(n)||Pt(e))return!1;var u=n.value;if(u==i&&wn(o.from,o.to))return!1;if(t&&!r&&e.display.inputHasSelection===u)return _t(e,!0),!1;var a=!e.curOp;a&&xt(e),o.shift=!1;var f=0,l=Math.min(i.length,u.length);while(f<l&&i.charCodeAt(f)==u.charCodeAt(f))++f;var c=o.from,h=o.to;f<i.length?c=bn(c.line,c.ch-(i.length-f)):e.state.overwrite&&wn(c,h)&&!e.state.pasteIncoming&&(h=bn(h.line,Math.min(ni(s,h.line).text.length,h.ch+(u.length-f))));var p=e.curOp.updateInput;return hn(e.doc,{from:c,to:h,text:fs(u.slice(f)),origin:e.state.pasteIncoming?"paste":"+input"},"end"),e.curOp.updateInput=p,u.length>1e3||u.indexOf("\n")>-1?n.value=e.display.prevInput="":e.display.prevInput=u,a&&Tt(e),e.state.pasteIncoming=!1,!0}function _t(e,n){var i,s,o=e.doc;if(!wn(o.sel.from,o.sel.to)){e.display.prevInput="",i=cs&&(o.sel.to.line-o.sel.from.line>100||(s=e.getSelection()).length>1e3);var u=i?"-":s||e.getSelection();e.display.input.value=u,e.state.focused&&Ui(e.display.input),t&&!r&&(e.display.inputHasSelection=u)}else n&&(e.display.prevInput=e.display.input.value="",t&&!r&&(e.display.inputHasSelection=null));e.display.inaccurateSelection=i}function Dt(e){e.options.readOnly!="nocursor"&&(!d||document.activeElement!=e.display.input)&&e.display.input.focus()}function Pt(e){return e.options.readOnly||e.doc.cantEdit}function Ht(e){function r(){e.state.focused&&setTimeout($i(Dt,e),0)}function i(){n.cachedCharWidth=n.cachedTextHeight=null,ct(e),kt(e,$i(Lt,e))}function s(){for(var e=n.wrapper.parentNode;e&&e!=document.body;e=e.parentNode);e?setTimeout(s,5e3):Li(window,"resize",i)}function o(t){if(e.options.onDragEvent&&e.options.onDragEvent(e,Ei(t)))return;Ti(t)}function u(){n.inaccurateSelection&&(n.prevInput="",n.inaccurateSelection=!1,n.input.value=e.getSelection(),Ui(n.input))}var n=e.display;ki(n.scroller,"mousedown",Nt(e,qt)),t?ki(n.scroller,"dblclick",Nt(e,function(t){var n=jt(e,t);if(!n||Ut(e,t)||Bt(e.display,t))return;Si(t);var r=Un(ni(e.doc,n.line).text,n);kn(e.doc,r.from,r.to)})):ki(n.scroller,"dblclick",Si),ki(n.lineSpace,"selectstart",function(e){Bt(n,e)||Si(e)}),b||ki(n.scroller,"contextmenu",function(t){un(e,t)}),ki(n.scroller,"scroll",function(){n.scroller.clientHeight&&(Wt(e,n.scroller.scrollTop),Xt(e,n.scroller.scrollLeft,!0),Ai(e,"scroll",e))}),ki(n.scrollbarV,"scroll",function(){n.scroller.clientHeight&&Wt(e,n.scrollbarV.scrollTop)}),ki(n.scrollbarH,"scroll",function(){n.scroller.clientHeight&&Xt(e,n.scrollbarH.scrollLeft)}),ki(n.scroller,"mousewheel",function(t){Jt(e,t)}),ki(n.scroller,"DOMMouseScroll",function(t){Jt(e,t)}),ki(n.scrollbarH,"mousedown",r),ki(n.scrollbarV,"mousedown",r),ki(n.wrapper,"scroll",function(){n.wrapper.scrollTop=n.wrapper.scrollLeft=0}),ki(window,"resize",i),setTimeout(s,5e3),ki(n.input,"keyup",Nt(e,function(t){if(e.options.onKeyEvent&&e.options.onKeyEvent(e,Ei(t)))return;t.keyCode==16&&(e.doc.sel.shift=!1)})),ki(n.input,"input",$i(Ot,e)),ki(n.input,"keydown",Nt(e,tn)),ki(n.input,"keypress",Nt(e,nn)),ki(n.input,"focus",$i(rn,e)),ki(n.input,"blur",$i(sn,e)),e.options.dragDrop&&(ki(n.scroller,"dragstart",function(t){zt(e,t)}),ki(n.scroller,"dragenter",o),ki(n.scroller,"dragover",o),ki(n.scroller,"drop",Nt(e,Rt))),ki(n.scroller,"paste",function(t){if(Bt(n,t))return;Dt(e),Ot(e)}),ki(n.input,"paste",function(){e.state.pasteIncoming=!0,Ot(e)}),ki(n.input,"cut",u),ki(n.input,"copy",u),f&&ki(n.sizer,"mouseup",function(){document.activeElement==n.input&&n.input.blur(),Dt(e)})}function Bt(e,t){for(var n=Ni(t);n!=e.wrapper;n=n.parentNode){if(!n)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(n.className)||n.parentNode==e.sizer&&n!=e.mover)return!0}}function jt(e,t,n){var r=e.display;if(!n){var i=Ni(t);if(i==r.scrollbarH||i==r.scrollbarH.firstChild||i==r.scrollbarV||i==r.scrollbarV.firstChild||i==r.scrollbarFiller)return null}var s,o,u=ns(r.lineSpace);try{s=t.clientX,o=t.clientY}catch(t){return null}return gt(e,s-u.left,o-u.top)}function qt(e){function m(e){if(wn(v,e))return;v=e;if(f=="single"){kn(n.doc,Tn(s,u),e);return}p=Tn(s,p),d=Tn(s,d);if(f=="double"){var t=Un(ni(s,e.line).text,e);En(e,p)?kn(n.doc,t.from,d):kn(n.doc,p,t.to)}else f=="triple"&&(En(e,p)?kn(n.doc,d,Tn(s,bn(e.line,0))):kn(n.doc,p,Tn(s,bn(e.line+1,0))))}function w(e){var t=++y,i=jt(n,e,!0);if(!i)return;if(!wn(i,c)){n.state.focused||rn(n),c=i,m(i);var o=B(r,s);(i.line>=o.to||i.line<o.from)&&setTimeout(Nt(n,function(){y==t&&w(e)}),150)}else{var u=e.clientY<g.top?-20:e.clientY>g.bottom?20:0;u&&setTimeout(Nt(n,function(){if(y!=t)return;r.scroller.scrollTop+=u,w(e)}),50)}}function E(e){y=Infinity;var t=jt(n,e);t&&m(t),Si(e),Dt(n),Li(document,"mousemove",S),Li(document,"mouseup",x)}var n=this,r=n.display,s=n.doc,o=s.sel;o.shift=e.shiftKey;if(Bt(r,e)){i||(r.scroller.draggable=!1,setTimeout(function(){r.scroller.draggable=!0},100));return}if(Ut(n,e))return;var u=jt(n,e);switch(Ci(e)){case 3:b&&un.call(n,n,e);return;case 2:u&&kn(n.doc,u),setTimeout($i(Dt,n),20),Si(e);return}if(!u){Ni(e)==r.scroller&&Si(e);return}n.state.focused||rn(n);var a=+(new Date),f="single";if(It&&It.time>a-400&&wn(It.pos,u))f="triple",Si(e),setTimeout($i(Dt,n),20),zn(n,u.line);else if(Ft&&Ft.time>a-400&&wn(Ft.pos,u)){f="double",It={time:a,pos:u},Si(e);var l=Un(ni(s,u.line).text,u);kn(n.doc,l.from,l.to)}else Ft={time:a,pos:u};var c=u;if(n.options.dragDrop&&rs&&!Pt(n)&&!wn(o.from,o.to)&&!En(u,o.from)&&!En(o.to,u)&&f=="single"){var h=Nt(n,function(t){i&&(r.scroller.draggable=!1),n.state.draggingText=!1,Li(document,"mouseup",h),Li(r.scroller,"drop",h),Math.abs(e.clientX-t.clientX)+Math.abs(e.clientY-t.clientY)<10&&(Si(t),kn(n.doc,u),Dt(n))});i&&(r.scroller.draggable=!0),n.state.draggingText=h,r.scroller.dragDrop&&r.scroller.dragDrop(),ki(document,"mouseup",h),ki(r.scroller,"drop",h);return}Si(e),f=="single"&&kn(n.doc,Tn(s,u));var p=o.from,d=o.to,v=u,g=ns(r.wrapper),y=0,S=Nt(n
,function(e){!t&&!Ci(e)?E(e):w(e)}),x=Nt(n,E);ki(document,"mousemove",S),ki(document,"mouseup",x)}function Rt(e){var t=this;if(Bt(t.display,e)||t.options.onDragEvent&&t.options.onDragEvent(t,Ei(e)))return;Si(e);var n=jt(t,e,!0),r=e.dataTransfer.files;if(!n||Pt(t))return;if(r&&r.length&&window.FileReader&&window.File){var i=r.length,s=Array(i),o=0,u=function(e,r){var u=new FileReader;u.onload=function(){s[r]=u.result,++o==i&&(n=Tn(t.doc,n),hn(t.doc,{from:n,to:n,text:fs(s.join("\n")),origin:"paste"},"around"))},u.readAsText(e)};for(var a=0;a<i;++a)u(r[a],a)}else{if(t.state.draggingText&&!En(n,t.doc.sel.from)&&!En(t.doc.sel.to,n)){t.state.draggingText(e),setTimeout($i(Dt,t),20);return}try{var s=e.dataTransfer.getData("Text");if(s){var f=t.doc.sel.from,l=t.doc.sel.to;An(t.doc,n,n),t.state.draggingText&&yn(t.doc,"",f,l,"paste"),t.replaceSelection(s,null,"paste"),Dt(t),rn(t)}}catch(e){}}}function Ut(e,t){var n=e.display;try{var r=t.clientX,i=t.clientY}catch(t){return!1}if(r>=Math.floor(ns(n.gutters).right))return!1;Si(t);if(!Pi(e,"gutterClick"))return!0;var s=ns(n.lineDiv);if(i>s.bottom)return!0;i-=s.top-n.viewOffset;for(var o=0;o<e.options.gutters.length;++o){var u=n.gutters.childNodes[o];if(u&&ns(u).right>=r){var a=ui(e.doc,i),f=e.options.gutters[o];_i(e,"gutterClick",e,a,f,t);break}}return!0}function zt(e,n){if(t&&!e.state.draggingText){Ti(n);return}if(Bt(e.display,n))return;var r=e.getSelection();n.dataTransfer.setData("Text",r);if(n.dataTransfer.setDragImage){var i=Yi("img",null,null,"position: fixed; left: 0; top: 0;");u&&(i.width=i.height=1,e.display.wrapper.appendChild(i),i._top=i.offsetTop),a&&(e.display.dragImg?i=e.display.dragImg:(e.display.dragImg=i,i.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",e.display.wrapper.appendChild(i))),n.dataTransfer.setDragImage(i,0,0),u&&i.parentNode.removeChild(i)}}function Wt(t,n){if(Math.abs(t.doc.scrollTop-n)<2)return;t.doc.scrollTop=n,e||R(t,[],n),t.display.scroller.scrollTop!=n&&(t.display.scroller.scrollTop=n),t.display.scrollbarV.scrollTop!=n&&(t.display.scrollbarV.scrollTop=n),e&&R(t,[])}function Xt(e,t,n){if(n?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)return;t=Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth),e.doc.scrollLeft=t,j(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbarH.scrollLeft!=t&&(e.display.scrollbarH.scrollLeft=t)}function Jt(t,n){var r=n.wheelDeltaX,s=n.wheelDeltaY;r==null&&n.detail&&n.axis==n.HORIZONTAL_AXIS&&(r=n.detail),s==null&&n.detail&&n.axis==n.VERTICAL_AXIS?s=n.detail:s==null&&(s=n.wheelDelta);var o=t.display,a=o.scroller;if(!(r&&a.scrollWidth>a.clientWidth||s&&a.scrollHeight>a.clientHeight))return;if(s&&v&&i)for(var f=n.target;f!=a;f=f.parentNode)if(f.lineObj){t.display.currentWheelTarget=f;break}if(r&&!e&&!u&&$t!=null){s&&Wt(t,Math.max(0,Math.min(a.scrollTop+s*$t,a.scrollHeight-a.clientHeight))),Xt(t,Math.max(0,Math.min(a.scrollLeft+r*$t,a.scrollWidth-a.clientWidth))),Si(n),o.wheelStartX=null;return}if(s&&$t!=null){var l=s*$t,c=t.doc.scrollTop,h=c+o.wrapper.clientHeight;l<0?c=Math.max(0,c+l-50):h=Math.min(t.doc.height,h+l+50),R(t,[],{top:c,bottom:h})}Vt<20&&(o.wheelStartX==null?(o.wheelStartX=a.scrollLeft,o.wheelStartY=a.scrollTop,o.wheelDX=r,o.wheelDY=s,setTimeout(function(){if(o.wheelStartX==null)return;var e=a.scrollLeft-o.wheelStartX,t=a.scrollTop-o.wheelStartY,n=t&&o.wheelDY&&t/o.wheelDY||e&&o.wheelDX&&e/o.wheelDX;o.wheelStartX=o.wheelStartY=null;if(!n)return;$t=($t*Vt+n)/(Vt+1),++Vt},200)):(o.wheelDX+=r,o.wheelDY+=s))}function Kt(e,t,n){if(typeof t=="string"){t=er[t];if(!t)return!1}e.display.pollingFast&&Mt(e)&&(e.display.pollingFast=!1);var r=e.doc,i=r.sel.shift,s=!1;try{Pt(e)&&(e.state.suppressEdits=!0),n&&(r.sel.shift=!1),s=t(e)!=Bi}finally{r.sel.shift=i,e.state.suppressEdits=!1}return s}function Qt(e){var t=e.state.keyMaps.slice(0);return e.options.extraKeys&&t.push(e.options.extraKeys),t.push(e.options.keyMap),t}function Yt(e,t){var n=nr(e.options.keyMap),i=n.auto;clearTimeout(Gt),i&&!ir(t)&&(Gt=setTimeout(function(){nr(e.options.keyMap)==n&&(e.options.keyMap=i.call?i.call(null,e):i)},50));var s=sr(t,!0),o=!1;if(!s)return!1;var u=Qt(e);return t.shiftKey?o=rr("Shift-"+s,u,function(t){return Kt(e,t,!0)})||rr(s,u,function(t){if(typeof t=="string"&&/^go[A-Z]/.test(t))return Kt(e,t)}):o=rr(s,u,function(t){return Kt(e,t)}),o=="stop"&&(o=!1),o&&(Si(t),Y(e),r&&(t.oldKeyCode=t.keyCode,t.keyCode=0)),o}function Zt(e,t,n){var r=rr("'"+n+"'",Qt(e),function(t){return Kt(e,t,!0)});return r&&(Si(t),Y(e)),r}function tn(e){var n=this;n.state.focused||rn(n),t&&e.keyCode==27&&(e.returnValue=!1);if(n.options.onKeyEvent&&n.options.onKeyEvent(n,Ei(e)))return;var r=e.keyCode;n.doc.sel.shift=r==16||e.shiftKey;var i=Yt(n,e);u&&(en=i?r:null,!i&&r==88&&!cs&&(v?e.metaKey:e.ctrlKey)&&n.replaceSelection(""))}function nn(e){var n=this;if(n.options.onKeyEvent&&n.options.onKeyEvent(n,Ei(e)))return;var i=e.keyCode,s=e.charCode;if(u&&i==en){en=null,Si(e);return}if((u&&(!e.which||e.which<10)||f)&&Yt(n,e))return;var o=String.fromCharCode(s==null?i:s);this.options.electricChars&&this.doc.mode.electricChars&&this.options.smartIndent&&!Pt(this)&&this.doc.mode.electricChars.indexOf(o)>-1&&setTimeout(Nt(n,function(){Fn(n,n.doc.sel.to.line,"smart")}),75);if(Zt(n,e,o))return;t&&!r&&(n.display.inputHasSelection=null),Ot(n)}function rn(e){if(e.options.readOnly=="nocursor")return;e.state.focused||(Ai(e,"focus",e),e.state.focused=!0,e.display.wrapper.className.search(/\bCodeMirror-focused\b/)==-1&&(e.display.wrapper.className+=" CodeMirror-focused"),_t(e,!0)),At(e),Y(e)}function sn(e){e.state.focused&&(Ai(e,"blur",e),e.state.focused=!1,e.display.wrapper.className=e.display.wrapper.className.replace(" CodeMirror-focused","")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.doc.sel.shift=!1)},150)}function un(e,n){function l(){i.inputDiv.style.position="relative",i.input.style.cssText=f,r&&(i.scrollbarV.scrollTop=i.scroller.scrollTop=a),At(e);if(i.input.selectionStart!=null&&(!t||r)){clearTimeout(on);var n=i.input.value=" "+(wn(s.from,s.to)?"":i.input.value),o=0;i.prevInput=" ",i.input.selectionStart=1,i.input.selectionEnd=n.length;var u=function(){i.prevInput==" "&&i.input.selectionStart==0?Nt(e,er.selectAll)(e):o++<10?on=setTimeout(u,500):_t(e)};on=setTimeout(u,200)}}var i=e.display,s=e.doc.sel;if(Bt(i,n))return;var o=jt(e,n),a=i.scroller.scrollTop;if(!o||u)return;(wn(s.from,s.to)||En(o,s.from)||!En(o,s.to))&&Nt(e,An)(e.doc,o,o);var f=i.input.style.cssText;i.inputDiv.style.position="absolute",i.input.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(n.clientY-5)+"px; left: "+(n.clientX-5)+"px; z-index: 1000; background: white; outline: none;"+"border-width: 0; outline: none; overflow: hidden; opacity: .05; -ms-opacity: .05; filter: alpha(opacity=5);",Dt(e),_t(e,!0),wn(s.from,s.to)&&(i.input.value=i.prevInput=" ");if(b){Ti(n);var c=function(){Li(window,"mouseup",c),setTimeout(l,20)};ki(window,"mouseup",c)}else setTimeout(l,50)}function an(e){return e.text?bn(e.from.line+e.text.length-1,Ri(e.text).length+(e.text.length==1?e.from.ch:0)):e.to}function fn(e,t,n){if(!En(t.from,n))return Tn(e,n);var r=t.text.length-1-(t.to.line-t.from.line);if(n.line>t.to.line+r){var i=n.line-r,s=e.first+e.size-1;return i>s?bn(s,ni(e,s).text.length):Nn(n,ni(e,i).text.length)}if(n.line==t.to.line+r)return Nn(n,Ri(t.text).length+(t.text.length==1?t.from.ch:0)+ni(e,t.to.line).text.length-t.to.ch);var o=n.line-t.from.line;return Nn(n,t.text[o].length+(o?0:t.from.ch))}function ln(e,t,n){if(n&&typeof n=="object")return{anchor:fn(e,t,n.anchor),head:fn(e,t,n.head)};if(n=="start")return{anchor:t.from,head:t.from};var r=an(t);if(n=="around")return{anchor:t.from,head:r};if(n=="end")return{anchor:r,head:r};var i=function(e){if(En(e,t.from))return e;if(!En(t.to,e))return r;var n=e.line+t.text.length-(t.to.line-t.from.line)-1,i=e.ch;return e.line==t.to.line&&(i+=r.ch-t.to.ch),bn(n,i)};return{anchor:i(e.sel.anchor),head:i(e.sel.head)}}function cn(e,t){var n={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,update:function(t,n,r,i){t&&(this.from=Tn(e,t)),n&&(this.to=Tn(e,n)),r&&(this.text=r),i!==undefined&&(this.origin=i)},cancel:function(){this.canceled=!0}};return Ai(e,"beforeChange",e,n),e.cm&&Ai(e.cm,"beforeChange",e.cm,n),n.canceled?null:{from:n.from,to:n.to,text:n.text,origin:n.origin}}function hn(e,t,n,r){if(e.cm){if(!e.cm.curOp)return Nt(e.cm,hn)(e,t,n,r);if(e.cm.state.suppressEdits)return}if(Pi(e,"beforeChange")||e.cm&&Pi(e.cm,"beforeChange")){t=cn(e,t);if(!t)return}var i=w&&!r&&yr(e,t.from,t.to);if(i){for(var s=i.length-1;s>=1;--s)pn(e,{from:i[s].from,to:i[s].to,text:[""]});i.length&&pn(e,{from:i[0].from,to:i[0].to,text:t.text},n)}else pn(e,t,n)}function pn(e,t,n){var r=ln(e,t,n);pi(e,t,r,e.cm?e.cm.curOp.id:NaN),mn(e,t,r,mr(e,t));var i=[];ei(e,function(e,n){!n&&zi(i,e.history)==-1&&(bi(e.history,t),i.push(e.history)),mn(e,t,null,mr(e,t))})}function dn(e,t){if(e.cm&&e.cm.state.suppressEdits)return;var n=e.history,r=(t=="undo"?n.done:n.undone).pop();if(!r)return;n.dirtyCounter+=t=="undo"?-1:1;var i={changes:[],anchorBefore:r.anchorAfter,headBefore:r.headAfter,anchorAfter:r.anchorBefore,headAfter:r.headBefore};(t=="undo"?n.undone:n.done).push(i);for(var s=r.changes.length-1;s>=0;--s){var o=r.changes[s];o.origin=t,i.changes.push(hi(e,o));var u=s?ln(e,o,null):{anchor:r.anchorBefore,head:r.headBefore};mn(e,o,u,gr(e,o));var a=[];ei(e,function(e,t){!t&&zi(a,e.history)==-1&&(bi(e.history,o),a.push(e.history)),mn(e,o,null,gr(e,o))})}}function vn(e,t){function n(e){return bn(e.line+t,e.ch)}e.first+=t,e.cm&&Lt(e.cm,e.first,e.first,t),e.sel.head=n(e.sel.head),e.sel.anchor=n(e.sel.anchor),e.sel.from=n(e.sel.from),e.sel.to=n(e.sel.to)}function mn(e,t,n,r){if(e.cm&&!e.cm.curOp)return Nt(e.cm,mn)(e,t,n,r);if(t.to.line<e.first){vn(e,t.text.length-1-(t.to.line-t.from.line));return}if(t.from.line>e.lastLine())return;if(t.from.line<e.first){var i=t.text.length-1-(e.first-t.from.line);vn(e,i),t={from:bn(e.first,0),to:bn(t.to.line+i,t.to.ch),text:[Ri(t.text)],origin:t.origin}}var s=e.lastLine();t.to.line>s&&(t={from:t.from,to:bn(s,ni(e,s).text.length),text:[t.text[0]],origin:t.origin}),t.removed=ri(e,t.from,t.to),n||(n=ln(e,t,null)),e.cm?gn(e.cm,t,r,n):$r(e,t,r,n)}function gn(e,t,n,r){var i=e.doc,s=e.display,o=t.from,u=t.to,a=!1,f=o.line;e.options.lineWrapping||(f=oi(Sr(i,ni(i,o.line))),i.iter(f,u.line+1,function(e){if(e==s.maxLine)return a=!0,!0})),!En(i.sel.head,t.from)&&!En(t.to,i.sel.head)&&(e.curOp.cursorActivity=!0),$r(i,t,n,r,C(e)),e.options.lineWrapping||(i.iter(f,o.line+t.text.length,function(e){var t=_(i,e);t>s.maxLineLength&&(s.maxLine=e,s.maxLineLength=t,s.maxLineChanged=!0,a=!1)}),a&&(e.curOp.updateMaxLine=!0)),i.frontier=Math.min(i.frontier,o.line),Z(e,400);var l=t.text.length-(u.line-o.line)-1;Lt(e,o.line,u.line+1,l);if(Pi(e,"change")){var c={from:o,to:u,text:t.text,removed:t.removed,origin:t.origin};if(e.curOp.textChanged){for(var h=e.curOp.textChanged;h.next;h=h.next);h.next=c}else e.curOp.textChanged=c}}function yn(e,t,n,r,i){r||(r=n);if(En(r,n)){var s=r;r=n,n=s}typeof t=="string"&&(t=fs(t)),hn(e,{from:n,to:r,text:t,origin:i},null)}function bn(e,t){if(!(this instanceof bn))return new bn(e,t);this.line=e,this.ch=t}function wn(e,t){return e.line==t.line&&e.ch==t.ch}function En(e,t){return e.line<t.line||e.line==t.line&&e.ch<t.ch}function Sn(e){return bn(e.line,e.ch)}function xn(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function Tn(e,t){if(t.line<e.first)return bn(e.first,0);var n=e.first+e.size-1;return t.line>n?bn(n,ni(e,n).text.length):Nn(t,ni(e,t.line).text.length)}function Nn(e,t){var n=e.ch;return n==null||n>t?bn(e.line,t):n<0?bn(e.line,0):e}function Cn(e,t){return t>=e.first&&t<e.first+e.size}function kn(e,t,n,r){if(e.sel.shift||e.sel.extend){var i=e.sel.anchor;if(n){var s=En(t,i);s!=En(n,i)?(i=t,t=n):s!=En(t,n)&&(t=n)}An(e,i,t,r)}else An(e,t,n||t,r);e.cm&&(e.cm.curOp.userSelChange=!0)}function Ln(e,t,n){var r={anchor:t,head:n};return Ai(e,"beforeSelectionChange",e,r),e.cm&&Ai(e.cm,"beforeSelectionChange",e.cm,r),r.anchor=Tn(e,r.anchor),r.head=Tn(e,r.head),r}function An(e,t,n,r,i){if(!i&&Pi(e,"beforeSelectionChange")||e.cm&&Pi(e.cm,"beforeSelectionChange")){var s=Ln(e,t,n);n=s.head,t=s.anchor}var o=e.sel;o.goalColumn=null;if(i||!wn(t,o.anchor))t=Mn(e,t,r,i!="push");if(i||!wn(n,o.head))n=Mn(e,n,r,i!="push");if(wn(o.anchor,t)&&wn(o.head,n))return;o.anchor=t,o.head=n;var u=En(n,t);o.from=u?n:t,o.to=u?t:n,e.cm&&(e.cm.curOp.updateInput=e.cm.curOp.selectionChanged=e.cm.curOp.cursorActivity=!0),_i(e,"cursorActivity",e)}function On(e){An(e.doc,e.doc.sel.from,e.doc.sel.to,null,"push")}function Mn(e,t,n,r){var i=!1,s=t,o=n||1;e.cantEdit=!1;e:for(;;){var u=ni(e,s.line);if(u.markedSpans)for(var a=0;a<u.markedSpans.length;++a){var f=u.markedSpans[a],l=f.marker;if((f.from==null||(l.inclusiveLeft?f.from<=s.ch:f.from<s.ch))&&(f.to==null||(l.inclusiveRight?f.to>=s.ch:f.to>s.ch))){if(r){Ai(l,"beforeCursorEnter");if(l.explicitlyCleared){if(!u.markedSpans)break;--a;continue}}if(!l.atomic)continue;var c=l.find()[o<0?"from":"to"];if(wn(c,s)){c.ch+=o,c.ch<0?c.line>e.first?c=Tn(e,bn(c.line-1)):c=null:c.ch>u.text.length&&(c.line<e.first+e.size-1?c=bn(c.line+1,0):c=null);if(!c){if(i)return r?(e.cantEdit=!0,bn(e.first,0)):Mn(e,t,n,!0);i=!0,c=t,o=-o}}s=c;continue e}}return s}}function _n(e){var t=Dn(e,e.doc.sel.head);if(!e.state.focused)return;var n=e.display,r=ns(n.sizer),i=null,s=rt(e.display);t.top+s+r.top<0?i=!0:t.bottom+s+r.top>(window.innerHeight||document.documentElement.clientHeight)&&(i=!1);if(i!=null&&!h){var o=n.cursor.style.display=="none";o&&(n.cursor.style.display="",n.cursor.style.left=t.left+"px",n.cursor.style.top=t.top-n.viewOffset+"px"),n.cursor.scrollIntoView(i),o&&(n.cursor.style.display="none")}}function Dn(e,t,n){n==null&&(n=0);for(;;){var r=!1,i=vt(e,t),s=Hn(e,i.left,i.top-n,i.left,i.bottom+n),o=e.doc.scrollTop,u=e.doc.scrollLeft;s.scrollTop!=null&&(Wt(e,s.scrollTop),Math.abs(e.doc.scrollTop-o)>1&&(r=!0)),s.scrollLeft!=null&&(Xt(e,s.scrollLeft),Math.abs(e.doc.scrollLeft-u)>1&&(r=!0));if(!r)return i}}function Pn(e,t,n,r,i){var s=Hn(e,t,n,r,i);s.scrollTop!=null&&Wt(e,s.scrollTop),s.scrollLeft!=null&&Xt(e,s.scrollLeft)}function Hn(e,t,n,r,i){var s=e.display,o=rt(s);n+=o,i+=o,n<0&&(n=0);var u=s.scroller.clientHeight-Hi,a=s.scroller.scrollTop,f={},l=e.doc.height+it(s),c=n<o+10,h=i+o>l-10;if(n<a)f.scrollTop=c?0:n;else if(i>a+u){var p=Math.min(n,(h?l:i)-u);p!=a&&(f.scrollTop=p)}var d=s.scroller.clientWidth-Hi,v=s.scroller.scrollLeft;t+=s.gutters.offsetWidth,r+=s.gutters.offsetWidth;var m=s.gutters.offsetWidth,g=t<m+10;return t<v+m||g?(g&&(t=0),f.scrollLeft=Math.max(0,t-10-m)):r>d+v-3&&(f.scrollLeft=r+10-d),f}function Bn(e,t,n){e.curOp.updateScrollPos={scrollLeft:t==null?e.doc.scrollLeft:t,scrollTop:n==null?e.doc.scrollTop:n}}function jn(e,t,n){var r=e.curOp.updateScrollPos||(e.curOp.updateScrollPos={scrollLeft:e.doc.scrollLeft,scrollTop:e.doc.scrollTop}),i=e.display.scroller;r.scrollTop=Math.max(0,Math.min(i.scrollHeight-i.clientHeight,r.scrollTop+n)),r.scrollLeft=Math.max(0,Math.min(i.scrollWidth-i.clientWidth,r.scrollLeft+t))}function Fn(e,t,n,r){var i=e.doc;n||(n="add");if(n=="smart")if(!e.doc.mode.indent)n="prev";else var s=nt(e,t);var o=e.options.tabSize,u=ni(i,t),a=Fi(u.text,null,o),f=u.text.match(/^\s*/)[0],l;if(n=="smart"){l=e.doc.mode.indent(s,u.text.slice(f.length),u.text);if(l==Bi){if(!r)return;n="prev"}}n=="prev"?t>i.first?l=Fi(ni(i,t-1).text,null,o):l=0:n=="add"?l=a+e.options.indentUnit:n=="subtract"&&(l=a-e.options.indentUnit),l=Math.max(0,l);var c="",h=0;if(e.options.indentWithTabs)for(var p=Math.floor(l/o);p;--p)h+=o,c+="	";h<l&&(c+=qi(l-h)),c!=f&&yn(e.doc,c,bn(t,0),bn(t,f.length),"+input"),u.stateAfter=null}function In(e,t,n){var r=t,i=t,s=e.doc;return typeof t=="number"?i=ni(s,xn(s,t)):r=oi(t),r==null?null:n(i,r)?(Lt(e,r,r+1),i):null}function qn(e,t,n,r,i){function f(){var t=s+n;return t<e.first||t>=e.first+e.size?a=!1:(s=t,u=ni(e,t))}function l(e){var t=(i?ws:Es)(u,o,n,!0);if(t==null){if(!!e||!f())return a=!1;i?o=(n<0?gs:ms)(u):o=n<0?u.text.length:0}else o=t;return!0}var s=t.line,o=t.ch,u=ni(e,s),a=!0;if(r=="char")l();else if(r=="column")l(!0);else if(r=="word"||r=="group"){var c=null,h=r=="group";for(var p=!0;;p=!1){if(n<0&&!l(!p))break;var d=u.text.charAt(o)||"\n",v=Ki(d)?"w":h?/\s/.test(d)?null:"p":null;if(c&&c!=v){n<0&&(n=1,l());break}v&&(c=v);if(n>0&&!l(!p))break}}var m=Mn(e,bn(s,o),n,!0);return a||(m.hitSide=!0),m}function Rn(e,t,n,r){var i=e.doc,s=t.left,o;if(r=="page"){var u=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);o=t.top+n*(u-(n<0?1.5:.5)*wt(e.display))}else r=="line"&&(o=n>0?t.bottom+3:t.top-3);for(;;){var a=gt(e,s,o);if(!a.outside)break;if(n<0?o<=0:o>=i.height){a.hitSide=!0;break}o+=n*5}return a}function Un(e,t){var n=t.ch,r=t.ch;if(e){t.after===!1||r==e.length?--n:++r;var i=e.charAt(n),s=Ki(i)?Ki:/\s/.test(i)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!Ki(e)};while(n>0&&s(e.charAt(n-1)))--n;while(r<e.length&&s(e.charAt(r)))++r}return{from:bn(t.line,n),to:bn(t.line,r)}}function zn(e,t){kn(e.doc,bn(t,0),Tn(e.doc,bn(t+1,0)))}function Vn(e,t,n,r){S.defaults[e]=t,n&&(Wn[e]=r?function(e,t,r){r!=$n&&n(e,t,r)}:n)}function Yn(e,t){if(t===!0)return t;if(e.copyState)return e.copyState(t);var n={};for(var r in t){var i=t[r];i instanceof Array&&(i=i.concat([])),n[r]=i}return n}function Zn(e,t,n){return e.startState?e.startState(t,n):!0}function nr(e){return typeof e=="string"?tr[e]:e}function rr(e,t,n){function r(t){t=nr(t);var i=t[e];if(i===!1)return"stop";if(i!=null&&n(i))return!0;if(t.nofallthrough)return"stop";var s=t.fallthrough;if(s==null)return!1;if(Object.prototype.toString.call(s)!="[object Array]")return r(s);for(var o=0,u=s.length;o<u;++o){var a=r(s[o]);if(a)return a}return!1}for(var i=0;i<t.length;++i){var s=r(t[i]);if(s)return s}}function ir(e){var t=hs[e.keyCode];return t=="Ctrl"||t=="Alt"||t=="Shift"||t=="Mod"}function sr(e,t){if(u&&e.keyCode==34&&e["char"])return!1;var n=hs[e.keyCode];if(n==null||e.altGraphKey)return!1;e.altKey&&(n="Alt-"+n);if(y?e.metaKey:e.ctrlKey)n="Ctrl-"+n;if(y?e.ctrlKey:e.metaKey)n="Cmd-"+n;return!t&&e.shiftKey&&(n="Shift-"+n),n}function or(e,t){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0}function ur(e,t){this.lines=[],this.type=t,this.doc=e}function ar(e,t,n,r,i){if(r&&r.shared)return lr(e,t,n,r,i);if(e.cm&&!e.cm.curOp)return Nt(e.cm,ar)(e,t,n,r,i);var s=new ur(e,i);if(i=="range"&&!En(t,n))return s;r&&Xi(r,s),s.replacedWith&&(s.collapsed=!0,s.replacedWith=Yi("span",[s.replacedWith],"CodeMirror-widget")),s.collapsed&&(E=!0),s.addToHistory&&pi(e,{from:t,to:n,origin:"markText"},{head:e.sel.head,anchor:e.sel.anchor},NaN);var o=t.line,u=0,a,f,l=e.cm,c;e.iter(o,n.line+1,function(r){l&&s.collapsed&&!l.options.lineWrapping&&Sr(e,r)==l.display.maxLine&&(c=!0);var i={from:null,to:null,marker:s};u+=r.text.length,o==t.line&&(i.from=t.ch,u-=t.ch),o==n.line&&(i.to=n.ch,u-=r.text.length-n.ch),s.collapsed&&(o==n.line&&(f=br(r,n.ch)),o==t.line?a=br(r,t.ch):si(r,0)),pr(r,i),++o}),s.collapsed&&e.iter(t.line,n.line+1,function(t){xr(e,t)&&si(t,0)}),s.clearOnEnter&&ki(s,"beforeCursorEnter",function(){s.clear()}),s.readOnly&&(w=!0,(e.history.done.length||e.history.undone.length)&&e.clearHistory());if(s.collapsed){if(a!=f)throw new Error("Inserting collapsed marker overlapping an existing one");s.size=u,s.atomic=!0}return l&&(c&&(l.curOp.updateMaxLine=!0),(s.className||s.startStyle||s.endStyle||s.collapsed)&&Lt(l,t.line,n.line+1),s.atomic&&On(l)),s}function fr(e,t){this.markers=e,this.primary=t;for(var n=0,r=this;n<e.length;++n)e[n].parent=this,ki(e[n],"clear",function(){r.clear()})}function lr(e,t,n,r,i){r=Xi(r),r.shared=!1;var s=[ar(e,t,n,r,i)],o=s[0],u=r.replacedWith;return ei(e,function(e){u&&(r.replacedWith=u.cloneNode(!0)),s.push(ar(e,Tn(e,t),Tn(e,n),r,i));for(var a=0;a<e.linked.length;++a)if(e.linked[a].isParent)return;o=Ri(s)}),new fr(s,o)}function cr(e,t){if(e)for(var n=0;n<e.length;++n){var r=e[n];if(r.marker==t)return r}}function hr(e,t){for(var n,r=0;r<e.length;++r)e[r]!=t&&(n||(n=[])).push(e[r]);return n}function pr(e,t){e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],t.marker.attachLine(e)}function dr(e,t,n){if(e)for(var r=0,i;r<e.length;++r){var s=e[r],o=s.marker,u=s.from==null||(o.inclusiveLeft?s.from<=t:s.from<t);if(u||o.type=="bookmark"&&s.from==t&&(!n||!s.marker.insertLeft)){var a=s.to==null||(o.inclusiveRight?s.to>=t:s.to>t);(i||(i=[])).push({from:s.from,to:a?null:s.to,marker:o})}}return i}function vr(e,t,n){if(e)for(var r=0,i;r<e.length;++r){var s=e[r],o=s.marker,u=s.to==null||(o.inclusiveRight?s.to>=t:s.to>t);if(u||o.type=="bookmark"&&s.from==t&&(!n||s.marker.insertLeft)){var a=s.from==null||(o.inclusiveLeft?s.from<=t:s.from<t);(i||(i=[])).push({from:a?null:s.from-t,to:s.to==null?null:s.to-t,marker:o})}}return i}function mr(e,t){var n=Cn(e,t.from.line)&&ni(e,t.from.line).markedSpans,r=Cn(e,t.to.line)&&ni(e,t.to.line).markedSpans;if(!n&&!r)return null;var i=t.from.ch,s=t.to.ch,o=wn(t.from,t.to),u=dr(n,i,o),a=vr(r,s,o),f=t.text.length==1,l=Ri(t.text).length+(f?i:0);if(u)for(var c=0;c<u.length;++c){var h=u[c];if(h.to==null){var p=cr(a,h.marker);p?f&&(h.to=p.to==null?null:p.to+l):h.to=i}}if(a)for(var c=0;c<a.length;++c){var h=a[c];h.to!=null&&(h.to+=l);if(h.from==null){var p=cr(u,h.marker);p||(h.from=l,f&&(u||(u=[])).push(h))}else h.from+=l,f&&(u||(u=[])).push(h)}var d=[u];if(!f){var v=t.text.length-2,m;if(v>0&&u)for(var c=0;c<u.length;++c)u[c].to==null&&(m||(m=[])).push({from:null,to:null,marker:u[c].marker});for(var c=0;c<v;++c)d.push(m);d.push(a)}return d}function gr(e,t){var n=vi(e,t),r=mr(e,t);if(!n)return r;if(!r)return n;for(var i=0;i<n.length;++i){var s=n[i],o=r[i];if(s&&o)e:for(var u=0;u<o.length;++u){var a=o[u];for(var f=0;f<s.length;++f)if(s[f].marker==a.marker)continue e;s.push(a)}else o&&(n[i]=o)}return n}function yr(e,t,n){var r=null;e.iter(t.line,n.line+1,function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var n=e.markedSpans[t].marker;n.readOnly&&(!r||zi(r,n)==-1)&&(r||(r=[])).push(n)}});if(!r)return null;var i=[{from:t,to:n}];for(var s=0;s<r.length;++s){var o=r[s],u=o.find();for(var a=0;a<i.length;++a){var f=i[a];if(En(f.to,u.from)||En(u.to,f.from))continue;var l=[a,1];(En(f.from,u.from)||!o.inclusiveLeft&&wn(f.from,u.from))&&l.push({from:f.from,to:u.from}),(En(u.to,f.to)||!o.inclusiveRight&&wn(f.to,u.to))&&l.push({from:u.to,to:f.to}),i.splice.apply(i,l),a+=l.length-1}}return i}function br(e,t){var n=E&&e.markedSpans,r;if(n)for(var i,s=0;s<n.length;++s){i=n[s];if(!i.marker.collapsed)continue;(i.from==null||i.from<t)&&(i.to==null||i.to>t)&&(!r||r.width<i.marker.width)&&(r=i.marker)}return r}function wr(e){return br(e,-1)}function Er(e){return br(e,e.text.length+1)}function Sr(e,t){var n;while(n=wr(t))t=ni(e,n.find().from.line);return t}function xr(e,t){var n=E&&t.markedSpans;if(n)for(var r,i=0;i<n.length;++i){r=n[i];if(!r.marker.collapsed)continue;if(r.from==null)return!0;if(r.from==0&&r.marker.inclusiveLeft&&Tr(e,t,r))return!0}}function Tr(e,t,n){if(n.to==null){var r=n.marker.find().to,i=ni(e,r.line);return Tr(e,i,cr(i.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==t.text.length)return!0;for(var s,o=0;o<t.markedSpans.length;++o){s=t.markedSpans[o];if(s.marker.collapsed&&s.from==n.to&&(s.marker.inclusiveLeft||n.marker.inclusiveRight)&&Tr(e,t,s))return!0}}function Nr(e){var t=e.markedSpans;if(!t)return;for(var n=0;n<t.length;++n)t[n].marker.detachLine(e);e.markedSpans=null}function Cr(e,t){if(!t)return;for(var n=0;n<t.length;++n)t[n].marker.attachLine(e);e.markedSpans=t}function Lr(e){return function(){var t=!this.cm.curOp;t&&xt(this.cm);try{var n=e.apply(this,arguments)}finally{t&&Tt(this.cm)}return n}}function Ar(e){return e.height!=null?e.height:((!e.node.parentNode||e.node.parentNode.nodeType!=1)&&es(e.cm.display.measure,Yi("div",[e.node],null,"position: relative")),e.height=e.node.offsetHeight)}function Or(e,t,n,r){var i=new kr(e,n,r);return i.noHScroll&&(e.display.alignWidgets=!0),In(e,t,function(t){(t.widgets||(t.widgets=[])).push(i),i.line=t;if(!xr(e.doc,t)||i.showIfHidden){var n=ai(e,t)<e.display.scroller.scrollTop;si(t,t.height+Ar(i)),n&&jn(e,0,i.height)}return!0}),i}function Mr(e,t,n){var r={text:e};return Cr(r,t),r.height=n?n(r):1,r}function _r(e,t,n,r){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),e.order!=null&&(e.order=null),Nr(e),Cr(e,n);var i=r?r(e):1;i!=e.height&&si(e,i)}function Dr(e){e.parent=null,Nr(e)}function Pr(e,t,n,r,i){var s=n.flattenSpans;s==null&&(s=e.options.flattenSpans);var o="",u=null,a=new or(t,e.options.tabSize),f;t==""&&n.blankLine&&n.blankLine(r);while(!a.eol()){a.pos>e.options.maxHighlightLength?(s=!1,a.pos=Math.min(t.length,a.start+5e4),f=null):f=n.token(a,r);var l=a.current();a.start=a.pos,!s||u!=f?(o&&i(o,u),o=l,u=f):o+=l}o&&i(o,u)}function Hr(e,t,n){var r=[e.state.modeGen];Pr(e,t.text,e.doc.mode,n,function(e,t){r.push(e,t)});for(var i=0;i<e.state.overlays.length;++i){var s=e.state.overlays[i],o=1;Pr(e,t.text,s.mode,!0,function(e,t){var n=o,i=e.length;while(i){var u=r[o],a=u.length;a<=i?i-=a:(r.splice(o,1,u.slice(0,i),r[o+1],u.slice(i)),i=0),o+=2}if(!t)return;if(s.opaque)r.splice(n,o-n,e,t),o=n+2;else for(;n<o;n+=2){var u=r[n+1];r[n+1]=u?u+" "+t:t}})}return r}function Br(e,t){if(!t.styles||t.styles[0]!=e.state.modeGen)t.styles=Hr(e,t,t.stateAfter=nt(e,oi(t)));return t.styles}function jr(e,t,n){var r=e.doc.mode,i=new or(t.text,e.options.tabSize);t.text==""&&r.blankLine&&r.blankLine(n);while(!i.eol()&&i.pos<=e.options.maxHighlightLength)r.token(i,n),i.start=i.pos}function Ir(e){return e?Fr[e]||(Fr[e]="cm-"+e.replace(/ +/g," cm-")):null}function qr(e,n,r){var s,o=n,u,a,f=!0;while(s=wr(o))f=!1,o=ni(e.doc,s.find().from.line),u||(u=o);var l={pre:Yi("pre"),col:0,pos:0,display:!r,measure:null,addedOne:!1,cm:e};o.textClass&&(l.pre.className=o.textClass);do{l.measure=o==n&&r,l.pos=0,l.addToken=l.measure?zr:Ur,(t||i)&&e.getOption("lineWrapping")&&(l.addToken=Wr(l.addToken)),r&&a&&o!=n&&!l.addedOne&&(r[0]=l.pre.appendChild(as(e.display.measure)),l.addedOne=!0);var c=Vr(o,l,Br(e,o));a=o==u,c&&(o=ni(e.doc,c.to.line),f=!1)}while(c);r&&!l.addedOne&&(r[0]=l.pre.appendChild(f?Yi("span","Â "):as(e.display.measure))),!l.pre.firstChild&&!xr(e.doc,n)&&l.pre.appendChild(document.createTextNode("Â "));var h;if(r&&t&&(h=fi(o))){var p=h.length-1;h[p].from==h[p].to&&--p;var d=h[p],v=h[p-1];if(d.from+1==d.to&&v&&d.level<v.level){var m=r[l.pos-1];m&&m.parentNode.insertBefore(m.measureRight=as(e.display.measure),m.nextSibling)}}return Ai(e,"renderLine",e,n,l.pre),l.pre}function Ur(e,t,n,r,i){if(!t)return;if(!Rr.test(t)){e.col+=t.length;var s=document.createTextNode(t)}else{var s=document.createDocumentFragment(),o=0;for(;;){Rr.lastIndex=o;var u=Rr.exec(t),a=u?u.index-o:t.length-o;a&&(s.appendChild(document.createTextNode(t.slice(o,o+a))),e.col+=a);if(!u)break;o+=a+1;if(u[0]=="	"){var f=e.cm.options.tabSize,l=f-e.col%f;s.appendChild(Yi("span",qi(l),"cm-tab")),e.col+=l}else{var c=Yi("span","â¢","cm-invalidchar");c.title="\\u"+u[0].charCodeAt(0).toString(16),s.appendChild(c),e.col+=1}}}if(n||r||i||e.measure){var h=n||"";return r&&(h+=r),i&&(h+=i),e.pre.appendChild(Yi("span",[s],h))}e.pre.appendChild(s)}function zr(e,n,r,i,s){var o=e.cm.options.lineWrapping;for(var u=0;u<n.length;++u){var a=n.charAt(u),f=u==0;a>="í "&&a<"í¯¿"&&u<n.length-1?(a=n.slice(u,u+2),++u):u&&o&&is.test(n.slice(u-1,u+1))&&e.pre.appendChild(Yi("wbr"));var l=e.measure[e.pos]=Ur(e,a,r,f&&i,u==n.length-1&&s);t&&o&&a==" "&&u&&!/\s/.test(n.charAt(u-1))&&u<n.length-1&&!/\s/.test(n.charAt(u+1))&&(l.style.whiteSpace="normal"),e.pos+=a.length}n.length&&(e.addedOne=!0)}function Wr(e){function t(e){var t=" ";for(var n=0;n<e.length-2;++n)t+=n%2?" ":"Â ";return t+=" ",t}return function(n,r,i,s,o){return e(n,r.replace(/ {3,}/,t),i,s,o)}}function Xr(e,t,n){n&&(e.display||(n=n.cloneNode(!0)),e.pre.appendChild(n),e.measure&&t&&(e.measure[e.pos]=n,e.addedOne=!0)),e.pos+=t}function Vr(e,t,n){var r=e.markedSpans;if(!r){for(var i=1;i<n.length;i+=2)t.addToken(t,n[i],Ir(n[i+1]));return}var s=e.text,o=s.length,u=0,i=1,a="",f,l=0,c,h,p,d;for(;;){if(l==u){c=h=p="",d=null,l=Infinity;var v=null;for(var m=0;m<r.length;++m){var g=r[m],y=g.marker;g.from<=u&&(g.to==null||g.to>u)?(g.to!=null&&l>g.to&&(l=g.to,h=""),y.className&&(c+=" "+y.className),y.startStyle&&g.from==u&&(p+=" "+y.startStyle),y.endStyle&&g.to==l&&(h+=" "+y.endStyle),y.collapsed&&(!d||d.marker.width<y.width)&&(d=g)):g.from>u&&l>g.from&&(l=g.from),y.type=="bookmark"&&g.from==u&&y.replacedWith&&(v=y.replacedWith)}if(d&&(d.from||0)==u){Xr(t,(d.to==null?o:d.to)-u,d.from!=null&&d.marker.replacedWith);if(d.to==null)return d.marker.find()}v&&!d&&Xr(t,0,v)}if(u>=o)break;var b=Math.min(o,l);for(;;){if(a){var w=u+a.length;if(!d){var E=w>b?a.slice(0,b-u):a;t.addToken(t,E,f?f+c:c,p,u+E.length==l?h:"")}if(w>=b){a=a.slice(b-u),u=b;break}u=w,p=""}a=n[i++],f=Ir(n[i++])}}}function $r(e,t,n,r,i){function s(e){return n?n[e]:null}function o(e,n,r){_r(e,n,r,i),_i(e,"change",e,t)}var u=t.from,a=t.to,f=t.text,l=ni(e,u.line),c=ni(e,a.line),h=Ri(f),p=s(f.length-1),d=a.line-u.line;if(u.ch==0&&a.ch==0&&h==""){for(var v=0,m=f.length-1,g=[];v<m;++v)g.push(Mr(f[v],s(v),i));o(c,c.text,p),d&&e.remove(u.line,d),g.length&&e.insert(u.line,g)}else if(l==c)if(f.length==1)o(l,l.text.slice(0,u.ch)+h+l.text.slice(a.ch),p);else{for(var g=[],v=1,m=f.length-1;v<m;++v)g.push(Mr(f[v],s(v),i));g.push(Mr(h+l.text.slice(a.ch),p,i)),o(l,l.text.slice(0,u.ch)+f[0],s(0)),e.insert(u.line+1,g)}else if(f.length==1)o(l,l.text.slice(0,u.ch)+f[0]+c.text.slice(a.ch),s(0)),e.remove(u.line+1,d);else{o(l,l.text.slice(0,u.ch)+f[0],s(0)),o(c,h+c.text.slice(a.ch),p);for(var v=1,m=f.length-1,g=[];v<m;++v)g.push(Mr(f[v],s(v),i));d>1&&e.remove(u.line+1,d-1),e.insert(u.line+1,g)}_i(e,"change",e,t),An(e,r.anchor,r.head,null,!0)}function Jr(e){this.lines=e,this.parent=null;for(var t=0,n=e.length,r=0;t<n;++t)e[t].parent=this,r+=e[t].height;this.height=r}function Kr(e){this.children=e;var t=0,n=0;for(var r=0,i=e.length;r<i;++r){var s=e[r];t+=s.chunkSize(),n+=s.height,s.parent=this}this.size=t,this.height=n,this.parent=null}function ei(e,t,n){function r(e,i,s){if(e.linked)for(var o=0;o<e.linked.length;++o){var u=e.linked[o];if(u.doc==i)continue;var a=s&&u.sharedHist;if(n&&!a)continue;t(u.doc,a),r(u.doc,e,a)}}r(e,null,!0)}function ti(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,k(e),T(e),e.options.lineWrapping||D(e),e.options.mode=t.modeOption,Lt(e)}function ni(e,t){t-=e.first;while(!e.lines)for(var n=0;;++n){var r=e.children[n],i=r.chunkSize();if(t<i){e=r;break}t-=i}return e.lines[t]}function ri(e,t,n){var r=[],i=t.line;return e.iter(t.line,n.line+1,function(e){var s=e.text;i==n.line&&(s=s.slice(0,n.ch)),i==t.line&&(s=s.slice(t.ch)),r.push(s),++i}),r}function ii(e,t,n){var r=[];return e.iter(t,n,function(e){r.push(e.text)}),r}function si(e,t){var n=t-e.height;for(var r=e;r;r=r.parent)r.height+=n}function oi(e){if(e.parent==null)return null;var t=e.parent,n=zi(t.lines,e);for(var r=t.parent;r;t=r,r=r.parent)for(var i=0;;++i){if(r.children[i]==t)break;n+=r.children[i].chunkSize()}return n+t.first}function ui(e,t){var n=e.first;e:do{for(var r=0,i=e.children.length;r<i;++r){var s=e.children[r],o=s.height;if(t<o){e=s;continue e}t-=o,n+=s.chunkSize()}return n}while(!e.lines);for(var r=0,i=e.lines.length;r<i;++r){var u=e.lines[r],a=u.height;if(t<a)break;t-=a}return n+r}function ai(e,t){t=Sr(e.doc,t);var n=0,r=t.parent;for(var i=0;i<r.lines.length;++i){var s=r.lines[i];if(s==t)break;n+=s.height}for(var o=r.parent;o;r=o,o=r.parent)for(var i=0;i<o.children.length;++i){var u=o.children[i];if(u==r)break;n+=u.height}return n}function fi(e){var t=e.order;return t==null&&(t=e.order=Ss(e.text)),t}function li(){return{done:[],undone:[],undoDepth:Infinity,lastTime:0,lastOp:null,lastOrigin:null,dirtyCounter:0}}function ci(e,t,n,r){var i=t["spans_"+e.id],s=0;e.iter(Math.max(e.first,n),Math.min(e.first+e.size,r),function(n){n.markedSpans&&((i||(i=t["spans_"+e.id]={}))[s]=n.markedSpans),++s})}function hi(e,t){var n={from:t.from,to:an(t),text:ri(e,t.from,t.to)};return ci(e,n,t.from.line,t.to.line+1),ei(e,function(e){ci(e,n,t.from.line,t.to.line+1)},!0),n}function pi(e,t,n,r){var i=e.history;i.undone.length=0;var s=+(new Date),o=Ri(i.done);if(o&&(i.lastOp==r||i.lastOrigin==t.origin&&t.origin&&(t.origin.charAt(0)=="+"&&e.cm&&i.lastTime>s-e.cm.options.historyEventDelay||t.origin.charAt(0)=="*"))){var u=Ri(o.changes);wn(t.from,t.to)&&wn(t.from,u.to)?u.to=an(t):o.changes.push(hi(e,t)),o.anchorAfter=n.anchor,o.headAfter=n.head}else{o={changes:[hi(e,t)],anchorBefore:e
.sel.anchor,headBefore:e.sel.head,anchorAfter:n.anchor,headAfter:n.head},i.done.push(o);while(i.done.length>i.undoDepth)i.done.shift();i.dirtyCounter<0?i.dirtyCounter=NaN:i.dirtyCounter++}i.lastTime=s,i.lastOp=r,i.lastOrigin=t.origin}function di(e){if(!e)return null;for(var t=0,n;t<e.length;++t)e[t].marker.explicitlyCleared?n||(n=e.slice(0,t)):n&&n.push(e[t]);return n?n.length?n:null:e}function vi(e,t){var n=t["spans_"+e.id];if(!n)return null;for(var r=0,i=[];r<t.text.length;++r)i.push(di(n[r]));return i}function mi(e,t){for(var n=0,r=[];n<e.length;++n){var i=e[n],s=i.changes,o=[];r.push({changes:o,anchorBefore:i.anchorBefore,headBefore:i.headBefore,anchorAfter:i.anchorAfter,headAfter:i.headAfter});for(var u=0;u<s.length;++u){var a=s[u],f;o.push({from:a.from,to:a.to,text:a.text});if(t)for(var l in a)(f=l.match(/^spans_(\d+)$/))&&zi(t,Number(f[1]))>-1&&(Ri(o)[l]=a[l],delete a[l])}}return r}function gi(e,t,n,r){n<e.line?e.line+=r:t<e.line&&(e.line=t,e.ch=0)}function yi(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i],o=!0;for(var u=0;u<s.changes.length;++u){var a=s.changes[u];s.copied||(a.from=Sn(a.from),a.to=Sn(a.to));if(n<a.from.line)a.from.line+=r,a.to.line+=r;else if(t<=a.to.line){o=!1;break}}s.copied||(s.anchorBefore=Sn(s.anchorBefore),s.headBefore=Sn(s.headBefore),s.anchorAfter=Sn(s.anchorAfter),s.readAfter=Sn(s.headAfter),s.copied=!0),o?(gi(s.anchorBefore),gi(s.headBefore),gi(s.anchorAfter),gi(s.headAfter)):(e.splice(0,i+1),i=0)}}function bi(e,t){var n=t.from.line,r=t.to.line,i=t.text.length-(r-n)-1;yi(e.done,n,r,i),yi(e.undone,n,r,i)}function wi(){Ti(this)}function Ei(e){return e.stop||(e.stop=wi),e}function Si(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function xi(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function Ti(e){Si(e),xi(e)}function Ni(e){return e.target||e.srcElement}function Ci(e){var t=e.which;return t==null&&(e.button&1?t=1:e.button&2?t=3:e.button&4&&(t=2)),v&&e.ctrlKey&&t==1&&(t=3),t}function ki(e,t,n){if(e.addEventListener)e.addEventListener(t,n,!1);else if(e.attachEvent)e.attachEvent("on"+t,n);else{var r=e._handlers||(e._handlers={}),i=r[t]||(r[t]=[]);i.push(n)}}function Li(e,t,n){if(e.removeEventListener)e.removeEventListener(t,n,!1);else if(e.detachEvent)e.detachEvent("on"+t,n);else{var r=e._handlers&&e._handlers[t];if(!r)return;for(var i=0;i<r.length;++i)if(r[i]==n){r.splice(i,1);break}}}function Ai(e,t){var n=e._handlers&&e._handlers[t];if(!n)return;var r=Array.prototype.slice.call(arguments,2);for(var i=0;i<n.length;++i)n[i].apply(null,r)}function _i(e,t){function i(e){return function(){e.apply(null,r)}}var n=e._handlers&&e._handlers[t];if(!n)return;var r=Array.prototype.slice.call(arguments,2);Oi||(++Mi,Oi=[],setTimeout(Di,0));for(var s=0;s<n.length;++s)Oi.push(i(n[s]))}function Di(){--Mi;var e=Oi;Oi=null;for(var t=0;t<e.length;++t)e[t]()}function Pi(e,t){var n=e._handlers&&e._handlers[t];return n&&n.length>0}function ji(){this.id=null}function Fi(e,t,n,r,i){t==null&&(t=e.search(/[^\s\u00a0]/),t==-1&&(t=e.length));for(var s=r||0,o=i||0;s<t;++s)e.charAt(s)=="	"?o+=n-o%n:++o;return o}function qi(e){while(Ii.length<=e)Ii.push(Ri(Ii)+" ");return Ii[e]}function Ri(e){return e[e.length-1]}function Ui(e){p?(e.selectionStart=0,e.selectionEnd=e.value.length):e.select()}function zi(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;++n)if(e[n]==t)return n;return-1}function Wi(e,t){function n(){}n.prototype=e;var r=new n;return t&&Xi(t,r),r}function Xi(e,t){t||(t={});for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function Vi(e){for(var t=[],n=0;n<e;++n)t.push(undefined);return t}function $i(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function Ki(e){return/\w/.test(e)||e>"Â"&&(e.toUpperCase()!=e.toLowerCase()||Ji.test(e))}function Qi(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}function Yi(e,t,n,r){var i=document.createElement(e);n&&(i.className=n),r&&(i.style.cssText=r);if(typeof t=="string")ts(i,t);else if(t)for(var s=0;s<t.length;++s)i.appendChild(t[s]);return i}function Zi(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function es(e,t){return Zi(e).appendChild(t)}function ts(e,t){r?(e.innerHTML="",e.appendChild(document.createTextNode(t))):e.textContent=t}function ns(e){return e.getBoundingClientRect()}function os(e){if(ss!=null)return ss;var t=Yi("div",null,null,"width: 50px; height: 50px; overflow-x: scroll");return es(e,t),t.offsetWidth&&(ss=t.offsetHeight-t.clientHeight),ss||0}function as(e){if(us==null){var t=Yi("span","â");es(e,Yi("span",[t,document.createTextNode("x")])),e.firstChild.offsetHeight!=0&&(us=t.offsetWidth<=1&&t.offsetHeight>2&&!n)}return us?Yi("span","â"):Yi("span","Â ",null,"display: inline-block; width: 1px; margin-right: -1px")}function ps(e,t,n,r){if(!e)return r(t,n,"ltr");for(var i=0;i<e.length;++i){var s=e[i];(s.from<n&&s.to>t||t==n&&s.to==t)&&r(Math.max(s.from,t),Math.min(s.to,n),s.level==1?"rtl":"ltr")}}function ds(e){return e.level%2?e.to:e.from}function vs(e){return e.level%2?e.from:e.to}function ms(e){var t=fi(e);return t?ds(t[0]):0}function gs(e){var t=fi(e);return t?vs(Ri(t)):e.text.length}function ys(e,t){var n=ni(e.doc,t),r=Sr(e.doc,n);r!=n&&(t=oi(r));var i=fi(r),s=i?i[0].level%2?gs(r):ms(r):0;return bn(t,s)}function bs(e,t){var n,r;while(n=Er(r=ni(e.doc,t)))t=n.find().to.line;var i=fi(r),s=i?i[0].level%2?ms(r):gs(r):r.text.length;return bn(t,s)}function ws(e,t,n,r){var i=fi(e);if(!i)return Es(e,t,n,r);var s=r?function(t,n){do t+=n;while(t>0&&Gi.test(e.text.charAt(t)));return t}:function(e,t){return e+t},o=i[0].level;for(var u=0;u<i.length;++u){var a=i[u],f=a.level%2==o;if(a.from<t&&a.to>t||f&&(a.from==t||a.to==t))break}var l=s(t,a.level%2?-n:n);while(l!=null)if(a.level%2==o){if(!(l<a.from||l>a.to))break;a=i[u+=n],l=a&&(n>0==a.level%2?s(a.to,-1):s(a.from,1))}else if(l==ds(a))a=i[--u],l=a&&vs(a);else{if(l!=vs(a))break;a=i[++u],l=a&&ds(a)}return l<0||l>e.text.length?null:l}function Es(e,t,n,r){var i=t+n;if(r)while(i>0&&Gi.test(e.text.charAt(i)))i+=n;return i<0||i>e.text.length?null:i}var e=/gecko\/\d/i.test(navigator.userAgent),t=/MSIE \d/.test(navigator.userAgent),n=t&&(document.documentMode==null||document.documentMode<8),r=t&&(document.documentMode==null||document.documentMode<9),i=/WebKit\//.test(navigator.userAgent),s=i&&/Qt\/\d+\.\d+/.test(navigator.userAgent),o=/Chrome\//.test(navigator.userAgent),u=/Opera\//.test(navigator.userAgent),a=/Apple Computer/.test(navigator.vendor),f=/KHTML\//.test(navigator.userAgent),l=/Mac OS X 1\d\D([7-9]|\d\d)\D/.test(navigator.userAgent),c=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),h=/PhantomJS/.test(navigator.userAgent),p=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),d=p||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent),v=p||/Mac/.test(navigator.platform),m=/windows/i.test(navigator.platform),g=u&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);g&&(g=Number(g[1]));var y=v&&(s||u&&(g==null||g<12.11)),b=e||t&&!r,w=!1,E=!1,bt,St=0,Ft,It,Vt=0,$t=null;t?$t=-0.53:e?$t=15:o?$t=-0.7:a&&($t=-1/3);var Gt,en=null,on;S.Pos=bn,S.prototype={focus:function(){window.focus(),Dt(this),rn(this),Ot(this)},setOption:function(e,t){var n=this.options,r=n[e];if(n[e]==t&&e!="mode")return;n[e]=t,Wn.hasOwnProperty(e)&&Nt(this,Wn[e])(this,t,r)},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"](e)},removeKeyMap:function(e){var t=this.state.keyMaps;for(var n=0;n<t.length;++n)if((typeof e=="string"?t[n].name:t[n])==e)return t.splice(n,1),!0},addOverlay:Nt(null,function(e,t){var n=e.token?e:S.getMode(this.options,e);if(n.startState)throw new Error("Overlays may not be stateful.");this.state.overlays.push({mode:n,modeSpec:e,opaque:t&&t.opaque}),this.state.modeGen++,Lt(this)}),removeOverlay:Nt(null,function(e){var t=this.state.overlays;for(var n=0;n<t.length;++n)if(t[n].modeSpec==e){t.splice(n,1),this.state.modeGen++,Lt(this);return}}),indentLine:Nt(null,function(e,t,n){typeof t!="string"&&(t==null?t=this.options.smartIndent?"smart":"prev":t=t?"add":"subtract"),Cn(this.doc,e)&&Fn(this,e,t,n)}),indentSelection:Nt(null,function(e){var t=this.doc.sel;if(wn(t.from,t.to))return Fn(this,t.from.line,e);var n=t.to.line-(t.to.ch?0:1);for(var r=t.from.line;r<=n;++r)Fn(this,r,e)}),getTokenAt:function(e){var t=this.doc;e=Tn(t,e);var n=nt(this,e.line),r=this.doc.mode,i=ni(t,e.line),s=new or(i.text,this.options.tabSize);while(s.pos<e.ch&&!s.eol()){s.start=s.pos;var o=r.token(s,n)}return{start:s.start,end:s.pos,string:s.current(),className:o||null,type:o||null,state:n}},getStateAfter:function(e){var t=this.doc;return e=xn(t,e==null?t.first+t.size-1:e),nt(this,e+1)},cursorCoords:function(e,t){var n,r=this.doc.sel;return e==null?n=r.head:typeof e=="object"?n=Tn(this.doc,e):n=e?r.from:r.to,vt(this,n,t||"page")},charCoords:function(e,t){return dt(this,Tn(this.doc,e),t||"page")},coordsChar:function(e,t){return e=pt(this,e,t||"page"),gt(this,e.left,e.top)},defaultTextHeight:function(){return wt(this.display)},defaultCharWidth:function(){return Et(this.display)},setGutterMarker:Nt(null,function(e,t,n){return In(this,e,function(e){var r=e.gutterMarkers||(e.gutterMarkers={});return r[t]=n,!n&&Qi(r)&&(e.gutterMarkers=null),!0})}),clearGutter:Nt(null,function(e){var t=this,n=t.doc,r=n.first;n.iter(function(n){n.gutterMarkers&&n.gutterMarkers[e]&&(n.gutterMarkers[e]=null,Lt(t,r,r+1),Qi(n.gutterMarkers)&&(n.gutterMarkers=null)),++r})}),addLineClass:Nt(null,function(e,t,n){return In(this,e,function(e){var r=t=="text"?"textClass":t=="background"?"bgClass":"wrapClass";if(!e[r])e[r]=n;else{if((new RegExp("\\b"+n+"\\b")).test(e[r]))return!1;e[r]+=" "+n}return!0})}),removeLineClass:Nt(null,function(e,t,n){return In(this,e,function(e){var r=t=="text"?"textClass":t=="background"?"bgClass":"wrapClass",i=e[r];if(!i)return!1;if(n==null)e[r]=null;else{var s=i.replace(new RegExp("^"+n+"\\b\\s*|\\s*\\b"+n+"\\b"),"");if(s==i)return!1;e[r]=s||null}return!0})}),addLineWidget:Nt(null,function(e,t,n){return Or(this,e,t,n)}),removeLineWidget:function(e){e.clear()},lineInfo:function(e){if(typeof e=="number"){if(!Cn(this.doc,e))return null;var t=e;e=ni(this.doc,e);if(!e)return null}else{var t=oi(e);if(t==null)return null}return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},getViewport:function(){return{from:this.display.showingFrom,to:this.display.showingTo}},addWidget:function(e,t,n,r,i){var s=this.display;e=vt(this,Tn(this.doc,e));var o=e.bottom,u=e.left;t.style.position="absolute",s.sizer.appendChild(t);if(r=="over")o=e.top;else if(r=="above"||r=="near"){var a=Math.max(s.wrapper.clientHeight,this.doc.height),f=Math.max(s.sizer.clientWidth,s.lineSpace.clientWidth);(r=="above"||e.bottom+t.offsetHeight>a)&&e.top>t.offsetHeight?o=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=a&&(o=e.bottom),u+t.offsetWidth>f&&(u=f-t.offsetWidth)}t.style.top=o+rt(s)+"px",t.style.left=t.style.right="",i=="right"?(u=s.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):(i=="left"?u=0:i=="middle"&&(u=(s.sizer.clientWidth-t.offsetWidth)/2),t.style.left=u+"px"),n&&Pn(this,u,o,u+t.offsetWidth,o+t.offsetHeight)},triggerOnKeyDown:Nt(null,tn),execCommand:function(e){return er[e](this)},findPosH:function(e,t,n,r){var i=1;t<0&&(i=-1,t=-t);for(var s=0,o=Tn(this.doc,e);s<t;++s){o=qn(this.doc,o,i,n,r);if(o.hitSide)break}return o},moveH:Nt(null,function(e,t){var n=this.doc.sel,r;n.shift||n.extend||wn(n.from,n.to)?r=qn(this.doc,n.head,e,t,this.options.rtlMoveVisually):r=e<0?n.from:n.to,kn(this.doc,r,r,e)}),deleteH:Nt(null,function(e,t){var n=this.doc.sel;wn(n.from,n.to)?yn(this.doc,"",n.from,qn(this.doc,n.head,e,t,!1),"+delete"):yn(this.doc,"",n.from,n.to,"+delete"),this.curOp.userSelChange=!0}),findPosV:function(e,t,n,r){var i=1,s=r;t<0&&(i=-1,t=-t);for(var o=0,u=Tn(this.doc,e);o<t;++o){var a=vt(this,u,"div");s==null?s=a.left:a.left=s,u=Rn(this,a,i,n);if(u.hitSide)break}return u},moveV:Nt(null,function(e,t){var n=this.doc.sel,r=vt(this,n.head,"div");n.goalColumn!=null&&(r.left=n.goalColumn);var i=Rn(this,r,e,t);t=="page"&&jn(this,0,dt(this,i,"div").top-r.top),kn(this.doc,i,i,e),n.goalColumn=r.left}),toggleOverwrite:function(){(this.state.overwrite=!this.state.overwrite)?this.display.cursor.className+=" CodeMirror-overwrite":this.display.cursor.className=this.display.cursor.className.replace(" CodeMirror-overwrite","")},hasFocus:function(){return this.state.focused},scrollTo:Nt(null,function(e,t){Bn(this,e,t)}),getScrollInfo:function(){var e=this.display.scroller,t=Hi;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-t,width:e.scrollWidth-t,clientHeight:e.clientHeight-t,clientWidth:e.clientWidth-t}},scrollIntoView:Nt(null,function(e,t){typeof e=="number"&&(e=bn(e,0)),t||(t=0);var n=e;if(!e||e.line!=null)this.curOp.scrollToPos=e?Tn(this.doc,e):this.doc.sel.head,this.curOp.scrollToPosMargin=t,n=vt(this,this.curOp.scrollToPos);var r=Hn(this,n.left,n.top-t,n.right,n.bottom+t);Bn(this,r.scrollLeft,r.scrollTop)}),setSize:function(e,t){function n(e){return typeof e=="number"||/^\d+$/.test(String(e))?e+"px":e}e!=null&&(this.display.wrapper.style.width=n(e)),t!=null&&(this.display.wrapper.style.height=n(t)),this.refresh()},on:function(e,t){ki(this,e,t)},off:function(e,t){Li(this,e,t)},operation:function(e){return kt(this,e)},refresh:Nt(null,function(){ct(this),Bn(this,this.doc.scrollLeft,this.doc.scrollTop),Lt(this)}),swapDoc:Nt(null,function(e){var t=this.doc;return t.cm=null,ti(this,e),ct(this),_t(this,!0),Bn(this,e.scrollLeft,e.scrollTop),t}),getInputField:function(){return this.display.input},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}};var Wn=S.optionHandlers={},Xn=S.defaults={},$n=S.Init={toString:function(){return"CodeMirror.Init"}};Vn("value","",function(e,t){e.setValue(t)},!0),Vn("mode",null,function(e,t){e.doc.modeOption=t,T(e)},!0),Vn("indentUnit",2,T,!0),Vn("indentWithTabs",!1),Vn("smartIndent",!0),Vn("tabSize",4,function(e){T(e),ct(e),Lt(e)},!0),Vn("electricChars",!0),Vn("rtlMoveVisually",!m),Vn("theme","default",function(e){A(e),O(e)},!0),Vn("keyMap","default",L),Vn("extraKeys",null),Vn("onKeyEvent",null),Vn("onDragEvent",null),Vn("lineWrapping",!1,N,!0),Vn("gutters",[],function(e){P(e.options),O(e)},!0),Vn("fixedGutter",!0,function(e,t){e.display.gutters.style.left=t?q(e.display)+"px":"0",e.refresh()},!0),Vn("lineNumbers",!1,function(e){P(e.options),O(e)},!0),Vn("firstLineNumber",1,O,!0),Vn("lineNumberFormatter",function(e){return e},O,!0),Vn("showCursorWhenSelecting",!1,K,!0),Vn("readOnly",!1,function(e,t){t=="nocursor"?(sn(e),e.display.input.blur()):t||_t(e,!0)}),Vn("dragDrop",!0),Vn("cursorBlinkRate",530),Vn("cursorHeight",1),Vn("workTime",100),Vn("workDelay",100),Vn("flattenSpans",!0),Vn("pollInterval",100),Vn("undoDepth",40,function(e,t){e.doc.history.undoDepth=t}),Vn("historyEventDelay",500),Vn("viewportMargin",10,function(e){e.refresh()},!0),Vn("maxHighlightLength",1e4,function(e){T(e),e.refresh()},!0),Vn("moveInputWithCursor",!0,function(e,t){t||(e.display.inputDiv.style.top=e.display.inputDiv.style.left=0)}),Vn("tabindex",null,function(e,t){e.display.input.tabIndex=t||""}),Vn("autofocus",null);var Jn=S.modes={},Kn=S.mimeModes={};S.defineMode=function(e,t){!S.defaults.mode&&e!="null"&&(S.defaults.mode=e);if(arguments.length>2){t.dependencies=[];for(var n=2;n<arguments.length;++n)t.dependencies.push(arguments[n])}Jn[e]=t},S.defineMIME=function(e,t){Kn[e]=t},S.resolveMode=function(e){if(typeof e=="string"&&Kn.hasOwnProperty(e))e=Kn[e];else if(typeof e=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return S.resolveMode("application/xml");return typeof e=="string"?{name:e}:e||{name:"null"}},S.getMode=function(e,t){t=S.resolveMode(t);var n=Jn[t.name];if(!n)return S.getMode(e,"text/plain");var r=n(e,t);if(Qn.hasOwnProperty(t.name)){var i=Qn[t.name];for(var s in i){if(!i.hasOwnProperty(s))continue;r.hasOwnProperty(s)&&(r["_"+s]=r[s]),r[s]=i[s]}}return r.name=t.name,r},S.defineMode("null",function(){return{token:function(e){e.skipToEnd()}}}),S.defineMIME("text/plain","null");var Qn=S.modeExtensions={};S.extendMode=function(e,t){var n=Qn.hasOwnProperty(e)?Qn[e]:Qn[e]={};Xi(t,n)},S.defineExtension=function(e,t){S.prototype[e]=t},S.defineDocExtension=function(e,t){Gr.prototype[e]=t},S.defineOption=Vn;var Gn=[];S.defineInitHook=function(e){Gn.push(e)},S.copyState=Yn,S.startState=Zn,S.innerMode=function(e,t){while(e.innerMode){var n=e.innerMode(t);t=n.state,e=n.mode}return n||{mode:e,state:t}};var er=S.commands={selectAll:function(e){e.setSelection(bn(e.firstLine(),0),bn(e.lastLine()))},killLine:function(e){var t=e.getCursor(!0),n=e.getCursor(!1),r=!wn(t,n);!r&&e.getLine(t.line).length==t.ch?e.replaceRange("",t,bn(t.line+1,0),"+delete"):e.replaceRange("",t,r?n:bn(t.line),"+delete")},deleteLine:function(e){var t=e.getCursor().line;e.replaceRange("",bn(t,0),bn(t),"+delete")},undo:function(e){e.undo()},redo:function(e){e.redo()},goDocStart:function(e){e.extendSelection(bn(e.firstLine(),0))},goDocEnd:function(e){e.extendSelection(bn(e.lastLine()))},goLineStart:function(e){e.extendSelection(ys(e,e.getCursor().line))},goLineStartSmart:function(e){var t=e.getCursor(),n=ys(e,t.line),r=e.getLineHandle(n.line),i=fi(r);if(!i||i[0].level==0){var s=Math.max(0,r.text.search(/\S/)),o=t.line==n.line&&t.ch<=s&&t.ch;e.extendSelection(bn(n.line,o?0:s))}else e.extendSelection(n)},goLineEnd:function(e){e.extendSelection(bs(e,e.getCursor().line))},goLineRight:function(e){var t=e.charCoords(e.getCursor(),"div").top+5;e.extendSelection(e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:t},"div"))},goLineLeft:function(e){var t=e.charCoords(e.getCursor(),"div").top+5;e.extendSelection(e.coordsChar({left:0,top:t},"div"))},goLineUp:function(e){e.moveV(-1,"line")},goLineDown:function(e){e.moveV(1,"line")},goPageUp:function(e){e.moveV(-1,"page")},goPageDown:function(e){e.moveV(1,"page")},goCharLeft:function(e){e.moveH(-1,"char")},goCharRight:function(e){e.moveH(1,"char")},goColumnLeft:function(e){e.moveH(-1,"column")},goColumnRight:function(e){e.moveH(1,"column")},goWordLeft:function(e){e.moveH(-1,"word")},goGroupRight:function(e){e.moveH(1,"group")},goGroupLeft:function(e){e.moveH(-1,"group")},goWordRight:function(e){e.moveH(1,"word")},delCharBefore:function(e){e.deleteH(-1,"char")},delCharAfter:function(e){e.deleteH(1,"char")},delWordBefore:function(e){e.deleteH(-1,"word")},delWordAfter:function(e){e.deleteH(1,"word")},delGroupBefore:function(e){e.deleteH(-1,"group")},delGroupAfter:function(e){e.deleteH(1,"group")},indentAuto:function(e){e.indentSelection("smart")},indentMore:function(e){e.indentSelection("add")},indentLess:function(e){e.indentSelection("subtract")},insertTab:function(e){e.replaceSelection("	","end","+input")},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.replaceSelection("	","end","+input")},transposeChars:function(e){var t=e.getCursor(),n=e.getLine(t.line);t.ch>0&&t.ch<n.length-1&&e.replaceRange(n.charAt(t.ch)+n.charAt(t.ch-1),bn(t.line,t.ch-1),bn(t.line,t.ch+1))},newlineAndIndent:function(e){Nt(e,function(){e.replaceSelection("\n","end","+input"),e.indentLine(e.getCursor().line,null,!0)})()},toggleOverwrite:function(e){e.toggleOverwrite()}},tr=S.keyMap={};tr.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite"},tr.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Alt-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore",fallthrough:"basic"},tr.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore",fallthrough:["basic","emacsy"]},tr["default"]=v?tr.macDefault:tr.pcDefault,tr.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},S.lookupKey=rr,S.isModifierKey=ir,S.keyName=sr,S.fromTextArea=function(e,t){function i(){e.value=a.getValue()}t||(t={}),t.value=e.value,!t.tabindex&&e.tabindex&&(t.tabindex=e.tabindex),!t.placeholder&&e.placeholder&&(t.placeholder=e.placeholder);if(t.autofocus==null){var n=document.body;try{n=document.activeElement}catch(r){}t.autofocus=n==e||e.getAttribute("autofocus")!=null&&n==document.body}if(e.form){ki(e.form,"submit",i);if(!t.leaveSubmitMethodAlone){var s=e.form,o=s.submit;try{var u=s.submit=function(){i(),s.submit=o,s.submit(),s.submit=u}}catch(r){}}}e.style.display="none";var a=S(function(t){e.parentNode.insertBefore(t,e.nextSibling)},t);return a.save=i,a.getTextArea=function(){return e},a.toTextArea=function(){i(),e.parentNode.removeChild(a.getWrapperElement()),e.style.display="",e.form&&(Li(e.form,"submit",i),typeof e.form.submit=="function"&&(e.form.submit=o))},a},or.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==0},peek:function(){return this.string.charAt(this.pos)||undefined},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(e){var t=this.string.charAt(this.pos);if(typeof e=="string")var n=t==e;else var n=t&&(e.test?e.test(t):e(t));if(n)return++this.pos,t},eatWhile:function(e){var t=this.pos;while(this.eat(e));return this.pos>t},eatSpace:function(){var e=this.pos;while(/[\s\u00a0]/.test(this.string.charAt(this.pos)))++this.pos;return this.pos>e},skipToEnd:function(){this.pos=this.string.length},skipTo:function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},backUp:function(e){this.pos-=e},column:function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Fi(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue},indentation:function(){return Fi(this.string,null,this.tabSize)},match:function(e,t,n){if(typeof e!="string"){var s=this.string.slice(this.pos).match(e);return s&&s.index>0?null:(s&&t!==!1&&(this.pos+=s[0].length),s)}var r=function(e){return n?e.toLowerCase():e},i=this.string.substr(this.pos,e.length);if(r(i)==r(e))return t!==!1&&(this.pos+=e.length),!0},current:function(){return this.string.slice(this.start,this.pos)}},S.StringStream=or,S.TextMarker=ur,ur.prototype.clear=function(){if(this.explicitlyCleared)return;var e=this.doc.cm,t=e&&!e.curOp;t&&xt(e);var n=null,r=null;for(var i=0;i<this.lines.length;++i){var s=this.lines[i],o=cr(s.markedSpans,this);o.to!=null&&(r=oi(s)),s.markedSpans=hr(s.markedSpans,o),o.from!=null?n=oi(s):this.collapsed&&!xr(this.doc,s)&&e&&si(s,wt(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var i=0;i<this.lines.length;++i){var u=Sr(e.doc,this.lines[i]),a=_(e.doc,u);a>e.display.maxLineLength&&(e.display.maxLine=u,e.display.maxLineLength=a,e.display.maxLineChanged=!0)}n!=null&&e&&Lt(e,n,r+1),this.lines.length=0,this.explicitlyCleared=!0,this.collapsed&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&On(e)),t&&Tt(e),_i(this,"clear")},ur.prototype.find=function(){var e,t;for(var n=0;n<this.lines.length;++n){var r=this.lines[n],i=cr(r.markedSpans,this);if(i.from!=null||i.to!=null){var s=oi(r);i.from!=null&&(e=bn(s,i.from)),i.to!=null&&(t=bn(s,i.to))}}return this.type=="bookmark"?e:e&&{from:e,to:t}},ur.prototype.getOptions=function(e){var t=this.replacedWith;return{className:this.className,inclusiveLeft:this.inclusiveLeft,inclusiveRight:this.inclusiveRight,atomic:this.atomic,collapsed:this.collapsed,replacedWith:e?t&&t.cloneNode(!0):t,readOnly:this.readOnly,startStyle:this.startStyle,endStyle:this.endStyle}},ur.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(!t.maybeHiddenMarkers||zi(t.maybeHiddenMarkers,this)==-1)&&(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},ur.prototype.detachLine=function(e){this.lines.splice(zi(this.lines,e),1);if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}},S.SharedTextMarker=fr,fr.prototype.clear=function(){if(this.explicitlyCleared)return;this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();_i(this,"clear")},fr.prototype.find=function(){return this.primary.find()},fr.prototype.getOptions=function(e){var t=this.primary.getOptions(e);return t.shared=!0,t};var kr=S.LineWidget=function(e,t,n){for(var r in n)n.hasOwnProperty(r)&&(this[r]=n[r]);this.cm=e,this.node=t};kr.prototype.clear=Lr(function(){var e=this.line.widgets,t=oi(this.line);if(t==null||!e)return;for(var n=0;n<e.length;++n)e[n]==this&&e.splice(n--,1);e.length||(this.line.widgets=null),si(this.line,Math.max(0,this.line.height-Ar(this))),Lt(this.cm,t,t+1)}),kr.prototype.changed=Lr(function(){var e=this.height;this.height=null;var t=Ar(this)-e;if(!t)return;si(this.line,this.line.height+t);var n=oi(this.line);Lt(this.cm,n,n+1)});var Fr={},Rr=/[\t\u0000-\u0019\u00ad\u200b\u2028\u2029\uFEFF]/g;Jr.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var n=e,r=e+t;n<r;++n){var i=this.lines[n];this.height-=i.height,Dr(i),_i(i,"delete")}this.lines.splice(e,t)},collapse:function(e){e.splice.apply(e,[e.length,0].concat(this.lines))},insertInner:function(e,t,n){this.height+=n,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var r=0,i=t.length;r<i;++r)t[r].parent=this},iterN:function(e,t,n){for(var r=e+t;e<r;++e)if(n(this.lines[e]))return!0}},Kr.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var n=0;n<this.children.length;++n){var r=this.children[n],i=r.chunkSize();if(e<i){var s=Math.min(t,i-e),o=r.height;r.removeInner(e,s),this.height-=o-r.height,i==s&&(this.children.splice(n--,1),r.parent=null);if((t-=s)==0)break;e=0}else e-=i}if(this.size-t<25){var u=[];this.collapse(u),this.children=[new Jr(u)],this.children[0].parent=this}},collapse:function(e){for(var t=0,n=this.children.length;t<n;++t)this.children[t].collapse(e)},insertInner:function(e,t,n){this.size+=t.length,this.height+=n;for(var r=0,i=this.children.length;r<i;++r){var s=this.children[r],o=s.chunkSize();if(e<=o){s.insertInner(e,t,n);if(s.lines&&s.lines.length>50){while(s.lines.length>50){var u=s.lines.splice(s.lines.length-25,25),a=new Jr(u);s.height-=a.height,this.children.splice(r+1,0,a),a.parent=this}this.maybeSpill()}break}e-=o}},maybeSpill:function(){if(this.children.length<=10)return;var e=this;do{var t=e.children.splice(e.children.length-5,5),n=new Kr(t);if(!e.parent){var r=new Kr(e.children);r.parent=e,e.children=[r,n],e=r}else{e.size-=n.size,e.height-=n.height;var i=zi(e.parent.children,e);e.parent.children.splice(i+1,0,n)}n.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()},iterN:function(e,t,n){for(var r=0,i=this.children.length;r<i;++r){var s=this.children[r],o=s.chunkSize();if(e<o){var u=Math.min(t,o-e);if(s.iterN(e,u,n))return!0;if((t-=u)==0)break;e=0}else e-=o}}};var Qr=0,Gr=S.Doc=function(e,t,n){if(!(this instanceof Gr))return new Gr(e,t,n);n==null&&(n=0),Kr.call(this,[new Jr([Mr("",null)])]),this.first=n,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.history=li(),this.frontier=n;var r=bn(n,0);this.sel={from:r,to:r,head:r,anchor:r,shift:!1,extend:!1,goalColumn:null},this.id=++Qr,this.modeOption=t,typeof e=="string"&&(e=fs(e)),$r(this,{from:r,to:r,text:e},null,{head:r,anchor:r})};Gr.prototype=Wi(Kr.prototype,{iter:function(e,t,n){n?this.iterN(e-this.first,t-e,n):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){var n=0;for(var r=0,i=t.length;r<i;++r)n+=t[r].height;this.insertInner(e-this.first,t,n)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=ii(this,this.first,this.first+this.size);return e===!1?t:t.join(e||"\n")},setValue:function(e){var t=bn(this.first,0),n=this.first+this.size-1;hn(this,{from:t,to:bn(n,ni(this,n).text.length),text:fs(e),origin:"setValue"},{head:t,anchor:t},!0)},replaceRange:function(e,t,n,r){t=Tn(this,t),n=n?Tn(this,n):t,yn(this,e,t,n,r)},getRange:function(e,t,n){var r=ri(this,Tn(this,e),Tn(this,t));return n===!1?r:r.join(n||"\n")},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},setLine:function(e,t){Cn(this,e)&&yn(this,t,bn(e,0),Tn(this,bn(e)))},removeLine:function(e){e?yn(this,"",Tn(this,bn(e-1)),Tn(this,bn(e))):yn(this,"",bn(0,0),Tn(this,bn(1,0)))},getLineHandle:function(e){if(Cn(this,e))return ni(this,e)},getLineNumber:function(e){return oi(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return Tn(this,e)},getCursor:function(e){var t=this.sel,n;return e==null||e=="head"?n=t.head:e=="anchor"?n=t.anchor:e=="end"||e===!1?n=t.to:n=t.from,Sn(n)},somethingSelected:function(){return!wn(this.sel.head,this.sel.anchor)},setCursor:Ct(function(e,t,n){var r=Tn(this,typeof e=="number"?bn(e,t||0):e);n?kn(this,r):An(this,r,r)}),setSelection:Ct(function(e,t){An(this,Tn(this,e),Tn(this,t||e))}),extendSelection:Ct(function(e,t){kn(this,Tn(this,e),t&&Tn(this,t))}),getSelection:function(e){return this.getRange(this.sel.from,this.sel.to,e)},replaceSelection:function(e,t,n){hn(this,{from:this.sel.from,to:this.sel.to,text:fs(e),origin:n},t||"around")},undo:Ct(function(){dn(this,"undo")}),redo:Ct(function(){dn(this,"redo")}),setExtending:function(e){this.sel.extend=e},historySize:function(){var e=this.history;return{undo:e.done.length,redo:e.undone.length}},clearHistory:function(){this.history=li()},markClean:function(){this.history.dirtyCounter=0,this.history.lastOp=this.history.lastOrigin=null},isClean:function(){return this.history.dirtyCounter==0},getHistory:function(){return{done:mi(this.history.done),undone:mi(this.history.undone)}},setHistory:function(e){var t=this.history=li();t.done=e.done.slice(0),t.undone=e.undone.slice(0)},markText:function(e,t,n){return ar(this,Tn(this,e),Tn(this,t),n,"range")},setBookmark:function(e,t){var n={replacedWith:t&&(t.nodeType==null?t.widget:t),insertLeft:t&&t.insertLeft};return e=Tn(this,e),ar(this,e,e,n,"bookmark")},findMarksAt:function(e){e=Tn(this,e);var t=[],n=ni(this,e.line).markedSpans;if(n)for(var r=0;r<n.length;++r){var i=n[r];(i.from==null||i.from<=e.ch)&&(i.to==null||i.to>=e.ch)&&t.push(i.marker.parent||i.marker)}return t},getAllMarks:function(){var e=[];return this.iter(function(t){var n=t.markedSpans;if(n)for(var r=0;r<n.length;++r)n[r].from!=null&&e.push(n[r].marker)}),e},posFromIndex:function(e){var t,n=this.first;return this.iter(function(r){var i=r.text.length+1;if(i>e)return t=e,!0;e-=i,++n}),Tn(this,bn(n,t))},indexFromPos:function(e){e=Tn(this,e);var t=e.ch;return e.line<this.first||e.ch<0?0:(this.iter(this.first,e.line,function(e){t+=e.text.length+1}),t)},copy:function(e){var t=new Gr(ii(this,this.first,this.first+this.size),this.modeOption,this.first);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel={from:this.sel.from,to:this.sel.to,head:this.sel.head,anchor:this.sel.anchor,shift:this.sel.shift,extend:!1,goalColumn:this.sel.goalColumn},e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,n=this.first+this.size;e.from!=null&&e.from>t&&(t=e.from),e.to!=null&&e.to<n&&(n=e.to);var r=new Gr(ii(this,t,n),e.mode||this.modeOption,t);return e.sharedHist&&
(r.history=this.history),(this.linked||(this.linked=[])).push({doc:r,sharedHist:e.sharedHist}),r.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],r},unlinkDoc:function(e){e instanceof S&&(e=e.doc);if(this.linked)for(var t=0;t<this.linked.length;++t){var n=this.linked[t];if(n.doc!=e)continue;this.linked.splice(t,1),e.unlinkDoc(this);break}if(e.history==this.history){var r=[e.id];ei(e,function(e){r.push(e.id)},!0),e.history=li(),e.history.done=mi(this.history.done,r),e.history.undone=mi(this.history.undone,r)}},iterLinkedDocs:function(e){ei(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm}}),Gr.prototype.eachLine=Gr.prototype.iter;var Yr="iter insert remove copy getEditor".split(" ");for(var Zr in Gr.prototype)Gr.prototype.hasOwnProperty(Zr)&&zi(Yr,Zr)<0&&(S.prototype[Zr]=function(e){return function(){return e.apply(this.doc,arguments)}}(Gr.prototype[Zr]));S.e_stop=Ti,S.e_preventDefault=Si,S.e_stopPropagation=xi;var Oi,Mi=0;S.on=ki,S.off=Li,S.signal=Ai;var Hi=30,Bi=S.Pass={toString:function(){return"CodeMirror.Pass"}};ji.prototype={set:function(e,t){clearTimeout(this.id),this.id=setTimeout(t,e)}},S.countColumn=Fi;var Ii=[""],Ji=/[\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc]/,Gi=/[\u0300-\u036F\u0483-\u0487\u0488-\u0489\u0591-\u05BD\u05BF\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\uA66F\uA670-\uA672\uA674-\uA67D\uA69F\udc00-\udfff]/;S.replaceGetRect=function(e){ns=e};var rs=function(){if(r)return!1;var e=Yi("div");return"draggable"in e||"dragDrop"in e}(),is=/^$/;e?is=/$'/:a&&!/Version\/([6-9]|\d\d)\b/.test(navigator.userAgent)?is=/\-[^ \-?]|\?[^ !'\"\),.\-\/:;\?\]\}]/:i&&(is=/[~!#%&*)=+}\]|\"\.>,:;][({[<]|-[^\-?\.]|\?[\w~`@#$%\^&*(_=+{[|><]/);var ss,us,fs="\n\nb".split(/\n/).length!=3?function(e){var t=0,n=[],r=e.length;while(t<=r){var i=e.indexOf("\n",t);i==-1&&(i=e.length);var s=e.slice(t,e.charAt(i-1)=="\r"?i-1:i),o=s.indexOf("\r");o!=-1?(n.push(s.slice(0,o)),t+=o+1):(n.push(s),t=i+1)}return n}:function(e){return e.split(/\r\n?|\n/)};S.splitLines=fs;var ls=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(t){return!1}}:function(e){try{var t=e.ownerDocument.selection.createRange()}catch(n){}return!t||t.parentElement()!=e?!1:t.compareEndPoints("StartToEnd",t)!=0},cs=function(){var e=Yi("div");return"oncopy"in e?!0:(e.setAttribute("oncopy","return;"),typeof e.oncopy=="function")}(),hs={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",91:"Mod",92:"Mod",93:"Mod",109:"-",107:"=",127:"Delete",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63276:"PageUp",63277:"PageDown",63275:"End",63273:"Home",63234:"Left",63232:"Up",63235:"Right",63233:"Down",63302:"Insert",63272:"Delete"};S.keyNames=hs,function(){for(var e=0;e<10;e++)hs[e+48]=String(e);for(var e=65;e<=90;e++)hs[e]=String.fromCharCode(e);for(var e=1;e<=12;e++)hs[e+111]=hs[e+63235]="F"+e}();var Ss=function(){function n(n){return n<=255?e.charAt(n):1424<=n&&n<=1524?"R":1536<=n&&n<=1791?t.charAt(n-1536):1792<=n&&n<=2220?"r":"L"}var e="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLL",t="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmmrrrrrrrrrrrrrrrrrr",r=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,i=/[stwN]/,s=/[LRr]/,o=/[Lb1n]/,u=/[1n]/,a="L";return function(e){if(!r.test(e))return!1;var t=e.length,f=[];for(var l=0,c;l<t;++l)f.push(c=n(e.charCodeAt(l)));for(var l=0,h=a;l<t;++l){var c=f[l];c=="m"?f[l]=h:h=c}for(var l=0,p=a;l<t;++l){var c=f[l];c=="1"&&p=="r"?f[l]="n":s.test(c)&&(p=c,c=="r"&&(f[l]="R"))}for(var l=1,h=f[0];l<t-1;++l){var c=f[l];c=="+"&&h=="1"&&f[l+1]=="1"?f[l]="1":c==","&&h==f[l+1]&&(h=="1"||h=="n")&&(f[l]=h),h=c}for(var l=0;l<t;++l){var c=f[l];if(c==",")f[l]="N";else if(c=="%"){for(var d=l+1;d<t&&f[d]=="%";++d);var v=l&&f[l-1]=="!"||d<t-1&&f[d]=="1"?"1":"N";for(var m=l;m<d;++m)f[m]=v;l=d-1}}for(var l=0,p=a;l<t;++l){var c=f[l];p=="L"&&c=="1"?f[l]="L":s.test(c)&&(p=c)}for(var l=0;l<t;++l)if(i.test(f[l])){for(var d=l+1;d<t&&i.test(f[d]);++d);var g=(l?f[l-1]:a)=="L",y=(d<t-1?f[d]:a)=="L",v=g||y?"L":"R";for(var m=l;m<d;++m)f[m]=v;l=d-1}var b=[],w;for(var l=0;l<t;)if(o.test(f[l])){var E=l;for(++l;l<t&&o.test(f[l]);++l);b.push({from:E,to:l,level:0})}else{var S=l,x=b.length;for(++l;l<t&&f[l]!="L";++l);for(var m=S;m<l;)if(u.test(f[m])){S<m&&b.splice(x,0,{from:S,to:m,level:1});var T=m;for(++m;m<l&&u.test(f[m]);++m);b.splice(x,0,{from:T,to:m,level:2}),S=m}else++m;S<l&&b.splice(x,0,{from:S,to:l,level:1})}return b[0].level==1&&(w=e.match(/^\s+/))&&(b[0].from=w[0].length,b.unshift({from:0,to:w[0].length,level:0})),Ri(b).level==1&&(w=e.match(/\s+$/))&&(Ri(b).to-=w[0].length,b.push({from:t-w[0].length,to:t,level:0})),b[0].level!=Ri(b).level&&b.push({from:t,to:t,level:b[0].level}),b}}();return S.version="3.12",S}(),CodeMirror.defineMode("markdown",function(e,t){function L(e,t,n){return t.f=t.inline=n,n(e,t)}function A(e,t,n){return t.f=t.block=n,n(e,t)}function O(e){return e.linkTitle=!1,e.em=!1,e.strong=!1,e.quote=0,!n&&e.f==_&&(e.f=B,e.block=M),e.thisLineHasContent=!1,null}function M(e,n){var r=n.list!==!1;n.list!==!1&&n.indentationDiff>=0?(n.indentationDiff<4&&(n.indentation-=n.indentationDiff),n.list=null):n.list!==!1&&n.indentation>0?(n.list=null,n.listDepth=Math.floor(n.indentation/4)):n.list!==!1&&(n.list=!1,n.listDepth=0);if(n.indentationDiff>=4)return n.indentation-=4,e.skipToEnd(),a;if(e.eatSpace())return null;if(e.peek()==="#"||n.prevLineHasContent&&e.match(C))n.header=!0;else if(e.eat(">")){n.indentation++,n.quote=1,e.eatSpace();while(e.eat(">"))e.eatSpace(),n.quote++}else{if(e.peek()==="[")return L(e,n,F);if(e.match(S,!0))return d;if((!n.prevLineHasContent||r)&&(e.match(x,!0)||e.match(T,!0)))n.indentation+=4,n.list=!0,n.listDepth++,t.taskLists&&e.match(N,!1)&&(n.taskList=!0);else if(t.fencedCodeBlocks&&e.match(/^```([\w+#]*)/,!0))return n.localMode=s(RegExp.$1),n.localMode&&(n.localState=n.localMode.startState()),A(e,n,D),a}return L(e,n,n.inline)}function _(e,t){var i=r.token(e,t.htmlState);return n&&i==="tag"&&t.htmlState.type!=="openTag"&&!t.htmlState.context&&(t.f=B,t.block=M),t.md_inside&&e.current().indexOf(">")!=-1&&(t.f=B,t.block=M,t.htmlState.context=undefined),i}function D(e,t){return e.sol()&&e.match(/^```/,!0)?(t.localMode=t.localState=null,t.f=B,t.block=M,a):t.localMode?t.localMode.token(e,t.localState):(e.skipToEnd(),a)}function P(e){var t=[];if(e.taskOpen)return"meta";if(e.taskClosed)return"property";e.strong&&t.push(E),e.em&&t.push(w),e.linkText&&t.push(y),e.code&&t.push(a),e.header&&t.push(u),e.quote&&t.push(e.quote%2?f:l);if(e.list!==!1){var n=(e.listDepth-1)%3;n?n===1?t.push(h):t.push(p):t.push(c)}return t.length?t.join(" "):null}function H(e,t){return e.match(k,!0)?P(t):undefined}function B(e,n){var r=n.text(e,n);if(typeof r!="undefined")return r;if(n.list)return n.list=null,P(n);if(n.taskList){var i=e.match(N,!0)[1]!=="x";return i?n.taskOpen=!0:n.taskClosed=!0,n.taskList=!1,P(n)}n.taskOpen=!1,n.taskClosed=!1;var s=e.next();if(s==="\\")return e.next(),P(n);if(n.linkTitle){n.linkTitle=!1;var u=s;s==="("&&(u=")"),u=(u+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1");var a="^\\s*(?:[^"+u+"\\\\]+|\\\\\\\\|\\\\.)"+u;if(e.match(new RegExp(a),!0))return b}if(s==="`"){var f=P(n),l=e.pos;e.eatWhile("`");var c=1+e.pos-l;return n.code?c===o?(n.code=!1,f):P(n):(o=c,n.code=!0,P(n))}if(n.code)return P(n);if(s==="!"&&e.match(/\[[^\]]*\] ?(?:\(|\[)/,!1))return e.match(/\[[^\]]*\]/),n.inline=n.f=j,v;if(s==="["&&e.match(/.*\](\(| ?\[)/,!1))return n.linkText=!0,P(n);if(s==="]"&&n.linkText){var h=P(n);return n.linkText=!1,n.inline=n.f=j,h}if(s==="<"&&e.match(/^(https?|ftps?):\/\/(?:[^\\>]|\\.)+>/,!0))return L(e,n,U(m,">"));if(s==="<"&&e.match(/^[^> \\]+@(?:[^\\>]|\\.)+>/,!0))return L(e,n,U(g,">"));if(s==="<"&&e.match(/^\w/,!1)){if(e.string.indexOf(">")!=-1){var p=e.string.substring(1,e.string.indexOf(">"));/markdown\s*=\s*('|"){0,1}1('|"){0,1}/.test(p)&&(n.md_inside=!0)}return e.backUp(1),A(e,n,_)}if(s==="<"&&e.match(/^\/\w*?>/))return n.md_inside=!1,"tag";var d=!1;if(!t.underscoresBreakWords&&s==="_"&&e.peek()!=="_"&&e.match(/(\w)/,!1)){var y=e.pos-2;if(y>=0){var w=e.string.charAt(y);w!=="_"&&w.match(/(\w)/,!1)&&(d=!0)}}var f=P(n);if(s==="*"||s==="_"&&!d){if(n.strong===s&&e.eat(s))return n.strong=!1,f;if(!n.strong&&e.eat(s))return n.strong=s,P(n);if(n.em===s)return n.em=!1,f;if(!n.em)return n.em=s,P(n)}else if(s===" ")if(e.eat("*")||e.eat("_")){if(e.peek()===" ")return P(n);e.backUp(1)}return P(n)}function j(e,t){if(e.eatSpace())return null;var n=e.next();return n==="("||n==="["?L(e,t,U(b,n==="("?")":"]")):"error"}function F(e,t){return e.match(/^[^\]]*\]:/,!0)?(t.f=I,y):L(e,t,B)}function I(e,t){return e.eatSpace()?null:(e.match(/^[^\s]+/,!0),e.peek()===undefined?t.linkTitle=!0:e.match(/^(?:\s+(?:"(?:[^"\\]|\\\\|\\.)+"|'(?:[^'\\]|\\\\|\\.)+'|\((?:[^)\\]|\\\\|\\.)+\)))?/,!0),t.f=t.inline=B,b)}function R(e){return q[e]||(e=(e+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1"),q[e]=new RegExp("^(?:[^\\\\]|\\\\.)*?("+e+")")),q[e]}function U(e,t,n){return n=n||B,function(r,i){return r.match(R(t)),i.inline=i.f=n,e}}var n=CodeMirror.mimeModes.hasOwnProperty("text/html"),r=CodeMirror.getMode(e,n?"text/html":"text/plain"),i={html:"htmlmixed",js:"javascript",json:"application/json",c:"text/x-csrc","c++":"text/x-c++src",java:"text/x-java",csharp:"text/x-csharp","c#":"text/x-csharp",scala:"text/x-scala"},s=function(){var t,n={},r={},s,o=[];for(var u in CodeMirror.modes)CodeMirror.modes.propertyIsEnumerable(u)&&o.push(u);for(t=0;t<o.length;t++)n[o[t]]=o[t];var a=[];for(var u in CodeMirror.mimeModes)CodeMirror.mimeModes.propertyIsEnumerable(u)&&a.push({mime:u,mode:CodeMirror.mimeModes[u]});for(t=0;t<a.length;t++)s=a[t].mime,r[s]=a[t].mime;for(var f in i)if(i[f]in n||i[f]in r)n[f]=i[f];return function(t){return n[t]?CodeMirror.getMode(e,n[t]):null}}();t.underscoresBreakWords===undefined&&(t.underscoresBreakWords=!0),t.fencedCodeBlocks===undefined&&(t.fencedCodeBlocks=!1),t.taskLists===undefined&&(t.taskLists=!1);var o=0,u="header",a="comment",f="atom",l="number",c="variable-2",h="variable-3",p="keyword",d="hr",v="tag",m="link",g="link",y="link",b="string",w="em",E="strong",S=/^([*\-=_])(?:\s*\1){2,}\s*$/,x=/^[*\-+]\s+/,T=/^[0-9]+\.\s+/,N=/^\[(x| )\](?=\s)/,C=/^(?:\={1,}|-{1,})$/,k=/^[^!\[\]*_\\<>` "'(]+/,q=[];return{startState:function(){return{f:M,prevLineHasContent:!1,thisLineHasContent:!1,block:M,htmlState:CodeMirror.startState(r),indentation:0,inline:B,text:H,linkText:!1,linkTitle:!1,em:!1,strong:!1,header:!1,taskList:!1,list:!1,listDepth:0,quote:0}},copyState:function(e){return{f:e.f,prevLineHasContent:e.prevLineHasContent,thisLineHasContent:e.thisLineHasContent,block:e.block,htmlState:CodeMirror.copyState(r,e.htmlState),indentation:e.indentation,localMode:e.localMode,localState:e.localMode?CodeMirror.copyState(e.localMode,e.localState):null,inline:e.inline,text:e.text,linkTitle:e.linkTitle,em:e.em,strong:e.strong,header:e.header,taskList:e.taskList,list:e.list,listDepth:e.listDepth,quote:e.quote,md_inside:e.md_inside}},token:function(e,t){if(e.sol()){if(e.match(/^\s*$/,!0))return t.prevLineHasContent=!1,O(t);t.prevLineHasContent=t.thisLineHasContent,t.thisLineHasContent=!0,t.header=!1,t.taskList=!1,t.code=!1,t.f=t.block;var n=e.match(/^\s*/,!0)[0].replace(/\t/g,"    ").length,r=Math.floor((n-t.indentation)/4)*4;r>4&&(r=4);var i=t.indentation+r;t.indentationDiff=i-t.indentation,t.indentation=i;if(n>0)return null}return t.f(e,t)},blankLine:O,getType:P}},"xml"),CodeMirror.defineMIME("text/x-markdown","markdown"),spud.admin.editor={},function(){var e=spud.admin.editor,t=["autolink","lists","layer","table","tableDropdown","advhr","advimage","advlink","iespell","inlinepopups","media","paste"],n=[["bold","italic","underline","strikethrough","|","justifyleft","justifycenter","justifyright","justifyfull","|","formatselect","cut","copy","paste","pastetext","|","bullist","numlist","outdent","indent","|","tableDropdown","|","link","unlink","anchor","image","code"],[],[],[]],r="@[id|class|style|title|dir<ltr?rtl|lang|xml::lang|onclick|ondblclick|onmousedown|onmouseup|onmouseover|onmousemove|onmouseout|onkeypress|onkeydown|onkeyup],a[rel|rev|charset|hreflang|tabindex|accesskey|type|name|href|target|title|class|onfocus|onblur],strong/b,em/i,strike,u,#p,-ol[type|compact],-ul[type|compact],-li,br,img[longdesc|usemap|src|border|alt=|title|hspace|vspace|width|height|align|hidpi_src],-sub,-sup,-blockquote,-table[border=0|cellspacing|cellpadding|width|frame|rules|height|align|summary|bgcolor|background|bordercolor],-tr[rowspan|width|height|align|valign|bgcolor|background|bordercolor],tbody,thead,tfoot,#td[colspan|rowspan|width|height|align|valign|bgcolor|background|bordercolor|scope],#th[colspan|rowspan|width|height|align|valign|scope],caption,-div,-span,-code,-pre,address,-h1,-h2,-h3,-h4,-h5,-h6,hr[size|noshade],-font[face|size|color],dd,dl,dt,cite,abbr,acronym,del[datetime|cite],ins[datetime|cite],object[classid|width|height|codebase|*],param[name|value|_value],embed[type|width|height|src|*],script[src|type],map[name],area[shape|coords|href|alt|target],bdo,button,col[align|char|charoff|span|valign|width],colgroup[align|char|charoff|span|valign|width],dfn,fieldset,form[action|accept|accept-charset|enctype|method],input[accept|alt|checked|disabled|maxlength|name|readonly|size|src|type|value],kbd,label[for],legend,noscript,optgroup[label|disabled],option[disabled|label|selected|value],q[cite],samp,select[disabled|multiple|name|size],small,textarea[cols|rows|disabled|name|readonly],tt,var,big",i=[],s="p,h1,h2,h3,h4,h5,h6";e.init=function(t){e.monitorFormatters(),t=t||{};var n=t.selector||"textarea.tinymce";$(n).each(function(){var n=$(this),r=n.attr("data-format");switch(r){case"Markdown":e.initCodeMirrorWithOptions(this,"markdown",t||{});break;case"HTML":default:e.initMCEWithOptions(this,t||{})}})},e.monitorFormatters=function(){$("select[data-formatter]").off("onchange"),$("select[data-formatter]").change(e.formatterChanged)},e.formatterChanged=function(){var t=$(this).attr("data-formatter");e.unload("#"+t),$("#"+t).attr("data-format",$(this).val()),e.init({selector:"#"+t})},e.initMCEWithOptions=function(e,o){var u=o.theme||"advanced",a=o.height||400;$(e).tinymce({theme:u,plugins:t.join(","),theme_advanced_toolbar_location:"top",theme_advanced_buttons1:n[0].join(","),theme_advanced_buttons2:n[1].join(","),theme_advanced_buttons3:n[2].join(","),theme_advanced_buttons4:n[3].join(","),theme_advanced_toolbar_align:"left",theme_advanced_blockformats:s,convert_urls:!1,valid_elements:r,media_strict:!1,extended_valid_elements:i.join(","),width:$(e).width(),height:a})};var o=[];e.initCodeMirrorWithOptions=function(e,t,n){var r=CodeMirror.fromTextArea(e,{mode:"markdown",lineNumbers:!0,lineWrapping:!0,theme:"default",extraKeys:{Enter:"newlineAndIndentContinueMarkdownList"}});o.push(r),$(e).attr("code-mirror-id",o.length-1)},e.unload=function(e){var t=e||"textarea.tinymce";$(t).each(function(){var e=$(this);e.attr("code-mirror-id")&&(o[parseInt(e.attr("code-mirror-id"),10)].toTextArea(),o[parseInt(e.attr("code-mirror-id"),10)]=null,e.removeAttr("code-mirror-id")),tinyMCE.execCommand("mceRemoveControl",!1,this.id)})},e.registerPlugin=function(e){$.inArray(t,e)<0&&t.push(e)},e.deregisterPlugin=function(e){var n=0;while(n<t.length){if(t[n]==e){t.splice(1,n);break}n++}},e.appendValidElement=function(e){i.push(e)},e.registerButton=function(e,t){t=t||0,typeof e=="object"?n[t].concat(e):n[t].push(e)}}();var RetinaTag=RetinaTag||{};RetinaTag.init=function(){window.matchMedia("(-webkit-device-pixel-ratio:1)").addListener(RetinaTag.updateImages),document.addEventListener("page:load",RetinaTag.updateImages),document.addEventListener("retina_tag:refresh",RetinaTag.updateImages)},RetinaTag.updateImages=function(){var e=document.getElementsByTagName("img");for(var t=0;t<e.length;t++)e[t].getAttribute("data-lazy-load")||RetinaTag.refreshImage(e[t])},RetinaTag.refreshImage=function(e){var t=e.getAttribute("data-lazy-load"),n=e.src,r=e.getAttribute("hidpi_src"),i=e.getAttribute("lowdpi_src");if(!r)return;t&&e.removeAttribute("data-lazy-load"),window.devicePixelRatio>1&&n!=r?(i||e.setAttribute("lowdpi_src",n),e.src=r):(!window.devicePixelRatio||window.devicePixelRatio<=1)&&(n==r||i&&n!=i)&&(e.src=i)},window.devicePixelRatio!==undefined&&(RetinaTag.init(),$(document).ready(RetinaTag.updateImages));